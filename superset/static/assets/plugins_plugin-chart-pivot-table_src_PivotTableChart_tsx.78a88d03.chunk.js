"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["plugins_plugin-chart-pivot-table_src_PivotTableChart_tsx"],{

/***/ "./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js":
/*!************************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/MinusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/MinusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar MinusSquareOutlined = function MinusSquareOutlined(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_MinusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  }));\n};\n\n/**![minus-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMyOCA1NDRoMzY4YzQuNCAwIDgtMy42IDgtOHYtNDhjMC00LjQtMy42LTgtOC04SDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHoiIC8+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(MinusSquareOutlined);\nif (true) {\n  RefIcon.displayName = 'MinusSquareOutlined';\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RefIcon);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvTWludXNTcXVhcmVPdXRsaW5lZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BhbnQtZGVzaWduL2ljb25zL2VzL2ljb25zL01pbnVzU3F1YXJlT3V0bGluZWQuanM/ODE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbi8vIEdFTkVSQVRFIEJZIC4vc2NyaXB0cy9nZW5lcmF0ZS50c1xuLy8gRE9OIE5PVCBFRElUIElUIE1BTlVBTExZXG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNaW51c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL01pbnVzU3F1YXJlT3V0bGluZWRcIjtcbmltcG9ydCBBbnRkSWNvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9BbnRkSWNvblwiO1xudmFyIE1pbnVzU3F1YXJlT3V0bGluZWQgPSBmdW5jdGlvbiBNaW51c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFudGRJY29uLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZixcbiAgICBpY29uOiBNaW51c1NxdWFyZU91dGxpbmVkU3ZnXG4gIH0pKTtcbn07XG5cbi8qKiFbbWludXMtc3F1YXJlXShkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEFpSUdobGFXZG9kRDBpTlRBaUlHWnBiR3c5SWlOallXTmhZMkVpSUhacFpYZENiM2c5SWpZMElEWTBJRGc1TmlBNE9UWWlJR1p2WTNWellXSnNaVDBpWm1Gc2MyVWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SStQSEJoZEdnZ1pEMGlUVE15T0NBMU5EUm9Nelk0WXpRdU5DQXdJRGd0TXk0MklEZ3RPSFl0TkRoak1DMDBMalF0TXk0MkxUZ3RPQzA0U0RNeU9HTXROQzQwSURBdE9DQXpMall0T0NBNGRqUTRZekFnTkM0MElETXVOaUE0SURnZ09Ib2lJQzgrUEhCaGRHZ2daRDBpVFRnNE1DQXhNVEpJTVRRMFl5MHhOeTQzSURBdE16SWdNVFF1TXkwek1pQXpNblkzTXpaak1DQXhOeTQzSURFMExqTWdNeklnTXpJZ016Sm9Oek0yWXpFM0xqY2dNQ0F6TWkweE5DNHpJRE15TFRNeVZqRTBOR013TFRFM0xqY3RNVFF1TXkwek1pMHpNaTB6TW5wdExUUXdJRGN5T0VneE9EUldNVGcwYURZMU5uWTJOVFo2SWlBdlBqd3ZjM1puUGc9PSkgKi9cbnZhciBSZWZJY29uID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoTWludXNTcXVhcmVPdXRsaW5lZCk7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBSZWZJY29uLmRpc3BsYXlOYW1lID0gJ01pbnVzU3F1YXJlT3V0bGluZWQnO1xufVxuZXhwb3J0IGRlZmF1bHQgUmVmSWNvbjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\n");

/***/ }),

/***/ "./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ \"./node_modules/@babel/runtime/helpers/esm/extends.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons-svg/es/asn/PlusSquareOutlined */ \"./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js\");\n/* harmony import */ var _components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/AntdIcon */ \"./node_modules/@ant-design/icons/es/components/AntdIcon.js\");\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar PlusSquareOutlined = function PlusSquareOutlined(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_AntdIcon__WEBPACK_IMPORTED_MODULE_1__[\"default\"], (0,_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({}, props, {\n    ref: ref,\n    icon: _ant_design_icons_svg_es_asn_PlusSquareOutlined__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  }));\n};\n\n/**![plus-square](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTMyOCA1NDRoMTUydjE1MmMwIDQuNCAzLjYgOCA4IDhoNDhjNC40IDAgOC0zLjYgOC04VjU0NGgxNTJjNC40IDAgOC0zLjYgOC04di00OGMwLTQuNC0zLjYtOC04LThINTQ0VjMyOGMwLTQuNC0zLjYtOC04LThoLTQ4Yy00LjQgMC04IDMuNi04IDh2MTUySDMyOGMtNC40IDAtOCAzLjYtOCA4djQ4YzAgNC40IDMuNiA4IDggOHoiIC8+PHBhdGggZD0iTTg4MCAxMTJIMTQ0Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY3MzZjMCAxNy43IDE0LjMgMzIgMzIgMzJoNzM2YzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE0NGMwLTE3LjctMTQuMy0zMi0zMi0zMnptLTQwIDcyOEgxODRWMTg0aDY1NnY2NTZ6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(PlusSquareOutlined);\nif (true) {\n  RefIcon.displayName = 'PlusSquareOutlined';\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RefIcon);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvQGFudC1kZXNpZ24vaWNvbnMvZXMvaWNvbnMvUGx1c1NxdWFyZU91dGxpbmVkLmpzP2M0NjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG4vLyBHRU5FUkFURSBCWSAuL3NjcmlwdHMvZ2VuZXJhdGUudHNcbi8vIERPTiBOT1QgRURJVCBJVCBNQU5VQUxMWVxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUGx1c1NxdWFyZU91dGxpbmVkU3ZnIGZyb20gXCJAYW50LWRlc2lnbi9pY29ucy1zdmcvZXMvYXNuL1BsdXNTcXVhcmVPdXRsaW5lZFwiO1xuaW1wb3J0IEFudGRJY29uIGZyb20gXCIuLi9jb21wb25lbnRzL0FudGRJY29uXCI7XG52YXIgUGx1c1NxdWFyZU91dGxpbmVkID0gZnVuY3Rpb24gUGx1c1NxdWFyZU91dGxpbmVkKHByb3BzLCByZWYpIHtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEFudGRJY29uLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZixcbiAgICBpY29uOiBQbHVzU3F1YXJlT3V0bGluZWRTdmdcbiAgfSkpO1xufTtcblxuLyoqIVtwbHVzLXNxdWFyZV0oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTlRBaUlHaGxhV2RvZEQwaU5UQWlJR1pwYkd3OUlpTmpZV05oWTJFaUlIWnBaWGRDYjNnOUlqWTBJRFkwSURnNU5pQTRPVFlpSUdadlkzVnpZV0pzWlQwaVptRnNjMlVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUkrUEhCaGRHZ2daRDBpVFRNeU9DQTFORFJvTVRVeWRqRTFNbU13SURRdU5DQXpMallnT0NBNElEaG9ORGhqTkM0MElEQWdPQzB6TGpZZ09DMDRWalUwTkdneE5USmpOQzQwSURBZ09DMHpMallnT0MwNGRpMDBPR013TFRRdU5DMHpMall0T0MwNExUaElOVFEwVmpNeU9HTXdMVFF1TkMwekxqWXRPQzA0TFRob0xUUTRZeTAwTGpRZ01DMDRJRE11TmkwNElEaDJNVFV5U0RNeU9HTXROQzQwSURBdE9DQXpMall0T0NBNGRqUTRZekFnTkM0MElETXVOaUE0SURnZ09Ib2lJQzgrUEhCaGRHZ2daRDBpVFRnNE1DQXhNVEpJTVRRMFl5MHhOeTQzSURBdE16SWdNVFF1TXkwek1pQXpNblkzTXpaak1DQXhOeTQzSURFMExqTWdNeklnTXpJZ016Sm9Oek0yWXpFM0xqY2dNQ0F6TWkweE5DNHpJRE15TFRNeVZqRTBOR013TFRFM0xqY3RNVFF1TXkwek1pMHpNaTB6TW5wdExUUXdJRGN5T0VneE9EUldNVGcwYURZMU5uWTJOVFo2SWlBdlBqd3ZjM1puUGc9PSkgKi9cbnZhciBSZWZJY29uID0gLyojX19QVVJFX18qL1JlYWN0LmZvcndhcmRSZWYoUGx1c1NxdWFyZU91dGxpbmVkKTtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFJlZkljb24uZGlzcGxheU5hbWUgPSAnUGx1c1NxdWFyZU91dGxpbmVkJztcbn1cbmV4cG9ydCBkZWZhdWx0IFJlZkljb247Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx":
/*!******************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx ***!
  \******************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _TableRenderers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TableRenderers */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\nclass PivotTable extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  render() {\n    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer, { ...this.props });\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nPivotTable.propTypes = _TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer.propTypes;\nPivotTable.defaultProps = _TableRenderers__WEBPACK_IMPORTED_MODULE_2__.TableRenderer.defaultProps;const _default =\n\nPivotTable;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(PivotTable, \"PivotTable\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9QaXZvdFRhYmxlLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvUGl2b3RUYWJsZS5qc3g/OWY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUYWJsZVJlbmRlcmVyIH0gZnJvbSAnLi9UYWJsZVJlbmRlcmVycyc7XG5cbmNsYXNzIFBpdm90VGFibGUgZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiA8VGFibGVSZW5kZXJlciB7Li4udGhpcy5wcm9wc30gLz47XG4gIH1cbn1cblxuUGl2b3RUYWJsZS5wcm9wVHlwZXMgPSBUYWJsZVJlbmRlcmVyLnByb3BUeXBlcztcblBpdm90VGFibGUuZGVmYXVsdFByb3BzID0gVGFibGVSZW5kZXJlci5kZWZhdWx0UHJvcHM7XG5cbmV4cG9ydCBkZWZhdWx0IFBpdm90VGFibGU7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js":
/*!*************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js ***!
  \*************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Styles: () => (/* binding */ Styles)\n/* harmony export */ });\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.styled.div`\n  ${({ theme, isDashboardEditMode }) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.css)`\n    table.pvtTable {\n      position: ${isDashboardEditMode ? 'inherit' : 'relative'};\n      width: calc(100% - ${theme.gridUnit}px);\n      font-size: ${theme.typography.sizes.s}px;\n      text-align: left;\n      margin: ${theme.gridUnit}px;\n      border-collapse: separate;\n      font-family: ${theme.typography.families.sansSerif};\n      line-height: 1.4;\n    }\n\n    table thead {\n      position: ${isDashboardEditMode ? 'inherit' : 'sticky'};\n      top: 0;\n    }\n\n    table tbody tr {\n      font-feature-settings: 'tnum' 1;\n    }\n\n    table.pvtTable thead tr th,\n    table.pvtTable tbody tr th {\n      background-color: ${theme.colors.grayscale.light5};\n      border-top: 1px solid ${theme.colors.grayscale.light2};\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      font-size: ${theme.typography.sizes.s}px;\n      padding: ${theme.gridUnit}px;\n      font-weight: ${theme.typography.weights.normal};\n    }\n\n    table.pvtTable tbody tr.pvtRowTotals {\n      position: ${isDashboardEditMode ? 'inherit' : 'sticky'};\n      bottom: 0;\n    }\n\n    table.pvtTable thead tr:last-of-type th,\n    table.pvtTable thead tr:first-of-type th.pvtTotalLabel,\n    table.pvtTable thead tr:nth-last-of-type(2) th.pvtColLabel,\n    table.pvtTable thead th.pvtSubtotalLabel,\n    table.pvtTable tbody tr:last-of-type th,\n    table.pvtTable tbody tr:last-of-type td {\n      border-bottom: 1px solid ${theme.colors.grayscale.light2};\n    }\n\n    table.pvtTable\n      thead\n      tr:last-of-type:not(:only-child)\n      th.pvtAxisLabel\n      ~ th.pvtColLabel,\n    table.pvtTable tbody tr:first-of-type th,\n    table.pvtTable tbody tr:first-of-type td {\n      border-top: none;\n    }\n\n    table.pvtTable tbody tr td:last-of-type,\n    table.pvtTable thead tr th:last-of-type:not(.pvtSubtotalLabel) {\n      border-right: 1px solid ${theme.colors.grayscale.light2};\n    }\n\n    table.pvtTable\n      thead\n      tr:last-of-type:not(:only-child)\n      th.pvtAxisLabel\n      + .pvtTotalLabel {\n      border-right: none;\n    }\n\n    table.pvtTable tr th.active {\n      background-color: ${theme.colors.primary.light3};\n    }\n\n    table.pvtTable .pvtTotalLabel {\n      text-align: right;\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable .pvtSubtotalLabel {\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable tbody tr td {\n      color: ${theme.colors.primary.dark2};\n      padding: ${theme.gridUnit}px;\n      background-color: ${theme.colors.grayscale.light5};\n      border-top: 1px solid ${theme.colors.grayscale.light2};\n      border-left: 1px solid ${theme.colors.grayscale.light2};\n      vertical-align: top;\n      text-align: right;\n    }\n\n    table.pvtTable tbody tr th.pvtRowLabel {\n      vertical-align: baseline;\n    }\n\n    .pvtTotal,\n    .pvtGrandTotal {\n      font-weight: ${theme.typography.weights.bold};\n    }\n\n    table.pvtTable tbody tr td.pvtRowTotal {\n      vertical-align: middle;\n    }\n\n    .toggle-wrapper {\n      white-space: nowrap;\n    }\n\n    .toggle-wrapper > .toggle-val {\n      white-space: normal;\n    }\n\n    .toggle {\n      padding-right: ${theme.gridUnit}px;\n      cursor: pointer;\n    }\n\n    .hoverable:hover {\n      background-color: ${theme.colors.primary.light4};\n      cursor: pointer;\n    }\n  `}\n`;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9TdHlsZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9TdHlsZXMuanM/MDhhYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7IGNzcywgc3R5bGVkIH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuXG5leHBvcnQgY29uc3QgU3R5bGVzID0gc3R5bGVkLmRpdmBcbiAgJHsoeyB0aGVtZSwgaXNEYXNoYm9hcmRFZGl0TW9kZSB9KSA9PiBjc3NgXG4gICAgdGFibGUucHZ0VGFibGUge1xuICAgICAgcG9zaXRpb246ICR7aXNEYXNoYm9hcmRFZGl0TW9kZSA/ICdpbmhlcml0JyA6ICdyZWxhdGl2ZSd9O1xuICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtICR7dGhlbWUuZ3JpZFVuaXR9cHgpO1xuICAgICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMuc31weDtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBtYXJnaW46ICR7dGhlbWUuZ3JpZFVuaXR9cHg7XG4gICAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlO1xuICAgICAgZm9udC1mYW1pbHk6ICR7dGhlbWUudHlwb2dyYXBoeS5mYW1pbGllcy5zYW5zU2VyaWZ9O1xuICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICB9XG5cbiAgICB0YWJsZSB0aGVhZCB7XG4gICAgICBwb3NpdGlvbjogJHtpc0Rhc2hib2FyZEVkaXRNb2RlID8gJ2luaGVyaXQnIDogJ3N0aWNreSd9O1xuICAgICAgdG9wOiAwO1xuICAgIH1cblxuICAgIHRhYmxlIHRib2R5IHRyIHtcbiAgICAgIGZvbnQtZmVhdHVyZS1zZXR0aW5nczogJ3RudW0nIDE7XG4gICAgfVxuXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHIgdGgsXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGgge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0NX07XG4gICAgICBib3JkZXItdG9wOiAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuZ3JheXNjYWxlLmxpZ2h0Mn07XG4gICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xuICAgICAgZm9udC1zaXplOiAke3RoZW1lLnR5cG9ncmFwaHkuc2l6ZXMuc31weDtcbiAgICAgIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXR9cHg7XG4gICAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMubm9ybWFsfTtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ci5wdnRSb3dUb3RhbHMge1xuICAgICAgcG9zaXRpb246ICR7aXNEYXNoYm9hcmRFZGl0TW9kZSA/ICdpbmhlcml0JyA6ICdzdGlja3knfTtcbiAgICAgIGJvdHRvbTogMDtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZSB0aGVhZCB0cjpsYXN0LW9mLXR5cGUgdGgsXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdHI6Zmlyc3Qtb2YtdHlwZSB0aC5wdnRUb3RhbExhYmVsLFxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyOm50aC1sYXN0LW9mLXR5cGUoMikgdGgucHZ0Q29sTGFiZWwsXG4gICAgdGFibGUucHZ0VGFibGUgdGhlYWQgdGgucHZ0U3VidG90YWxMYWJlbCxcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0cjpsYXN0LW9mLXR5cGUgdGgsXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6bGFzdC1vZi10eXBlIHRkIHtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZVxuICAgICAgdGhlYWRcbiAgICAgIHRyOmxhc3Qtb2YtdHlwZTpub3QoOm9ubHktY2hpbGQpXG4gICAgICB0aC5wdnRBeGlzTGFiZWxcbiAgICAgIH4gdGgucHZ0Q29sTGFiZWwsXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHI6Zmlyc3Qtb2YtdHlwZSB0aCxcbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0cjpmaXJzdC1vZi10eXBlIHRkIHtcbiAgICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgfVxuXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGQ6bGFzdC1vZi10eXBlLFxuICAgIHRhYmxlLnB2dFRhYmxlIHRoZWFkIHRyIHRoOmxhc3Qtb2YtdHlwZTpub3QoLnB2dFN1YnRvdGFsTGFiZWwpIHtcbiAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xuICAgIH1cblxuICAgIHRhYmxlLnB2dFRhYmxlXG4gICAgICB0aGVhZFxuICAgICAgdHI6bGFzdC1vZi10eXBlOm5vdCg6b25seS1jaGlsZClcbiAgICAgIHRoLnB2dEF4aXNMYWJlbFxuICAgICAgKyAucHZ0VG90YWxMYWJlbCB7XG4gICAgICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gICAgfVxuXG4gICAgdGFibGUucHZ0VGFibGUgdHIgdGguYWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkubGlnaHQzfTtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZSAucHZ0VG90YWxMYWJlbCB7XG4gICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIGZvbnQtd2VpZ2h0OiAke3RoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZSAucHZ0U3VidG90YWxMYWJlbCB7XG4gICAgICBmb250LXdlaWdodDogJHt0aGVtZS50eXBvZ3JhcGh5LndlaWdodHMuYm9sZH07XG4gICAgfVxuXG4gICAgdGFibGUucHZ0VGFibGUgdGJvZHkgdHIgdGQge1xuICAgICAgY29sb3I6ICR7dGhlbWUuY29sb3JzLnByaW1hcnkuZGFyazJ9O1xuICAgICAgcGFkZGluZzogJHt0aGVtZS5ncmlkVW5pdH1weDtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDV9O1xuICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmdyYXlzY2FsZS5saWdodDJ9O1xuICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7XG4gICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0aC5wdnRSb3dMYWJlbCB7XG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogYmFzZWxpbmU7XG4gICAgfVxuXG4gICAgLnB2dFRvdGFsLFxuICAgIC5wdnRHcmFuZFRvdGFsIHtcbiAgICAgIGZvbnQtd2VpZ2h0OiAke3RoZW1lLnR5cG9ncmFwaHkud2VpZ2h0cy5ib2xkfTtcbiAgICB9XG5cbiAgICB0YWJsZS5wdnRUYWJsZSB0Ym9keSB0ciB0ZC5wdnRSb3dUb3RhbCB7XG4gICAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIH1cblxuICAgIC50b2dnbGUtd3JhcHBlciB7XG4gICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIH1cblxuICAgIC50b2dnbGUtd3JhcHBlciA+IC50b2dnbGUtdmFsIHtcbiAgICAgIHdoaXRlLXNwYWNlOiBub3JtYWw7XG4gICAgfVxuXG4gICAgLnRvZ2dsZSB7XG4gICAgICBwYWRkaW5nLXJpZ2h0OiAke3RoZW1lLmdyaWRVbml0fXB4O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cblxuICAgIC5ob3ZlcmFibGU6aG92ZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHt0aGVtZS5jb2xvcnMucHJpbWFyeS5saWdodDR9O1xuICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbiAgYH1cbmA7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx":
/*!**********************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx ***!
  \**********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableRenderer: () => (/* binding */ TableRenderer)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utilities */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _Styles__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Styles */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/Styles.js\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\n\n\nconst parseLabel = (value) => {\n  if (typeof value === 'string') {\n    if (value === 'metric') return (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('metric');\n    return value;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  return String(value);\n};\n\nfunction displayHeaderCell(\nneedToggle,\nArrowIcon,\nonArrowClick,\nvalue,\nnamesMapping)\n{\n  const name = namesMapping[value] || value;\n  return needToggle ?\n  (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"span\", { className: \"toggle-wrapper\", children: [\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", {\n      role: \"button\",\n      tabIndex: \"0\",\n      className: \"toggle\",\n      onClick: onArrowClick, children:\n\n      ArrowIcon }\n    ),\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"span\", { className: \"toggle-val\", children: parseLabel(name) })] }\n  ) :\n\n  parseLabel(name);\n\n}\n\nclass TableRenderer extends react__WEBPACK_IMPORTED_MODULE_0__.Component {\n  constructor(props) {\n    super(props);\n\n    // We need state to record which entries are collapsed and which aren't.\n    // This is an object with flat-keys indicating if the corresponding rows\n    // should be collapsed.\n    this.state = { collapsedRows: {}, collapsedCols: {} };\n\n    this.clickHeaderHandler = this.clickHeaderHandler.bind(this);\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  getBasePivotSettings() {\n    // One-time extraction of pivot settings that we'll use throughout the render.\n\n    const { props } = this;\n    const colAttrs = props.cols;\n    const rowAttrs = props.rows;\n\n    const tableOptions = {\n      rowTotals: true,\n      colTotals: true,\n      ...props.tableOptions\n    };\n    const rowTotals = tableOptions.rowTotals || colAttrs.length === 0;\n    const colTotals = tableOptions.colTotals || rowAttrs.length === 0;\n\n    const namesMapping = props.namesMapping || {};\n    const subtotalOptions = {\n      arrowCollapsed: '\\u25B2',\n      arrowExpanded: '\\u25BC',\n      ...props.subtotalOptions\n    };\n\n    const colSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: tableOptions.colSubTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.colSubtotalDisplay\n    };\n\n    const rowSubtotalDisplay = {\n      displayOnTop: false,\n      enabled: tableOptions.rowSubTotals,\n      hideOnExpand: false,\n      ...subtotalOptions.rowSubtotalDisplay\n    };\n\n    const pivotData = new _utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData(props, {\n      rowEnabled: rowSubtotalDisplay.enabled,\n      colEnabled: colSubtotalDisplay.enabled,\n      rowPartialOnTop: rowSubtotalDisplay.displayOnTop,\n      colPartialOnTop: colSubtotalDisplay.displayOnTop\n    });\n    const rowKeys = pivotData.getRowKeys();\n    const colKeys = pivotData.getColKeys();\n\n    // Also pre-calculate all the callbacks for cells, etc... This is nice to have to\n    // avoid re-calculations of the call-backs on cell expansions, etc...\n    const cellCallbacks = {};\n    const rowTotalCallbacks = {};\n    const colTotalCallbacks = {};\n    let grandTotalCallback = null;\n    if (tableOptions.clickCallback) {\n      rowKeys.forEach((rowKey) => {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey);\n        if (!(flatRowKey in cellCallbacks)) {\n          cellCallbacks[flatRowKey] = {};\n        }\n        colKeys.forEach((colKey) => {\n          cellCallbacks[flatRowKey][(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)] = this.clickHandler(\n            pivotData,\n            rowKey,\n            colKey\n          );\n        });\n      });\n\n      // Add in totals as well.\n      if (rowTotals) {\n        rowKeys.forEach((rowKey) => {\n          rowTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey)] = this.clickHandler(\n            pivotData,\n            rowKey,\n            []\n          );\n        });\n      }\n      if (colTotals) {\n        colKeys.forEach((colKey) => {\n          colTotalCallbacks[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)] = this.clickHandler(\n            pivotData,\n            [],\n            colKey\n          );\n        });\n      }\n      if (rowTotals && colTotals) {\n        grandTotalCallback = this.clickHandler(pivotData, [], []);\n      }\n    }\n\n    return {\n      pivotData,\n      colAttrs,\n      rowAttrs,\n      colKeys,\n      rowKeys,\n      rowTotals,\n      colTotals,\n      arrowCollapsed: subtotalOptions.arrowCollapsed,\n      arrowExpanded: subtotalOptions.arrowExpanded,\n      colSubtotalDisplay,\n      rowSubtotalDisplay,\n      cellCallbacks,\n      rowTotalCallbacks,\n      colTotalCallbacks,\n      grandTotalCallback,\n      namesMapping\n    };\n  }\n\n  clickHandler(pivotData, rowValues, colValues) {\n    const colAttrs = this.props.cols;\n    const rowAttrs = this.props.rows;\n    const value = pivotData.getAggregator(rowValues, colValues).value();\n    const filters = {};\n    const colLimit = Math.min(colAttrs.length, colValues.length);\n    for (let i = 0; i < colLimit; i += 1) {\n      const attr = colAttrs[i];\n      if (colValues[i] !== null) {\n        filters[attr] = colValues[i];\n      }\n    }\n    const rowLimit = Math.min(rowAttrs.length, rowValues.length);\n    for (let i = 0; i < rowLimit; i += 1) {\n      const attr = rowAttrs[i];\n      if (rowValues[i] !== null) {\n        filters[attr] = rowValues[i];\n      }\n    }\n    return (e) =>\n    this.props.tableOptions.clickCallback(e, value, filters, pivotData);\n  }\n\n  clickHeaderHandler(\n  pivotData,\n  values,\n  attrs,\n  attrIdx,\n  callback,\n  isSubtotal = false,\n  isGrandTotal = false)\n  {\n    const filters = {};\n    for (let i = 0; i <= attrIdx; i += 1) {\n      const attr = attrs[i];\n      filters[attr] = values[i];\n    }\n    return (e) =>\n    callback(\n      e,\n      values[attrIdx],\n      filters,\n      pivotData,\n      isSubtotal,\n      isGrandTotal\n    );\n  }\n\n  collapseAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Collapse an entire attribute.\n      e.stopPropagation();\n      const keyLen = attrIdx + 1;\n      const collapsed = allKeys.filter((k) => k.length === keyLen).map(_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey);\n\n      const updates = {};\n      collapsed.forEach((k) => {\n        updates[k] = true;\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates }\n        }));\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates }\n        }));\n      }\n    };\n  }\n\n  expandAttr(rowOrCol, attrIdx, allKeys) {\n    return (e) => {\n      // Expand an entire attribute. This implicitly implies expanding all of the\n      // parents as well. It's a bit inefficient but ah well...\n      e.stopPropagation();\n      const updates = {};\n      allKeys.forEach((k) => {\n        for (let i = 0; i <= attrIdx; i += 1) {\n          updates[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(k.slice(0, i + 1))] = false;\n        }\n      });\n\n      if (rowOrCol) {\n        this.setState((state) => ({\n          collapsedRows: { ...state.collapsedRows, ...updates }\n        }));\n      } else {\n        this.setState((state) => ({\n          collapsedCols: { ...state.collapsedCols, ...updates }\n        }));\n      }\n    };\n  }\n\n  toggleRowKey(flatRowKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedRows: {\n          ...state.collapsedRows,\n          [flatRowKey]: !state.collapsedRows[flatRowKey]\n        }\n      }));\n    };\n  }\n\n  toggleColKey(flatColKey) {\n    return (e) => {\n      e.stopPropagation();\n      this.setState((state) => ({\n        collapsedCols: {\n          ...state.collapsedCols,\n          [flatColKey]: !state.collapsedCols[flatColKey]\n        }\n      }));\n    };\n  }\n\n  calcAttrSpans(attrArr, numAttrs) {\n    // Given an array of attribute values (i.e. each element is another array with\n    // the value at every level), compute the spans for every attribute value at\n    // every level. The return value is a nested array of the same shape. It has\n    // -1's for repeated values and the span number otherwise.\n\n    const spans = [];\n    // Index of the last new value\n    const li = Array(numAttrs).map(() => 0);\n    let lv = Array(numAttrs).map(() => null);\n    for (let i = 0; i < attrArr.length; i += 1) {\n      // Keep increasing span values as long as the last keys are the same. For\n      // the rest, record spans of 1. Update the indices too.\n      const cv = attrArr[i];\n      const ent = [];\n      let depth = 0;\n      const limit = Math.min(lv.length, cv.length);\n      while (depth < limit && lv[depth] === cv[depth]) {\n        ent.push(-1);\n        spans[li[depth]][depth] += 1;\n        depth += 1;\n      }\n      while (depth < cv.length) {\n        li[depth] = i;\n        ent.push(1);\n        depth += 1;\n      }\n      spans.push(ent);\n      lv = cv;\n    }\n    return spans;\n  }\n\n  renderColHeaderRow(attrName, attrIdx, pivotSettings) {\n    // Render a single row in the column header at the top of the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      colKeys,\n      visibleColKeys,\n      colAttrSpans,\n      rowTotals,\n      arrowExpanded,\n      arrowCollapsed,\n      colSubtotalDisplay,\n      maxColVisible,\n      pivotData,\n      namesMapping\n    } = pivotSettings;\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      dateFormatters\n    } = this.props.tableOptions;\n\n    const spaceCell =\n    attrIdx === 0 && rowAttrs.length !== 0 ?\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n\n      colSpan: rowAttrs.length,\n      rowSpan: colAttrs.length,\n      \"aria-hidden\": \"true\" }, \"padding\"\n    ) :\n    null;\n\n    const needToggle =\n    colSubtotalDisplay.enabled && attrIdx !== colAttrs.length - 1;\n    let arrowClickHandle = null;\n    let subArrow = null;\n    if (needToggle) {\n      arrowClickHandle =\n      attrIdx + 1 < maxColVisible ?\n      this.collapseAttr(false, attrIdx, colKeys) :\n      this.expandAttr(false, attrIdx, colKeys);\n      subArrow = attrIdx + 1 < maxColVisible ? arrowExpanded : arrowCollapsed;\n    }\n    const attrNameCell =\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", { className: \"pvtAxisLabel\", children:\n      displayHeaderCell(\n        needToggle,\n        subArrow,\n        arrowClickHandle,\n        attrName,\n        namesMapping\n      ) }, \"label\"\n    );\n\n\n    const attrValueCells = [];\n    const rowIncrSpan = rowAttrs.length !== 0 ? 1 : 0;\n    // Iterate through columns. Jump over duplicate values.\n    let i = 0;\n    while (i < visibleColKeys.length) {\n      let handleContextMenu;\n      const colKey = visibleColKeys[i];\n      const colSpan = attrIdx < colKey.length ? colAttrSpans[i][attrIdx] : 1;\n      let colLabelClass = 'pvtColLabel';\n      if (attrIdx < colKey.length) {\n        if (!omittedHighlightHeaderGroups.includes(colAttrs[attrIdx])) {\n          if (highlightHeaderCellsOnHover) {\n            colLabelClass += ' hoverable';\n          }\n          handleContextMenu = (e) =>\n          this.props.onContextMenu(e, colKey, undefined, {\n            [attrName]: colKey[attrIdx]\n          });\n        }\n        if (\n        highlightedHeaderCells &&\n        Array.isArray(highlightedHeaderCells[colAttrs[attrIdx]]) &&\n        highlightedHeaderCells[colAttrs[attrIdx]].includes(colKey[attrIdx]))\n        {\n          colLabelClass += ' active';\n        }\n\n        const rowSpan = 1 + (attrIdx === colAttrs.length - 1 ? rowIncrSpan : 0);\n        const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey.slice(0, attrIdx + 1));\n        const onArrowClick = needToggle ? this.toggleColKey(flatColKey) : null;\n\n        const headerCellFormattedValue =\n        dateFormatters &&\n        dateFormatters[attrName] &&\n        typeof dateFormatters[attrName] === 'function' ?\n        dateFormatters[attrName](colKey[attrIdx]) :\n        colKey[attrIdx];\n        attrValueCells.push(\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n            className: colLabelClass,\n\n            colSpan: colSpan,\n            rowSpan: rowSpan,\n            role: \"columnheader button\",\n            onClick: this.clickHeaderHandler(\n              pivotData,\n              colKey,\n              this.props.cols,\n              attrIdx,\n              this.props.tableOptions.clickColumnHeaderCallback\n            ),\n            onContextMenu: handleContextMenu, children:\n\n            displayHeaderCell(\n              needToggle,\n              this.state.collapsedCols[flatColKey] ?\n              arrowCollapsed :\n              arrowExpanded,\n              onArrowClick,\n              headerCellFormattedValue,\n              namesMapping\n            ) }, `colKey-${flatColKey}`\n          )\n        );\n      } else if (attrIdx === colKey.length) {\n        const rowSpan = colAttrs.length - colKey.length + rowIncrSpan;\n        attrValueCells.push(\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n            className: `${colLabelClass} pvtSubtotalLabel`,\n\n            colSpan: colSpan,\n            rowSpan: rowSpan,\n            role: \"columnheader button\",\n            onClick: this.clickHeaderHandler(\n              pivotData,\n              colKey,\n              this.props.cols,\n              attrIdx,\n              this.props.tableOptions.clickColumnHeaderCallback,\n              true\n            ), children:\n\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Subtotal') }, `colKeyBuffer-${(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey)}`\n          )\n        );\n      }\n      // The next colSpan columns will have the same value anyway...\n      i += colSpan;\n    }\n\n    const totalCell =\n    attrIdx === 0 && rowTotals ?\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n\n      className: \"pvtTotalLabel\",\n      rowSpan: colAttrs.length + Math.min(rowAttrs.length, 1),\n      role: \"columnheader button\",\n      onClick: this.clickHeaderHandler(\n        pivotData,\n        [],\n        this.props.cols,\n        attrIdx,\n        this.props.tableOptions.clickColumnHeaderCallback,\n        false,\n        true\n      ), children:\n\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Total (%(aggregatorName)s)', {\n        aggregatorName: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)(this.props.aggregatorName)\n      }) }, \"total\"\n    ) :\n    null;\n\n    const cells = [spaceCell, attrNameCell, ...attrValueCells, totalCell];\n    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { children: cells }, `colAttr-${attrIdx}`);\n  }\n\n  renderRowHeaderRow(pivotSettings) {\n    // Render just the attribute names of the rows (the actual attribute values\n    // will show up in the individual rows).\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowKeys,\n      arrowCollapsed,\n      arrowExpanded,\n      rowSubtotalDisplay,\n      maxRowVisible,\n      pivotData,\n      namesMapping\n    } = pivotSettings;\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"tr\", { children: [\n        rowAttrs.map((r, i) => {\n          const needLabelToggle =\n          rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n          let arrowClickHandle = null;\n          let subArrow = null;\n          if (needLabelToggle) {\n            arrowClickHandle =\n            i + 1 < maxRowVisible ?\n            this.collapseAttr(true, i, rowKeys) :\n            this.expandAttr(true, i, rowKeys);\n            subArrow = i + 1 < maxRowVisible ? arrowExpanded : arrowCollapsed;\n          }\n          return (\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", { className: \"pvtAxisLabel\", children:\n              displayHeaderCell(\n                needLabelToggle,\n                subArrow,\n                arrowClickHandle,\n                r,\n                namesMapping\n              ) }, `rowAttr-${i}`\n            ));\n\n        }),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n          className: \"pvtTotalLabel\",\n\n          role: \"columnheader button\",\n          onClick: this.clickHeaderHandler(\n            pivotData,\n            [],\n            this.props.rows,\n            0,\n            this.props.tableOptions.clickRowHeaderCallback,\n            false,\n            true\n          ), children:\n\n          colAttrs.length === 0 ?\n          (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Total (%(aggregatorName)s)', {\n            aggregatorName: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)(this.props.aggregatorName)\n          }) :\n          null }, \"padding\"\n        )] }, \"rowHdr\"\n      ));\n\n  }\n\n  renderTableRow(rowKey, rowIdx, pivotSettings) {\n    // Render a single row in the pivot table.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      rowAttrSpans,\n      visibleColKeys,\n      pivotData,\n      rowTotals,\n      rowSubtotalDisplay,\n      arrowExpanded,\n      arrowCollapsed,\n      cellCallbacks,\n      rowTotalCallbacks,\n      namesMapping\n    } = pivotSettings;\n\n    const {\n      highlightHeaderCellsOnHover,\n      omittedHighlightHeaderGroups = [],\n      highlightedHeaderCells,\n      cellColorFormatters,\n      dateFormatters\n    } = this.props.tableOptions;\n    const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey);\n\n    const colIncrSpan = colAttrs.length !== 0 ? 1 : 0;\n    const attrValueCells = rowKey.map((r, i) => {\n      let handleContextMenu;\n      let valueCellClassName = 'pvtRowLabel';\n      if (!omittedHighlightHeaderGroups.includes(rowAttrs[i])) {\n        if (highlightHeaderCellsOnHover) {\n          valueCellClassName += ' hoverable';\n        }\n        handleContextMenu = (e) =>\n        this.props.onContextMenu(e, undefined, rowKey, {\n          [rowAttrs[i]]: r\n        });\n      }\n      if (\n      highlightedHeaderCells &&\n      Array.isArray(highlightedHeaderCells[rowAttrs[i]]) &&\n      highlightedHeaderCells[rowAttrs[i]].includes(r))\n      {\n        valueCellClassName += ' active';\n      }\n      const rowSpan = rowAttrSpans[rowIdx][i];\n      if (rowSpan > 0) {\n        const flatRowKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(rowKey.slice(0, i + 1));\n        const colSpan = 1 + (i === rowAttrs.length - 1 ? colIncrSpan : 0);\n        const needRowToggle =\n        rowSubtotalDisplay.enabled && i !== rowAttrs.length - 1;\n        const onArrowClick = needRowToggle ?\n        this.toggleRowKey(flatRowKey) :\n        null;\n\n        const headerCellFormattedValue =\n        dateFormatters && dateFormatters[rowAttrs[i]] ?\n        dateFormatters[rowAttrs[i]](r) :\n        r;\n        return (\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n\n            className: valueCellClassName,\n            rowSpan: rowSpan,\n            colSpan: colSpan,\n            role: \"columnheader button\",\n            onClick: this.clickHeaderHandler(\n              pivotData,\n              rowKey,\n              this.props.rows,\n              i,\n              this.props.tableOptions.clickRowHeaderCallback\n            ),\n            onContextMenu: handleContextMenu, children:\n\n            displayHeaderCell(\n              needRowToggle,\n              this.state.collapsedRows[flatRowKey] ?\n              arrowCollapsed :\n              arrowExpanded,\n              onArrowClick,\n              headerCellFormattedValue,\n              namesMapping\n            ) }, `rowKeyLabel-${i}`\n          ));\n\n      }\n      return null;\n    });\n\n    const attrValuePaddingCell =\n    rowKey.length < rowAttrs.length ?\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n      className: \"pvtRowLabel pvtSubtotalLabel\",\n\n      colSpan: rowAttrs.length - rowKey.length + colIncrSpan,\n      rowSpan: 1,\n      role: \"columnheader button\",\n      onClick: this.clickHeaderHandler(\n        pivotData,\n        rowKey,\n        this.props.rows,\n        rowKey.length,\n        this.props.tableOptions.clickRowHeaderCallback,\n        true\n      ), children:\n\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Subtotal') }, \"rowKeyBuffer\"\n    ) :\n    null;\n\n    const rowClickHandlers = cellCallbacks[flatRowKey] || {};\n    const valueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey);\n      const agg = pivotData.getAggregator(rowKey, colKey);\n      const aggValue = agg.value();\n\n      const keys = [...rowKey, ...colKey];\n      let backgroundColor;\n      if (cellColorFormatters) {\n        Object.values(cellColorFormatters).forEach((cellColorFormatter) => {\n          if (Array.isArray(cellColorFormatter)) {\n            keys.forEach((key) => {\n              if (backgroundColor) {\n                return;\n              }\n              cellColorFormatter.\n              filter((formatter) => formatter.column === key).\n              forEach((formatter) => {\n                const formatterResult = formatter.getColorFromValue(aggValue);\n                if (formatterResult) {\n                  backgroundColor = formatterResult;\n                }\n              });\n            });\n          }\n        });\n      }\n\n      const style = agg.isSubtotal ?\n      { fontWeight: 'bold' } :\n      { backgroundColor };\n\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtVal\",\n\n          onClick: rowClickHandlers[flatColKey],\n          onContextMenu: (e) => this.props.onContextMenu(e, colKey, rowKey),\n          style: style, children:\n\n          agg.format(aggValue) }, `pvtVal-${flatColKey}`\n        ));\n\n    });\n\n    let totalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator(rowKey, []);\n      const aggValue = agg.value();\n      totalCell =\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n        role: \"gridcell\",\n\n        className: \"pvtTotal\",\n        onClick: rowTotalCallbacks[flatRowKey],\n        onContextMenu: (e) => this.props.onContextMenu(e, undefined, rowKey), children:\n\n        agg.format(aggValue) }, \"total\"\n      );\n\n    }\n\n    const rowCells = [\n    ...attrValueCells,\n    attrValuePaddingCell,\n    ...valueCells,\n    totalCell];\n\n\n    return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { children: rowCells }, `keyRow-${flatRowKey}`);\n  }\n\n  renderTotalsRow(pivotSettings) {\n    // Render the final totals rows that has the totals for all the columns.\n\n    const {\n      rowAttrs,\n      colAttrs,\n      visibleColKeys,\n      rowTotals,\n      pivotData,\n      colTotalCallbacks,\n      grandTotalCallback\n    } = pivotSettings;\n\n    const totalLabelCell =\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"th\", {\n\n      className: \"pvtTotalLabel pvtRowTotalLabel\",\n      colSpan: rowAttrs.length + Math.min(colAttrs.length, 1),\n      role: \"columnheader button\",\n      onClick: this.clickHeaderHandler(\n        pivotData,\n        [],\n        this.props.rows,\n        0,\n        this.props.tableOptions.clickRowHeaderCallback,\n        false,\n        true\n      ), children:\n\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Total (%(aggregatorName)s)', {\n        aggregatorName: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)(this.props.aggregatorName)\n      }) }, \"label\"\n    );\n\n\n    const totalValueCells = visibleColKeys.map((colKey) => {\n      const flatColKey = (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(colKey);\n      const agg = pivotData.getAggregator([], colKey);\n      const aggValue = agg.value();\n\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n          role: \"gridcell\",\n          className: \"pvtTotal pvtRowTotal\",\n\n          onClick: colTotalCallbacks[flatColKey],\n          onContextMenu: (e) => this.props.onContextMenu(e, colKey, undefined),\n          style: { padding: '5px' }, children:\n\n          agg.format(aggValue) }, `total-${flatColKey}`\n        ));\n\n    });\n\n    let grandTotalCell = null;\n    if (rowTotals) {\n      const agg = pivotData.getAggregator([], []);\n      const aggValue = agg.value();\n      grandTotalCell =\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"td\", {\n        role: \"gridcell\",\n\n        className: \"pvtGrandTotal pvtRowTotal\",\n        onClick: grandTotalCallback,\n        onContextMenu: (e) => this.props.onContextMenu(e, undefined, undefined), children:\n\n        agg.format(aggValue) }, \"total\"\n      );\n\n    }\n\n    const totalCells = [totalLabelCell, ...totalValueCells, grandTotalCell];\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(\"tr\", { className: \"pvtRowTotals\", children:\n        totalCells }, \"total\"\n      ));\n\n  }\n\n  visibleKeys(keys, collapsed, numAttrs, subtotalDisplay) {\n    return keys.filter(\n      (key) =>\n      // Is the key hidden by one of its parents?\n      !key.some((k, j) => collapsed[(0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(key.slice(0, j))]) && (\n      // Leaf key.\n      key.length === numAttrs ||\n      // Children hidden. Must show total.\n      (0,_utilities__WEBPACK_IMPORTED_MODULE_3__.flatKey)(key) in collapsed ||\n      // Don't hide totals.\n      !subtotalDisplay.hideOnExpand)\n    );\n  }\n\n  isDashboardEditMode() {\n    return document.contains(document.querySelector('.dashboard--editing'));\n  }\n\n  render() {\n    if (this.cachedProps !== this.props) {\n      this.cachedProps = this.props;\n      this.cachedBasePivotSettings = this.getBasePivotSettings();\n    }\n    const {\n      colAttrs,\n      rowAttrs,\n      rowKeys,\n      colKeys,\n      colTotals,\n      rowSubtotalDisplay,\n      colSubtotalDisplay\n    } = this.cachedBasePivotSettings;\n\n    // Need to account for exclusions to compute the effective row\n    // and column keys.\n    const visibleRowKeys = this.visibleKeys(\n      rowKeys,\n      this.state.collapsedRows,\n      rowAttrs.length,\n      rowSubtotalDisplay\n    );\n    const visibleColKeys = this.visibleKeys(\n      colKeys,\n      this.state.collapsedCols,\n      colAttrs.length,\n      colSubtotalDisplay\n    );\n\n    const pivotSettings = {\n      visibleRowKeys,\n      maxRowVisible: Math.max(...visibleRowKeys.map((k) => k.length)),\n      visibleColKeys,\n      maxColVisible: Math.max(...visibleColKeys.map((k) => k.length)),\n      rowAttrSpans: this.calcAttrSpans(visibleRowKeys, rowAttrs.length),\n      colAttrSpans: this.calcAttrSpans(visibleColKeys, colAttrs.length),\n      ...this.cachedBasePivotSettings\n    };\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Styles__WEBPACK_IMPORTED_MODULE_4__.Styles, { isDashboardEditMode: this.isDashboardEditMode(), children:\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"table\", { className: \"pvtTable\", role: \"grid\", children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"thead\", { children: [\n            colAttrs.map((c, j) =>\n            this.renderColHeaderRow(c, j, pivotSettings)\n            ),\n            rowAttrs.length !== 0 && this.renderRowHeaderRow(pivotSettings)] }\n          ),\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(\"tbody\", { children: [\n            visibleRowKeys.map((r, i) =>\n            this.renderTableRow(r, i, pivotSettings)\n            ),\n            colTotals && this.renderTotalsRow(pivotSettings)] }\n          )] }\n        ) }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nTableRenderer.propTypes = {\n  ..._utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.propTypes,\n  tableOptions: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().object),\n  onContextMenu: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().func)\n};\nTableRenderer.defaultProps = { ..._utilities__WEBPACK_IMPORTED_MODULE_3__.PivotData.defaultProps, tableOptions: {} };;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(parseLabel, \"parseLabel\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");reactHotLoader.register(displayHeaderCell, \"displayHeaderCell\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");reactHotLoader.register(TableRenderer, \"TableRenderer\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS9UYWJsZVJlbmRlcmVycy5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL3JlYWN0LXBpdm90dGFibGUvVGFibGVSZW5kZXJlcnMuanN4PzQ3NmMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IFBpdm90RGF0YSwgZmxhdEtleSB9IGZyb20gJy4vdXRpbGl0aWVzJztcbmltcG9ydCB7IFN0eWxlcyB9IGZyb20gJy4vU3R5bGVzJztcblxuY29uc3QgcGFyc2VMYWJlbCA9IHZhbHVlID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodmFsdWUgPT09ICdtZXRyaWMnKSByZXR1cm4gdCgnbWV0cmljJyk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiBTdHJpbmcodmFsdWUpO1xufTtcblxuZnVuY3Rpb24gZGlzcGxheUhlYWRlckNlbGwoXG4gIG5lZWRUb2dnbGUsXG4gIEFycm93SWNvbixcbiAgb25BcnJvd0NsaWNrLFxuICB2YWx1ZSxcbiAgbmFtZXNNYXBwaW5nLFxuKSB7XG4gIGNvbnN0IG5hbWUgPSBuYW1lc01hcHBpbmdbdmFsdWVdIHx8IHZhbHVlO1xuICByZXR1cm4gbmVlZFRvZ2dsZSA/IChcbiAgICA8c3BhbiBjbGFzc05hbWU9XCJ0b2dnbGUtd3JhcHBlclwiPlxuICAgICAgPHNwYW5cbiAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgIHRhYkluZGV4PVwiMFwiXG4gICAgICAgIGNsYXNzTmFtZT1cInRvZ2dsZVwiXG4gICAgICAgIG9uQ2xpY2s9e29uQXJyb3dDbGlja31cbiAgICAgID5cbiAgICAgICAge0Fycm93SWNvbn1cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRvZ2dsZS12YWxcIj57cGFyc2VMYWJlbChuYW1lKX08L3NwYW4+XG4gICAgPC9zcGFuPlxuICApIDogKFxuICAgIHBhcnNlTGFiZWwobmFtZSlcbiAgKTtcbn1cblxuZXhwb3J0IGNsYXNzIFRhYmxlUmVuZGVyZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIC8vIFdlIG5lZWQgc3RhdGUgdG8gcmVjb3JkIHdoaWNoIGVudHJpZXMgYXJlIGNvbGxhcHNlZCBhbmQgd2hpY2ggYXJlbid0LlxuICAgIC8vIFRoaXMgaXMgYW4gb2JqZWN0IHdpdGggZmxhdC1rZXlzIGluZGljYXRpbmcgaWYgdGhlIGNvcnJlc3BvbmRpbmcgcm93c1xuICAgIC8vIHNob3VsZCBiZSBjb2xsYXBzZWQuXG4gICAgdGhpcy5zdGF0ZSA9IHsgY29sbGFwc2VkUm93czoge30sIGNvbGxhcHNlZENvbHM6IHt9IH07XG5cbiAgICB0aGlzLmNsaWNrSGVhZGVySGFuZGxlciA9IHRoaXMuY2xpY2tIZWFkZXJIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jbGlja0hhbmRsZXIgPSB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMpO1xuICB9XG5cbiAgZ2V0QmFzZVBpdm90U2V0dGluZ3MoKSB7XG4gICAgLy8gT25lLXRpbWUgZXh0cmFjdGlvbiBvZiBwaXZvdCBzZXR0aW5ncyB0aGF0IHdlJ2xsIHVzZSB0aHJvdWdob3V0IHRoZSByZW5kZXIuXG5cbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xuICAgIGNvbnN0IGNvbEF0dHJzID0gcHJvcHMuY29scztcbiAgICBjb25zdCByb3dBdHRycyA9IHByb3BzLnJvd3M7XG5cbiAgICBjb25zdCB0YWJsZU9wdGlvbnMgPSB7XG4gICAgICByb3dUb3RhbHM6IHRydWUsXG4gICAgICBjb2xUb3RhbHM6IHRydWUsXG4gICAgICAuLi5wcm9wcy50YWJsZU9wdGlvbnMsXG4gICAgfTtcbiAgICBjb25zdCByb3dUb3RhbHMgPSB0YWJsZU9wdGlvbnMucm93VG90YWxzIHx8IGNvbEF0dHJzLmxlbmd0aCA9PT0gMDtcbiAgICBjb25zdCBjb2xUb3RhbHMgPSB0YWJsZU9wdGlvbnMuY29sVG90YWxzIHx8IHJvd0F0dHJzLmxlbmd0aCA9PT0gMDtcblxuICAgIGNvbnN0IG5hbWVzTWFwcGluZyA9IHByb3BzLm5hbWVzTWFwcGluZyB8fCB7fTtcbiAgICBjb25zdCBzdWJ0b3RhbE9wdGlvbnMgPSB7XG4gICAgICBhcnJvd0NvbGxhcHNlZDogJ1xcdTI1QjInLFxuICAgICAgYXJyb3dFeHBhbmRlZDogJ1xcdTI1QkMnLFxuICAgICAgLi4ucHJvcHMuc3VidG90YWxPcHRpb25zLFxuICAgIH07XG5cbiAgICBjb25zdCBjb2xTdWJ0b3RhbERpc3BsYXkgPSB7XG4gICAgICBkaXNwbGF5T25Ub3A6IGZhbHNlLFxuICAgICAgZW5hYmxlZDogdGFibGVPcHRpb25zLmNvbFN1YlRvdGFscyxcbiAgICAgIGhpZGVPbkV4cGFuZDogZmFsc2UsXG4gICAgICAuLi5zdWJ0b3RhbE9wdGlvbnMuY29sU3VidG90YWxEaXNwbGF5LFxuICAgIH07XG5cbiAgICBjb25zdCByb3dTdWJ0b3RhbERpc3BsYXkgPSB7XG4gICAgICBkaXNwbGF5T25Ub3A6IGZhbHNlLFxuICAgICAgZW5hYmxlZDogdGFibGVPcHRpb25zLnJvd1N1YlRvdGFscyxcbiAgICAgIGhpZGVPbkV4cGFuZDogZmFsc2UsXG4gICAgICAuLi5zdWJ0b3RhbE9wdGlvbnMucm93U3VidG90YWxEaXNwbGF5LFxuICAgIH07XG5cbiAgICBjb25zdCBwaXZvdERhdGEgPSBuZXcgUGl2b3REYXRhKHByb3BzLCB7XG4gICAgICByb3dFbmFibGVkOiByb3dTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCxcbiAgICAgIGNvbEVuYWJsZWQ6IGNvbFN1YnRvdGFsRGlzcGxheS5lbmFibGVkLFxuICAgICAgcm93UGFydGlhbE9uVG9wOiByb3dTdWJ0b3RhbERpc3BsYXkuZGlzcGxheU9uVG9wLFxuICAgICAgY29sUGFydGlhbE9uVG9wOiBjb2xTdWJ0b3RhbERpc3BsYXkuZGlzcGxheU9uVG9wLFxuICAgIH0pO1xuICAgIGNvbnN0IHJvd0tleXMgPSBwaXZvdERhdGEuZ2V0Um93S2V5cygpO1xuICAgIGNvbnN0IGNvbEtleXMgPSBwaXZvdERhdGEuZ2V0Q29sS2V5cygpO1xuXG4gICAgLy8gQWxzbyBwcmUtY2FsY3VsYXRlIGFsbCB0aGUgY2FsbGJhY2tzIGZvciBjZWxscywgZXRjLi4uIFRoaXMgaXMgbmljZSB0byBoYXZlIHRvXG4gICAgLy8gYXZvaWQgcmUtY2FsY3VsYXRpb25zIG9mIHRoZSBjYWxsLWJhY2tzIG9uIGNlbGwgZXhwYW5zaW9ucywgZXRjLi4uXG4gICAgY29uc3QgY2VsbENhbGxiYWNrcyA9IHt9O1xuICAgIGNvbnN0IHJvd1RvdGFsQ2FsbGJhY2tzID0ge307XG4gICAgY29uc3QgY29sVG90YWxDYWxsYmFja3MgPSB7fTtcbiAgICBsZXQgZ3JhbmRUb3RhbENhbGxiYWNrID0gbnVsbDtcbiAgICBpZiAodGFibGVPcHRpb25zLmNsaWNrQ2FsbGJhY2spIHtcbiAgICAgIHJvd0tleXMuZm9yRWFjaChyb3dLZXkgPT4ge1xuICAgICAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xuICAgICAgICBpZiAoIShmbGF0Um93S2V5IGluIGNlbGxDYWxsYmFja3MpKSB7XG4gICAgICAgICAgY2VsbENhbGxiYWNrc1tmbGF0Um93S2V5XSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGNvbEtleXMuZm9yRWFjaChjb2xLZXkgPT4ge1xuICAgICAgICAgIGNlbGxDYWxsYmFja3NbZmxhdFJvd0tleV1bZmxhdEtleShjb2xLZXkpXSA9IHRoaXMuY2xpY2tIYW5kbGVyKFxuICAgICAgICAgICAgcGl2b3REYXRhLFxuICAgICAgICAgICAgcm93S2V5LFxuICAgICAgICAgICAgY29sS2V5LFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBpbiB0b3RhbHMgYXMgd2VsbC5cbiAgICAgIGlmIChyb3dUb3RhbHMpIHtcbiAgICAgICAgcm93S2V5cy5mb3JFYWNoKHJvd0tleSA9PiB7XG4gICAgICAgICAgcm93VG90YWxDYWxsYmFja3NbZmxhdEtleShyb3dLZXkpXSA9IHRoaXMuY2xpY2tIYW5kbGVyKFxuICAgICAgICAgICAgcGl2b3REYXRhLFxuICAgICAgICAgICAgcm93S2V5LFxuICAgICAgICAgICAgW10sXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoY29sVG90YWxzKSB7XG4gICAgICAgIGNvbEtleXMuZm9yRWFjaChjb2xLZXkgPT4ge1xuICAgICAgICAgIGNvbFRvdGFsQ2FsbGJhY2tzW2ZsYXRLZXkoY29sS2V5KV0gPSB0aGlzLmNsaWNrSGFuZGxlcihcbiAgICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgY29sS2V5LFxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHJvd1RvdGFscyAmJiBjb2xUb3RhbHMpIHtcbiAgICAgICAgZ3JhbmRUb3RhbENhbGxiYWNrID0gdGhpcy5jbGlja0hhbmRsZXIocGl2b3REYXRhLCBbXSwgW10pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBwaXZvdERhdGEsXG4gICAgICBjb2xBdHRycyxcbiAgICAgIHJvd0F0dHJzLFxuICAgICAgY29sS2V5cyxcbiAgICAgIHJvd0tleXMsXG4gICAgICByb3dUb3RhbHMsXG4gICAgICBjb2xUb3RhbHMsXG4gICAgICBhcnJvd0NvbGxhcHNlZDogc3VidG90YWxPcHRpb25zLmFycm93Q29sbGFwc2VkLFxuICAgICAgYXJyb3dFeHBhbmRlZDogc3VidG90YWxPcHRpb25zLmFycm93RXhwYW5kZWQsXG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXksXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXG4gICAgICBjZWxsQ2FsbGJhY2tzLFxuICAgICAgcm93VG90YWxDYWxsYmFja3MsXG4gICAgICBjb2xUb3RhbENhbGxiYWNrcyxcbiAgICAgIGdyYW5kVG90YWxDYWxsYmFjayxcbiAgICAgIG5hbWVzTWFwcGluZyxcbiAgICB9O1xuICB9XG5cbiAgY2xpY2tIYW5kbGVyKHBpdm90RGF0YSwgcm93VmFsdWVzLCBjb2xWYWx1ZXMpIHtcbiAgICBjb25zdCBjb2xBdHRycyA9IHRoaXMucHJvcHMuY29scztcbiAgICBjb25zdCByb3dBdHRycyA9IHRoaXMucHJvcHMucm93cztcbiAgICBjb25zdCB2YWx1ZSA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd1ZhbHVlcywgY29sVmFsdWVzKS52YWx1ZSgpO1xuICAgIGNvbnN0IGZpbHRlcnMgPSB7fTtcbiAgICBjb25zdCBjb2xMaW1pdCA9IE1hdGgubWluKGNvbEF0dHJzLmxlbmd0aCwgY29sVmFsdWVzLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xMaW1pdDsgaSArPSAxKSB7XG4gICAgICBjb25zdCBhdHRyID0gY29sQXR0cnNbaV07XG4gICAgICBpZiAoY29sVmFsdWVzW2ldICE9PSBudWxsKSB7XG4gICAgICAgIGZpbHRlcnNbYXR0cl0gPSBjb2xWYWx1ZXNbaV07XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJvd0xpbWl0ID0gTWF0aC5taW4ocm93QXR0cnMubGVuZ3RoLCByb3dWYWx1ZXMubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd0xpbWl0OyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IGF0dHIgPSByb3dBdHRyc1tpXTtcbiAgICAgIGlmIChyb3dWYWx1ZXNbaV0gIT09IG51bGwpIHtcbiAgICAgICAgZmlsdGVyc1thdHRyXSA9IHJvd1ZhbHVlc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUgPT5cbiAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ2FsbGJhY2soZSwgdmFsdWUsIGZpbHRlcnMsIHBpdm90RGF0YSk7XG4gIH1cblxuICBjbGlja0hlYWRlckhhbmRsZXIoXG4gICAgcGl2b3REYXRhLFxuICAgIHZhbHVlcyxcbiAgICBhdHRycyxcbiAgICBhdHRySWR4LFxuICAgIGNhbGxiYWNrLFxuICAgIGlzU3VidG90YWwgPSBmYWxzZSxcbiAgICBpc0dyYW5kVG90YWwgPSBmYWxzZSxcbiAgKSB7XG4gICAgY29uc3QgZmlsdGVycyA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGF0dHJJZHg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgYXR0ciA9IGF0dHJzW2ldO1xuICAgICAgZmlsdGVyc1thdHRyXSA9IHZhbHVlc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGUgPT5cbiAgICAgIGNhbGxiYWNrKFxuICAgICAgICBlLFxuICAgICAgICB2YWx1ZXNbYXR0cklkeF0sXG4gICAgICAgIGZpbHRlcnMsXG4gICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgaXNTdWJ0b3RhbCxcbiAgICAgICAgaXNHcmFuZFRvdGFsLFxuICAgICAgKTtcbiAgfVxuXG4gIGNvbGxhcHNlQXR0cihyb3dPckNvbCwgYXR0cklkeCwgYWxsS2V5cykge1xuICAgIHJldHVybiBlID0+IHtcbiAgICAgIC8vIENvbGxhcHNlIGFuIGVudGlyZSBhdHRyaWJ1dGUuXG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3Qga2V5TGVuID0gYXR0cklkeCArIDE7XG4gICAgICBjb25zdCBjb2xsYXBzZWQgPSBhbGxLZXlzLmZpbHRlcihrID0+IGsubGVuZ3RoID09PSBrZXlMZW4pLm1hcChmbGF0S2V5KTtcblxuICAgICAgY29uc3QgdXBkYXRlcyA9IHt9O1xuICAgICAgY29sbGFwc2VkLmZvckVhY2goayA9PiB7XG4gICAgICAgIHVwZGF0ZXNba10gPSB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyb3dPckNvbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICAgICAgY29sbGFwc2VkUm93czogeyAuLi5zdGF0ZS5jb2xsYXBzZWRSb3dzLCAuLi51cGRhdGVzIH0sXG4gICAgICAgIH0pKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUgPT4gKHtcbiAgICAgICAgICBjb2xsYXBzZWRDb2xzOiB7IC4uLnN0YXRlLmNvbGxhcHNlZENvbHMsIC4uLnVwZGF0ZXMgfSxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBleHBhbmRBdHRyKHJvd09yQ29sLCBhdHRySWR4LCBhbGxLZXlzKSB7XG4gICAgcmV0dXJuIGUgPT4ge1xuICAgICAgLy8gRXhwYW5kIGFuIGVudGlyZSBhdHRyaWJ1dGUuIFRoaXMgaW1wbGljaXRseSBpbXBsaWVzIGV4cGFuZGluZyBhbGwgb2YgdGhlXG4gICAgICAvLyBwYXJlbnRzIGFzIHdlbGwuIEl0J3MgYSBiaXQgaW5lZmZpY2llbnQgYnV0IGFoIHdlbGwuLi5cbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCB1cGRhdGVzID0ge307XG4gICAgICBhbGxLZXlzLmZvckVhY2goayA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGF0dHJJZHg7IGkgKz0gMSkge1xuICAgICAgICAgIHVwZGF0ZXNbZmxhdEtleShrLnNsaWNlKDAsIGkgKyAxKSldID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAocm93T3JDb2wpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICAgIGNvbGxhcHNlZFJvd3M6IHsgLi4uc3RhdGUuY29sbGFwc2VkUm93cywgLi4udXBkYXRlcyB9LFxuICAgICAgICB9KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICAgICAgY29sbGFwc2VkQ29sczogeyAuLi5zdGF0ZS5jb2xsYXBzZWRDb2xzLCAuLi51cGRhdGVzIH0sXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgdG9nZ2xlUm93S2V5KGZsYXRSb3dLZXkpIHtcbiAgICByZXR1cm4gZSA9PiB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgICBjb2xsYXBzZWRSb3dzOiB7XG4gICAgICAgICAgLi4uc3RhdGUuY29sbGFwc2VkUm93cyxcbiAgICAgICAgICBbZmxhdFJvd0tleV06ICFzdGF0ZS5jb2xsYXBzZWRSb3dzW2ZsYXRSb3dLZXldLFxuICAgICAgICB9LFxuICAgICAgfSkpO1xuICAgIH07XG4gIH1cblxuICB0b2dnbGVDb2xLZXkoZmxhdENvbEtleSkge1xuICAgIHJldHVybiBlID0+IHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICAgIGNvbGxhcHNlZENvbHM6IHtcbiAgICAgICAgICAuLi5zdGF0ZS5jb2xsYXBzZWRDb2xzLFxuICAgICAgICAgIFtmbGF0Q29sS2V5XTogIXN0YXRlLmNvbGxhcHNlZENvbHNbZmxhdENvbEtleV0sXG4gICAgICAgIH0sXG4gICAgICB9KSk7XG4gICAgfTtcbiAgfVxuXG4gIGNhbGNBdHRyU3BhbnMoYXR0ckFyciwgbnVtQXR0cnMpIHtcbiAgICAvLyBHaXZlbiBhbiBhcnJheSBvZiBhdHRyaWJ1dGUgdmFsdWVzIChpLmUuIGVhY2ggZWxlbWVudCBpcyBhbm90aGVyIGFycmF5IHdpdGhcbiAgICAvLyB0aGUgdmFsdWUgYXQgZXZlcnkgbGV2ZWwpLCBjb21wdXRlIHRoZSBzcGFucyBmb3IgZXZlcnkgYXR0cmlidXRlIHZhbHVlIGF0XG4gICAgLy8gZXZlcnkgbGV2ZWwuIFRoZSByZXR1cm4gdmFsdWUgaXMgYSBuZXN0ZWQgYXJyYXkgb2YgdGhlIHNhbWUgc2hhcGUuIEl0IGhhc1xuICAgIC8vIC0xJ3MgZm9yIHJlcGVhdGVkIHZhbHVlcyBhbmQgdGhlIHNwYW4gbnVtYmVyIG90aGVyd2lzZS5cblxuICAgIGNvbnN0IHNwYW5zID0gW107XG4gICAgLy8gSW5kZXggb2YgdGhlIGxhc3QgbmV3IHZhbHVlXG4gICAgY29uc3QgbGkgPSBBcnJheShudW1BdHRycykubWFwKCgpID0+IDApO1xuICAgIGxldCBsdiA9IEFycmF5KG51bUF0dHJzKS5tYXAoKCkgPT4gbnVsbCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyQXJyLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAvLyBLZWVwIGluY3JlYXNpbmcgc3BhbiB2YWx1ZXMgYXMgbG9uZyBhcyB0aGUgbGFzdCBrZXlzIGFyZSB0aGUgc2FtZS4gRm9yXG4gICAgICAvLyB0aGUgcmVzdCwgcmVjb3JkIHNwYW5zIG9mIDEuIFVwZGF0ZSB0aGUgaW5kaWNlcyB0b28uXG4gICAgICBjb25zdCBjdiA9IGF0dHJBcnJbaV07XG4gICAgICBjb25zdCBlbnQgPSBbXTtcbiAgICAgIGxldCBkZXB0aCA9IDA7XG4gICAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKGx2Lmxlbmd0aCwgY3YubGVuZ3RoKTtcbiAgICAgIHdoaWxlIChkZXB0aCA8IGxpbWl0ICYmIGx2W2RlcHRoXSA9PT0gY3ZbZGVwdGhdKSB7XG4gICAgICAgIGVudC5wdXNoKC0xKTtcbiAgICAgICAgc3BhbnNbbGlbZGVwdGhdXVtkZXB0aF0gKz0gMTtcbiAgICAgICAgZGVwdGggKz0gMTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChkZXB0aCA8IGN2Lmxlbmd0aCkge1xuICAgICAgICBsaVtkZXB0aF0gPSBpO1xuICAgICAgICBlbnQucHVzaCgxKTtcbiAgICAgICAgZGVwdGggKz0gMTtcbiAgICAgIH1cbiAgICAgIHNwYW5zLnB1c2goZW50KTtcbiAgICAgIGx2ID0gY3Y7XG4gICAgfVxuICAgIHJldHVybiBzcGFucztcbiAgfVxuXG4gIHJlbmRlckNvbEhlYWRlclJvdyhhdHRyTmFtZSwgYXR0cklkeCwgcGl2b3RTZXR0aW5ncykge1xuICAgIC8vIFJlbmRlciBhIHNpbmdsZSByb3cgaW4gdGhlIGNvbHVtbiBoZWFkZXIgYXQgdGhlIHRvcCBvZiB0aGUgcGl2b3QgdGFibGUuXG5cbiAgICBjb25zdCB7XG4gICAgICByb3dBdHRycyxcbiAgICAgIGNvbEF0dHJzLFxuICAgICAgY29sS2V5cyxcbiAgICAgIHZpc2libGVDb2xLZXlzLFxuICAgICAgY29sQXR0clNwYW5zLFxuICAgICAgcm93VG90YWxzLFxuICAgICAgYXJyb3dFeHBhbmRlZCxcbiAgICAgIGFycm93Q29sbGFwc2VkLFxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxuICAgICAgbWF4Q29sVmlzaWJsZSxcbiAgICAgIHBpdm90RGF0YSxcbiAgICAgIG5hbWVzTWFwcGluZyxcbiAgICB9ID0gcGl2b3RTZXR0aW5ncztcbiAgICBjb25zdCB7XG4gICAgICBoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIsXG4gICAgICBvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzID0gW10sXG4gICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzLFxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXG4gICAgfSA9IHRoaXMucHJvcHMudGFibGVPcHRpb25zO1xuXG4gICAgY29uc3Qgc3BhY2VDZWxsID1cbiAgICAgIGF0dHJJZHggPT09IDAgJiYgcm93QXR0cnMubGVuZ3RoICE9PSAwID8gKFxuICAgICAgICA8dGhcbiAgICAgICAgICBrZXk9XCJwYWRkaW5nXCJcbiAgICAgICAgICBjb2xTcGFuPXtyb3dBdHRycy5sZW5ndGh9XG4gICAgICAgICAgcm93U3Bhbj17Y29sQXR0cnMubGVuZ3RofVxuICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgIC8+XG4gICAgICApIDogbnVsbDtcblxuICAgIGNvbnN0IG5lZWRUb2dnbGUgPVxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LmVuYWJsZWQgJiYgYXR0cklkeCAhPT0gY29sQXR0cnMubGVuZ3RoIC0gMTtcbiAgICBsZXQgYXJyb3dDbGlja0hhbmRsZSA9IG51bGw7XG4gICAgbGV0IHN1YkFycm93ID0gbnVsbDtcbiAgICBpZiAobmVlZFRvZ2dsZSkge1xuICAgICAgYXJyb3dDbGlja0hhbmRsZSA9XG4gICAgICAgIGF0dHJJZHggKyAxIDwgbWF4Q29sVmlzaWJsZVxuICAgICAgICAgID8gdGhpcy5jb2xsYXBzZUF0dHIoZmFsc2UsIGF0dHJJZHgsIGNvbEtleXMpXG4gICAgICAgICAgOiB0aGlzLmV4cGFuZEF0dHIoZmFsc2UsIGF0dHJJZHgsIGNvbEtleXMpO1xuICAgICAgc3ViQXJyb3cgPSBhdHRySWR4ICsgMSA8IG1heENvbFZpc2libGUgPyBhcnJvd0V4cGFuZGVkIDogYXJyb3dDb2xsYXBzZWQ7XG4gICAgfVxuICAgIGNvbnN0IGF0dHJOYW1lQ2VsbCA9IChcbiAgICAgIDx0aCBrZXk9XCJsYWJlbFwiIGNsYXNzTmFtZT1cInB2dEF4aXNMYWJlbFwiPlxuICAgICAgICB7ZGlzcGxheUhlYWRlckNlbGwoXG4gICAgICAgICAgbmVlZFRvZ2dsZSxcbiAgICAgICAgICBzdWJBcnJvdyxcbiAgICAgICAgICBhcnJvd0NsaWNrSGFuZGxlLFxuICAgICAgICAgIGF0dHJOYW1lLFxuICAgICAgICAgIG5hbWVzTWFwcGluZyxcbiAgICAgICAgKX1cbiAgICAgIDwvdGg+XG4gICAgKTtcblxuICAgIGNvbnN0IGF0dHJWYWx1ZUNlbGxzID0gW107XG4gICAgY29uc3Qgcm93SW5jclNwYW4gPSByb3dBdHRycy5sZW5ndGggIT09IDAgPyAxIDogMDtcbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggY29sdW1ucy4gSnVtcCBvdmVyIGR1cGxpY2F0ZSB2YWx1ZXMuXG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgdmlzaWJsZUNvbEtleXMubGVuZ3RoKSB7XG4gICAgICBsZXQgaGFuZGxlQ29udGV4dE1lbnU7XG4gICAgICBjb25zdCBjb2xLZXkgPSB2aXNpYmxlQ29sS2V5c1tpXTtcbiAgICAgIGNvbnN0IGNvbFNwYW4gPSBhdHRySWR4IDwgY29sS2V5Lmxlbmd0aCA/IGNvbEF0dHJTcGFuc1tpXVthdHRySWR4XSA6IDE7XG4gICAgICBsZXQgY29sTGFiZWxDbGFzcyA9ICdwdnRDb2xMYWJlbCc7XG4gICAgICBpZiAoYXR0cklkeCA8IGNvbEtleS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCFvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzLmluY2x1ZGVzKGNvbEF0dHJzW2F0dHJJZHhdKSkge1xuICAgICAgICAgIGlmIChoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIpIHtcbiAgICAgICAgICAgIGNvbExhYmVsQ2xhc3MgKz0gJyBob3ZlcmFibGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoYW5kbGVDb250ZXh0TWVudSA9IGUgPT5cbiAgICAgICAgICAgIHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCBjb2xLZXksIHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICBbYXR0ck5hbWVdOiBjb2xLZXlbYXR0cklkeF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyAmJlxuICAgICAgICAgIEFycmF5LmlzQXJyYXkoaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tjb2xBdHRyc1thdHRySWR4XV0pICYmXG4gICAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxsc1tjb2xBdHRyc1thdHRySWR4XV0uaW5jbHVkZXMoY29sS2V5W2F0dHJJZHhdKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb2xMYWJlbENsYXNzICs9ICcgYWN0aXZlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvd1NwYW4gPSAxICsgKGF0dHJJZHggPT09IGNvbEF0dHJzLmxlbmd0aCAtIDEgPyByb3dJbmNyU3BhbiA6IDApO1xuICAgICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkuc2xpY2UoMCwgYXR0cklkeCArIDEpKTtcbiAgICAgICAgY29uc3Qgb25BcnJvd0NsaWNrID0gbmVlZFRvZ2dsZSA/IHRoaXMudG9nZ2xlQ29sS2V5KGZsYXRDb2xLZXkpIDogbnVsbDtcblxuICAgICAgICBjb25zdCBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUgPVxuICAgICAgICAgIGRhdGVGb3JtYXR0ZXJzICYmXG4gICAgICAgICAgZGF0ZUZvcm1hdHRlcnNbYXR0ck5hbWVdICYmXG4gICAgICAgICAgdHlwZW9mIGRhdGVGb3JtYXR0ZXJzW2F0dHJOYW1lXSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyBkYXRlRm9ybWF0dGVyc1thdHRyTmFtZV0oY29sS2V5W2F0dHJJZHhdKVxuICAgICAgICAgICAgOiBjb2xLZXlbYXR0cklkeF07XG4gICAgICAgIGF0dHJWYWx1ZUNlbGxzLnB1c2goXG4gICAgICAgICAgPHRoXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NvbExhYmVsQ2xhc3N9XG4gICAgICAgICAgICBrZXk9e2Bjb2xLZXktJHtmbGF0Q29sS2V5fWB9XG4gICAgICAgICAgICBjb2xTcGFuPXtjb2xTcGFufVxuICAgICAgICAgICAgcm93U3Bhbj17cm93U3Bhbn1cbiAgICAgICAgICAgIHJvbGU9XCJjb2x1bW5oZWFkZXIgYnV0dG9uXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxuICAgICAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgICAgIGNvbEtleSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xzLFxuICAgICAgICAgICAgICBhdHRySWR4LFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja0NvbHVtbkhlYWRlckNhbGxiYWNrLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2hhbmRsZUNvbnRleHRNZW51fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcbiAgICAgICAgICAgICAgbmVlZFRvZ2dsZSxcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb2xsYXBzZWRDb2xzW2ZsYXRDb2xLZXldXG4gICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxuICAgICAgICAgICAgICAgIDogYXJyb3dFeHBhbmRlZCxcbiAgICAgICAgICAgICAgb25BcnJvd0NsaWNrLFxuICAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXG4gICAgICAgICAgICAgIG5hbWVzTWFwcGluZyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC90aD4sXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKGF0dHJJZHggPT09IGNvbEtleS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgcm93U3BhbiA9IGNvbEF0dHJzLmxlbmd0aCAtIGNvbEtleS5sZW5ndGggKyByb3dJbmNyU3BhbjtcbiAgICAgICAgYXR0clZhbHVlQ2VsbHMucHVzaChcbiAgICAgICAgICA8dGhcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7Y29sTGFiZWxDbGFzc30gcHZ0U3VidG90YWxMYWJlbGB9XG4gICAgICAgICAgICBrZXk9e2Bjb2xLZXlCdWZmZXItJHtmbGF0S2V5KGNvbEtleSl9YH1cbiAgICAgICAgICAgIGNvbFNwYW49e2NvbFNwYW59XG4gICAgICAgICAgICByb3dTcGFuPXtyb3dTcGFufVxuICAgICAgICAgICAgcm9sZT1cImNvbHVtbmhlYWRlciBidXR0b25cIlxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXG4gICAgICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICAgICAgY29sS2V5LFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmNvbHMsXG4gICAgICAgICAgICAgIGF0dHJJZHgsXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXG4gICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0KCdTdWJ0b3RhbCcpfVxuICAgICAgICAgIDwvdGg+LFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy8gVGhlIG5leHQgY29sU3BhbiBjb2x1bW5zIHdpbGwgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBhbnl3YXkuLi5cbiAgICAgIGkgKz0gY29sU3BhbjtcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbENlbGwgPVxuICAgICAgYXR0cklkeCA9PT0gMCAmJiByb3dUb3RhbHMgPyAoXG4gICAgICAgIDx0aFxuICAgICAgICAgIGtleT1cInRvdGFsXCJcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsXCJcbiAgICAgICAgICByb3dTcGFuPXtjb2xBdHRycy5sZW5ndGggKyBNYXRoLm1pbihyb3dBdHRycy5sZW5ndGgsIDEpfVxuICAgICAgICAgIHJvbGU9XCJjb2x1bW5oZWFkZXIgYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcbiAgICAgICAgICAgIHBpdm90RGF0YSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy5jb2xzLFxuICAgICAgICAgICAgYXR0cklkeCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMudGFibGVPcHRpb25zLmNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2ssXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIHt0KCdUb3RhbCAoJShhZ2dyZWdhdG9yTmFtZSlzKScsIHtcbiAgICAgICAgICAgIGFnZ3JlZ2F0b3JOYW1lOiB0KHRoaXMucHJvcHMuYWdncmVnYXRvck5hbWUpLFxuICAgICAgICAgIH0pfVxuICAgICAgICA8L3RoPlxuICAgICAgKSA6IG51bGw7XG5cbiAgICBjb25zdCBjZWxscyA9IFtzcGFjZUNlbGwsIGF0dHJOYW1lQ2VsbCwgLi4uYXR0clZhbHVlQ2VsbHMsIHRvdGFsQ2VsbF07XG4gICAgcmV0dXJuIDx0ciBrZXk9e2Bjb2xBdHRyLSR7YXR0cklkeH1gfT57Y2VsbHN9PC90cj47XG4gIH1cblxuICByZW5kZXJSb3dIZWFkZXJSb3cocGl2b3RTZXR0aW5ncykge1xuICAgIC8vIFJlbmRlciBqdXN0IHRoZSBhdHRyaWJ1dGUgbmFtZXMgb2YgdGhlIHJvd3MgKHRoZSBhY3R1YWwgYXR0cmlidXRlIHZhbHVlc1xuICAgIC8vIHdpbGwgc2hvdyB1cCBpbiB0aGUgaW5kaXZpZHVhbCByb3dzKS5cblxuICAgIGNvbnN0IHtcbiAgICAgIHJvd0F0dHJzLFxuICAgICAgY29sQXR0cnMsXG4gICAgICByb3dLZXlzLFxuICAgICAgYXJyb3dDb2xsYXBzZWQsXG4gICAgICBhcnJvd0V4cGFuZGVkLFxuICAgICAgcm93U3VidG90YWxEaXNwbGF5LFxuICAgICAgbWF4Um93VmlzaWJsZSxcbiAgICAgIHBpdm90RGF0YSxcbiAgICAgIG5hbWVzTWFwcGluZyxcbiAgICB9ID0gcGl2b3RTZXR0aW5ncztcbiAgICByZXR1cm4gKFxuICAgICAgPHRyIGtleT1cInJvd0hkclwiPlxuICAgICAgICB7cm93QXR0cnMubWFwKChyLCBpKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmVlZExhYmVsVG9nZ2xlID1cbiAgICAgICAgICAgIHJvd1N1YnRvdGFsRGlzcGxheS5lbmFibGVkICYmIGkgIT09IHJvd0F0dHJzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgbGV0IGFycm93Q2xpY2tIYW5kbGUgPSBudWxsO1xuICAgICAgICAgIGxldCBzdWJBcnJvdyA9IG51bGw7XG4gICAgICAgICAgaWYgKG5lZWRMYWJlbFRvZ2dsZSkge1xuICAgICAgICAgICAgYXJyb3dDbGlja0hhbmRsZSA9XG4gICAgICAgICAgICAgIGkgKyAxIDwgbWF4Um93VmlzaWJsZVxuICAgICAgICAgICAgICAgID8gdGhpcy5jb2xsYXBzZUF0dHIodHJ1ZSwgaSwgcm93S2V5cylcbiAgICAgICAgICAgICAgICA6IHRoaXMuZXhwYW5kQXR0cih0cnVlLCBpLCByb3dLZXlzKTtcbiAgICAgICAgICAgIHN1YkFycm93ID0gaSArIDEgPCBtYXhSb3dWaXNpYmxlID8gYXJyb3dFeHBhbmRlZCA6IGFycm93Q29sbGFwc2VkO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInB2dEF4aXNMYWJlbFwiIGtleT17YHJvd0F0dHItJHtpfWB9PlxuICAgICAgICAgICAgICB7ZGlzcGxheUhlYWRlckNlbGwoXG4gICAgICAgICAgICAgICAgbmVlZExhYmVsVG9nZ2xlLFxuICAgICAgICAgICAgICAgIHN1YkFycm93LFxuICAgICAgICAgICAgICAgIGFycm93Q2xpY2tIYW5kbGUsXG4gICAgICAgICAgICAgICAgcixcbiAgICAgICAgICAgICAgICBuYW1lc01hcHBpbmcsXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgICA8dGhcbiAgICAgICAgICBjbGFzc05hbWU9XCJwdnRUb3RhbExhYmVsXCJcbiAgICAgICAgICBrZXk9XCJwYWRkaW5nXCJcbiAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyIGJ1dHRvblwiXG4gICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXG4gICAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgICAgIHRoaXMucHJvcHMucm93cyxcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICl9XG4gICAgICAgID5cbiAgICAgICAgICB7Y29sQXR0cnMubGVuZ3RoID09PSAwXG4gICAgICAgICAgICA/IHQoJ1RvdGFsICglKGFnZ3JlZ2F0b3JOYW1lKXMpJywge1xuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0b3JOYW1lOiB0KHRoaXMucHJvcHMuYWdncmVnYXRvck5hbWUpLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICA8L3RoPlxuICAgICAgPC90cj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyVGFibGVSb3cocm93S2V5LCByb3dJZHgsIHBpdm90U2V0dGluZ3MpIHtcbiAgICAvLyBSZW5kZXIgYSBzaW5nbGUgcm93IGluIHRoZSBwaXZvdCB0YWJsZS5cblxuICAgIGNvbnN0IHtcbiAgICAgIHJvd0F0dHJzLFxuICAgICAgY29sQXR0cnMsXG4gICAgICByb3dBdHRyU3BhbnMsXG4gICAgICB2aXNpYmxlQ29sS2V5cyxcbiAgICAgIHBpdm90RGF0YSxcbiAgICAgIHJvd1RvdGFscyxcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcbiAgICAgIGFycm93RXhwYW5kZWQsXG4gICAgICBhcnJvd0NvbGxhcHNlZCxcbiAgICAgIGNlbGxDYWxsYmFja3MsXG4gICAgICByb3dUb3RhbENhbGxiYWNrcyxcbiAgICAgIG5hbWVzTWFwcGluZyxcbiAgICB9ID0gcGl2b3RTZXR0aW5ncztcblxuICAgIGNvbnN0IHtcbiAgICAgIGhpZ2hsaWdodEhlYWRlckNlbGxzT25Ib3ZlcixcbiAgICAgIG9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHMgPSBbXSxcbiAgICAgIGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHMsXG4gICAgICBjZWxsQ29sb3JGb3JtYXR0ZXJzLFxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXG4gICAgfSA9IHRoaXMucHJvcHMudGFibGVPcHRpb25zO1xuICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KHJvd0tleSk7XG5cbiAgICBjb25zdCBjb2xJbmNyU3BhbiA9IGNvbEF0dHJzLmxlbmd0aCAhPT0gMCA/IDEgOiAwO1xuICAgIGNvbnN0IGF0dHJWYWx1ZUNlbGxzID0gcm93S2V5Lm1hcCgociwgaSkgPT4ge1xuICAgICAgbGV0IGhhbmRsZUNvbnRleHRNZW51O1xuICAgICAgbGV0IHZhbHVlQ2VsbENsYXNzTmFtZSA9ICdwdnRSb3dMYWJlbCc7XG4gICAgICBpZiAoIW9taXR0ZWRIaWdobGlnaHRIZWFkZXJHcm91cHMuaW5jbHVkZXMocm93QXR0cnNbaV0pKSB7XG4gICAgICAgIGlmIChoaWdobGlnaHRIZWFkZXJDZWxsc09uSG92ZXIpIHtcbiAgICAgICAgICB2YWx1ZUNlbGxDbGFzc05hbWUgKz0gJyBob3ZlcmFibGUnO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZUNvbnRleHRNZW51ID0gZSA9PlxuICAgICAgICAgIHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCB1bmRlZmluZWQsIHJvd0tleSwge1xuICAgICAgICAgICAgW3Jvd0F0dHJzW2ldXTogcixcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgaGlnaGxpZ2h0ZWRIZWFkZXJDZWxscyAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KGhpZ2hsaWdodGVkSGVhZGVyQ2VsbHNbcm93QXR0cnNbaV1dKSAmJlxuICAgICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzW3Jvd0F0dHJzW2ldXS5pbmNsdWRlcyhyKVxuICAgICAgKSB7XG4gICAgICAgIHZhbHVlQ2VsbENsYXNzTmFtZSArPSAnIGFjdGl2ZSc7XG4gICAgICB9XG4gICAgICBjb25zdCByb3dTcGFuID0gcm93QXR0clNwYW5zW3Jvd0lkeF1baV07XG4gICAgICBpZiAocm93U3BhbiA+IDApIHtcbiAgICAgICAgY29uc3QgZmxhdFJvd0tleSA9IGZsYXRLZXkocm93S2V5LnNsaWNlKDAsIGkgKyAxKSk7XG4gICAgICAgIGNvbnN0IGNvbFNwYW4gPSAxICsgKGkgPT09IHJvd0F0dHJzLmxlbmd0aCAtIDEgPyBjb2xJbmNyU3BhbiA6IDApO1xuICAgICAgICBjb25zdCBuZWVkUm93VG9nZ2xlID1cbiAgICAgICAgICByb3dTdWJ0b3RhbERpc3BsYXkuZW5hYmxlZCAmJiBpICE9PSByb3dBdHRycy5sZW5ndGggLSAxO1xuICAgICAgICBjb25zdCBvbkFycm93Q2xpY2sgPSBuZWVkUm93VG9nZ2xlXG4gICAgICAgICAgPyB0aGlzLnRvZ2dsZVJvd0tleShmbGF0Um93S2V5KVxuICAgICAgICAgIDogbnVsbDtcblxuICAgICAgICBjb25zdCBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUgPVxuICAgICAgICAgIGRhdGVGb3JtYXR0ZXJzICYmIGRhdGVGb3JtYXR0ZXJzW3Jvd0F0dHJzW2ldXVxuICAgICAgICAgICAgPyBkYXRlRm9ybWF0dGVyc1tyb3dBdHRyc1tpXV0ocilcbiAgICAgICAgICAgIDogcjtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8dGhcbiAgICAgICAgICAgIGtleT17YHJvd0tleUxhYmVsLSR7aX1gfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXt2YWx1ZUNlbGxDbGFzc05hbWV9XG4gICAgICAgICAgICByb3dTcGFuPXtyb3dTcGFufVxuICAgICAgICAgICAgY29sU3Bhbj17Y29sU3Bhbn1cbiAgICAgICAgICAgIHJvbGU9XCJjb2x1bW5oZWFkZXIgYnV0dG9uXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xpY2tIZWFkZXJIYW5kbGVyKFxuICAgICAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgICAgIHJvd0tleSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxuICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLnRhYmxlT3B0aW9ucy5jbGlja1Jvd0hlYWRlckNhbGxiYWNrLFxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2hhbmRsZUNvbnRleHRNZW51fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtkaXNwbGF5SGVhZGVyQ2VsbChcbiAgICAgICAgICAgICAgbmVlZFJvd1RvZ2dsZSxcbiAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jb2xsYXBzZWRSb3dzW2ZsYXRSb3dLZXldXG4gICAgICAgICAgICAgICAgPyBhcnJvd0NvbGxhcHNlZFxuICAgICAgICAgICAgICAgIDogYXJyb3dFeHBhbmRlZCxcbiAgICAgICAgICAgICAgb25BcnJvd0NsaWNrLFxuICAgICAgICAgICAgICBoZWFkZXJDZWxsRm9ybWF0dGVkVmFsdWUsXG4gICAgICAgICAgICAgIG5hbWVzTWFwcGluZyxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC90aD5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYXR0clZhbHVlUGFkZGluZ0NlbGwgPVxuICAgICAgcm93S2V5Lmxlbmd0aCA8IHJvd0F0dHJzLmxlbmd0aCA/IChcbiAgICAgICAgPHRoXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0Um93TGFiZWwgcHZ0U3VidG90YWxMYWJlbFwiXG4gICAgICAgICAga2V5PVwicm93S2V5QnVmZmVyXCJcbiAgICAgICAgICBjb2xTcGFuPXtyb3dBdHRycy5sZW5ndGggLSByb3dLZXkubGVuZ3RoICsgY29sSW5jclNwYW59XG4gICAgICAgICAgcm93U3Bhbj17MX1cbiAgICAgICAgICByb2xlPVwiY29sdW1uaGVhZGVyIGJ1dHRvblwiXG4gICAgICAgICAgb25DbGljaz17dGhpcy5jbGlja0hlYWRlckhhbmRsZXIoXG4gICAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgICByb3dLZXksXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJvd3MsXG4gICAgICAgICAgICByb3dLZXkubGVuZ3RoLFxuICAgICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgKX1cbiAgICAgICAgPlxuICAgICAgICAgIHt0KCdTdWJ0b3RhbCcpfVxuICAgICAgICA8L3RoPlxuICAgICAgKSA6IG51bGw7XG5cbiAgICBjb25zdCByb3dDbGlja0hhbmRsZXJzID0gY2VsbENhbGxiYWNrc1tmbGF0Um93S2V5XSB8fCB7fTtcbiAgICBjb25zdCB2YWx1ZUNlbGxzID0gdmlzaWJsZUNvbEtleXMubWFwKGNvbEtleSA9PiB7XG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3Iocm93S2V5LCBjb2xLZXkpO1xuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcblxuICAgICAgY29uc3Qga2V5cyA9IFsuLi5yb3dLZXksIC4uLmNvbEtleV07XG4gICAgICBsZXQgYmFja2dyb3VuZENvbG9yO1xuICAgICAgaWYgKGNlbGxDb2xvckZvcm1hdHRlcnMpIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhjZWxsQ29sb3JGb3JtYXR0ZXJzKS5mb3JFYWNoKGNlbGxDb2xvckZvcm1hdHRlciA9PiB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbENvbG9yRm9ybWF0dGVyKSkge1xuICAgICAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgY2VsbENvbG9yRm9ybWF0dGVyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmb3JtYXR0ZXIgPT4gZm9ybWF0dGVyLmNvbHVtbiA9PT0ga2V5KVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZvcm1hdHRlciA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZXJSZXN1bHQgPSBmb3JtYXR0ZXIuZ2V0Q29sb3JGcm9tVmFsdWUoYWdnVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdHRlclJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBmb3JtYXR0ZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdHlsZSA9IGFnZy5pc1N1YnRvdGFsXG4gICAgICAgID8geyBmb250V2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICA6IHsgYmFja2dyb3VuZENvbG9yIH07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDx0ZFxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VmFsXCJcbiAgICAgICAgICBrZXk9e2BwdnRWYWwtJHtmbGF0Q29sS2V5fWB9XG4gICAgICAgICAgb25DbGljaz17cm93Q2xpY2tIYW5kbGVyc1tmbGF0Q29sS2V5XX1cbiAgICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCBjb2xLZXksIHJvd0tleSl9XG4gICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICA+XG4gICAgICAgICAge2FnZy5mb3JtYXQoYWdnVmFsdWUpfVxuICAgICAgICA8L3RkPlxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGxldCB0b3RhbENlbGwgPSBudWxsO1xuICAgIGlmIChyb3dUb3RhbHMpIHtcbiAgICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKHJvd0tleSwgW10pO1xuICAgICAgY29uc3QgYWdnVmFsdWUgPSBhZ2cudmFsdWUoKTtcbiAgICAgIHRvdGFsQ2VsbCA9IChcbiAgICAgICAgPHRkXG4gICAgICAgICAgcm9sZT1cImdyaWRjZWxsXCJcbiAgICAgICAgICBrZXk9XCJ0b3RhbFwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWxcIlxuICAgICAgICAgIG9uQ2xpY2s9e3Jvd1RvdGFsQ2FsbGJhY2tzW2ZsYXRSb3dLZXldfVxuICAgICAgICAgIG9uQ29udGV4dE1lbnU9e2UgPT4gdGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KGUsIHVuZGVmaW5lZCwgcm93S2V5KX1cbiAgICAgICAgPlxuICAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cbiAgICAgICAgPC90ZD5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qgcm93Q2VsbHMgPSBbXG4gICAgICAuLi5hdHRyVmFsdWVDZWxscyxcbiAgICAgIGF0dHJWYWx1ZVBhZGRpbmdDZWxsLFxuICAgICAgLi4udmFsdWVDZWxscyxcbiAgICAgIHRvdGFsQ2VsbCxcbiAgICBdO1xuXG4gICAgcmV0dXJuIDx0ciBrZXk9e2BrZXlSb3ctJHtmbGF0Um93S2V5fWB9Pntyb3dDZWxsc308L3RyPjtcbiAgfVxuXG4gIHJlbmRlclRvdGFsc1JvdyhwaXZvdFNldHRpbmdzKSB7XG4gICAgLy8gUmVuZGVyIHRoZSBmaW5hbCB0b3RhbHMgcm93cyB0aGF0IGhhcyB0aGUgdG90YWxzIGZvciBhbGwgdGhlIGNvbHVtbnMuXG5cbiAgICBjb25zdCB7XG4gICAgICByb3dBdHRycyxcbiAgICAgIGNvbEF0dHJzLFxuICAgICAgdmlzaWJsZUNvbEtleXMsXG4gICAgICByb3dUb3RhbHMsXG4gICAgICBwaXZvdERhdGEsXG4gICAgICBjb2xUb3RhbENhbGxiYWNrcyxcbiAgICAgIGdyYW5kVG90YWxDYWxsYmFjayxcbiAgICB9ID0gcGl2b3RTZXR0aW5ncztcblxuICAgIGNvbnN0IHRvdGFsTGFiZWxDZWxsID0gKFxuICAgICAgPHRoXG4gICAgICAgIGtleT1cImxhYmVsXCJcbiAgICAgICAgY2xhc3NOYW1lPVwicHZ0VG90YWxMYWJlbCBwdnRSb3dUb3RhbExhYmVsXCJcbiAgICAgICAgY29sU3Bhbj17cm93QXR0cnMubGVuZ3RoICsgTWF0aC5taW4oY29sQXR0cnMubGVuZ3RoLCAxKX1cbiAgICAgICAgcm9sZT1cImNvbHVtbmhlYWRlciBidXR0b25cIlxuICAgICAgICBvbkNsaWNrPXt0aGlzLmNsaWNrSGVhZGVySGFuZGxlcihcbiAgICAgICAgICBwaXZvdERhdGEsXG4gICAgICAgICAgW10sXG4gICAgICAgICAgdGhpcy5wcm9wcy5yb3dzLFxuICAgICAgICAgIDAsXG4gICAgICAgICAgdGhpcy5wcm9wcy50YWJsZU9wdGlvbnMuY2xpY2tSb3dIZWFkZXJDYWxsYmFjayxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICB7dCgnVG90YWwgKCUoYWdncmVnYXRvck5hbWUpcyknLCB7XG4gICAgICAgICAgYWdncmVnYXRvck5hbWU6IHQodGhpcy5wcm9wcy5hZ2dyZWdhdG9yTmFtZSksXG4gICAgICAgIH0pfVxuICAgICAgPC90aD5cbiAgICApO1xuXG4gICAgY29uc3QgdG90YWxWYWx1ZUNlbGxzID0gdmlzaWJsZUNvbEtleXMubWFwKGNvbEtleSA9PiB7XG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShjb2xLZXkpO1xuICAgICAgY29uc3QgYWdnID0gcGl2b3REYXRhLmdldEFnZ3JlZ2F0b3IoW10sIGNvbEtleSk7XG4gICAgICBjb25zdCBhZ2dWYWx1ZSA9IGFnZy52YWx1ZSgpO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8dGRcbiAgICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dFRvdGFsIHB2dFJvd1RvdGFsXCJcbiAgICAgICAgICBrZXk9e2B0b3RhbC0ke2ZsYXRDb2xLZXl9YH1cbiAgICAgICAgICBvbkNsaWNrPXtjb2xUb3RhbENhbGxiYWNrc1tmbGF0Q29sS2V5XX1cbiAgICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCBjb2xLZXksIHVuZGVmaW5lZCl9XG4gICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogJzVweCcgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHthZ2cuZm9ybWF0KGFnZ1ZhbHVlKX1cbiAgICAgICAgPC90ZD5cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBsZXQgZ3JhbmRUb3RhbENlbGwgPSBudWxsO1xuICAgIGlmIChyb3dUb3RhbHMpIHtcbiAgICAgIGNvbnN0IGFnZyA9IHBpdm90RGF0YS5nZXRBZ2dyZWdhdG9yKFtdLCBbXSk7XG4gICAgICBjb25zdCBhZ2dWYWx1ZSA9IGFnZy52YWx1ZSgpO1xuICAgICAgZ3JhbmRUb3RhbENlbGwgPSAoXG4gICAgICAgIDx0ZFxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgICAga2V5PVwidG90YWxcIlxuICAgICAgICAgIGNsYXNzTmFtZT1cInB2dEdyYW5kVG90YWwgcHZ0Um93VG90YWxcIlxuICAgICAgICAgIG9uQ2xpY2s9e2dyYW5kVG90YWxDYWxsYmFja31cbiAgICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHRoaXMucHJvcHMub25Db250ZXh0TWVudShlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCl9XG4gICAgICAgID5cbiAgICAgICAgICB7YWdnLmZvcm1hdChhZ2dWYWx1ZSl9XG4gICAgICAgIDwvdGQ+XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsQ2VsbHMgPSBbdG90YWxMYWJlbENlbGwsIC4uLnRvdGFsVmFsdWVDZWxscywgZ3JhbmRUb3RhbENlbGxdO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDx0ciBrZXk9XCJ0b3RhbFwiIGNsYXNzTmFtZT1cInB2dFJvd1RvdGFsc1wiPlxuICAgICAgICB7dG90YWxDZWxsc31cbiAgICAgIDwvdHI+XG4gICAgKTtcbiAgfVxuXG4gIHZpc2libGVLZXlzKGtleXMsIGNvbGxhcHNlZCwgbnVtQXR0cnMsIHN1YnRvdGFsRGlzcGxheSkge1xuICAgIHJldHVybiBrZXlzLmZpbHRlcihcbiAgICAgIGtleSA9PlxuICAgICAgICAvLyBJcyB0aGUga2V5IGhpZGRlbiBieSBvbmUgb2YgaXRzIHBhcmVudHM/XG4gICAgICAgICFrZXkuc29tZSgoaywgaikgPT4gY29sbGFwc2VkW2ZsYXRLZXkoa2V5LnNsaWNlKDAsIGopKV0pICYmXG4gICAgICAgIC8vIExlYWYga2V5LlxuICAgICAgICAoa2V5Lmxlbmd0aCA9PT0gbnVtQXR0cnMgfHxcbiAgICAgICAgICAvLyBDaGlsZHJlbiBoaWRkZW4uIE11c3Qgc2hvdyB0b3RhbC5cbiAgICAgICAgICBmbGF0S2V5KGtleSkgaW4gY29sbGFwc2VkIHx8XG4gICAgICAgICAgLy8gRG9uJ3QgaGlkZSB0b3RhbHMuXG4gICAgICAgICAgIXN1YnRvdGFsRGlzcGxheS5oaWRlT25FeHBhbmQpLFxuICAgICk7XG4gIH1cblxuICBpc0Rhc2hib2FyZEVkaXRNb2RlKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5jb250YWlucyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFzaGJvYXJkLS1lZGl0aW5nJykpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGlmICh0aGlzLmNhY2hlZFByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gICAgICB0aGlzLmNhY2hlZFByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3MgPSB0aGlzLmdldEJhc2VQaXZvdFNldHRpbmdzKCk7XG4gICAgfVxuICAgIGNvbnN0IHtcbiAgICAgIGNvbEF0dHJzLFxuICAgICAgcm93QXR0cnMsXG4gICAgICByb3dLZXlzLFxuICAgICAgY29sS2V5cyxcbiAgICAgIGNvbFRvdGFscyxcbiAgICAgIHJvd1N1YnRvdGFsRGlzcGxheSxcbiAgICAgIGNvbFN1YnRvdGFsRGlzcGxheSxcbiAgICB9ID0gdGhpcy5jYWNoZWRCYXNlUGl2b3RTZXR0aW5ncztcblxuICAgIC8vIE5lZWQgdG8gYWNjb3VudCBmb3IgZXhjbHVzaW9ucyB0byBjb21wdXRlIHRoZSBlZmZlY3RpdmUgcm93XG4gICAgLy8gYW5kIGNvbHVtbiBrZXlzLlxuICAgIGNvbnN0IHZpc2libGVSb3dLZXlzID0gdGhpcy52aXNpYmxlS2V5cyhcbiAgICAgIHJvd0tleXMsXG4gICAgICB0aGlzLnN0YXRlLmNvbGxhcHNlZFJvd3MsXG4gICAgICByb3dBdHRycy5sZW5ndGgsXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXksXG4gICAgKTtcbiAgICBjb25zdCB2aXNpYmxlQ29sS2V5cyA9IHRoaXMudmlzaWJsZUtleXMoXG4gICAgICBjb2xLZXlzLFxuICAgICAgdGhpcy5zdGF0ZS5jb2xsYXBzZWRDb2xzLFxuICAgICAgY29sQXR0cnMubGVuZ3RoLFxuICAgICAgY29sU3VidG90YWxEaXNwbGF5LFxuICAgICk7XG5cbiAgICBjb25zdCBwaXZvdFNldHRpbmdzID0ge1xuICAgICAgdmlzaWJsZVJvd0tleXMsXG4gICAgICBtYXhSb3dWaXNpYmxlOiBNYXRoLm1heCguLi52aXNpYmxlUm93S2V5cy5tYXAoayA9PiBrLmxlbmd0aCkpLFxuICAgICAgdmlzaWJsZUNvbEtleXMsXG4gICAgICBtYXhDb2xWaXNpYmxlOiBNYXRoLm1heCguLi52aXNpYmxlQ29sS2V5cy5tYXAoayA9PiBrLmxlbmd0aCkpLFxuICAgICAgcm93QXR0clNwYW5zOiB0aGlzLmNhbGNBdHRyU3BhbnModmlzaWJsZVJvd0tleXMsIHJvd0F0dHJzLmxlbmd0aCksXG4gICAgICBjb2xBdHRyU3BhbnM6IHRoaXMuY2FsY0F0dHJTcGFucyh2aXNpYmxlQ29sS2V5cywgY29sQXR0cnMubGVuZ3RoKSxcbiAgICAgIC4uLnRoaXMuY2FjaGVkQmFzZVBpdm90U2V0dGluZ3MsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U3R5bGVzIGlzRGFzaGJvYXJkRWRpdE1vZGU9e3RoaXMuaXNEYXNoYm9hcmRFZGl0TW9kZSgpfT5cbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInB2dFRhYmxlXCIgcm9sZT1cImdyaWRcIj5cbiAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICB7Y29sQXR0cnMubWFwKChjLCBqKSA9PlxuICAgICAgICAgICAgICB0aGlzLnJlbmRlckNvbEhlYWRlclJvdyhjLCBqLCBwaXZvdFNldHRpbmdzKSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7cm93QXR0cnMubGVuZ3RoICE9PSAwICYmIHRoaXMucmVuZGVyUm93SGVhZGVyUm93KHBpdm90U2V0dGluZ3MpfVxuICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAge3Zpc2libGVSb3dLZXlzLm1hcCgociwgaSkgPT5cbiAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYWJsZVJvdyhyLCBpLCBwaXZvdFNldHRpbmdzKSxcbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7Y29sVG90YWxzICYmIHRoaXMucmVuZGVyVG90YWxzUm93KHBpdm90U2V0dGluZ3MpfVxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L1N0eWxlcz5cbiAgICApO1xuICB9XG59XG5cblRhYmxlUmVuZGVyZXIucHJvcFR5cGVzID0ge1xuICAuLi5QaXZvdERhdGEucHJvcFR5cGVzLFxuICB0YWJsZU9wdGlvbnM6IFByb3BUeXBlcy5vYmplY3QsXG4gIG9uQ29udGV4dE1lbnU6IFByb3BUeXBlcy5mdW5jLFxufTtcblRhYmxlUmVuZGVyZXIuZGVmYXVsdFByb3BzID0geyAuLi5QaXZvdERhdGEuZGVmYXVsdFByb3BzLCB0YWJsZU9wdGlvbnM6IHt9IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/TableRenderers.jsx\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js":
/*!****************************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PivotData: () => (/* binding */ PivotData),\n/* harmony export */   aggregatorTemplates: () => (/* binding */ aggregatorTemplates),\n/* harmony export */   flatKey: () => (/* binding */ flatKey),\n/* harmony export */   sortAs: () => (/* binding */ sortAs)\n/* harmony export */ });\n/* unused harmony exports aggregators, derivers, locales, naturalSort, numberFormat, getSort */\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\nconst addSeparators = function (nStr, thousandsSep, decimalSep) {\n  const x = String(nStr).split('.');\n  let x1 = x[0];\n  const x2 = x.length > 1 ? decimalSep + x[1] : '';\n  const rgx = /(\\d+)(\\d{3})/;\n  while (rgx.test(x1)) {\n    x1 = x1.replace(rgx, `$1${thousandsSep}$2`);\n  }\n  return x1 + x2;\n};\n\nconst numberFormat = function (optsIn) {\n  const defaults = {\n    digitsAfterDecimal: 2,\n    scaler: 1,\n    thousandsSep: ',',\n    decimalSep: '.',\n    prefix: '',\n    suffix: ''\n  };\n  const opts = { ...defaults, ...optsIn };\n  return function (x) {\n    if (Number.isNaN(x) || !Number.isFinite(x)) {\n      return '';\n    }\n    const result = addSeparators(\n      (opts.scaler * x).toFixed(opts.digitsAfterDecimal),\n      opts.thousandsSep,\n      opts.decimalSep\n    );\n    return `${opts.prefix}${result}${opts.suffix}`;\n  };\n};\n\nconst rx = /(\\d+)|(\\D+)/g;\nconst rd = /\\d/;\nconst rz = /^0/;\nconst naturalSort = (as, bs) => {\n  // nulls first\n  if (bs !== null && as === null) {\n    return -1;\n  }\n  if (as !== null && bs === null) {\n    return 1;\n  }\n\n  // then raw NaNs\n  if (typeof as === 'number' && Number.isNaN(as)) {\n    return -1;\n  }\n  if (typeof bs === 'number' && Number.isNaN(bs)) {\n    return 1;\n  }\n\n  // numbers and numbery strings group together\n  const nas = Number(as);\n  const nbs = Number(bs);\n  if (nas < nbs) {\n    return -1;\n  }\n  if (nas > nbs) {\n    return 1;\n  }\n\n  // within that, true numbers before numbery strings\n  if (typeof as === 'number' && typeof bs !== 'number') {\n    return -1;\n  }\n  if (typeof bs === 'number' && typeof as !== 'number') {\n    return 1;\n  }\n  if (typeof as === 'number' && typeof bs === 'number') {\n    return 0;\n  }\n\n  // 'Infinity' is a textual number, so less than 'A'\n  if (Number.isNaN(nbs) && !Number.isNaN(nas)) {\n    return -1;\n  }\n  if (Number.isNaN(nas) && !Number.isNaN(nbs)) {\n    return 1;\n  }\n\n  // finally, \"smart\" string sorting per http://stackoverflow.com/a/4373421/112871\n  let a = String(as);\n  let b = String(bs);\n  if (a === b) {\n    return 0;\n  }\n  if (!rd.test(a) || !rd.test(b)) {\n    return a > b ? 1 : -1;\n  }\n\n  // special treatment for strings containing digits\n  a = a.match(rx);\n  b = b.match(rx);\n  while (a.length && b.length) {\n    const a1 = a.shift();\n    const b1 = b.shift();\n    if (a1 !== b1) {\n      if (rd.test(a1) && rd.test(b1)) {\n        return a1.replace(rz, '.0') - b1.replace(rz, '.0');\n      }\n      return a1 > b1 ? 1 : -1;\n    }\n  }\n  return a.length - b.length;\n};\n\nconst sortAs = function (order) {\n  const mapping = {};\n\n  // sort lowercased keys similarly\n  const lMapping = {};\n  order.forEach((element, i) => {\n    mapping[element] = i;\n    if (typeof element === 'string') {\n      lMapping[element.toLowerCase()] = i;\n    }\n  });\n  return function (a, b) {\n    if (a in mapping && b in mapping) {\n      return mapping[a] - mapping[b];\n    }\n    if (a in mapping) {\n      return -1;\n    }\n    if (b in mapping) {\n      return 1;\n    }\n    if (a in lMapping && b in lMapping) {\n      return lMapping[a] - lMapping[b];\n    }\n    if (a in lMapping) {\n      return -1;\n    }\n    if (b in lMapping) {\n      return 1;\n    }\n    return naturalSort(a, b);\n  };\n};\n\nconst getSort = function (sorters, attr) {\n  if (sorters) {\n    if (typeof sorters === 'function') {\n      const sort = sorters(attr);\n      if (typeof sort === 'function') {\n        return sort;\n      }\n    } else if (attr in sorters) {\n      return sorters[attr];\n    }\n  }\n  return naturalSort;\n};\n\n// aggregator templates default to US number formatting but this is overridable\nconst usFmt = numberFormat();\nconst usFmtInt = numberFormat({ digitsAfterDecimal: 0 });\nconst usFmtPct = numberFormat({\n  digitsAfterDecimal: 1,\n  scaler: 100,\n  suffix: '%'\n});\n\nconst fmtNonString = (formatter) => (x) =>\ntypeof x === 'string' ? x : formatter(x);\n\nconst baseAggregatorTemplates = {\n  count(formatter = usFmtInt) {\n    return () =>\n    function () {\n      return {\n        count: 0,\n        push() {\n          this.count += 1;\n        },\n        value() {\n          return this.count;\n        },\n        format: formatter\n      };\n    };\n  },\n\n  uniques(fn, formatter = usFmtInt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          uniq: [],\n          push(record) {\n            if (!Array.from(this.uniq).includes(record[attr])) {\n              this.uniq.push(record[attr]);\n            }\n          },\n          value() {\n            return fn(this.uniq);\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  sum(formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          sum: 0,\n          push(record) {\n            if (Number.isNaN(Number(record[attr]))) {\n              this.sum = record[attr];\n            } else {\n              this.sum += parseFloat(record[attr]);\n            }\n          },\n          value() {\n            return this.sum;\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  extremes(mode, formatter = usFmt) {\n    return function ([attr]) {\n      return function (data) {\n        return {\n          val: null,\n          sorter: getSort(\n            typeof data !== 'undefined' ? data.sorters : null,\n            attr\n          ),\n          push(record) {\n            const x = record[attr];\n            if (['min', 'max'].includes(mode)) {\n              const coercedValue = Number(x);\n              if (Number.isNaN(coercedValue)) {\n                this.val =\n                !this.val ||\n                mode === 'min' && x < this.val ||\n                mode === 'max' && x > this.val ?\n                x :\n                this.val;\n              } else {\n                this.val = Math[mode](\n                  coercedValue,\n                  this.val !== null ? this.val : coercedValue\n                );\n              }\n            } else if (\n            mode === 'first' &&\n            this.sorter(x, this.val !== null ? this.val : x) <= 0)\n            {\n              this.val = x;\n            } else if (\n            mode === 'last' &&\n            this.sorter(x, this.val !== null ? this.val : x) >= 0)\n            {\n              this.val = x;\n            }\n          },\n          value() {\n            return this.val;\n          },\n          format(x) {\n            if (typeof x === 'number') {\n              return formatter(x);\n            }\n            return x;\n          },\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  quantile(q, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          vals: [],\n          strMap: {},\n          push(record) {\n            const val = record[attr];\n            const x = Number(val);\n\n            if (Number.isNaN(x)) {\n              this.strMap[val] = (this.strMap[val] || 0) + 1;\n            } else {\n              this.vals.push(x);\n            }\n          },\n          value() {\n            if (\n            this.vals.length === 0 &&\n            Object.keys(this.strMap).length === 0)\n            {\n              return null;\n            }\n\n            if (Object.keys(this.strMap).length) {\n              const values = Object.values(this.strMap).sort((a, b) => a - b);\n              const middle = Math.floor(values.length / 2);\n\n              const keys = Object.keys(this.strMap);\n              return keys.length % 2 !== 0 ?\n              keys[middle] :\n              (keys[middle - 1] + keys[middle]) / 2;\n            }\n\n            this.vals.sort((a, b) => a - b);\n            const i = (this.vals.length - 1) * q;\n            return (this.vals[Math.floor(i)] + this.vals[Math.ceil(i)]) / 2.0;\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  runningStat(mode = 'mean', ddof = 1, formatter = usFmt) {\n    return function ([attr]) {\n      return function () {\n        return {\n          n: 0.0,\n          m: 0.0,\n          s: 0.0,\n          strValue: null,\n          push(record) {\n            const x = Number(record[attr]);\n            if (Number.isNaN(x)) {\n              this.strValue =\n              typeof record[attr] === 'string' ? record[attr] : this.strValue;\n              return;\n            }\n            this.n += 1.0;\n            if (this.n === 1.0) {\n              this.m = x;\n            }\n            const mNew = this.m + (x - this.m) / this.n;\n            this.s += (x - this.m) * (x - mNew);\n            this.m = mNew;\n          },\n          value() {\n            if (this.strValue) {\n              return this.strValue;\n            }\n\n            if (mode === 'mean') {\n              if (this.n === 0) {\n                return 0 / 0;\n              }\n              return this.m;\n            }\n            if (this.n <= ddof) {\n              return 0;\n            }\n            switch (mode) {\n              case 'var':\n                return this.s / (this.n - ddof);\n              case 'stdev':\n                return Math.sqrt(this.s / (this.n - ddof));\n              default:\n                throw new Error('unknown mode for runningStat');\n            }\n          },\n          format: fmtNonString(formatter),\n          numInputs: typeof attr !== 'undefined' ? 0 : 1\n        };\n      };\n    };\n  },\n\n  sumOverSum(formatter = usFmt) {\n    return function ([num, denom]) {\n      return function () {\n        return {\n          sumNum: 0,\n          sumDenom: 0,\n          push(record) {\n            if (!Number.isNaN(Number(record[num]))) {\n              this.sumNum += parseFloat(record[num]);\n            }\n            if (!Number.isNaN(Number(record[denom]))) {\n              this.sumDenom += parseFloat(record[denom]);\n            }\n          },\n          value() {\n            return this.sumNum / this.sumDenom;\n          },\n          format: formatter,\n          numInputs:\n          typeof num !== 'undefined' && typeof denom !== 'undefined' ? 0 : 2\n        };\n      };\n    };\n  },\n\n  fractionOf(wrapped, type = 'total', formatter = usFmtPct) {\n    return (...x) =>\n    function (data, rowKey, colKey) {\n      return {\n        selector: { total: [[], []], row: [rowKey, []], col: [[], colKey] }[\n        type],\n\n        inner: wrapped(...Array.from(x || []))(data, rowKey, colKey),\n        push(record) {\n          this.inner.push(record);\n        },\n        format: fmtNonString(formatter),\n        value() {\n          const acc = data.\n          getAggregator(...Array.from(this.selector || [])).\n          inner.value();\n\n          if (typeof acc === 'string') {\n            return acc;\n          }\n\n          return this.inner.value() / acc;\n        },\n        numInputs: wrapped(...Array.from(x || []))().numInputs\n      };\n    };\n  }\n};\n\nconst extendedAggregatorTemplates = {\n  countUnique(f) {\n    return baseAggregatorTemplates.uniques((x) => x.length, f);\n  },\n  listUnique(s, f) {\n    return baseAggregatorTemplates.uniques((x) => x.join(s), f || ((x) => x));\n  },\n  max(f) {\n    return baseAggregatorTemplates.extremes('max', f);\n  },\n  min(f) {\n    return baseAggregatorTemplates.extremes('min', f);\n  },\n  first(f) {\n    return baseAggregatorTemplates.extremes('first', f);\n  },\n  last(f) {\n    return baseAggregatorTemplates.extremes('last', f);\n  },\n  median(f) {\n    return baseAggregatorTemplates.quantile(0.5, f);\n  },\n  average(f) {\n    return baseAggregatorTemplates.runningStat('mean', 1, f);\n  },\n  var(ddof, f) {\n    return baseAggregatorTemplates.runningStat('var', ddof, f);\n  },\n  stdev(ddof, f) {\n    return baseAggregatorTemplates.runningStat('stdev', ddof, f);\n  }\n};\n\nconst aggregatorTemplates = {\n  ...baseAggregatorTemplates,\n  ...extendedAggregatorTemplates\n};\n\n// default aggregators & renderers use US naming and number formatting\nconst aggregators = ((tpl) => ({\n  Count: tpl.count(usFmtInt),\n  'Count Unique Values': tpl.countUnique(usFmtInt),\n  'List Unique Values': tpl.listUnique(', '),\n  Sum: tpl.sum(usFmt),\n  'Integer Sum': tpl.sum(usFmtInt),\n  Average: tpl.average(usFmt),\n  Median: tpl.median(usFmt),\n  'Sample Variance': tpl.var(1, usFmt),\n  'Sample Standard Deviation': tpl.stdev(1, usFmt),\n  Minimum: tpl.min(usFmt),\n  Maximum: tpl.max(usFmt),\n  First: tpl.first(usFmt),\n  Last: tpl.last(usFmt),\n  'Sum over Sum': tpl.sumOverSum(usFmt),\n  'Sum as Fraction of Total': tpl.fractionOf(tpl.sum(), 'total', usFmtPct),\n  'Sum as Fraction of Rows': tpl.fractionOf(tpl.sum(), 'row', usFmtPct),\n  'Sum as Fraction of Columns': tpl.fractionOf(tpl.sum(), 'col', usFmtPct),\n  'Count as Fraction of Total': tpl.fractionOf(tpl.count(), 'total', usFmtPct),\n  'Count as Fraction of Rows': tpl.fractionOf(tpl.count(), 'row', usFmtPct),\n  'Count as Fraction of Columns': tpl.fractionOf(tpl.count(), 'col', usFmtPct)\n}))(aggregatorTemplates);\n\nconst locales = {\n  en: {\n    aggregators,\n    localeStrings: {\n      renderError: 'An error occurred rendering the PivotTable results.',\n      computeError: 'An error occurred computing the PivotTable results.',\n      uiRenderError: 'An error occurred rendering the PivotTable UI.',\n      selectAll: 'Select All',\n      selectNone: 'Select None',\n      tooMany: '(too many to list)',\n      filterResults: 'Filter values',\n      apply: 'Apply',\n      cancel: 'Cancel',\n      totals: 'Totals',\n      vs: 'vs',\n      by: 'by'\n    }\n  }\n};\n\n// dateFormat deriver l10n requires month and day names to be passed in directly\nconst mthNamesEn = [\n'Jan',\n'Feb',\n'Mar',\n'Apr',\n'May',\n'Jun',\n'Jul',\n'Aug',\n'Sep',\n'Oct',\n'Nov',\n'Dec'];\n\nconst dayNamesEn = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nconst zeroPad = (number) => `0${number}`.substr(-2, 2); // eslint-disable-line no-magic-numbers\n\nconst derivers = {\n  bin(col, binWidth) {\n    return (record) => record[col] - record[col] % binWidth;\n  },\n  dateFormat(\n  col,\n  formatString,\n  utcOutput = false,\n  mthNames = mthNamesEn,\n  dayNames = dayNamesEn)\n  {\n    const utc = utcOutput ? 'UTC' : '';\n    return function (record) {\n      const date = new Date(Date.parse(record[col]));\n      if (Number.isNaN(date)) {\n        return '';\n      }\n      return formatString.replace(/%(.)/g, function (m, p) {\n        switch (p) {\n          case 'y':\n            return date[`get${utc}FullYear`]();\n          case 'm':\n            return zeroPad(date[`get${utc}Month`]() + 1);\n          case 'n':\n            return mthNames[date[`get${utc}Month`]()];\n          case 'd':\n            return zeroPad(date[`get${utc}Date`]());\n          case 'w':\n            return dayNames[date[`get${utc}Day`]()];\n          case 'x':\n            return date[`get${utc}Day`]();\n          case 'H':\n            return zeroPad(date[`get${utc}Hours`]());\n          case 'M':\n            return zeroPad(date[`get${utc}Minutes`]());\n          case 'S':\n            return zeroPad(date[`get${utc}Seconds`]());\n          default:\n            return `%${p}`;\n        }\n      });\n    };\n  }\n};\n\n// Given an array of attribute values, convert to a key that\n// can be used in objects.\nconst flatKey = (attrVals) => attrVals.join(String.fromCharCode(0));\n\n/*\nData Model class\n*/\n\nclass PivotData {\n  constructor(inputProps = {}, subtotals = {}) {\n    this.props = { ...PivotData.defaultProps, ...inputProps };\n    this.processRecord = this.processRecord.bind(this);\n    prop_types__WEBPACK_IMPORTED_MODULE_0___default().checkPropTypes(\n      PivotData.propTypes,\n      this.props,\n      'prop',\n      'PivotData'\n    );\n\n    this.aggregator = this.props.\n    aggregatorsFactory(this.props.defaultFormatter)[\n    this.props.aggregatorName](this.props.vals);\n    this.formattedAggregators =\n    this.props.customFormatters &&\n    Object.entries(this.props.customFormatters).reduce(\n      (acc, [key, columnFormatter]) => {\n        acc[key] = {};\n        Object.entries(columnFormatter).forEach(([column, formatter]) => {\n          acc[key][column] = this.props.\n          aggregatorsFactory(formatter)[\n          this.props.aggregatorName](this.props.vals);\n        });\n        return acc;\n      },\n      {}\n    );\n    this.tree = {};\n    this.rowKeys = [];\n    this.colKeys = [];\n    this.rowTotals = {};\n    this.colTotals = {};\n    this.allTotal = this.aggregator(this, [], []);\n    this.subtotals = subtotals;\n    this.sorted = false;\n\n    // iterate through input, accumulating data for cells\n    PivotData.forEachRecord(this.props.data, this.processRecord);\n  }\n\n  getFormattedAggregator(record, totalsKeys) {\n    if (!this.formattedAggregators) {\n      return this.aggregator;\n    }\n    const [groupName, groupValue] =\n    Object.entries(record).find(\n      ([name, value]) =>\n      this.formattedAggregators[name] &&\n      this.formattedAggregators[name][value]\n    ) || [];\n    if (\n    !groupName ||\n    !groupValue ||\n    totalsKeys && !totalsKeys.includes(groupValue))\n    {\n      return this.aggregator;\n    }\n    return this.formattedAggregators[groupName][groupValue] || this.aggregator;\n  }\n\n  arrSort(attrs, partialOnTop, reverse = false) {\n    const sortersArr = attrs.map((a) => getSort(this.props.sorters, a));\n    return function (a, b) {\n      const limit = Math.min(a.length, b.length);\n      for (let i = 0; i < limit; i += 1) {\n        const sorter = sortersArr[i];\n        const comparison = reverse ? sorter(b[i], a[i]) : sorter(a[i], b[i]);\n        if (comparison !== 0) {\n          return comparison;\n        }\n      }\n      return partialOnTop ? a.length - b.length : b.length - a.length;\n    };\n  }\n\n  sortKeys() {\n    if (!this.sorted) {\n      this.sorted = true;\n      const v = (r, c) => this.getAggregator(r, c).value();\n      switch (this.props.rowOrder) {\n        case 'key_z_to_a':\n          this.rowKeys.sort(\n            this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop, true)\n          );\n          break;\n        case 'value_a_to_z':\n          this.rowKeys.sort((a, b) => naturalSort(v(a, []), v(b, [])));\n          break;\n        case 'value_z_to_a':\n          this.rowKeys.sort((a, b) => -naturalSort(v(a, []), v(b, [])));\n          break;\n        default:\n          this.rowKeys.sort(\n            this.arrSort(this.props.rows, this.subtotals.rowPartialOnTop)\n          );\n      }\n      switch (this.props.colOrder) {\n        case 'key_z_to_a':\n          this.colKeys.sort(\n            this.arrSort(this.props.cols, this.subtotals.colPartialOnTop, true)\n          );\n          break;\n        case 'value_a_to_z':\n          this.colKeys.sort((a, b) => naturalSort(v([], a), v([], b)));\n          break;\n        case 'value_z_to_a':\n          this.colKeys.sort((a, b) => -naturalSort(v([], a), v([], b)));\n          break;\n        default:\n          this.colKeys.sort(\n            this.arrSort(this.props.cols, this.subtotals.colPartialOnTop)\n          );\n      }\n    }\n  }\n\n  getColKeys() {\n    this.sortKeys();\n    return this.colKeys;\n  }\n\n  getRowKeys() {\n    this.sortKeys();\n    return this.rowKeys;\n  }\n\n  processRecord(record) {\n    // this code is called in a tight loop\n    const colKey = [];\n    const rowKey = [];\n    this.props.cols.forEach((col) => {\n      colKey.push(col in record ? record[col] : 'null');\n    });\n    this.props.rows.forEach((row) => {\n      rowKey.push(row in record ? record[row] : 'null');\n    });\n\n    this.allTotal.push(record);\n\n    const rowStart = this.subtotals.rowEnabled ? 1 : Math.max(1, rowKey.length);\n    const colStart = this.subtotals.colEnabled ? 1 : Math.max(1, colKey.length);\n\n    let isRowSubtotal;\n    let isColSubtotal;\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.rowTotals[flatRowKey]) {\n        this.rowKeys.push(fRowKey);\n        this.rowTotals[flatRowKey] = this.getFormattedAggregator(\n          record,\n          rowKey\n        )(this, fRowKey, []);\n      }\n      this.rowTotals[flatRowKey].push(record);\n      this.rowTotals[flatRowKey].isSubtotal = isRowSubtotal;\n    }\n\n    for (let ci = colStart; ci <= colKey.length; ci += 1) {\n      isColSubtotal = ci < colKey.length;\n      const fColKey = colKey.slice(0, ci);\n      const flatColKey = flatKey(fColKey);\n      if (!this.colTotals[flatColKey]) {\n        this.colKeys.push(fColKey);\n        this.colTotals[flatColKey] = this.getFormattedAggregator(\n          record,\n          colKey\n        )(this, [], fColKey);\n      }\n      this.colTotals[flatColKey].push(record);\n      this.colTotals[flatColKey].isSubtotal = isColSubtotal;\n    }\n\n    // And now fill in for all the sub-cells.\n    for (let ri = rowStart; ri <= rowKey.length; ri += 1) {\n      isRowSubtotal = ri < rowKey.length;\n      const fRowKey = rowKey.slice(0, ri);\n      const flatRowKey = flatKey(fRowKey);\n      if (!this.tree[flatRowKey]) {\n        this.tree[flatRowKey] = {};\n      }\n      for (let ci = colStart; ci <= colKey.length; ci += 1) {\n        isColSubtotal = ci < colKey.length;\n        const fColKey = colKey.slice(0, ci);\n        const flatColKey = flatKey(fColKey);\n        if (!this.tree[flatRowKey][flatColKey]) {\n          this.tree[flatRowKey][flatColKey] = this.getFormattedAggregator(\n            record\n          )(this, fRowKey, fColKey);\n        }\n        this.tree[flatRowKey][flatColKey].push(record);\n\n        this.tree[flatRowKey][flatColKey].isRowSubtotal = isRowSubtotal;\n        this.tree[flatRowKey][flatColKey].isColSubtotal = isColSubtotal;\n        this.tree[flatRowKey][flatColKey].isSubtotal =\n        isRowSubtotal || isColSubtotal;\n      }\n    }\n  }\n\n  getAggregator(rowKey, colKey) {\n    let agg;\n    const flatRowKey = flatKey(rowKey);\n    const flatColKey = flatKey(colKey);\n    if (rowKey.length === 0 && colKey.length === 0) {\n      agg = this.allTotal;\n    } else if (rowKey.length === 0) {\n      agg = this.colTotals[flatColKey];\n    } else if (colKey.length === 0) {\n      agg = this.rowTotals[flatRowKey];\n    } else {\n      agg = this.tree[flatRowKey][flatColKey];\n    }\n    return (\n      agg || {\n        value() {\n          return null;\n        },\n        format() {\n          return '';\n        }\n      });\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\n// can handle arrays or jQuery selections of tables\nPivotData.forEachRecord = function (input, processRecord) {\n  if (Array.isArray(input)) {\n    // array of objects\n    return input.map((record) => processRecord(record));\n  }\n  throw new Error((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.t)('Unknown input format'));\n};\n\nPivotData.defaultProps = {\n  aggregators,\n  cols: [],\n  rows: [],\n  vals: [],\n  aggregatorName: 'Count',\n  sorters: {},\n  rowOrder: 'key_a_to_z',\n  colOrder: 'key_a_to_z'\n};\n\nPivotData.propTypes = {\n  data: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_0___default().array), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)]).\n  isRequired,\n  aggregatorName: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  cols: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  rows: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  vals: prop_types__WEBPACK_IMPORTED_MODULE_0___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)),\n  valueFilter: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool))),\n  sorters: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOfType([\n  (prop_types__WEBPACK_IMPORTED_MODULE_0___default().func),\n  prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func))]\n  ),\n  derivedAttributes: prop_types__WEBPACK_IMPORTED_MODULE_0___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_0___default().func)),\n  rowOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']\n  ),\n  colOrder: prop_types__WEBPACK_IMPORTED_MODULE_0___default().oneOf([\n  'key_a_to_z',\n  'key_z_to_a',\n  'value_a_to_z',\n  'value_z_to_a']\n  )\n};\n\n;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(addSeparators, \"addSeparators\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(numberFormat, \"numberFormat\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(rx, \"rx\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(rd, \"rd\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(rz, \"rz\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(naturalSort, \"naturalSort\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(sortAs, \"sortAs\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(getSort, \"getSort\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(usFmt, \"usFmt\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(usFmtInt, \"usFmtInt\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(usFmtPct, \"usFmtPct\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(fmtNonString, \"fmtNonString\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(baseAggregatorTemplates, \"baseAggregatorTemplates\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(extendedAggregatorTemplates, \"extendedAggregatorTemplates\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(aggregatorTemplates, \"aggregatorTemplates\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(aggregators, \"aggregators\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(locales, \"locales\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(mthNamesEn, \"mthNamesEn\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(dayNamesEn, \"dayNamesEn\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(zeroPad, \"zeroPad\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(derivers, \"derivers\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(flatKey, \"flatKey\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");reactHotLoader.register(PivotData, \"PivotData\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVlBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvcmVhY3QtcGl2b3R0YWJsZS91dGlsaXRpZXMuanM/YmY1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyB0IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuXG5jb25zdCBhZGRTZXBhcmF0b3JzID0gZnVuY3Rpb24gKG5TdHIsIHRob3VzYW5kc1NlcCwgZGVjaW1hbFNlcCkge1xuICBjb25zdCB4ID0gU3RyaW5nKG5TdHIpLnNwbGl0KCcuJyk7XG4gIGxldCB4MSA9IHhbMF07XG4gIGNvbnN0IHgyID0geC5sZW5ndGggPiAxID8gZGVjaW1hbFNlcCArIHhbMV0gOiAnJztcbiAgY29uc3Qgcmd4ID0gLyhcXGQrKShcXGR7M30pLztcbiAgd2hpbGUgKHJneC50ZXN0KHgxKSkge1xuICAgIHgxID0geDEucmVwbGFjZShyZ3gsIGAkMSR7dGhvdXNhbmRzU2VwfSQyYCk7XG4gIH1cbiAgcmV0dXJuIHgxICsgeDI7XG59O1xuXG5jb25zdCBudW1iZXJGb3JtYXQgPSBmdW5jdGlvbiAob3B0c0luKSB7XG4gIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgIGRpZ2l0c0FmdGVyRGVjaW1hbDogMixcbiAgICBzY2FsZXI6IDEsXG4gICAgdGhvdXNhbmRzU2VwOiAnLCcsXG4gICAgZGVjaW1hbFNlcDogJy4nLFxuICAgIHByZWZpeDogJycsXG4gICAgc3VmZml4OiAnJyxcbiAgfTtcbiAgY29uc3Qgb3B0cyA9IHsgLi4uZGVmYXVsdHMsIC4uLm9wdHNJbiB9O1xuICByZXR1cm4gZnVuY3Rpb24gKHgpIHtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHgpIHx8ICFOdW1iZXIuaXNGaW5pdGUoeCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYWRkU2VwYXJhdG9ycyhcbiAgICAgIChvcHRzLnNjYWxlciAqIHgpLnRvRml4ZWQob3B0cy5kaWdpdHNBZnRlckRlY2ltYWwpLFxuICAgICAgb3B0cy50aG91c2FuZHNTZXAsXG4gICAgICBvcHRzLmRlY2ltYWxTZXAsXG4gICAgKTtcbiAgICByZXR1cm4gYCR7b3B0cy5wcmVmaXh9JHtyZXN1bHR9JHtvcHRzLnN1ZmZpeH1gO1xuICB9O1xufTtcblxuY29uc3QgcnggPSAvKFxcZCspfChcXEQrKS9nO1xuY29uc3QgcmQgPSAvXFxkLztcbmNvbnN0IHJ6ID0gL14wLztcbmNvbnN0IG5hdHVyYWxTb3J0ID0gKGFzLCBicykgPT4ge1xuICAvLyBudWxscyBmaXJzdFxuICBpZiAoYnMgIT09IG51bGwgJiYgYXMgPT09IG51bGwpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKGFzICE9PSBudWxsICYmIGJzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvLyB0aGVuIHJhdyBOYU5zXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIE51bWJlci5pc05hTihhcykpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHR5cGVvZiBicyA9PT0gJ251bWJlcicgJiYgTnVtYmVyLmlzTmFOKGJzKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgLy8gbnVtYmVycyBhbmQgbnVtYmVyeSBzdHJpbmdzIGdyb3VwIHRvZ2V0aGVyXG4gIGNvbnN0IG5hcyA9IE51bWJlcihhcyk7XG4gIGNvbnN0IG5icyA9IE51bWJlcihicyk7XG4gIGlmIChuYXMgPCBuYnMpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKG5hcyA+IG5icykge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgLy8gd2l0aGluIHRoYXQsIHRydWUgbnVtYmVycyBiZWZvcmUgbnVtYmVyeSBzdHJpbmdzXG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIHR5cGVvZiBicyAhPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHR5cGVvZiBicyA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGFzICE9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiAxO1xuICB9XG4gIGlmICh0eXBlb2YgYXMgPT09ICdudW1iZXInICYmIHR5cGVvZiBicyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vICdJbmZpbml0eScgaXMgYSB0ZXh0dWFsIG51bWJlciwgc28gbGVzcyB0aGFuICdBJ1xuICBpZiAoTnVtYmVyLmlzTmFOKG5icykgJiYgIU51bWJlci5pc05hTihuYXMpKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmIChOdW1iZXIuaXNOYU4obmFzKSAmJiAhTnVtYmVyLmlzTmFOKG5icykpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8vIGZpbmFsbHksIFwic21hcnRcIiBzdHJpbmcgc29ydGluZyBwZXIgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDM3MzQyMS8xMTI4NzFcbiAgbGV0IGEgPSBTdHJpbmcoYXMpO1xuICBsZXQgYiA9IFN0cmluZyhicyk7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgaWYgKCFyZC50ZXN0KGEpIHx8ICFyZC50ZXN0KGIpKSB7XG4gICAgcmV0dXJuIGEgPiBiID8gMSA6IC0xO1xuICB9XG5cbiAgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIHN0cmluZ3MgY29udGFpbmluZyBkaWdpdHNcbiAgYSA9IGEubWF0Y2gocngpO1xuICBiID0gYi5tYXRjaChyeCk7XG4gIHdoaWxlIChhLmxlbmd0aCAmJiBiLmxlbmd0aCkge1xuICAgIGNvbnN0IGExID0gYS5zaGlmdCgpO1xuICAgIGNvbnN0IGIxID0gYi5zaGlmdCgpO1xuICAgIGlmIChhMSAhPT0gYjEpIHtcbiAgICAgIGlmIChyZC50ZXN0KGExKSAmJiByZC50ZXN0KGIxKSkge1xuICAgICAgICByZXR1cm4gYTEucmVwbGFjZShyeiwgJy4wJykgLSBiMS5yZXBsYWNlKHJ6LCAnLjAnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhMSA+IGIxID8gMSA6IC0xO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYS5sZW5ndGggLSBiLmxlbmd0aDtcbn07XG5cbmNvbnN0IHNvcnRBcyA9IGZ1bmN0aW9uIChvcmRlcikge1xuICBjb25zdCBtYXBwaW5nID0ge307XG5cbiAgLy8gc29ydCBsb3dlcmNhc2VkIGtleXMgc2ltaWxhcmx5XG4gIGNvbnN0IGxNYXBwaW5nID0ge307XG4gIG9yZGVyLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICBtYXBwaW5nW2VsZW1lbnRdID0gaTtcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsTWFwcGluZ1tlbGVtZW50LnRvTG93ZXJDYXNlKCldID0gaTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICBpZiAoYSBpbiBtYXBwaW5nICYmIGIgaW4gbWFwcGluZykge1xuICAgICAgcmV0dXJuIG1hcHBpbmdbYV0gLSBtYXBwaW5nW2JdO1xuICAgIH1cbiAgICBpZiAoYSBpbiBtYXBwaW5nKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlmIChiIGluIG1hcHBpbmcpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBpZiAoYSBpbiBsTWFwcGluZyAmJiBiIGluIGxNYXBwaW5nKSB7XG4gICAgICByZXR1cm4gbE1hcHBpbmdbYV0gLSBsTWFwcGluZ1tiXTtcbiAgICB9XG4gICAgaWYgKGEgaW4gbE1hcHBpbmcpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaWYgKGIgaW4gbE1hcHBpbmcpIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gbmF0dXJhbFNvcnQoYSwgYik7XG4gIH07XG59O1xuXG5jb25zdCBnZXRTb3J0ID0gZnVuY3Rpb24gKHNvcnRlcnMsIGF0dHIpIHtcbiAgaWYgKHNvcnRlcnMpIHtcbiAgICBpZiAodHlwZW9mIHNvcnRlcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnN0IHNvcnQgPSBzb3J0ZXJzKGF0dHIpO1xuICAgICAgaWYgKHR5cGVvZiBzb3J0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzb3J0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXR0ciBpbiBzb3J0ZXJzKSB7XG4gICAgICByZXR1cm4gc29ydGVyc1thdHRyXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5hdHVyYWxTb3J0O1xufTtcblxuLy8gYWdncmVnYXRvciB0ZW1wbGF0ZXMgZGVmYXVsdCB0byBVUyBudW1iZXIgZm9ybWF0dGluZyBidXQgdGhpcyBpcyBvdmVycmlkYWJsZVxuY29uc3QgdXNGbXQgPSBudW1iZXJGb3JtYXQoKTtcbmNvbnN0IHVzRm10SW50ID0gbnVtYmVyRm9ybWF0KHsgZGlnaXRzQWZ0ZXJEZWNpbWFsOiAwIH0pO1xuY29uc3QgdXNGbXRQY3QgPSBudW1iZXJGb3JtYXQoe1xuICBkaWdpdHNBZnRlckRlY2ltYWw6IDEsXG4gIHNjYWxlcjogMTAwLFxuICBzdWZmaXg6ICclJyxcbn0pO1xuXG5jb25zdCBmbXROb25TdHJpbmcgPSBmb3JtYXR0ZXIgPT4geCA9PlxuICB0eXBlb2YgeCA9PT0gJ3N0cmluZycgPyB4IDogZm9ybWF0dGVyKHgpO1xuXG5jb25zdCBiYXNlQWdncmVnYXRvclRlbXBsYXRlcyA9IHtcbiAgY291bnQoZm9ybWF0dGVyID0gdXNGbXRJbnQpIHtcbiAgICByZXR1cm4gKCkgPT5cbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICBwdXNoKCkge1xuICAgICAgICAgICAgdGhpcy5jb3VudCArPSAxO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb3VudDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdDogZm9ybWF0dGVyLFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgfSxcblxuICB1bmlxdWVzKGZuLCBmb3JtYXR0ZXIgPSB1c0ZtdEludCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVuaXE6IFtdLFxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XG4gICAgICAgICAgICBpZiAoIUFycmF5LmZyb20odGhpcy51bmlxKS5pbmNsdWRlcyhyZWNvcmRbYXR0cl0pKSB7XG4gICAgICAgICAgICAgIHRoaXMudW5pcS5wdXNoKHJlY29yZFthdHRyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBmbih0aGlzLnVuaXEpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9ybWF0OiBmbXROb25TdHJpbmcoZm9ybWF0dGVyKSxcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9LFxuXG4gIHN1bShmb3JtYXR0ZXIgPSB1c0ZtdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1bTogMCxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTihOdW1iZXIocmVjb3JkW2F0dHJdKSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdW0gPSByZWNvcmRbYXR0cl07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnN1bSArPSBwYXJzZUZsb2F0KHJlY29yZFthdHRyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1bTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdDogZm10Tm9uU3RyaW5nKGZvcm1hdHRlciksXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSxcblxuICBleHRyZW1lcyhtb2RlLCBmb3JtYXR0ZXIgPSB1c0ZtdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWw6IG51bGwsXG4gICAgICAgICAgc29ydGVyOiBnZXRTb3J0KFxuICAgICAgICAgICAgdHlwZW9mIGRhdGEgIT09ICd1bmRlZmluZWQnID8gZGF0YS5zb3J0ZXJzIDogbnVsbCxcbiAgICAgICAgICAgIGF0dHIsXG4gICAgICAgICAgKSxcbiAgICAgICAgICBwdXNoKHJlY29yZCkge1xuICAgICAgICAgICAgY29uc3QgeCA9IHJlY29yZFthdHRyXTtcbiAgICAgICAgICAgIGlmIChbJ21pbicsICdtYXgnXS5pbmNsdWRlcyhtb2RlKSkge1xuICAgICAgICAgICAgICBjb25zdCBjb2VyY2VkVmFsdWUgPSBOdW1iZXIoeCk7XG4gICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4oY29lcmNlZFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsID1cbiAgICAgICAgICAgICAgICAgICF0aGlzLnZhbCB8fFxuICAgICAgICAgICAgICAgICAgKG1vZGUgPT09ICdtaW4nICYmIHggPCB0aGlzLnZhbCkgfHxcbiAgICAgICAgICAgICAgICAgIChtb2RlID09PSAnbWF4JyAmJiB4ID4gdGhpcy52YWwpXG4gICAgICAgICAgICAgICAgICAgID8geFxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMudmFsO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsID0gTWF0aFttb2RlXShcbiAgICAgICAgICAgICAgICAgIGNvZXJjZWRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgIHRoaXMudmFsICE9PSBudWxsID8gdGhpcy52YWwgOiBjb2VyY2VkVmFsdWUsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgbW9kZSA9PT0gJ2ZpcnN0JyAmJlxuICAgICAgICAgICAgICB0aGlzLnNvcnRlcih4LCB0aGlzLnZhbCAhPT0gbnVsbCA/IHRoaXMudmFsIDogeCkgPD0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRoaXMudmFsID0geDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAgIG1vZGUgPT09ICdsYXN0JyAmJlxuICAgICAgICAgICAgICB0aGlzLnNvcnRlcih4LCB0aGlzLnZhbCAhPT0gbnVsbCA/IHRoaXMudmFsIDogeCkgPj0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRoaXMudmFsID0geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHZhbHVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9ybWF0KHgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdHRlcih4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbnVtSW5wdXRzOiB0eXBlb2YgYXR0ciAhPT0gJ3VuZGVmaW5lZCcgPyAwIDogMSxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSxcblxuICBxdWFudGlsZShxLCBmb3JtYXR0ZXIgPSB1c0ZtdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoW2F0dHJdKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHM6IFtdLFxuICAgICAgICAgIHN0ck1hcDoge30sXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IHJlY29yZFthdHRyXTtcbiAgICAgICAgICAgIGNvbnN0IHggPSBOdW1iZXIodmFsKTtcblxuICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTih4KSkge1xuICAgICAgICAgICAgICB0aGlzLnN0ck1hcFt2YWxdID0gKHRoaXMuc3RyTWFwW3ZhbF0gfHwgMCkgKyAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy52YWxzLnB1c2goeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgdGhpcy52YWxzLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN0ck1hcCkubGVuZ3RoID09PSAwXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnN0ck1hcCkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IE9iamVjdC52YWx1ZXModGhpcy5zdHJNYXApLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgICAgICAgY29uc3QgbWlkZGxlID0gTWF0aC5mbG9vcih2YWx1ZXMubGVuZ3RoIC8gMik7XG5cbiAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuc3RyTWFwKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoICUgMiAhPT0gMFxuICAgICAgICAgICAgICAgID8ga2V5c1ttaWRkbGVdXG4gICAgICAgICAgICAgICAgOiAoa2V5c1ttaWRkbGUgLSAxXSArIGtleXNbbWlkZGxlXSkgLyAyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnZhbHMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgICAgICAgICAgY29uc3QgaSA9ICh0aGlzLnZhbHMubGVuZ3RoIC0gMSkgKiBxO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnZhbHNbTWF0aC5mbG9vcihpKV0gKyB0aGlzLnZhbHNbTWF0aC5jZWlsKGkpXSkgLyAyLjA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JtYXQ6IGZtdE5vblN0cmluZyhmb3JtYXR0ZXIpLFxuICAgICAgICAgIG51bUlucHV0czogdHlwZW9mIGF0dHIgIT09ICd1bmRlZmluZWQnID8gMCA6IDEsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0sXG5cbiAgcnVubmluZ1N0YXQobW9kZSA9ICdtZWFuJywgZGRvZiA9IDEsIGZvcm1hdHRlciA9IHVzRm10KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChbYXR0cl0pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbjogMC4wLFxuICAgICAgICAgIG06IDAuMCxcbiAgICAgICAgICBzOiAwLjAsXG4gICAgICAgICAgc3RyVmFsdWU6IG51bGwsXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHggPSBOdW1iZXIocmVjb3JkW2F0dHJdKTtcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4oeCkpIHtcbiAgICAgICAgICAgICAgdGhpcy5zdHJWYWx1ZSA9XG4gICAgICAgICAgICAgICAgdHlwZW9mIHJlY29yZFthdHRyXSA9PT0gJ3N0cmluZycgPyByZWNvcmRbYXR0cl0gOiB0aGlzLnN0clZhbHVlO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm4gKz0gMS4wO1xuICAgICAgICAgICAgaWYgKHRoaXMubiA9PT0gMS4wKSB7XG4gICAgICAgICAgICAgIHRoaXMubSA9IHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtTmV3ID0gdGhpcy5tICsgKHggLSB0aGlzLm0pIC8gdGhpcy5uO1xuICAgICAgICAgICAgdGhpcy5zICs9ICh4IC0gdGhpcy5tKSAqICh4IC0gbU5ldyk7XG4gICAgICAgICAgICB0aGlzLm0gPSBtTmV3O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJWYWx1ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJWYWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdtZWFuJykge1xuICAgICAgICAgICAgICBpZiAodGhpcy5uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgLyAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLm07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5uIDw9IGRkb2YpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAndmFyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zIC8gKHRoaXMubiAtIGRkb2YpO1xuICAgICAgICAgICAgICBjYXNlICdzdGRldic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnMgLyAodGhpcy5uIC0gZGRvZikpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBtb2RlIGZvciBydW5uaW5nU3RhdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9ybWF0OiBmbXROb25TdHJpbmcoZm9ybWF0dGVyKSxcbiAgICAgICAgICBudW1JbnB1dHM6IHR5cGVvZiBhdHRyICE9PSAndW5kZWZpbmVkJyA/IDAgOiAxLFxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICB9LFxuXG4gIHN1bU92ZXJTdW0oZm9ybWF0dGVyID0gdXNGbXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKFtudW0sIGRlbm9tXSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdW1OdW06IDAsXG4gICAgICAgICAgc3VtRGVub206IDAsXG4gICAgICAgICAgcHVzaChyZWNvcmQpIHtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzTmFOKE51bWJlcihyZWNvcmRbbnVtXSkpKSB7XG4gICAgICAgICAgICAgIHRoaXMuc3VtTnVtICs9IHBhcnNlRmxvYXQocmVjb3JkW251bV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oTnVtYmVyKHJlY29yZFtkZW5vbV0pKSkge1xuICAgICAgICAgICAgICB0aGlzLnN1bURlbm9tICs9IHBhcnNlRmxvYXQocmVjb3JkW2Rlbm9tXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB2YWx1ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN1bU51bSAvIHRoaXMuc3VtRGVub207XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JtYXQ6IGZvcm1hdHRlcixcbiAgICAgICAgICBudW1JbnB1dHM6XG4gICAgICAgICAgICB0eXBlb2YgbnVtICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGVub20gIT09ICd1bmRlZmluZWQnID8gMCA6IDIsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0sXG5cbiAgZnJhY3Rpb25PZih3cmFwcGVkLCB0eXBlID0gJ3RvdGFsJywgZm9ybWF0dGVyID0gdXNGbXRQY3QpIHtcbiAgICByZXR1cm4gKC4uLngpID0+XG4gICAgICBmdW5jdGlvbiAoZGF0YSwgcm93S2V5LCBjb2xLZXkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZWxlY3RvcjogeyB0b3RhbDogW1tdLCBbXV0sIHJvdzogW3Jvd0tleSwgW11dLCBjb2w6IFtbXSwgY29sS2V5XSB9W1xuICAgICAgICAgICAgdHlwZVxuICAgICAgICAgIF0sXG4gICAgICAgICAgaW5uZXI6IHdyYXBwZWQoLi4uQXJyYXkuZnJvbSh4IHx8IFtdKSkoZGF0YSwgcm93S2V5LCBjb2xLZXkpLFxuICAgICAgICAgIHB1c2gocmVjb3JkKSB7XG4gICAgICAgICAgICB0aGlzLmlubmVyLnB1c2gocmVjb3JkKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZvcm1hdDogZm10Tm9uU3RyaW5nKGZvcm1hdHRlciksXG4gICAgICAgICAgdmFsdWUoKSB7XG4gICAgICAgICAgICBjb25zdCBhY2MgPSBkYXRhXG4gICAgICAgICAgICAgIC5nZXRBZ2dyZWdhdG9yKC4uLkFycmF5LmZyb20odGhpcy5zZWxlY3RvciB8fCBbXSkpXG4gICAgICAgICAgICAgIC5pbm5lci52YWx1ZSgpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFjYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXIudmFsdWUoKSAvIGFjYztcbiAgICAgICAgICB9LFxuICAgICAgICAgIG51bUlucHV0czogd3JhcHBlZCguLi5BcnJheS5mcm9tKHggfHwgW10pKSgpLm51bUlucHV0cyxcbiAgICAgICAgfTtcbiAgICAgIH07XG4gIH0sXG59O1xuXG5jb25zdCBleHRlbmRlZEFnZ3JlZ2F0b3JUZW1wbGF0ZXMgPSB7XG4gIGNvdW50VW5pcXVlKGYpIHtcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMudW5pcXVlcyh4ID0+IHgubGVuZ3RoLCBmKTtcbiAgfSxcbiAgbGlzdFVuaXF1ZShzLCBmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnVuaXF1ZXMoeCA9PiB4LmpvaW4ocyksIGYgfHwgKHggPT4geCkpO1xuICB9LFxuICBtYXgoZikge1xuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5leHRyZW1lcygnbWF4JywgZik7XG4gIH0sXG4gIG1pbihmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdtaW4nLCBmKTtcbiAgfSxcbiAgZmlyc3QoZikge1xuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5leHRyZW1lcygnZmlyc3QnLCBmKTtcbiAgfSxcbiAgbGFzdChmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLmV4dHJlbWVzKCdsYXN0JywgZik7XG4gIH0sXG4gIG1lZGlhbihmKSB7XG4gICAgcmV0dXJuIGJhc2VBZ2dyZWdhdG9yVGVtcGxhdGVzLnF1YW50aWxlKDAuNSwgZik7XG4gIH0sXG4gIGF2ZXJhZ2UoZikge1xuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5ydW5uaW5nU3RhdCgnbWVhbicsIDEsIGYpO1xuICB9LFxuICB2YXIoZGRvZiwgZikge1xuICAgIHJldHVybiBiYXNlQWdncmVnYXRvclRlbXBsYXRlcy5ydW5uaW5nU3RhdCgndmFyJywgZGRvZiwgZik7XG4gIH0sXG4gIHN0ZGV2KGRkb2YsIGYpIHtcbiAgICByZXR1cm4gYmFzZUFnZ3JlZ2F0b3JUZW1wbGF0ZXMucnVubmluZ1N0YXQoJ3N0ZGV2JywgZGRvZiwgZik7XG4gIH0sXG59O1xuXG5jb25zdCBhZ2dyZWdhdG9yVGVtcGxhdGVzID0ge1xuICAuLi5iYXNlQWdncmVnYXRvclRlbXBsYXRlcyxcbiAgLi4uZXh0ZW5kZWRBZ2dyZWdhdG9yVGVtcGxhdGVzLFxufTtcblxuLy8gZGVmYXVsdCBhZ2dyZWdhdG9ycyAmIHJlbmRlcmVycyB1c2UgVVMgbmFtaW5nIGFuZCBudW1iZXIgZm9ybWF0dGluZ1xuY29uc3QgYWdncmVnYXRvcnMgPSAodHBsID0+ICh7XG4gIENvdW50OiB0cGwuY291bnQodXNGbXRJbnQpLFxuICAnQ291bnQgVW5pcXVlIFZhbHVlcyc6IHRwbC5jb3VudFVuaXF1ZSh1c0ZtdEludCksXG4gICdMaXN0IFVuaXF1ZSBWYWx1ZXMnOiB0cGwubGlzdFVuaXF1ZSgnLCAnKSxcbiAgU3VtOiB0cGwuc3VtKHVzRm10KSxcbiAgJ0ludGVnZXIgU3VtJzogdHBsLnN1bSh1c0ZtdEludCksXG4gIEF2ZXJhZ2U6IHRwbC5hdmVyYWdlKHVzRm10KSxcbiAgTWVkaWFuOiB0cGwubWVkaWFuKHVzRm10KSxcbiAgJ1NhbXBsZSBWYXJpYW5jZSc6IHRwbC52YXIoMSwgdXNGbXQpLFxuICAnU2FtcGxlIFN0YW5kYXJkIERldmlhdGlvbic6IHRwbC5zdGRldigxLCB1c0ZtdCksXG4gIE1pbmltdW06IHRwbC5taW4odXNGbXQpLFxuICBNYXhpbXVtOiB0cGwubWF4KHVzRm10KSxcbiAgRmlyc3Q6IHRwbC5maXJzdCh1c0ZtdCksXG4gIExhc3Q6IHRwbC5sYXN0KHVzRm10KSxcbiAgJ1N1bSBvdmVyIFN1bSc6IHRwbC5zdW1PdmVyU3VtKHVzRm10KSxcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IHRwbC5mcmFjdGlvbk9mKHRwbC5zdW0oKSwgJ3RvdGFsJywgdXNGbXRQY3QpLFxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIFJvd3MnOiB0cGwuZnJhY3Rpb25PZih0cGwuc3VtKCksICdyb3cnLCB1c0ZtdFBjdCksXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgQ29sdW1ucyc6IHRwbC5mcmFjdGlvbk9mKHRwbC5zdW0oKSwgJ2NvbCcsIHVzRm10UGN0KSxcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFRvdGFsJzogdHBsLmZyYWN0aW9uT2YodHBsLmNvdW50KCksICd0b3RhbCcsIHVzRm10UGN0KSxcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIFJvd3MnOiB0cGwuZnJhY3Rpb25PZih0cGwuY291bnQoKSwgJ3JvdycsIHVzRm10UGN0KSxcbiAgJ0NvdW50IGFzIEZyYWN0aW9uIG9mIENvbHVtbnMnOiB0cGwuZnJhY3Rpb25PZih0cGwuY291bnQoKSwgJ2NvbCcsIHVzRm10UGN0KSxcbn0pKShhZ2dyZWdhdG9yVGVtcGxhdGVzKTtcblxuY29uc3QgbG9jYWxlcyA9IHtcbiAgZW46IHtcbiAgICBhZ2dyZWdhdG9ycyxcbiAgICBsb2NhbGVTdHJpbmdzOiB7XG4gICAgICByZW5kZXJFcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIHJlbmRlcmluZyB0aGUgUGl2b3RUYWJsZSByZXN1bHRzLicsXG4gICAgICBjb21wdXRlRXJyb3I6ICdBbiBlcnJvciBvY2N1cnJlZCBjb21wdXRpbmcgdGhlIFBpdm90VGFibGUgcmVzdWx0cy4nLFxuICAgICAgdWlSZW5kZXJFcnJvcjogJ0FuIGVycm9yIG9jY3VycmVkIHJlbmRlcmluZyB0aGUgUGl2b3RUYWJsZSBVSS4nLFxuICAgICAgc2VsZWN0QWxsOiAnU2VsZWN0IEFsbCcsXG4gICAgICBzZWxlY3ROb25lOiAnU2VsZWN0IE5vbmUnLFxuICAgICAgdG9vTWFueTogJyh0b28gbWFueSB0byBsaXN0KScsXG4gICAgICBmaWx0ZXJSZXN1bHRzOiAnRmlsdGVyIHZhbHVlcycsXG4gICAgICBhcHBseTogJ0FwcGx5JyxcbiAgICAgIGNhbmNlbDogJ0NhbmNlbCcsXG4gICAgICB0b3RhbHM6ICdUb3RhbHMnLFxuICAgICAgdnM6ICd2cycsXG4gICAgICBieTogJ2J5JyxcbiAgICB9LFxuICB9LFxufTtcblxuLy8gZGF0ZUZvcm1hdCBkZXJpdmVyIGwxMG4gcmVxdWlyZXMgbW9udGggYW5kIGRheSBuYW1lcyB0byBiZSBwYXNzZWQgaW4gZGlyZWN0bHlcbmNvbnN0IG10aE5hbWVzRW4gPSBbXG4gICdKYW4nLFxuICAnRmViJyxcbiAgJ01hcicsXG4gICdBcHInLFxuICAnTWF5JyxcbiAgJ0p1bicsXG4gICdKdWwnLFxuICAnQXVnJyxcbiAgJ1NlcCcsXG4gICdPY3QnLFxuICAnTm92JyxcbiAgJ0RlYycsXG5dO1xuY29uc3QgZGF5TmFtZXNFbiA9IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J107XG5jb25zdCB6ZXJvUGFkID0gbnVtYmVyID0+IGAwJHtudW1iZXJ9YC5zdWJzdHIoLTIsIDIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLW1hZ2ljLW51bWJlcnNcblxuY29uc3QgZGVyaXZlcnMgPSB7XG4gIGJpbihjb2wsIGJpbldpZHRoKSB7XG4gICAgcmV0dXJuIHJlY29yZCA9PiByZWNvcmRbY29sXSAtIChyZWNvcmRbY29sXSAlIGJpbldpZHRoKTtcbiAgfSxcbiAgZGF0ZUZvcm1hdChcbiAgICBjb2wsXG4gICAgZm9ybWF0U3RyaW5nLFxuICAgIHV0Y091dHB1dCA9IGZhbHNlLFxuICAgIG10aE5hbWVzID0gbXRoTmFtZXNFbixcbiAgICBkYXlOYW1lcyA9IGRheU5hbWVzRW4sXG4gICkge1xuICAgIGNvbnN0IHV0YyA9IHV0Y091dHB1dCA/ICdVVEMnIDogJyc7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWNvcmQpIHtcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKHJlY29yZFtjb2xdKSk7XG4gICAgICBpZiAoTnVtYmVyLmlzTmFOKGRhdGUpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBmb3JtYXRTdHJpbmcucmVwbGFjZSgvJSguKS9nLCBmdW5jdGlvbiAobSwgcCkge1xuICAgICAgICBzd2l0Y2ggKHApIHtcbiAgICAgICAgICBjYXNlICd5JzpcbiAgICAgICAgICAgIHJldHVybiBkYXRlW2BnZXQke3V0Y31GdWxsWWVhcmBdKCk7XG4gICAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31Nb250aGBdKCkgKyAxKTtcbiAgICAgICAgICBjYXNlICduJzpcbiAgICAgICAgICAgIHJldHVybiBtdGhOYW1lc1tkYXRlW2BnZXQke3V0Y31Nb250aGBdKCldO1xuICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9RGF0ZWBdKCkpO1xuICAgICAgICAgIGNhc2UgJ3cnOlxuICAgICAgICAgICAgcmV0dXJuIGRheU5hbWVzW2RhdGVbYGdldCR7dXRjfURheWBdKCldO1xuICAgICAgICAgIGNhc2UgJ3gnOlxuICAgICAgICAgICAgcmV0dXJuIGRhdGVbYGdldCR7dXRjfURheWBdKCk7XG4gICAgICAgICAgY2FzZSAnSCc6XG4gICAgICAgICAgICByZXR1cm4gemVyb1BhZChkYXRlW2BnZXQke3V0Y31Ib3Vyc2BdKCkpO1xuICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9TWludXRlc2BdKCkpO1xuICAgICAgICAgIGNhc2UgJ1MnOlxuICAgICAgICAgICAgcmV0dXJuIHplcm9QYWQoZGF0ZVtgZ2V0JHt1dGN9U2Vjb25kc2BdKCkpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gYCUke3B9YDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSxcbn07XG5cbi8vIEdpdmVuIGFuIGFycmF5IG9mIGF0dHJpYnV0ZSB2YWx1ZXMsIGNvbnZlcnQgdG8gYSBrZXkgdGhhdFxuLy8gY2FuIGJlIHVzZWQgaW4gb2JqZWN0cy5cbmNvbnN0IGZsYXRLZXkgPSBhdHRyVmFscyA9PiBhdHRyVmFscy5qb2luKFN0cmluZy5mcm9tQ2hhckNvZGUoMCkpO1xuXG4vKlxuRGF0YSBNb2RlbCBjbGFzc1xuKi9cblxuY2xhc3MgUGl2b3REYXRhIHtcbiAgY29uc3RydWN0b3IoaW5wdXRQcm9wcyA9IHt9LCBzdWJ0b3RhbHMgPSB7fSkge1xuICAgIHRoaXMucHJvcHMgPSB7IC4uLlBpdm90RGF0YS5kZWZhdWx0UHJvcHMsIC4uLmlucHV0UHJvcHMgfTtcbiAgICB0aGlzLnByb2Nlc3NSZWNvcmQgPSB0aGlzLnByb2Nlc3NSZWNvcmQuYmluZCh0aGlzKTtcbiAgICBQcm9wVHlwZXMuY2hlY2tQcm9wVHlwZXMoXG4gICAgICBQaXZvdERhdGEucHJvcFR5cGVzLFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgICdwcm9wJyxcbiAgICAgICdQaXZvdERhdGEnLFxuICAgICk7XG5cbiAgICB0aGlzLmFnZ3JlZ2F0b3IgPSB0aGlzLnByb3BzXG4gICAgICAuYWdncmVnYXRvcnNGYWN0b3J5KHRoaXMucHJvcHMuZGVmYXVsdEZvcm1hdHRlcilcbiAgICAgIFt0aGlzLnByb3BzLmFnZ3JlZ2F0b3JOYW1lXSh0aGlzLnByb3BzLnZhbHMpO1xuICAgIHRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnMgPVxuICAgICAgdGhpcy5wcm9wcy5jdXN0b21Gb3JtYXR0ZXJzICYmXG4gICAgICBPYmplY3QuZW50cmllcyh0aGlzLnByb3BzLmN1c3RvbUZvcm1hdHRlcnMpLnJlZHVjZShcbiAgICAgICAgKGFjYywgW2tleSwgY29sdW1uRm9ybWF0dGVyXSkgPT4ge1xuICAgICAgICAgIGFjY1trZXldID0ge307XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoY29sdW1uRm9ybWF0dGVyKS5mb3JFYWNoKChbY29sdW1uLCBmb3JtYXR0ZXJdKSA9PiB7XG4gICAgICAgICAgICBhY2Nba2V5XVtjb2x1bW5dID0gdGhpcy5wcm9wc1xuICAgICAgICAgICAgICAuYWdncmVnYXRvcnNGYWN0b3J5KGZvcm1hdHRlcilcbiAgICAgICAgICAgICAgW3RoaXMucHJvcHMuYWdncmVnYXRvck5hbWVdKHRoaXMucHJvcHMudmFscyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICApO1xuICAgIHRoaXMudHJlZSA9IHt9O1xuICAgIHRoaXMucm93S2V5cyA9IFtdO1xuICAgIHRoaXMuY29sS2V5cyA9IFtdO1xuICAgIHRoaXMucm93VG90YWxzID0ge307XG4gICAgdGhpcy5jb2xUb3RhbHMgPSB7fTtcbiAgICB0aGlzLmFsbFRvdGFsID0gdGhpcy5hZ2dyZWdhdG9yKHRoaXMsIFtdLCBbXSk7XG4gICAgdGhpcy5zdWJ0b3RhbHMgPSBzdWJ0b3RhbHM7XG4gICAgdGhpcy5zb3J0ZWQgPSBmYWxzZTtcblxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBpbnB1dCwgYWNjdW11bGF0aW5nIGRhdGEgZm9yIGNlbGxzXG4gICAgUGl2b3REYXRhLmZvckVhY2hSZWNvcmQodGhpcy5wcm9wcy5kYXRhLCB0aGlzLnByb2Nlc3NSZWNvcmQpO1xuICB9XG5cbiAgZ2V0Rm9ybWF0dGVkQWdncmVnYXRvcihyZWNvcmQsIHRvdGFsc0tleXMpIHtcbiAgICBpZiAoIXRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0b3I7XG4gICAgfVxuICAgIGNvbnN0IFtncm91cE5hbWUsIGdyb3VwVmFsdWVdID1cbiAgICAgIE9iamVjdC5lbnRyaWVzKHJlY29yZCkuZmluZChcbiAgICAgICAgKFtuYW1lLCB2YWx1ZV0pID0+XG4gICAgICAgICAgdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tuYW1lXSAmJlxuICAgICAgICAgIHRoaXMuZm9ybWF0dGVkQWdncmVnYXRvcnNbbmFtZV1bdmFsdWVdLFxuICAgICAgKSB8fCBbXTtcbiAgICBpZiAoXG4gICAgICAhZ3JvdXBOYW1lIHx8XG4gICAgICAhZ3JvdXBWYWx1ZSB8fFxuICAgICAgKHRvdGFsc0tleXMgJiYgIXRvdGFsc0tleXMuaW5jbHVkZXMoZ3JvdXBWYWx1ZSkpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZ2dyZWdhdG9yO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb3JtYXR0ZWRBZ2dyZWdhdG9yc1tncm91cE5hbWVdW2dyb3VwVmFsdWVdIHx8IHRoaXMuYWdncmVnYXRvcjtcbiAgfVxuXG4gIGFyclNvcnQoYXR0cnMsIHBhcnRpYWxPblRvcCwgcmV2ZXJzZSA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc29ydGVyc0FyciA9IGF0dHJzLm1hcChhID0+IGdldFNvcnQodGhpcy5wcm9wcy5zb3J0ZXJzLCBhKSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICBjb25zdCBsaW1pdCA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbWl0OyBpICs9IDEpIHtcbiAgICAgICAgY29uc3Qgc29ydGVyID0gc29ydGVyc0FycltpXTtcbiAgICAgICAgY29uc3QgY29tcGFyaXNvbiA9IHJldmVyc2UgPyBzb3J0ZXIoYltpXSwgYVtpXSkgOiBzb3J0ZXIoYVtpXSwgYltpXSk7XG4gICAgICAgIGlmIChjb21wYXJpc29uICE9PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbXBhcmlzb247XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBwYXJ0aWFsT25Ub3AgPyBhLmxlbmd0aCAtIGIubGVuZ3RoIDogYi5sZW5ndGggLSBhLmxlbmd0aDtcbiAgICB9O1xuICB9XG5cbiAgc29ydEtleXMoKSB7XG4gICAgaWYgKCF0aGlzLnNvcnRlZCkge1xuICAgICAgdGhpcy5zb3J0ZWQgPSB0cnVlO1xuICAgICAgY29uc3QgdiA9IChyLCBjKSA9PiB0aGlzLmdldEFnZ3JlZ2F0b3IociwgYykudmFsdWUoKTtcbiAgICAgIHN3aXRjaCAodGhpcy5wcm9wcy5yb3dPcmRlcikge1xuICAgICAgICBjYXNlICdrZXlfel90b19hJzpcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydChcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLnJvd3MsIHRoaXMuc3VidG90YWxzLnJvd1BhcnRpYWxPblRvcCwgdHJ1ZSksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndmFsdWVfYV90b196JzpcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydCgoYSwgYikgPT4gbmF0dXJhbFNvcnQodihhLCBbXSksIHYoYiwgW10pKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZhbHVlX3pfdG9fYSc6XG4gICAgICAgICAgdGhpcy5yb3dLZXlzLnNvcnQoKGEsIGIpID0+IC1uYXR1cmFsU29ydCh2KGEsIFtdKSwgdihiLCBbXSkpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aGlzLnJvd0tleXMuc29ydChcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLnJvd3MsIHRoaXMuc3VidG90YWxzLnJvd1BhcnRpYWxPblRvcCksXG4gICAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodGhpcy5wcm9wcy5jb2xPcmRlcikge1xuICAgICAgICBjYXNlICdrZXlfel90b19hJzpcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydChcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLmNvbHMsIHRoaXMuc3VidG90YWxzLmNvbFBhcnRpYWxPblRvcCwgdHJ1ZSksXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndmFsdWVfYV90b196JzpcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydCgoYSwgYikgPT4gbmF0dXJhbFNvcnQodihbXSwgYSksIHYoW10sIGIpKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZhbHVlX3pfdG9fYSc6XG4gICAgICAgICAgdGhpcy5jb2xLZXlzLnNvcnQoKGEsIGIpID0+IC1uYXR1cmFsU29ydCh2KFtdLCBhKSwgdihbXSwgYikpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aGlzLmNvbEtleXMuc29ydChcbiAgICAgICAgICAgIHRoaXMuYXJyU29ydCh0aGlzLnByb3BzLmNvbHMsIHRoaXMuc3VidG90YWxzLmNvbFBhcnRpYWxPblRvcCksXG4gICAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRDb2xLZXlzKCkge1xuICAgIHRoaXMuc29ydEtleXMoKTtcbiAgICByZXR1cm4gdGhpcy5jb2xLZXlzO1xuICB9XG5cbiAgZ2V0Um93S2V5cygpIHtcbiAgICB0aGlzLnNvcnRLZXlzKCk7XG4gICAgcmV0dXJuIHRoaXMucm93S2V5cztcbiAgfVxuXG4gIHByb2Nlc3NSZWNvcmQocmVjb3JkKSB7XG4gICAgLy8gdGhpcyBjb2RlIGlzIGNhbGxlZCBpbiBhIHRpZ2h0IGxvb3BcbiAgICBjb25zdCBjb2xLZXkgPSBbXTtcbiAgICBjb25zdCByb3dLZXkgPSBbXTtcbiAgICB0aGlzLnByb3BzLmNvbHMuZm9yRWFjaChjb2wgPT4ge1xuICAgICAgY29sS2V5LnB1c2goY29sIGluIHJlY29yZCA/IHJlY29yZFtjb2xdIDogJ251bGwnKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgcm93S2V5LnB1c2gocm93IGluIHJlY29yZCA/IHJlY29yZFtyb3ddIDogJ251bGwnKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYWxsVG90YWwucHVzaChyZWNvcmQpO1xuXG4gICAgY29uc3Qgcm93U3RhcnQgPSB0aGlzLnN1YnRvdGFscy5yb3dFbmFibGVkID8gMSA6IE1hdGgubWF4KDEsIHJvd0tleS5sZW5ndGgpO1xuICAgIGNvbnN0IGNvbFN0YXJ0ID0gdGhpcy5zdWJ0b3RhbHMuY29sRW5hYmxlZCA/IDEgOiBNYXRoLm1heCgxLCBjb2xLZXkubGVuZ3RoKTtcblxuICAgIGxldCBpc1Jvd1N1YnRvdGFsO1xuICAgIGxldCBpc0NvbFN1YnRvdGFsO1xuICAgIGZvciAobGV0IHJpID0gcm93U3RhcnQ7IHJpIDw9IHJvd0tleS5sZW5ndGg7IHJpICs9IDEpIHtcbiAgICAgIGlzUm93U3VidG90YWwgPSByaSA8IHJvd0tleS5sZW5ndGg7XG4gICAgICBjb25zdCBmUm93S2V5ID0gcm93S2V5LnNsaWNlKDAsIHJpKTtcbiAgICAgIGNvbnN0IGZsYXRSb3dLZXkgPSBmbGF0S2V5KGZSb3dLZXkpO1xuICAgICAgaWYgKCF0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XSkge1xuICAgICAgICB0aGlzLnJvd0tleXMucHVzaChmUm93S2V5KTtcbiAgICAgICAgdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV0gPSB0aGlzLmdldEZvcm1hdHRlZEFnZ3JlZ2F0b3IoXG4gICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgIHJvd0tleSxcbiAgICAgICAgKSh0aGlzLCBmUm93S2V5LCBbXSk7XG4gICAgICB9XG4gICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XS5wdXNoKHJlY29yZCk7XG4gICAgICB0aGlzLnJvd1RvdGFsc1tmbGF0Um93S2V5XS5pc1N1YnRvdGFsID0gaXNSb3dTdWJ0b3RhbDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBjaSA9IGNvbFN0YXJ0OyBjaSA8PSBjb2xLZXkubGVuZ3RoOyBjaSArPSAxKSB7XG4gICAgICBpc0NvbFN1YnRvdGFsID0gY2kgPCBjb2xLZXkubGVuZ3RoO1xuICAgICAgY29uc3QgZkNvbEtleSA9IGNvbEtleS5zbGljZSgwLCBjaSk7XG4gICAgICBjb25zdCBmbGF0Q29sS2V5ID0gZmxhdEtleShmQ29sS2V5KTtcbiAgICAgIGlmICghdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0pIHtcbiAgICAgICAgdGhpcy5jb2xLZXlzLnB1c2goZkNvbEtleSk7XG4gICAgICAgIHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldID0gdGhpcy5nZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKFxuICAgICAgICAgIHJlY29yZCxcbiAgICAgICAgICBjb2xLZXksXG4gICAgICAgICkodGhpcywgW10sIGZDb2xLZXkpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0ucHVzaChyZWNvcmQpO1xuICAgICAgdGhpcy5jb2xUb3RhbHNbZmxhdENvbEtleV0uaXNTdWJ0b3RhbCA9IGlzQ29sU3VidG90YWw7XG4gICAgfVxuXG4gICAgLy8gQW5kIG5vdyBmaWxsIGluIGZvciBhbGwgdGhlIHN1Yi1jZWxscy5cbiAgICBmb3IgKGxldCByaSA9IHJvd1N0YXJ0OyByaSA8PSByb3dLZXkubGVuZ3RoOyByaSArPSAxKSB7XG4gICAgICBpc1Jvd1N1YnRvdGFsID0gcmkgPCByb3dLZXkubGVuZ3RoO1xuICAgICAgY29uc3QgZlJvd0tleSA9IHJvd0tleS5zbGljZSgwLCByaSk7XG4gICAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShmUm93S2V5KTtcbiAgICAgIGlmICghdGhpcy50cmVlW2ZsYXRSb3dLZXldKSB7XG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XSA9IHt9O1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgY2kgPSBjb2xTdGFydDsgY2kgPD0gY29sS2V5Lmxlbmd0aDsgY2kgKz0gMSkge1xuICAgICAgICBpc0NvbFN1YnRvdGFsID0gY2kgPCBjb2xLZXkubGVuZ3RoO1xuICAgICAgICBjb25zdCBmQ29sS2V5ID0gY29sS2V5LnNsaWNlKDAsIGNpKTtcbiAgICAgICAgY29uc3QgZmxhdENvbEtleSA9IGZsYXRLZXkoZkNvbEtleSk7XG4gICAgICAgIGlmICghdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldKSB7XG4gICAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldID0gdGhpcy5nZXRGb3JtYXR0ZWRBZ2dyZWdhdG9yKFxuICAgICAgICAgICAgcmVjb3JkLFxuICAgICAgICAgICkodGhpcywgZlJvd0tleSwgZkNvbEtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLnB1c2gocmVjb3JkKTtcblxuICAgICAgICB0aGlzLnRyZWVbZmxhdFJvd0tleV1bZmxhdENvbEtleV0uaXNSb3dTdWJ0b3RhbCA9IGlzUm93U3VidG90YWw7XG4gICAgICAgIHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XS5pc0NvbFN1YnRvdGFsID0gaXNDb2xTdWJ0b3RhbDtcbiAgICAgICAgdGhpcy50cmVlW2ZsYXRSb3dLZXldW2ZsYXRDb2xLZXldLmlzU3VidG90YWwgPVxuICAgICAgICAgIGlzUm93U3VidG90YWwgfHwgaXNDb2xTdWJ0b3RhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRBZ2dyZWdhdG9yKHJvd0tleSwgY29sS2V5KSB7XG4gICAgbGV0IGFnZztcbiAgICBjb25zdCBmbGF0Um93S2V5ID0gZmxhdEtleShyb3dLZXkpO1xuICAgIGNvbnN0IGZsYXRDb2xLZXkgPSBmbGF0S2V5KGNvbEtleSk7XG4gICAgaWYgKHJvd0tleS5sZW5ndGggPT09IDAgJiYgY29sS2V5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWdnID0gdGhpcy5hbGxUb3RhbDtcbiAgICB9IGVsc2UgaWYgKHJvd0tleS5sZW5ndGggPT09IDApIHtcbiAgICAgIGFnZyA9IHRoaXMuY29sVG90YWxzW2ZsYXRDb2xLZXldO1xuICAgIH0gZWxzZSBpZiAoY29sS2V5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWdnID0gdGhpcy5yb3dUb3RhbHNbZmxhdFJvd0tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFnZyA9IHRoaXMudHJlZVtmbGF0Um93S2V5XVtmbGF0Q29sS2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIGFnZyB8fCB7XG4gICAgICAgIHZhbHVlKCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBmb3JtYXQoKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9LFxuICAgICAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gY2FuIGhhbmRsZSBhcnJheXMgb3IgalF1ZXJ5IHNlbGVjdGlvbnMgb2YgdGFibGVzXG5QaXZvdERhdGEuZm9yRWFjaFJlY29yZCA9IGZ1bmN0aW9uIChpbnB1dCwgcHJvY2Vzc1JlY29yZCkge1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAvLyBhcnJheSBvZiBvYmplY3RzXG4gICAgcmV0dXJuIGlucHV0Lm1hcChyZWNvcmQgPT4gcHJvY2Vzc1JlY29yZChyZWNvcmQpKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IodCgnVW5rbm93biBpbnB1dCBmb3JtYXQnKSk7XG59O1xuXG5QaXZvdERhdGEuZGVmYXVsdFByb3BzID0ge1xuICBhZ2dyZWdhdG9ycyxcbiAgY29sczogW10sXG4gIHJvd3M6IFtdLFxuICB2YWxzOiBbXSxcbiAgYWdncmVnYXRvck5hbWU6ICdDb3VudCcsXG4gIHNvcnRlcnM6IHt9LFxuICByb3dPcmRlcjogJ2tleV9hX3RvX3onLFxuICBjb2xPcmRlcjogJ2tleV9hX3RvX3onLFxufTtcblxuUGl2b3REYXRhLnByb3BUeXBlcyA9IHtcbiAgZGF0YTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5LCBQcm9wVHlwZXMub2JqZWN0LCBQcm9wVHlwZXMuZnVuY10pXG4gICAgLmlzUmVxdWlyZWQsXG4gIGFnZ3JlZ2F0b3JOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBjb2xzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgcm93czogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnN0cmluZyksXG4gIHZhbHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICB2YWx1ZUZpbHRlcjogUHJvcFR5cGVzLm9iamVjdE9mKFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuYm9vbCkpLFxuICBzb3J0ZXJzOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuZnVuYyxcbiAgICBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmZ1bmMpLFxuICBdKSxcbiAgZGVyaXZlZEF0dHJpYnV0ZXM6IFByb3BUeXBlcy5vYmplY3RPZihQcm9wVHlwZXMuZnVuYyksXG4gIHJvd09yZGVyOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICdrZXlfYV90b196JyxcbiAgICAna2V5X3pfdG9fYScsXG4gICAgJ3ZhbHVlX2FfdG9feicsXG4gICAgJ3ZhbHVlX3pfdG9fYScsXG4gIF0pLFxuICBjb2xPcmRlcjogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAna2V5X2FfdG9feicsXG4gICAgJ2tleV96X3RvX2EnLFxuICAgICd2YWx1ZV9hX3RvX3onLFxuICAgICd2YWx1ZV96X3RvX2EnLFxuICBdKSxcbn07XG5cbmV4cG9ydCB7XG4gIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMsXG4gIGFnZ3JlZ2F0b3JzLFxuICBkZXJpdmVycyxcbiAgbG9jYWxlcyxcbiAgbmF0dXJhbFNvcnQsXG4gIG51bWJlckZvcm1hdCxcbiAgZ2V0U29ydCxcbiAgc29ydEFzLFxuICBmbGF0S2V5LFxuICBQaXZvdERhdGEsXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\n");

/***/ }),

/***/ "./packages/superset-ui-core/src/utils/getSelectedText.ts":
/*!****************************************************************!*\
  !*** ./packages/superset-ui-core/src/utils/getSelectedText.ts ***!
  \****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSelectedText: () => (/* binding */ getSelectedText)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nconst getSelectedText = () => {var _window$getSelection;return (_window$getSelection = window.getSelection()) == null ? void 0 : _window$getSelection.toString();};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getSelectedText, \"getSelectedText\", \"/app/superset-frontend/packages/superset-ui-core/src/utils/getSelectedText.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9zdXBlcnNldC11aS1jb3JlL3NyYy91dGlscy9nZXRTZWxlY3RlZFRleHQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL3BhY2thZ2VzL3N1cGVyc2V0LXVpLWNvcmUvc3JjL3V0aWxzL2dldFNlbGVjdGVkVGV4dC50cz85MTIxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTZWxlY3RlZFRleHQgPSAoKSA9PiB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk/LnRvU3RyaW5nKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/superset-ui-core/src/utils/getSelectedText.ts\n");

/***/ }),

/***/ "./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx":
/*!******************************************************************!*\
  !*** ./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PivotTableChart)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js\");\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ant-design/icons */ \"./node_modules/@ant-design/icons/es/icons/MinusSquareOutlined.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/currency-format/CurrencyFormatter.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/number-format/NumberFormatterRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/types/Column.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/getSelectedText.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/utils/featureFlags.ts\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/utilities.js\");\n/* harmony import */ var _react_pivottable__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./react-pivottable */ \"./plugins/plugin-chart-pivot-table/src/react-pivottable/PivotTable.jsx\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./types */ \"./plugins/plugin-chart-pivot-table/src/types.ts\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\nconst Styles = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  ${({ height, width, margin }) => `\n      margin: ${margin}px;\n      height: ${height - margin * 2}px;\n      width: ${typeof width === 'string' ? parseInt(width, 10) : width - margin * 2}px;\n `}\n`;\nconst PivotTableWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled.div`\n  height: 100%;\n  max-width: inherit;\n  overflow: auto;\n`;\nconst METRIC_KEY = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.t)('Metric');\nconst vals = ['value'];\nconst StyledPlusSquareOutlined = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled)((0,_ant_design_icons__WEBPACK_IMPORTED_MODULE_3__[\"default\"]))`\n  stroke: ${({ theme }) => theme.colors.grayscale.light2};\n  stroke-width: 16px;\n`;\nconst StyledMinusSquareOutlined = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.styled)((0,_ant_design_icons__WEBPACK_IMPORTED_MODULE_4__[\"default\"]))`\n  stroke: ${({ theme }) => theme.colors.grayscale.light2};\n  stroke-width: 16px;\n`;\nconst aggregatorsFactory = (formatter) => ({\n  Count: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(formatter),\n  'Count Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.countUnique(formatter),\n  'List Unique Values': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.listUnique(', ', formatter),\n  Sum: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(formatter),\n  Average: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.average(formatter),\n  Median: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.median(formatter),\n  'Sample Variance': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.var(1, formatter),\n  'Sample Standard Deviation': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.stdev(1, formatter),\n  Minimum: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.min(formatter),\n  Maximum: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.max(formatter),\n  First: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.first(formatter),\n  Last: _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.last(formatter),\n  'Sum as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'total', formatter),\n  'Sum as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'row', formatter),\n  'Sum as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.sum(), 'col', formatter),\n  'Count as Fraction of Total': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'total', formatter),\n  'Count as Fraction of Rows': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'row', formatter),\n  'Count as Fraction of Columns': _react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.fractionOf(_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.aggregatorTemplates.count(), 'col', formatter)\n});\n/* If you change this logic, please update the corresponding Python\n * function (https://github.com/apache/superset/blob/master/superset/charts/post_processing.py),\n * or reach out to @betodealmeida.\n */\nfunction PivotTableChart(props) {\n  const { data, height, width, groupbyRows: groupbyRowsRaw, groupbyColumns: groupbyColumnsRaw, metrics, colOrder, rowOrder, aggregateFunction, transposePivot, combineMetric, rowSubtotalPosition, colSubtotalPosition, colTotals, colSubTotals, rowTotals, rowSubTotals, valueFormat, currencyFormat, emitCrossFilters, setDataMask, selectedFilters, verboseMap, columnFormats, currencyFormats, metricsLayout, metricColorFormatters, dateFormatters, onContextMenu, timeGrainSqla } = props;\n  const theme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme)();\n  const defaultFormatter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => currencyFormat != null && currencyFormat.symbol ?\n  new _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n    currency: currencyFormat,\n    d3Format: valueFormat\n  }) :\n  (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.getNumberFormatter)(valueFormat), [valueFormat, currencyFormat]);\n  const customFormatsArray = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => Array.from(new Set([\n  ...Object.keys(columnFormats || {}),\n  ...Object.keys(currencyFormats || {})]\n  )).map((metricName) => [\n  metricName,\n  columnFormats[metricName] || valueFormat,\n  currencyFormats[metricName] || currencyFormat]\n  ), [columnFormats, currencyFormat, currencyFormats, valueFormat]);\n  const hasCustomMetricFormatters = customFormatsArray.length > 0;\n  const metricFormatters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => hasCustomMetricFormatters ?\n  {\n    [METRIC_KEY]: Object.fromEntries(customFormatsArray.map(([metric, d3Format, currency]) => [\n    metric,\n    currency ?\n    new _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      currency,\n      d3Format\n    }) :\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_7__.getNumberFormatter)(d3Format)]\n    ))\n  } :\n  undefined, [customFormatsArray, hasCustomMetricFormatters]);\n  const metricNames = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => metrics.map((metric) => typeof metric === 'string' ? metric : metric.label), [metrics]);\n  const unpivotedData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => data.reduce((acc, record) => [\n  ...acc,\n  ...metricNames.\n  map((name) => ({\n    ...record,\n    [METRIC_KEY]: name,\n    value: record[name]\n  })).\n  filter((record) => record.value !== null)],\n  []), [data, metricNames]);\n  const groupbyRows = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyRowsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__[\"default\"]), [groupbyRowsRaw]);\n  const groupbyColumns = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => groupbyColumnsRaw.map(_superset_ui_core__WEBPACK_IMPORTED_MODULE_8__[\"default\"]), [groupbyColumnsRaw]);\n  const sorters = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    [METRIC_KEY]: (0,_react_pivottable__WEBPACK_IMPORTED_MODULE_5__.sortAs)(metricNames)\n  }), [metricNames]);\n  const [rows, cols] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {\n    let [rows_, cols_] = transposePivot ?\n    [groupbyColumns, groupbyRows] :\n    [groupbyRows, groupbyColumns];\n    if (metricsLayout === _types__WEBPACK_IMPORTED_MODULE_9__.MetricsLayoutEnum.ROWS) {\n      rows_ = combineMetric ? [...rows_, METRIC_KEY] : [METRIC_KEY, ...rows_];\n    } else\n    {\n      cols_ = combineMetric ? [...cols_, METRIC_KEY] : [METRIC_KEY, ...cols_];\n    }\n    return [rows_, cols_];\n  }, [\n  combineMetric,\n  groupbyColumns,\n  groupbyRows,\n  metricsLayout,\n  transposePivot]\n  );\n  const handleChange = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((filters) => {\n    const filterKeys = Object.keys(filters);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    setDataMask({\n      extraFormData: {\n        filters: filterKeys.length === 0 ?\n        undefined :\n        filterKeys.map((key) => {var _groupby$find;\n          const val = filters == null ? void 0 : filters[key];\n          const col = (_groupby$find = groupby.find((item) => {\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isPhysicalColumn)(item)) {\n              return item === key;\n            }\n            if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isAdhocColumn)(item)) {\n              return item.label === key;\n            }\n            return false;\n          })) != null ? _groupby$find : '';\n          if (val === null || val === undefined)\n          return {\n            col,\n            op: 'IS NULL'\n          };\n          return {\n            col,\n            op: 'IN',\n            val: val\n          };\n        })\n      },\n      filterState: {\n        value: filters && Object.keys(filters).length ?\n        Object.values(filters) :\n        null,\n        selectedFilters: filters && Object.keys(filters).length ? filters : null\n      }\n    });\n  }, [groupbyColumnsRaw, groupbyRowsRaw, setDataMask]);\n  const getCrossFilterDataMask = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value) => {\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key;return !!selectedFilters && ((_selectedFilters$key = selectedFilters[key]) == null ? void 0 : _selectedFilters$key.includes(val));};\n    if (!value) {\n      return undefined;\n    }\n    const [key, val] = Object.entries(value)[0];\n    let values = { ...selectedFilters };\n    if (isActiveFilterValue(key, val)) {\n      values = {};\n    } else\n    {\n      values = { [key]: [val] };\n    }\n    const filterKeys = Object.keys(values);\n    const groupby = [...groupbyRowsRaw, ...groupbyColumnsRaw];\n    return {\n      dataMask: {\n        extraFormData: {\n          filters: filterKeys.length === 0 ?\n          undefined :\n          filterKeys.map((key) => {var _values, _groupby$find2;\n            const val = (_values = values) == null ? void 0 : _values[key];\n            const col = (_groupby$find2 = groupby.find((item) => {\n              if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isPhysicalColumn)(item)) {\n                return item === key;\n              }\n              if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_10__.isAdhocColumn)(item)) {\n                return item.label === key;\n              }\n              return false;\n            })) != null ? _groupby$find2 : '';\n            if (val === null || val === undefined)\n            return {\n              col,\n              op: 'IS NULL'\n            };\n            return {\n              col,\n              op: 'IN',\n              val: val\n            };\n          })\n        },\n        filterState: {\n          value: values && Object.keys(values).length ?\n          Object.values(values) :\n          null,\n          selectedFilters: values && Object.keys(values).length ? values : null\n        }\n      },\n      isCurrentValueSelected: isActiveFilterValue(key, val)\n    };\n  }, [groupbyColumnsRaw, groupbyRowsRaw, selectedFilters]);\n  const toggleFilter = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, value, filters, pivotData, isSubtotal, isGrandTotal) => {\n    if (isSubtotal || isGrandTotal || !emitCrossFilters) {\n      return;\n    }\n    // allow selecting text in a cell\n    if ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_11__.getSelectedText)()) {\n      return;\n    }\n    const isActiveFilterValue = (key, val) => {var _selectedFilters$key2;return !!selectedFilters && ((_selectedFilters$key2 = selectedFilters[key]) == null ? void 0 : _selectedFilters$key2.includes(val));};\n    const filtersCopy = { ...filters };\n    delete filtersCopy[METRIC_KEY];\n    const filtersEntries = Object.entries(filtersCopy);\n    if (filtersEntries.length === 0) {\n      return;\n    }\n    const [key, val] = filtersEntries[filtersEntries.length - 1];\n    let updatedFilters = { ...(selectedFilters || {}) };\n    // multi select\n    // if (selectedFilters && isActiveFilterValue(key, val)) {\n    //   updatedFilters[key] = selectedFilters[key].filter((x: DataRecordValue) => x !== val);\n    // } else {\n    //   updatedFilters[key] = [...(selectedFilters?.[key] || []), val];\n    // }\n    // single select\n    if (selectedFilters && isActiveFilterValue(key, val)) {\n      updatedFilters = {};\n    } else\n    {\n      updatedFilters = {\n        [key]: [val]\n      };\n    }\n    if (Array.isArray(updatedFilters[key]) &&\n    updatedFilters[key].length === 0) {\n      delete updatedFilters[key];\n    }\n    handleChange(updatedFilters);\n  }, [emitCrossFilters, selectedFilters, handleChange]);\n  const tableOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    clickRowHeaderCallback: toggleFilter,\n    clickColumnHeaderCallback: toggleFilter,\n    colTotals,\n    colSubTotals,\n    rowTotals,\n    rowSubTotals,\n    highlightHeaderCellsOnHover: emitCrossFilters ||\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.isFeatureEnabled)(_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.FeatureFlag.DrillBy) ||\n    (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.isFeatureEnabled)(_superset_ui_core__WEBPACK_IMPORTED_MODULE_12__.FeatureFlag.DrillToDetail),\n    highlightedHeaderCells: selectedFilters,\n    omittedHighlightHeaderGroups: [METRIC_KEY],\n    cellColorFormatters: { [METRIC_KEY]: metricColorFormatters },\n    dateFormatters\n  }), [\n  colTotals,\n  colSubTotals,\n  dateFormatters,\n  emitCrossFilters,\n  metricColorFormatters,\n  rowTotals,\n  rowSubTotals,\n  selectedFilters,\n  toggleFilter]\n  );\n  const subtotalOptions = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => ({\n    colSubtotalDisplay: { displayOnTop: colSubtotalPosition },\n    rowSubtotalDisplay: { displayOnTop: rowSubtotalPosition },\n    arrowCollapsed: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledPlusSquareOutlined, {}),\n    arrowExpanded: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledMinusSquareOutlined, {})\n  }), [colSubtotalPosition, rowSubtotalPosition]);\n  const handleContextMenu = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, colKey, rowKey, dataPoint) => {\n    if (onContextMenu) {\n      e.preventDefault();\n      e.stopPropagation();\n      const drillToDetailFilters = [];\n      if (colKey && colKey.length > 1) {\n        colKey.forEach((val, i) => {\n          const col = cols[i];\n          const formatter = dateFormatters[col];\n          const formattedVal = (formatter == null ? void 0 : formatter(val)) || String(val);\n          if (i > 0) {\n            drillToDetailFilters.push({\n              col,\n              op: '==',\n              val,\n              formattedVal,\n              grain: formatter ? timeGrainSqla : undefined\n            });\n          }\n        });\n      }\n      if (rowKey) {\n        rowKey.forEach((val, i) => {\n          const col = rows[i];\n          const formatter = dateFormatters[col];\n          const formattedVal = (formatter == null ? void 0 : formatter(val)) || String(val);\n          drillToDetailFilters.push({\n            col,\n            op: '==',\n            val,\n            formattedVal,\n            grain: formatter ? timeGrainSqla : undefined\n          });\n        });\n      }\n      onContextMenu(e.clientX, e.clientY, {\n        drillToDetail: drillToDetailFilters,\n        crossFilter: getCrossFilterDataMask(dataPoint),\n        drillBy: dataPoint && {\n          filters: [\n          {\n            col: Object.keys(dataPoint)[0],\n            op: '==',\n            val: Object.values(dataPoint)[0]\n          }],\n\n          groupbyFieldName: rowKey ? 'groupbyRows' : 'groupbyColumns'\n        }\n      });\n    }\n  }, [\n  cols,\n  dateFormatters,\n  getCrossFilterDataMask,\n  onContextMenu,\n  rows,\n  timeGrainSqla]\n  );\n  return (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(Styles, { height: height, width: width, margin: theme.gridUnit * 4, children:\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(PivotTableWrapper, { children:\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_react_pivottable__WEBPACK_IMPORTED_MODULE_14__[\"default\"], { data: unpivotedData, rows: rows, cols: cols, aggregatorsFactory: aggregatorsFactory, defaultFormatter: defaultFormatter, customFormatters: metricFormatters, aggregatorName: aggregateFunction, vals: vals, colOrder: colOrder, rowOrder: rowOrder, sorters: sorters, tableOptions: tableOptions, subtotalOptions: subtotalOptions, namesMapping: verboseMap, onContextMenu: handleContextMenu }) }\n    ) }\n  );\n}__signature__(PivotTableChart, \"useTheme{theme}\\nuseMemo{defaultFormatter}\\nuseMemo{customFormatsArray}\\nuseMemo{metricFormatters}\\nuseMemo{metricNames}\\nuseMemo{unpivotedData}\\nuseMemo{groupbyRows}\\nuseMemo{groupbyColumns}\\nuseMemo{sorters}\\nuseMemo{[rows, cols]}\\nuseCallback{handleChange}\\nuseCallback{getCrossFilterDataMask}\\nuseCallback{toggleFilter}\\nuseMemo{tableOptions}\\nuseMemo{subtotalOptions}\\nuseCallback{handleContextMenu}\", () => [_superset_ui_core__WEBPACK_IMPORTED_MODULE_1__.useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(Styles, \"Styles\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(PivotTableWrapper, \"PivotTableWrapper\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(METRIC_KEY, \"METRIC_KEY\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(vals, \"vals\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(StyledPlusSquareOutlined, \"StyledPlusSquareOutlined\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(StyledMinusSquareOutlined, \"StyledMinusSquareOutlined\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(aggregatorsFactory, \"aggregatorsFactory\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");reactHotLoader.register(PivotTableChart, \"PivotTableChart\", \"/app/superset-frontend/plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wbHVnaW5zL3BsdWdpbi1jaGFydC1waXZvdC10YWJsZS9zcmMvUGl2b3RUYWJsZUNoYXJ0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBOzs7O0FBSUE7QUFFQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUVBO0FBQ0E7O0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFLQTtBQUtBO0FBS0E7QUFLQTtBQUtBO0FBRUE7Ozs7QUFJQTtBQUNBO0FBaUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQVFBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFJQTtBQUtBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFDQTtBQUlBO0FBRUE7QUFHQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFTQTtBQUNBOztBQUdBO0FBQ0E7QUFDQTs7QUFHQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7O0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBaUJBO0FBQ0E7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vcGx1Z2lucy9wbHVnaW4tY2hhcnQtcGl2b3QtdGFibGUvc3JjL1Bpdm90VGFibGVDaGFydC50c3g/N2QzMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IE1pbnVzU3F1YXJlT3V0bGluZWQsIFBsdXNTcXVhcmVPdXRsaW5lZCB9IGZyb20gJ0BhbnQtZGVzaWduL2ljb25zJztcbmltcG9ydCB7XG4gIEFkaG9jTWV0cmljLFxuICBCaW5hcnlRdWVyeU9iamVjdEZpbHRlckNsYXVzZSxcbiAgQ3VycmVuY3lGb3JtYXR0ZXIsXG4gIERhdGFSZWNvcmRWYWx1ZSxcbiAgRmVhdHVyZUZsYWcsXG4gIGdldENvbHVtbkxhYmVsLFxuICBnZXROdW1iZXJGb3JtYXR0ZXIsXG4gIGdldFNlbGVjdGVkVGV4dCxcbiAgaXNBZGhvY0NvbHVtbixcbiAgaXNGZWF0dXJlRW5hYmxlZCxcbiAgaXNQaHlzaWNhbENvbHVtbixcbiAgTnVtYmVyRm9ybWF0dGVyLFxuICBzdHlsZWQsXG4gIHQsXG4gIHVzZVRoZW1lLFxufSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgeyBhZ2dyZWdhdG9yVGVtcGxhdGVzLCBQaXZvdFRhYmxlLCBzb3J0QXMgfSBmcm9tICcuL3JlYWN0LXBpdm90dGFibGUnO1xuaW1wb3J0IHtcbiAgRmlsdGVyVHlwZSxcbiAgTWV0cmljc0xheW91dEVudW0sXG4gIFBpdm90VGFibGVQcm9wcyxcbiAgUGl2b3RUYWJsZVN0eWxlc1Byb3BzLFxuICBTZWxlY3RlZEZpbHRlcnNUeXBlLFxufSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgU3R5bGVzID0gc3R5bGVkLmRpdjxQaXZvdFRhYmxlU3R5bGVzUHJvcHM+YFxuICAkeyh7IGhlaWdodCwgd2lkdGgsIG1hcmdpbiB9KSA9PiBgXG4gICAgICBtYXJnaW46ICR7bWFyZ2lufXB4O1xuICAgICAgaGVpZ2h0OiAke2hlaWdodCAtIG1hcmdpbiAqIDJ9cHg7XG4gICAgICB3aWR0aDogJHtcbiAgICAgICAgdHlwZW9mIHdpZHRoID09PSAnc3RyaW5nJyA/IHBhcnNlSW50KHdpZHRoLCAxMCkgOiB3aWR0aCAtIG1hcmdpbiAqIDJcbiAgICAgIH1weDtcbiBgfVxuYDtcblxuY29uc3QgUGl2b3RUYWJsZVdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBoZWlnaHQ6IDEwMCU7XG4gIG1heC13aWR0aDogaW5oZXJpdDtcbiAgb3ZlcmZsb3c6IGF1dG87XG5gO1xuXG5jb25zdCBNRVRSSUNfS0VZID0gdCgnTWV0cmljJyk7XG5jb25zdCB2YWxzID0gWyd2YWx1ZSddO1xuXG5jb25zdCBTdHlsZWRQbHVzU3F1YXJlT3V0bGluZWQgPSBzdHlsZWQoUGx1c1NxdWFyZU91dGxpbmVkKWBcbiAgc3Ryb2tlOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgc3Ryb2tlLXdpZHRoOiAxNnB4O1xuYDtcblxuY29uc3QgU3R5bGVkTWludXNTcXVhcmVPdXRsaW5lZCA9IHN0eWxlZChNaW51c1NxdWFyZU91dGxpbmVkKWBcbiAgc3Ryb2tlOiAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNvbG9ycy5ncmF5c2NhbGUubGlnaHQyfTtcbiAgc3Ryb2tlLXdpZHRoOiAxNnB4O1xuYDtcblxuY29uc3QgYWdncmVnYXRvcnNGYWN0b3J5ID0gKGZvcm1hdHRlcjogTnVtYmVyRm9ybWF0dGVyKSA9PiAoe1xuICBDb3VudDogYWdncmVnYXRvclRlbXBsYXRlcy5jb3VudChmb3JtYXR0ZXIpLFxuICAnQ291bnQgVW5pcXVlIFZhbHVlcyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnRVbmlxdWUoZm9ybWF0dGVyKSxcbiAgJ0xpc3QgVW5pcXVlIFZhbHVlcyc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMubGlzdFVuaXF1ZSgnLCAnLCBmb3JtYXR0ZXIpLFxuICBTdW06IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuc3VtKGZvcm1hdHRlciksXG4gIEF2ZXJhZ2U6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuYXZlcmFnZShmb3JtYXR0ZXIpLFxuICBNZWRpYW46IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMubWVkaWFuKGZvcm1hdHRlciksXG4gICdTYW1wbGUgVmFyaWFuY2UnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLnZhcigxLCBmb3JtYXR0ZXIpLFxuICAnU2FtcGxlIFN0YW5kYXJkIERldmlhdGlvbic6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuc3RkZXYoMSwgZm9ybWF0dGVyKSxcbiAgTWluaW11bTogYWdncmVnYXRvclRlbXBsYXRlcy5taW4oZm9ybWF0dGVyKSxcbiAgTWF4aW11bTogYWdncmVnYXRvclRlbXBsYXRlcy5tYXgoZm9ybWF0dGVyKSxcbiAgRmlyc3Q6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZmlyc3QoZm9ybWF0dGVyKSxcbiAgTGFzdDogYWdncmVnYXRvclRlbXBsYXRlcy5sYXN0KGZvcm1hdHRlciksXG4gICdTdW0gYXMgRnJhY3Rpb24gb2YgVG90YWwnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcbiAgICAndG90YWwnLFxuICAgIGZvcm1hdHRlcixcbiAgKSxcbiAgJ1N1bSBhcyBGcmFjdGlvbiBvZiBSb3dzJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuc3VtKCksXG4gICAgJ3JvdycsXG4gICAgZm9ybWF0dGVyLFxuICApLFxuICAnU3VtIGFzIEZyYWN0aW9uIG9mIENvbHVtbnMnOiBhZ2dyZWdhdG9yVGVtcGxhdGVzLmZyYWN0aW9uT2YoXG4gICAgYWdncmVnYXRvclRlbXBsYXRlcy5zdW0oKSxcbiAgICAnY29sJyxcbiAgICBmb3JtYXR0ZXIsXG4gICksXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBUb3RhbCc6IGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuZnJhY3Rpb25PZihcbiAgICBhZ2dyZWdhdG9yVGVtcGxhdGVzLmNvdW50KCksXG4gICAgJ3RvdGFsJyxcbiAgICBmb3JtYXR0ZXIsXG4gICksXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBSb3dzJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoKSxcbiAgICAncm93JyxcbiAgICBmb3JtYXR0ZXIsXG4gICksXG4gICdDb3VudCBhcyBGcmFjdGlvbiBvZiBDb2x1bW5zJzogYWdncmVnYXRvclRlbXBsYXRlcy5mcmFjdGlvbk9mKFxuICAgIGFnZ3JlZ2F0b3JUZW1wbGF0ZXMuY291bnQoKSxcbiAgICAnY29sJyxcbiAgICBmb3JtYXR0ZXIsXG4gICksXG59KTtcblxuLyogSWYgeW91IGNoYW5nZSB0aGlzIGxvZ2ljLCBwbGVhc2UgdXBkYXRlIHRoZSBjb3JyZXNwb25kaW5nIFB5dGhvblxuICogZnVuY3Rpb24gKGh0dHBzOi8vZ2l0aHViLmNvbS9hcGFjaGUvc3VwZXJzZXQvYmxvYi9tYXN0ZXIvc3VwZXJzZXQvY2hhcnRzL3Bvc3RfcHJvY2Vzc2luZy5weSksXG4gKiBvciByZWFjaCBvdXQgdG8gQGJldG9kZWFsbWVpZGEuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBpdm90VGFibGVDaGFydChwcm9wczogUGl2b3RUYWJsZVByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIGhlaWdodCxcbiAgICB3aWR0aCxcbiAgICBncm91cGJ5Um93czogZ3JvdXBieVJvd3NSYXcsXG4gICAgZ3JvdXBieUNvbHVtbnM6IGdyb3VwYnlDb2x1bW5zUmF3LFxuICAgIG1ldHJpY3MsXG4gICAgY29sT3JkZXIsXG4gICAgcm93T3JkZXIsXG4gICAgYWdncmVnYXRlRnVuY3Rpb24sXG4gICAgdHJhbnNwb3NlUGl2b3QsXG4gICAgY29tYmluZU1ldHJpYyxcbiAgICByb3dTdWJ0b3RhbFBvc2l0aW9uLFxuICAgIGNvbFN1YnRvdGFsUG9zaXRpb24sXG4gICAgY29sVG90YWxzLFxuICAgIGNvbFN1YlRvdGFscyxcbiAgICByb3dUb3RhbHMsXG4gICAgcm93U3ViVG90YWxzLFxuICAgIHZhbHVlRm9ybWF0LFxuICAgIGN1cnJlbmN5Rm9ybWF0LFxuICAgIGVtaXRDcm9zc0ZpbHRlcnMsXG4gICAgc2V0RGF0YU1hc2ssXG4gICAgc2VsZWN0ZWRGaWx0ZXJzLFxuICAgIHZlcmJvc2VNYXAsXG4gICAgY29sdW1uRm9ybWF0cyxcbiAgICBjdXJyZW5jeUZvcm1hdHMsXG4gICAgbWV0cmljc0xheW91dCxcbiAgICBtZXRyaWNDb2xvckZvcm1hdHRlcnMsXG4gICAgZGF0ZUZvcm1hdHRlcnMsXG4gICAgb25Db250ZXh0TWVudSxcbiAgICB0aW1lR3JhaW5TcWxhLFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuICBjb25zdCBkZWZhdWx0Rm9ybWF0dGVyID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgY3VycmVuY3lGb3JtYXQ/LnN5bWJvbFxuICAgICAgICA/IG5ldyBDdXJyZW5jeUZvcm1hdHRlcih7XG4gICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lGb3JtYXQsXG4gICAgICAgICAgICBkM0Zvcm1hdDogdmFsdWVGb3JtYXQsXG4gICAgICAgICAgfSlcbiAgICAgICAgOiBnZXROdW1iZXJGb3JtYXR0ZXIodmFsdWVGb3JtYXQpLFxuICAgIFt2YWx1ZUZvcm1hdCwgY3VycmVuY3lGb3JtYXRdLFxuICApO1xuICBjb25zdCBjdXN0b21Gb3JtYXRzQXJyYXkgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBBcnJheS5mcm9tKFxuICAgICAgICBuZXcgU2V0KFtcbiAgICAgICAgICAuLi5PYmplY3Qua2V5cyhjb2x1bW5Gb3JtYXRzIHx8IHt9KSxcbiAgICAgICAgICAuLi5PYmplY3Qua2V5cyhjdXJyZW5jeUZvcm1hdHMgfHwge30pLFxuICAgICAgICBdKSxcbiAgICAgICkubWFwKG1ldHJpY05hbWUgPT4gW1xuICAgICAgICBtZXRyaWNOYW1lLFxuICAgICAgICBjb2x1bW5Gb3JtYXRzW21ldHJpY05hbWVdIHx8IHZhbHVlRm9ybWF0LFxuICAgICAgICBjdXJyZW5jeUZvcm1hdHNbbWV0cmljTmFtZV0gfHwgY3VycmVuY3lGb3JtYXQsXG4gICAgICBdKSxcbiAgICBbY29sdW1uRm9ybWF0cywgY3VycmVuY3lGb3JtYXQsIGN1cnJlbmN5Rm9ybWF0cywgdmFsdWVGb3JtYXRdLFxuICApO1xuICBjb25zdCBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzID0gY3VzdG9tRm9ybWF0c0FycmF5Lmxlbmd0aCA+IDA7XG4gIGNvbnN0IG1ldHJpY0Zvcm1hdHRlcnMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBoYXNDdXN0b21NZXRyaWNGb3JtYXR0ZXJzXG4gICAgICAgID8ge1xuICAgICAgICAgICAgW01FVFJJQ19LRVldOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICAgIGN1c3RvbUZvcm1hdHNBcnJheS5tYXAoKFttZXRyaWMsIGQzRm9ybWF0LCBjdXJyZW5jeV0pID0+IFtcbiAgICAgICAgICAgICAgICBtZXRyaWMsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lcbiAgICAgICAgICAgICAgICAgID8gbmV3IEN1cnJlbmN5Rm9ybWF0dGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeSxcbiAgICAgICAgICAgICAgICAgICAgICBkM0Zvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIDogZ2V0TnVtYmVyRm9ybWF0dGVyKGQzRm9ybWF0KSxcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICApLFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgW2N1c3RvbUZvcm1hdHNBcnJheSwgaGFzQ3VzdG9tTWV0cmljRm9ybWF0dGVyc10sXG4gICk7XG5cbiAgY29uc3QgbWV0cmljTmFtZXMgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBtZXRyaWNzLm1hcCgobWV0cmljOiBzdHJpbmcgfCBBZGhvY01ldHJpYykgPT5cbiAgICAgICAgdHlwZW9mIG1ldHJpYyA9PT0gJ3N0cmluZycgPyBtZXRyaWMgOiAobWV0cmljLmxhYmVsIGFzIHN0cmluZyksXG4gICAgICApLFxuICAgIFttZXRyaWNzXSxcbiAgKTtcblxuICBjb25zdCB1bnBpdm90ZWREYXRhID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgZGF0YS5yZWR1Y2UoXG4gICAgICAgIChhY2M6IFJlY29yZDxzdHJpbmcsIGFueT5bXSwgcmVjb3JkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiBbXG4gICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgIC4uLm1ldHJpY05hbWVzXG4gICAgICAgICAgICAubWFwKChuYW1lOiBzdHJpbmcpID0+ICh7XG4gICAgICAgICAgICAgIC4uLnJlY29yZCxcbiAgICAgICAgICAgICAgW01FVFJJQ19LRVldOiBuYW1lLFxuICAgICAgICAgICAgICB2YWx1ZTogcmVjb3JkW25hbWVdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAuZmlsdGVyKHJlY29yZCA9PiByZWNvcmQudmFsdWUgIT09IG51bGwpLFxuICAgICAgICBdLFxuICAgICAgICBbXSxcbiAgICAgICksXG4gICAgW2RhdGEsIG1ldHJpY05hbWVzXSxcbiAgKTtcbiAgY29uc3QgZ3JvdXBieVJvd3MgPSB1c2VNZW1vKFxuICAgICgpID0+IGdyb3VwYnlSb3dzUmF3Lm1hcChnZXRDb2x1bW5MYWJlbCksXG4gICAgW2dyb3VwYnlSb3dzUmF3XSxcbiAgKTtcbiAgY29uc3QgZ3JvdXBieUNvbHVtbnMgPSB1c2VNZW1vKFxuICAgICgpID0+IGdyb3VwYnlDb2x1bW5zUmF3Lm1hcChnZXRDb2x1bW5MYWJlbCksXG4gICAgW2dyb3VwYnlDb2x1bW5zUmF3XSxcbiAgKTtcblxuICBjb25zdCBzb3J0ZXJzID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgW01FVFJJQ19LRVldOiBzb3J0QXMobWV0cmljTmFtZXMpLFxuICAgIH0pLFxuICAgIFttZXRyaWNOYW1lc10sXG4gICk7XG5cbiAgY29uc3QgW3Jvd3MsIGNvbHNdID0gdXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IFtyb3dzXywgY29sc19dID0gdHJhbnNwb3NlUGl2b3RcbiAgICAgID8gW2dyb3VwYnlDb2x1bW5zLCBncm91cGJ5Um93c11cbiAgICAgIDogW2dyb3VwYnlSb3dzLCBncm91cGJ5Q29sdW1uc107XG5cbiAgICBpZiAobWV0cmljc0xheW91dCA9PT0gTWV0cmljc0xheW91dEVudW0uUk9XUykge1xuICAgICAgcm93c18gPSBjb21iaW5lTWV0cmljID8gWy4uLnJvd3NfLCBNRVRSSUNfS0VZXSA6IFtNRVRSSUNfS0VZLCAuLi5yb3dzX107XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbHNfID0gY29tYmluZU1ldHJpYyA/IFsuLi5jb2xzXywgTUVUUklDX0tFWV0gOiBbTUVUUklDX0tFWSwgLi4uY29sc19dO1xuICAgIH1cbiAgICByZXR1cm4gW3Jvd3NfLCBjb2xzX107XG4gIH0sIFtcbiAgICBjb21iaW5lTWV0cmljLFxuICAgIGdyb3VwYnlDb2x1bW5zLFxuICAgIGdyb3VwYnlSb3dzLFxuICAgIG1ldHJpY3NMYXlvdXQsXG4gICAgdHJhbnNwb3NlUGl2b3QsXG4gIF0pO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IHVzZUNhbGxiYWNrKFxuICAgIChmaWx0ZXJzOiBTZWxlY3RlZEZpbHRlcnNUeXBlKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJLZXlzID0gT2JqZWN0LmtleXMoZmlsdGVycyk7XG4gICAgICBjb25zdCBncm91cGJ5ID0gWy4uLmdyb3VwYnlSb3dzUmF3LCAuLi5ncm91cGJ5Q29sdW1uc1Jhd107XG4gICAgICBzZXREYXRhTWFzayh7XG4gICAgICAgIGV4dHJhRm9ybURhdGE6IHtcbiAgICAgICAgICBmaWx0ZXJzOlxuICAgICAgICAgICAgZmlsdGVyS2V5cy5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgOiBmaWx0ZXJLZXlzLm1hcChrZXkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZmlsdGVycz8uW2tleV07XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb2wgPVxuICAgICAgICAgICAgICAgICAgICBncm91cGJ5LmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUGh5c2ljYWxDb2x1bW4oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtID09PSBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FkaG9jQ29sdW1uKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5sYWJlbCA9PT0ga2V5O1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pID8/ICcnO1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb2wsXG4gICAgICAgICAgICAgICAgICAgICAgb3A6ICdJUyBOVUxMJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgb3A6ICdJTicsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogdmFsIGFzIChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdLFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgICAgZmlsdGVyU3RhdGU6IHtcbiAgICAgICAgICB2YWx1ZTpcbiAgICAgICAgICAgIGZpbHRlcnMgJiYgT2JqZWN0LmtleXMoZmlsdGVycykubGVuZ3RoXG4gICAgICAgICAgICAgID8gT2JqZWN0LnZhbHVlcyhmaWx0ZXJzKVxuICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzOlxuICAgICAgICAgICAgZmlsdGVycyAmJiBPYmplY3Qua2V5cyhmaWx0ZXJzKS5sZW5ndGggPyBmaWx0ZXJzIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2dyb3VwYnlDb2x1bW5zUmF3LCBncm91cGJ5Um93c1Jhdywgc2V0RGF0YU1hc2tdLFxuICApO1xuXG4gIGNvbnN0IGdldENyb3NzRmlsdGVyRGF0YU1hc2sgPSB1c2VDYWxsYmFjayhcbiAgICAodmFsdWU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pID0+IHtcbiAgICAgIGNvbnN0IGlzQWN0aXZlRmlsdGVyVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbDogRGF0YVJlY29yZFZhbHVlKSA9PlxuICAgICAgICAhIXNlbGVjdGVkRmlsdGVycyAmJiBzZWxlY3RlZEZpbHRlcnNba2V5XT8uaW5jbHVkZXModmFsKTtcblxuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBba2V5LCB2YWxdID0gT2JqZWN0LmVudHJpZXModmFsdWUpWzBdO1xuICAgICAgbGV0IHZhbHVlcyA9IHsgLi4uc2VsZWN0ZWRGaWx0ZXJzIH07XG4gICAgICBpZiAoaXNBY3RpdmVGaWx0ZXJWYWx1ZShrZXksIHZhbCkpIHtcbiAgICAgICAgdmFsdWVzID0ge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZXMgPSB7IFtrZXldOiBbdmFsXSB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWx0ZXJLZXlzID0gT2JqZWN0LmtleXModmFsdWVzKTtcbiAgICAgIGNvbnN0IGdyb3VwYnkgPSBbLi4uZ3JvdXBieVJvd3NSYXcsIC4uLmdyb3VwYnlDb2x1bW5zUmF3XTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGFNYXNrOiB7XG4gICAgICAgICAgZXh0cmFGb3JtRGF0YToge1xuICAgICAgICAgICAgZmlsdGVyczpcbiAgICAgICAgICAgICAgZmlsdGVyS2V5cy5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIDogZmlsdGVyS2V5cy5tYXAoa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdmFsdWVzPy5ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sID1cbiAgICAgICAgICAgICAgICAgICAgICBncm91cGJ5LmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNQaHlzaWNhbENvbHVtbihpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSA9PT0ga2V5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWRob2NDb2x1bW4oaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwgPT09IGtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICB9KSA/PyAnJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICdJUyBOVUxMJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICAgICAgICBvcDogJ0lOJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAgICAgICB2YWw6IHZhbCBhcyAoc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbilbXSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZmlsdGVyU3RhdGU6IHtcbiAgICAgICAgICAgIHZhbHVlOlxuICAgICAgICAgICAgICB2YWx1ZXMgJiYgT2JqZWN0LmtleXModmFsdWVzKS5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IE9iamVjdC52YWx1ZXModmFsdWVzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIHNlbGVjdGVkRmlsdGVyczpcbiAgICAgICAgICAgICAgdmFsdWVzICYmIE9iamVjdC5rZXlzKHZhbHVlcykubGVuZ3RoID8gdmFsdWVzIDogbnVsbCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBpc0N1cnJlbnRWYWx1ZVNlbGVjdGVkOiBpc0FjdGl2ZUZpbHRlclZhbHVlKGtleSwgdmFsKSxcbiAgICAgIH07XG4gICAgfSxcbiAgICBbZ3JvdXBieUNvbHVtbnNSYXcsIGdyb3VwYnlSb3dzUmF3LCBzZWxlY3RlZEZpbHRlcnNdLFxuICApO1xuXG4gIGNvbnN0IHRvZ2dsZUZpbHRlciA9IHVzZUNhbGxiYWNrKFxuICAgIChcbiAgICAgIGU6IE1vdXNlRXZlbnQsXG4gICAgICB2YWx1ZTogc3RyaW5nLFxuICAgICAgZmlsdGVyczogRmlsdGVyVHlwZSxcbiAgICAgIHBpdm90RGF0YTogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgIGlzU3VidG90YWw6IGJvb2xlYW4sXG4gICAgICBpc0dyYW5kVG90YWw6IGJvb2xlYW4sXG4gICAgKSA9PiB7XG4gICAgICBpZiAoaXNTdWJ0b3RhbCB8fCBpc0dyYW5kVG90YWwgfHwgIWVtaXRDcm9zc0ZpbHRlcnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBhbGxvdyBzZWxlY3RpbmcgdGV4dCBpbiBhIGNlbGxcbiAgICAgIGlmIChnZXRTZWxlY3RlZFRleHQoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGlzQWN0aXZlRmlsdGVyVmFsdWUgPSAoa2V5OiBzdHJpbmcsIHZhbDogRGF0YVJlY29yZFZhbHVlKSA9PlxuICAgICAgICAhIXNlbGVjdGVkRmlsdGVycyAmJiBzZWxlY3RlZEZpbHRlcnNba2V5XT8uaW5jbHVkZXModmFsKTtcblxuICAgICAgY29uc3QgZmlsdGVyc0NvcHkgPSB7IC4uLmZpbHRlcnMgfTtcbiAgICAgIGRlbGV0ZSBmaWx0ZXJzQ29weVtNRVRSSUNfS0VZXTtcblxuICAgICAgY29uc3QgZmlsdGVyc0VudHJpZXMgPSBPYmplY3QuZW50cmllcyhmaWx0ZXJzQ29weSk7XG4gICAgICBpZiAoZmlsdGVyc0VudHJpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgW2tleSwgdmFsXSA9IGZpbHRlcnNFbnRyaWVzW2ZpbHRlcnNFbnRyaWVzLmxlbmd0aCAtIDFdO1xuXG4gICAgICBsZXQgdXBkYXRlZEZpbHRlcnMgPSB7IC4uLihzZWxlY3RlZEZpbHRlcnMgfHwge30pIH07XG4gICAgICAvLyBtdWx0aSBzZWxlY3RcbiAgICAgIC8vIGlmIChzZWxlY3RlZEZpbHRlcnMgJiYgaXNBY3RpdmVGaWx0ZXJWYWx1ZShrZXksIHZhbCkpIHtcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IHNlbGVjdGVkRmlsdGVyc1trZXldLmZpbHRlcigoeDogRGF0YVJlY29yZFZhbHVlKSA9PiB4ICE9PSB2YWwpO1xuICAgICAgLy8gfSBlbHNlIHtcbiAgICAgIC8vICAgdXBkYXRlZEZpbHRlcnNba2V5XSA9IFsuLi4oc2VsZWN0ZWRGaWx0ZXJzPy5ba2V5XSB8fCBbXSksIHZhbF07XG4gICAgICAvLyB9XG4gICAgICAvLyBzaW5nbGUgc2VsZWN0XG4gICAgICBpZiAoc2VsZWN0ZWRGaWx0ZXJzICYmIGlzQWN0aXZlRmlsdGVyVmFsdWUoa2V5LCB2YWwpKSB7XG4gICAgICAgIHVwZGF0ZWRGaWx0ZXJzID0ge307XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGVkRmlsdGVycyA9IHtcbiAgICAgICAgICBba2V5XTogW3ZhbF0sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIEFycmF5LmlzQXJyYXkodXBkYXRlZEZpbHRlcnNba2V5XSkgJiZcbiAgICAgICAgdXBkYXRlZEZpbHRlcnNba2V5XS5sZW5ndGggPT09IDBcbiAgICAgICkge1xuICAgICAgICBkZWxldGUgdXBkYXRlZEZpbHRlcnNba2V5XTtcbiAgICAgIH1cbiAgICAgIGhhbmRsZUNoYW5nZSh1cGRhdGVkRmlsdGVycyk7XG4gICAgfSxcbiAgICBbZW1pdENyb3NzRmlsdGVycywgc2VsZWN0ZWRGaWx0ZXJzLCBoYW5kbGVDaGFuZ2VdLFxuICApO1xuXG4gIGNvbnN0IHRhYmxlT3B0aW9ucyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIGNsaWNrUm93SGVhZGVyQ2FsbGJhY2s6IHRvZ2dsZUZpbHRlcixcbiAgICAgIGNsaWNrQ29sdW1uSGVhZGVyQ2FsbGJhY2s6IHRvZ2dsZUZpbHRlcixcbiAgICAgIGNvbFRvdGFscyxcbiAgICAgIGNvbFN1YlRvdGFscyxcbiAgICAgIHJvd1RvdGFscyxcbiAgICAgIHJvd1N1YlRvdGFscyxcbiAgICAgIGhpZ2hsaWdodEhlYWRlckNlbGxzT25Ib3ZlcjpcbiAgICAgICAgZW1pdENyb3NzRmlsdGVycyB8fFxuICAgICAgICBpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLkRyaWxsQnkpIHx8XG4gICAgICAgIGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuRHJpbGxUb0RldGFpbCksXG4gICAgICBoaWdobGlnaHRlZEhlYWRlckNlbGxzOiBzZWxlY3RlZEZpbHRlcnMsXG4gICAgICBvbWl0dGVkSGlnaGxpZ2h0SGVhZGVyR3JvdXBzOiBbTUVUUklDX0tFWV0sXG4gICAgICBjZWxsQ29sb3JGb3JtYXR0ZXJzOiB7IFtNRVRSSUNfS0VZXTogbWV0cmljQ29sb3JGb3JtYXR0ZXJzIH0sXG4gICAgICBkYXRlRm9ybWF0dGVycyxcbiAgICB9KSxcbiAgICBbXG4gICAgICBjb2xUb3RhbHMsXG4gICAgICBjb2xTdWJUb3RhbHMsXG4gICAgICBkYXRlRm9ybWF0dGVycyxcbiAgICAgIGVtaXRDcm9zc0ZpbHRlcnMsXG4gICAgICBtZXRyaWNDb2xvckZvcm1hdHRlcnMsXG4gICAgICByb3dUb3RhbHMsXG4gICAgICByb3dTdWJUb3RhbHMsXG4gICAgICBzZWxlY3RlZEZpbHRlcnMsXG4gICAgICB0b2dnbGVGaWx0ZXIsXG4gICAgXSxcbiAgKTtcblxuICBjb25zdCBzdWJ0b3RhbE9wdGlvbnMgPSB1c2VNZW1vKFxuICAgICgpID0+ICh7XG4gICAgICBjb2xTdWJ0b3RhbERpc3BsYXk6IHsgZGlzcGxheU9uVG9wOiBjb2xTdWJ0b3RhbFBvc2l0aW9uIH0sXG4gICAgICByb3dTdWJ0b3RhbERpc3BsYXk6IHsgZGlzcGxheU9uVG9wOiByb3dTdWJ0b3RhbFBvc2l0aW9uIH0sXG4gICAgICBhcnJvd0NvbGxhcHNlZDogPFN0eWxlZFBsdXNTcXVhcmVPdXRsaW5lZCAvPixcbiAgICAgIGFycm93RXhwYW5kZWQ6IDxTdHlsZWRNaW51c1NxdWFyZU91dGxpbmVkIC8+LFxuICAgIH0pLFxuICAgIFtjb2xTdWJ0b3RhbFBvc2l0aW9uLCByb3dTdWJ0b3RhbFBvc2l0aW9uXSxcbiAgKTtcblxuICBjb25zdCBoYW5kbGVDb250ZXh0TWVudSA9IHVzZUNhbGxiYWNrKFxuICAgIChcbiAgICAgIGU6IE1vdXNlRXZlbnQsXG4gICAgICBjb2xLZXk6IChzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKVtdIHwgdW5kZWZpbmVkLFxuICAgICAgcm93S2V5OiAoc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbilbXSB8IHVuZGVmaW5lZCxcbiAgICAgIGRhdGFQb2ludDogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSxcbiAgICApID0+IHtcbiAgICAgIGlmIChvbkNvbnRleHRNZW51KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgZHJpbGxUb0RldGFpbEZpbHRlcnM6IEJpbmFyeVF1ZXJ5T2JqZWN0RmlsdGVyQ2xhdXNlW10gPSBbXTtcbiAgICAgICAgaWYgKGNvbEtleSAmJiBjb2xLZXkubGVuZ3RoID4gMSkge1xuICAgICAgICAgIGNvbEtleS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbCA9IGNvbHNbaV07XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZXIgPSBkYXRlRm9ybWF0dGVyc1tjb2xdO1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVmFsID0gZm9ybWF0dGVyPy4odmFsIGFzIG51bWJlcikgfHwgU3RyaW5nKHZhbCk7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgZHJpbGxUb0RldGFpbEZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgICAgIG9wOiAnPT0nLFxuICAgICAgICAgICAgICAgIHZhbCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRWYWwsXG4gICAgICAgICAgICAgICAgZ3JhaW46IGZvcm1hdHRlciA/IHRpbWVHcmFpblNxbGEgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3dLZXkpIHtcbiAgICAgICAgICByb3dLZXkuZm9yRWFjaCgodmFsLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb2wgPSByb3dzW2ldO1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gZGF0ZUZvcm1hdHRlcnNbY29sXTtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFZhbCA9IGZvcm1hdHRlcj8uKHZhbCBhcyBudW1iZXIpIHx8IFN0cmluZyh2YWwpO1xuICAgICAgICAgICAgZHJpbGxUb0RldGFpbEZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgb3A6ICc9PScsXG4gICAgICAgICAgICAgIHZhbCxcbiAgICAgICAgICAgICAgZm9ybWF0dGVkVmFsLFxuICAgICAgICAgICAgICBncmFpbjogZm9ybWF0dGVyID8gdGltZUdyYWluU3FsYSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIG9uQ29udGV4dE1lbnUoZS5jbGllbnRYLCBlLmNsaWVudFksIHtcbiAgICAgICAgICBkcmlsbFRvRGV0YWlsOiBkcmlsbFRvRGV0YWlsRmlsdGVycyxcbiAgICAgICAgICBjcm9zc0ZpbHRlcjogZ2V0Q3Jvc3NGaWx0ZXJEYXRhTWFzayhkYXRhUG9pbnQpLFxuICAgICAgICAgIGRyaWxsQnk6IGRhdGFQb2ludCAmJiB7XG4gICAgICAgICAgICBmaWx0ZXJzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2w6IE9iamVjdC5rZXlzKGRhdGFQb2ludClbMF0sXG4gICAgICAgICAgICAgICAgb3A6ICc9PScsXG4gICAgICAgICAgICAgICAgdmFsOiBPYmplY3QudmFsdWVzKGRhdGFQb2ludClbMF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgZ3JvdXBieUZpZWxkTmFtZTogcm93S2V5ID8gJ2dyb3VwYnlSb3dzJyA6ICdncm91cGJ5Q29sdW1ucycsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBbXG4gICAgICBjb2xzLFxuICAgICAgZGF0ZUZvcm1hdHRlcnMsXG4gICAgICBnZXRDcm9zc0ZpbHRlckRhdGFNYXNrLFxuICAgICAgb25Db250ZXh0TWVudSxcbiAgICAgIHJvd3MsXG4gICAgICB0aW1lR3JhaW5TcWxhLFxuICAgIF0sXG4gICk7XG5cbiAgcmV0dXJuIChcbiAgICA8U3R5bGVzIGhlaWdodD17aGVpZ2h0fSB3aWR0aD17d2lkdGh9IG1hcmdpbj17dGhlbWUuZ3JpZFVuaXQgKiA0fT5cbiAgICAgIDxQaXZvdFRhYmxlV3JhcHBlcj5cbiAgICAgICAgPFBpdm90VGFibGVcbiAgICAgICAgICBkYXRhPXt1bnBpdm90ZWREYXRhfVxuICAgICAgICAgIHJvd3M9e3Jvd3N9XG4gICAgICAgICAgY29scz17Y29sc31cbiAgICAgICAgICBhZ2dyZWdhdG9yc0ZhY3Rvcnk9e2FnZ3JlZ2F0b3JzRmFjdG9yeX1cbiAgICAgICAgICBkZWZhdWx0Rm9ybWF0dGVyPXtkZWZhdWx0Rm9ybWF0dGVyfVxuICAgICAgICAgIGN1c3RvbUZvcm1hdHRlcnM9e21ldHJpY0Zvcm1hdHRlcnN9XG4gICAgICAgICAgYWdncmVnYXRvck5hbWU9e2FnZ3JlZ2F0ZUZ1bmN0aW9ufVxuICAgICAgICAgIHZhbHM9e3ZhbHN9XG4gICAgICAgICAgY29sT3JkZXI9e2NvbE9yZGVyfVxuICAgICAgICAgIHJvd09yZGVyPXtyb3dPcmRlcn1cbiAgICAgICAgICBzb3J0ZXJzPXtzb3J0ZXJzfVxuICAgICAgICAgIHRhYmxlT3B0aW9ucz17dGFibGVPcHRpb25zfVxuICAgICAgICAgIHN1YnRvdGFsT3B0aW9ucz17c3VidG90YWxPcHRpb25zfVxuICAgICAgICAgIG5hbWVzTWFwcGluZz17dmVyYm9zZU1hcH1cbiAgICAgICAgICBvbkNvbnRleHRNZW51PXtoYW5kbGVDb250ZXh0TWVudX1cbiAgICAgICAgLz5cbiAgICAgIDwvUGl2b3RUYWJsZVdyYXBwZXI+XG4gICAgPC9TdHlsZXM+XG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./plugins/plugin-chart-pivot-table/src/PivotTableChart.tsx\n");

/***/ })

}]);