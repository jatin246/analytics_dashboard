"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["src_explore_components_controls_AnnotationLayerControl_AnnotationLayer_jsx"],{

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx":
/*!************************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx ***!
  \************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rison */ \"./node_modules/rison/js/rison.js\");\n/* harmony import */ var rison__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(rison__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var react_color__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-color */ \"./node_modules/react-color/lib/index.js\");\n/* harmony import */ var src_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/components/Button */ \"./src/components/Button/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/style/index.tsx\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/connection/SupersetClient.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/chart/registries/ChartMetadataRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/query/getColumnLabel.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/math-expression/index.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/validator/validateNonEmpty.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/color/CategoricalSchemeRegistrySingleton.ts\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@emotion/react/dist/emotion-element-99289b21.browser.esm.js\");\n/* harmony import */ var src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/explore/components/controls/SelectControl */ \"./src/explore/components/controls/SelectControl.jsx\");\n/* harmony import */ var src_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! src/components */ \"./src/components/index.ts\");\n/* harmony import */ var src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! src/explore/components/controls/TextControl */ \"./src/explore/components/controls/TextControl/index.tsx\");\n/* harmony import */ var src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! src/explore/components/controls/CheckboxControl */ \"./src/explore/components/controls/CheckboxControl.jsx\");\n/* harmony import */ var src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! src/components/PopoverSection */ \"./src/components/PopoverSection/index.tsx\");\n/* harmony import */ var src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! src/explore/components/ControlHeader */ \"./src/explore/components/ControlHeader.tsx\");\n/* harmony import */ var src_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! src/components/EmptyState */ \"./src/components/EmptyState/index.tsx\");\n/* harmony import */ var _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./AnnotationTypes */ \"./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");\n/* harmony import */ var _emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @emotion/react/jsx-runtime */ \"./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst AUTOMATIC_COLOR = '';\n\nconst propTypes = {\n  name: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  annotationType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  sourceType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  color: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  opacity: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  style: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  width: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().number),\n  showMarkers: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  hideLine: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  value: prop_types__WEBPACK_IMPORTED_MODULE_12___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_12___default().string), (prop_types__WEBPACK_IMPORTED_MODULE_12___default().number)]),\n  overrides: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().object),\n  show: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  showLabel: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool),\n  titleColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  descriptionColumns: prop_types__WEBPACK_IMPORTED_MODULE_12___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_12___default().string)),\n  timeColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  intervalEndColumn: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  vizType: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n\n  error: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n  colorScheme: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().string),\n\n  addAnnotationLayer: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func),\n  removeAnnotationLayer: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func),\n  close: (prop_types__WEBPACK_IMPORTED_MODULE_12___default().func)\n};\n\nconst defaultProps = {\n  name: '',\n  annotationType: _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.DEFAULT_ANNOTATION_TYPE,\n  sourceType: '',\n  color: AUTOMATIC_COLOR,\n  opacity: '',\n  style: 'solid',\n  width: 1,\n  showMarkers: false,\n  hideLine: false,\n  overrides: {},\n  colorScheme: 'd3Category10',\n  show: true,\n  showLabel: false,\n  titleColumn: '',\n  descriptionColumns: [],\n  timeColumn: '',\n  intervalEndColumn: '',\n\n  addAnnotationLayer: () => {},\n  removeAnnotationLayer: () => {},\n  close: () => {}\n};\n\nconst NotFoundContentWrapper = _superset_ui_core__WEBPACK_IMPORTED_MODULE_13__.styled.div`\n  && > div:first-child {\n    padding-left: 0;\n    padding-right: 0;\n  }\n`;\n\nconst NotFoundContent = () =>\n(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContentWrapper, { children:\n  (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__.EmptyStateSmall, {\n    title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('No annotation layers'),\n    description:\n    (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"span\", { children: [\n      (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Add an annotation layer'), ' ',\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"a\", {\n        href: \"/annotationlayer/list\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\", children:\n\n        (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('here') }\n      ), \".\"] }\n\n    ),\n\n    image: \"empty.svg\" }\n  ) }\n);\n\n\nclass AnnotationLayer extends react__WEBPACK_IMPORTED_MODULE_0__.PureComponent {\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    fetchNativeAnnotations = async (search, page, pageSize) => {\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        filters: [\n        {\n          col: 'name',\n          opr: 'ct',\n          value: search\n        }],\n\n        columns: ['id', 'name'],\n        page,\n        page_size: pageSize\n      });\n\n      const { json } = await _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/annotation_layer/?q=${queryParams}`\n      });\n\n      const { result, count } = json;\n\n      const layersArray = result.map((layer) => ({\n        value: layer.id,\n        label: layer.name\n      }));\n\n      return {\n        data: layersArray,\n        totalCount: count\n      };\n    };this.\n\n    fetchCharts = async (search, page, pageSize) => {\n      const { annotationType } = this.state;\n\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        filters: [\n        { col: 'slice_name', opr: 'chart_all_text', value: search },\n        {\n          col: 'id',\n          opr: 'chart_owned_created_favored_by_me',\n          value: true\n        }],\n\n        columns: ['id', 'slice_name', 'viz_type'],\n        order_column: 'slice_name',\n        order_direction: 'asc',\n        page,\n        page_size: pageSize\n      });\n      const { json } = await _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/chart/?q=${queryParams}`\n      });\n\n      const { result, count } = json;\n      const registry = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();\n\n      const chartsArray = result.\n      filter((chart) => {\n        const metadata = registry.get(chart.viz_type);\n        return metadata && metadata.canBeAnnotationType(annotationType);\n      }).\n      map((chart) => ({\n        value: chart.id,\n        label: chart.slice_name,\n        viz_type: chart.viz_type\n      }));\n\n      return {\n        data: chartsArray,\n        totalCount: count\n      };\n    };this.\n\n    fetchOptions = (search, page, pageSize) => {\n      const { sourceType } = this.state;\n\n      if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n        return this.fetchNativeAnnotations(search, page, pageSize);\n      }\n      return this.fetchCharts(search, page, pageSize);\n    };this.\n\n    fetchSliceData = (id) => {\n      const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({\n        columns: ['query_context']\n      });\n      _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n        endpoint: `/api/v1/chart/${id}?q=${queryParams}`\n      }).then(({ json }) => {var _formData$groupby;\n        const { result } = json;\n        const queryContext = result.query_context;\n        const formData = JSON.parse(queryContext).form_data;\n        const dataObject = {\n          data: {\n            ...formData,\n            groupby: (_formData$groupby = formData.groupby) == null ? void 0 : _formData$groupby.map((column) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(column))\n          }\n        };\n        this.setState({\n          slice: dataObject\n        });\n      });\n    };const { name, annotationType: _annotationType, sourceType: _sourceType, color, opacity, style, width, showMarkers, hideLine, value, overrides, show, showLabel, titleColumn, descriptionColumns, timeColumn, intervalEndColumn, vizType } = props; // Only allow override whole time_range\n    if ('since' in overrides || 'until' in overrides) {overrides.time_range = null;delete overrides.since;delete overrides.until;} // Check if annotationType is supported by this chart\n    const _metadata = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().get(vizType);const supportedAnnotationTypes = (_metadata == null ? void 0 : _metadata.supportedAnnotationTypes) || [];const validAnnotationType = supportedAnnotationTypes.includes(_annotationType) ? _annotationType : supportedAnnotationTypes[0];this.state = { // base\n      name, annotationType: validAnnotationType, sourceType: _sourceType, value, overrides, show, showLabel, // slice\n      titleColumn, descriptionColumns, timeColumn, intervalEndColumn, // display\n      color: color || AUTOMATIC_COLOR, opacity, style, width, showMarkers, hideLine, // refData\n      isNew: !name, slice: null };this.submitAnnotation = this.submitAnnotation.bind(this);this.deleteAnnotation = this.deleteAnnotation.bind(this);this.applyAnnotation = this.applyAnnotation.bind(this);this.isValidForm = this.isValidForm.bind(this); // Handlers\n    this.handleAnnotationType = this.handleAnnotationType.bind(this);this.handleAnnotationSourceType = this.handleAnnotationSourceType.bind(this);this.handleSelectValue = this.handleSelectValue.bind(this);this.handleTextValue = this.handleTextValue.bind(this); // Fetch related functions\n    this.fetchOptions = this.fetchOptions.bind(this);this.fetchCharts = this.fetchCharts.bind(this);this.fetchNativeAnnotations = this.fetchNativeAnnotations.bind(this);this.fetchAppliedAnnotation = this.fetchAppliedAnnotation.bind(this);this.fetchSliceData = this.fetchSliceData.bind(this);this.shouldFetchSliceData = this.shouldFetchSliceData.bind(this);this.fetchAppliedChart = this.fetchAppliedChart.bind(this);this.fetchAppliedNativeAnnotation = this.fetchAppliedNativeAnnotation.bind(this);this.shouldFetchAppliedAnnotation = this.shouldFetchAppliedAnnotation.bind(this);}componentDidMount() {if (this.shouldFetchAppliedAnnotation()) {const { value } = this.state; /* The value prop is the id of the chart/native. This function will set\n      value in state to an object with the id as value.value to be used by\n      AsyncSelect */this.fetchAppliedAnnotation(value);}}componentDidUpdate(prevProps, prevState) {if (this.shouldFetchSliceData(prevState)) {const { value } = this.state;this.fetchSliceData(value.value);}}getSupportedSourceTypes(annotationType) {var _ANNOTATION_TYPES_MET; // Get vis types that can be source.\n    const sources = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().entries().filter(({ value: chartMetadata }) => chartMetadata.canBeAnnotationType(annotationType)).map(({ key, value: chartMetadata }) => ({ value: key, label: chartMetadata.name })); // Prepend native source if applicable\n    if ((_ANNOTATION_TYPES_MET = _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES_METADATA[annotationType]) != null && _ANNOTATION_TYPES_MET.supportNativeSource) {sources.unshift(_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES_METADATA.NATIVE);}return sources;}shouldFetchAppliedAnnotation() {const { value, sourceType } = this.state;return value && (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType);}shouldFetchSliceData(prevState) {const { value, sourceType } = this.state;const isChart = sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE && (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType);const valueIsNew = value && prevState.value !== value;return valueIsNew && isChart;}isValidFormulaAnnotation(expression, annotationType) {if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {return (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_19__.isValidExpression)(expression);}return true;}isValidForm() {const { name, annotationType, sourceType, value, timeColumn, intervalEndColumn } = this.state;const errors = [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(name), (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(annotationType), (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(value)];if (sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.EVENT) {errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(timeColumn));}if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL) {errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(timeColumn));errors.push((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(intervalEndColumn));}}errors.push(!this.isValidFormulaAnnotation(value, annotationType));return !errors.filter((x) => x).length;}handleAnnotationType(annotationType) {this.setState({ annotationType, sourceType: null, value: null, slice: null });}handleAnnotationSourceType(sourceType) {const { sourceType: prevSourceType } = this.state;if (prevSourceType !== sourceType) {this.setState({ sourceType, value: null, slice: null });}}handleSelectValue(selectedValueObject) {this.setState({ value: selectedValueObject, descriptionColumns: [], intervalEndColumn: null, timeColumn: null, titleColumn: null, overrides: { time_range: null } });}handleTextValue(inputValue) {this.setState({ value: inputValue });}fetchAppliedChart(id) {const { annotationType } = this.state;const registry = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])();const queryParams = rison__WEBPACK_IMPORTED_MODULE_1___default().encode({ columns: ['slice_name', 'query_context', 'viz_type'] });_superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({ endpoint: `/api/v1/chart/${id}?q=${queryParams}` }).then(({ json }) => {const { result } = json;const sliceName = result.slice_name;\n        const queryContext = result.query_context;\n        const vizType = result.viz_type;\n        const formData = JSON.parse(queryContext).form_data;\n        const metadata = registry.get(vizType);\n        const canBeAnnotationType =\n        metadata && metadata.canBeAnnotationType(annotationType);\n        if (canBeAnnotationType) {var _formData$groupby2;\n          this.setState({\n            value: {\n              value: id,\n              label: sliceName\n            },\n            slice: {\n              data: {\n                ...formData,\n                groupby: (_formData$groupby2 = formData.groupby) == null ? void 0 : _formData$groupby2.map((column) => (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(column))\n              }\n            }\n          });\n        }\n      });\n  }\n\n  fetchAppliedNativeAnnotation(id) {\n    _superset_ui_core__WEBPACK_IMPORTED_MODULE_16__[\"default\"].get({\n      endpoint: `/api/v1/annotation_layer/${id}`\n    }).then(({ json }) => {\n      const { result } = json;\n      const layer = result;\n      this.setState({\n        value: {\n          value: layer.id,\n          label: layer.name\n        }\n      });\n    });\n  }\n\n  fetchAppliedAnnotation(id) {\n    const { sourceType } = this.state;\n\n    if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n      return this.fetchAppliedNativeAnnotation(id);\n    }\n    return this.fetchAppliedChart(id);\n  }\n\n  deleteAnnotation() {\n    this.props.removeAnnotationLayer();\n    this.props.close();\n  }\n\n  applyAnnotation() {\n    const { value, sourceType } = this.state;\n    if (this.isValidForm()) {\n      const annotationFields = [\n      'name',\n      'annotationType',\n      'sourceType',\n      'color',\n      'opacity',\n      'style',\n      'width',\n      'showMarkers',\n      'hideLine',\n      'overrides',\n      'show',\n      'showLabel',\n      'titleColumn',\n      'descriptionColumns',\n      'timeColumn',\n      'intervalEndColumn'];\n\n      const newAnnotation = {};\n      annotationFields.forEach((field) => {\n        if (this.state[field] !== null) {\n          newAnnotation[field] = this.state[field];\n        }\n      });\n\n      // Prepare newAnnotation.value for use in runAnnotationQuery()\n      const applicableValue = (0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType) ? value.value : value;\n      newAnnotation.value = applicableValue;\n\n      if (newAnnotation.color === AUTOMATIC_COLOR) {\n        newAnnotation.color = null;\n      }\n\n      this.props.addAnnotationLayer(newAnnotation);\n      this.setState({ isNew: false });\n    }\n  }\n\n  submitAnnotation() {\n    this.applyAnnotation();\n    this.props.close();\n  }\n\n  renderChartHeader(label, description, value) {\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        hovered: true,\n        label: label,\n        description: description,\n        validationErrors: !value ? ['Mandatory'] : [] }\n      ));\n\n  }\n\n  renderValueConfiguration() {\n    const { annotationType, sourceType, value } = this.state;\n    let label = '';\n    let description = '';\n    if ((0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType)) {\n      if (sourceType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE) {\n        label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer');\n        description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Select the Annotation Layer you would like to use.');\n      } else {\n        label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Chart');\n        description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n          `Use another existing chart as a source for annotations and overlays.\n          Your chart must be one of these visualization types: [%s]`,\n          this.getSupportedSourceTypes(annotationType).\n          map((x) => x.label).\n          join(', ')\n        );\n      }\n    } else if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {\n      label = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Formula');\n      description = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`Expects a formula with depending time parameter 'x'\n        in milliseconds since epoch. mathjs is used to evaluate the formulas.\n        Example: '2x+5'`);\n    }\n    if ((0,_AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.requiresQuery)(sourceType)) {\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components__WEBPACK_IMPORTED_MODULE_5__.AsyncSelect\n        /* key to force re-render on sourceType change */, {\n\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer value'),\n          name: \"annotation-layer-value\",\n          header: this.renderChartHeader(label, description, value),\n          options: this.fetchOptions,\n          value: value || null,\n          onChange: this.handleSelectValue,\n          notFoundContent: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContent, {}) }, sourceType\n        ));\n\n    }\n    if (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.FORMULA) {\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n          name: \"annotation-layer-value\",\n          hovered: true,\n          showHeader: true,\n          description: description,\n          label: label,\n          placeholder: \"\",\n          value: value,\n          onChange: this.handleTextValue,\n          validationErrors:\n          !this.isValidFormulaAnnotation(value, annotationType) ?\n          [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Bad formula.')] :\n          [] }\n\n        ));\n\n    }\n    return '';\n  }\n\n  renderSliceConfiguration() {\n    const {\n      annotationType,\n      sourceType,\n      value,\n      slice,\n      overrides,\n      titleColumn,\n      timeColumn,\n      intervalEndColumn,\n      descriptionColumns\n    } = this.state;\n\n    if (!slice || !value) {\n      return '';\n    }\n\n    if (sourceType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_SOURCE_TYPES.NATIVE && slice) {\n      const columns = (slice.data.groupby || []).\n      concat(slice.data.all_columns || []).\n      map((x) => ({ value: x, label: x }));\n      const timeColumnOptions = slice.data.include_time ?\n      [{ value: '__timestamp', label: '__timestamp' }].concat(columns) :\n      columns;\n      return (\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"div\", { style: { marginRight: '2rem' }, children:\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n            isSelected: true,\n            title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation Slice Configuration'),\n            info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This section allows you to configure how to use the slice\n              to generate annotations.`), children: [\n\n            (annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.EVENT ||\n            annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL) &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer time column'),\n              hovered: true,\n              name: \"annotation-layer-time-column\",\n              label:\n              annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL ?\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Interval start column') :\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Event time column'),\n\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                'This column must contain date/time information.'\n              ),\n              validationErrors: !timeColumn ? ['Mandatory'] : [],\n              clearable: false,\n              options: timeColumnOptions,\n              value: timeColumn,\n              onChange: (v) => this.setState({ timeColumn: v }) }\n            ),\n\n            annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.INTERVAL &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer interval end'),\n              hovered: true,\n              name: \"annotation-layer-intervalEnd\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Interval End column'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                'This column must contain date/time information.'\n              ),\n              validationErrors: !intervalEndColumn ? ['Mandatory'] : [],\n              options: columns,\n              value: intervalEndColumn,\n              onChange: (value) => this.setState({ intervalEndColumn: value }) }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer title column'),\n              hovered: true,\n              name: \"annotation-layer-title\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Title Column'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Pick a title for you annotation.'),\n              options: [{ value: '', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('None') }].concat(columns),\n              value: titleColumn,\n              onChange: (value) => this.setState({ titleColumn: value }) }\n            ),\n            annotationType !== _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n              ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer description columns'),\n              hovered: true,\n              name: \"annotation-layer-title\",\n              label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Description Columns'),\n              description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(\n                \"Pick one or more columns that should be shown in the annotation. If you don't select a column all of them will be shown.\"\n              ),\n              multi: true,\n              options: columns,\n              value: descriptionColumns,\n              onChange: (value) => this.setState({ descriptionColumns: value }) }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { marginTop: '1rem' }, children: [\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                hovered: true,\n                name: \"annotation-override-time_range\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Override time range'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This controls whether the \"time_range\" field from the current\n                  view should be passed down to the chart containing the annotation data.`),\n                value: 'time_range' in overrides,\n                onChange: (v) => {\n                  delete overrides.time_range;\n                  if (v) {\n                    this.setState({\n                      overrides: { ...overrides, time_range: null }\n                    });\n                  } else {\n                    this.setState({ overrides: { ...overrides } });\n                  }\n                } }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                hovered: true,\n                name: \"annotation-override-timegrain\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Override time grain'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`This controls whether the time grain field from the current\n                  view should be passed down to the chart containing the annotation data.`),\n                value: 'time_grain_sqla' in overrides,\n                onChange: (v) => {\n                  delete overrides.time_grain_sqla;\n                  delete overrides.granularity;\n                  if (v) {\n                    this.setState({\n                      overrides: {\n                        ...overrides,\n                        time_grain_sqla: null,\n                        granularity: null\n                      }\n                    });\n                  } else {\n                    this.setState({ overrides: { ...overrides } });\n                  }\n                } }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                hovered: true,\n                name: \"annotation-layer-timeshift\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Time Shift'),\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)(`Time delta in natural language\n                  (example:  24 hours, 7 days, 56 weeks, 365 days)`),\n                placeholder: \"\",\n                value: overrides.time_shift,\n                onChange: (v) =>\n                this.setState({ overrides: { ...overrides, time_shift: v } }) }\n\n              )] }\n            )] }\n          ) }\n        ));\n\n    }\n    return '';\n  }\n\n  renderDisplayConfiguration() {\n    const {\n      color,\n      opacity,\n      style,\n      width,\n      showMarkers,\n      hideLine,\n      annotationType\n    } = this.state;\n    const colorScheme = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_21__[\"default\"])().\n    get(this.props.colorScheme).\n    colors.concat();\n    if (\n    color &&\n    color !== AUTOMATIC_COLOR &&\n    !colorScheme.find((x) => x.toLowerCase() === color.toLowerCase()))\n    {\n      colorScheme.push(color);\n    }\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n        isSelected: true,\n        title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Display configuration'),\n        info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Configure your how you overlay is displayed here.'), children: [\n\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer stroke'),\n          name: \"annotation-layer-stroke\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Style')\n          // see '../../../visualizations/nvd3_vis.css'\n          , options: [\n          { value: 'solid', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Solid') },\n          { value: 'dashed', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Dashed') },\n          { value: 'longDashed', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Long dashed') },\n          { value: 'dotted', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Dotted') }],\n\n          value: style,\n          clearable: false,\n          onChange: (v) => this.setState({ style: v }) }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n          ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer opacity'),\n          name: \"annotation-layer-opacity\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Opacity')\n          // see '../../../visualizations/nvd3_vis.css'\n          , options: [\n          { value: '', label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Solid') },\n          { value: 'opacityLow', label: '0.2' },\n          { value: 'opacityMedium', label: '0.5' },\n          { value: 'opacityHigh', label: '0.8' }],\n\n          value: opacity,\n          onChange: (value) => this.setState({ opacity: value }) }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_ControlHeader__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Color') }),\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', flexDirection: 'column' }, children: [\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(react_color__WEBPACK_IMPORTED_MODULE_2__.CompactPicker, {\n              color: color,\n              colors: colorScheme,\n              onChangeComplete: (v) => this.setState({ color: v.hex }) }\n            ),\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              style: { marginTop: '0.5rem', marginBottom: '0.5rem' },\n              buttonStyle: color === AUTOMATIC_COLOR ? 'success' : 'default',\n              buttonSize: \"xsmall\",\n              onClick: () => this.setState({ color: AUTOMATIC_COLOR }), children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Automatic Color') }\n            )] }\n          )] }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n          name: \"annotation-layer-stroke-width\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Line width'),\n          isInt: true,\n          value: width,\n          onChange: (v) => this.setState({ width: v }) }\n        ),\n        annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          hovered: true,\n          name: \"annotation-layer-show-markers\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Show Markers'),\n          description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Shows or hides markers for the time series'),\n          value: showMarkers,\n          onChange: (v) => this.setState({ showMarkers: v }) }\n        ),\n\n        annotationType === _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES.TIME_SERIES &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n          hovered: true,\n          name: \"annotation-layer-hide-line\",\n          label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hide Line'),\n          description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hides the Line for the time series'),\n          value: hideLine,\n          onChange: (v) => this.setState({ hideLine: v }) }\n        )] }\n\n      ));\n\n  }\n\n  render() {\n    const { isNew, name, annotationType, sourceType, show, showLabel } =\n    this.state;\n    const isValid = this.isValidForm();\n    const metadata = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_17__[\"default\"])().get(this.props.vizType);\n    const supportedAnnotationTypes = metadata ?\n    metadata.supportedAnnotationTypes.map(\n      (type) => _AnnotationTypes__WEBPACK_IMPORTED_MODULE_11__.ANNOTATION_TYPES_METADATA[type]\n    ) :\n    [];\n    const supportedSourceTypes = this.getSupportedSourceTypes(annotationType);\n\n    return (\n      (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment, { children: [\n        this.props.error &&\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"span\", { style: { color: this.props.theme.colors.error.base }, children: [\"ERROR: \",\n          this.props.error] }\n        ),\n\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', flexDirection: 'row' }, children: [\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(\"div\", { style: { marginRight: '2rem' }, children:\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(src_components_PopoverSection__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n              isSelected: true,\n              title: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Layer configuration'),\n              info: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Configure the basics of your Annotation Layer.'), children: [\n\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_TextControl__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                name: \"annotation-layer-name\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Name'),\n                placeholder: \"\",\n                value: name,\n                onChange: (v) => this.setState({ name: v }),\n                validationErrors: !name ? [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Mandatory')] : [] }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                name: \"annotation-layer-hide\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Hide layer'),\n                value: !show,\n                onChange: (v) => this.setState({ show: !v }) }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_CheckboxControl__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                name: \"annotation-label-show\",\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Show label'),\n                value: showLabel,\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Whether to always show the annotation label'),\n                onChange: (v) => this.setState({ showLabel: v }) }\n              ),\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer type'),\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Choose the annotation layer type'),\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation layer type'),\n                name: \"annotation-layer-type\",\n                clearable: false,\n                options: supportedAnnotationTypes,\n                value: annotationType,\n                onChange: this.handleAnnotationType }\n              ),\n              supportedSourceTypes.length > 0 &&\n              (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_explore_components_controls_SelectControl__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                ariaLabel: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation source type'),\n                hovered: true,\n                description: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Choose the source of your annotations'),\n                label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Annotation source'),\n                name: \"annotation-source-type\",\n                options: supportedSourceTypes,\n                notFoundContent: (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(NotFoundContent, {}),\n                value: sourceType,\n                onChange: this.handleAnnotationSourceType,\n                validationErrors: !sourceType ? [(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Mandatory')] : [] }\n              ),\n\n              this.renderValueConfiguration()] }\n            ) }\n          ),\n          this.renderSliceConfiguration(),\n          this.renderDisplayConfiguration()] }\n        ),\n        (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { style: { display: 'flex', justifyContent: 'space-between' }, children: [\n          isNew ?\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { buttonSize: \"small\", onClick: () => this.props.close(), children:\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Cancel') }\n          ) :\n\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { buttonSize: \"small\", onClick: this.deleteAnnotation, children:\n            (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Remove') }\n          ),\n\n          (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(\"div\", { children: [\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              buttonSize: \"small\",\n              disabled: !isValid,\n              onClick: this.applyAnnotation, children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('Apply') }\n            ),\n\n            (0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(src_components_Button__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n              buttonSize: \"small\",\n              buttonStyle: \"primary\",\n              disabled: !isValid,\n              onClick: this.submitAnnotation, children:\n\n              (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_15__.t)('OK') }\n            )] }\n          )] }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnnotationLayer.propTypes = propTypes;\nAnnotationLayer.defaultProps = defaultProps;const _default =\n\n(0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_22__.b)(AnnotationLayer);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_default);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AUTOMATIC_COLOR, \"AUTOMATIC_COLOR\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(NotFoundContentWrapper, \"NotFoundContentWrapper\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(NotFoundContent, \"NotFoundContent\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvbkxheWVyLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVFBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL1JBO0FBT0E7QUFVQTtBQVFBO0FBS0E7QUFPQTtBQVFBO0FBTUE7QUFpQkE7QUFDQTtBQWNBO0FBVUE7QUErTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9Bbm5vdGF0aW9uTGF5ZXJDb250cm9sL0Fubm90YXRpb25MYXllci5qc3g/OWE0YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgeyBDb21wYWN0UGlja2VyIH0gZnJvbSAncmVhY3QtY29sb3InO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdzcmMvY29tcG9uZW50cy9CdXR0b24nO1xuaW1wb3J0IHtcbiAgdCxcbiAgU3VwZXJzZXRDbGllbnQsXG4gIGdldENhdGVnb3JpY2FsU2NoZW1lUmVnaXN0cnksXG4gIGdldENoYXJ0TWV0YWRhdGFSZWdpc3RyeSxcbiAgdmFsaWRhdGVOb25FbXB0eSxcbiAgaXNWYWxpZEV4cHJlc3Npb24sXG4gIHN0eWxlZCxcbiAgZ2V0Q29sdW1uTGFiZWwsXG4gIHdpdGhUaGVtZSxcbn0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IFNlbGVjdENvbnRyb2wgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9TZWxlY3RDb250cm9sJztcbmltcG9ydCB7IEFzeW5jU2VsZWN0IH0gZnJvbSAnc3JjL2NvbXBvbmVudHMnO1xuaW1wb3J0IFRleHRDb250cm9sIGZyb20gJ3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvVGV4dENvbnRyb2wnO1xuaW1wb3J0IENoZWNrYm94Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0NoZWNrYm94Q29udHJvbCc7XG5pbXBvcnQgUG9wb3ZlclNlY3Rpb24gZnJvbSAnc3JjL2NvbXBvbmVudHMvUG9wb3ZlclNlY3Rpb24nO1xuaW1wb3J0IENvbnRyb2xIZWFkZXIgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Db250cm9sSGVhZGVyJztcbmltcG9ydCB7IEVtcHR5U3RhdGVTbWFsbCB9IGZyb20gJ3NyYy9jb21wb25lbnRzL0VtcHR5U3RhdGUnO1xuaW1wb3J0IHtcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMsXG4gIEFOTk9UQVRJT05fVFlQRVMsXG4gIEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEEsXG4gIERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxuICByZXF1aXJlc1F1ZXJ5LFxuICBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFU19NRVRBREFUQSxcbn0gZnJvbSAnLi9Bbm5vdGF0aW9uVHlwZXMnO1xuXG5jb25zdCBBVVRPTUFUSUNfQ09MT1IgPSAnJztcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhbm5vdGF0aW9uVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgc291cmNlVHlwZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9wYWNpdHk6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHN0eWxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgc2hvd01hcmtlcnM6IFByb3BUeXBlcy5ib29sLFxuICBoaWRlTGluZTogUHJvcFR5cGVzLmJvb2wsXG4gIHZhbHVlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMubnVtYmVyXSksXG4gIG92ZXJyaWRlczogUHJvcFR5cGVzLm9iamVjdCxcbiAgc2hvdzogUHJvcFR5cGVzLmJvb2wsXG4gIHNob3dMYWJlbDogUHJvcFR5cGVzLmJvb2wsXG4gIHRpdGxlQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBkZXNjcmlwdGlvbkNvbHVtbnM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICB0aW1lQ29sdW1uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBpbnRlcnZhbEVuZENvbHVtbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgdml6VHlwZTogUHJvcFR5cGVzLnN0cmluZyxcblxuICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgY29sb3JTY2hlbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgYWRkQW5ub3RhdGlvbkxheWVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgcmVtb3ZlQW5ub3RhdGlvbkxheWVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgY2xvc2U6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBuYW1lOiAnJyxcbiAgYW5ub3RhdGlvblR5cGU6IERFRkFVTFRfQU5OT1RBVElPTl9UWVBFLFxuICBzb3VyY2VUeXBlOiAnJyxcbiAgY29sb3I6IEFVVE9NQVRJQ19DT0xPUixcbiAgb3BhY2l0eTogJycsXG4gIHN0eWxlOiAnc29saWQnLFxuICB3aWR0aDogMSxcbiAgc2hvd01hcmtlcnM6IGZhbHNlLFxuICBoaWRlTGluZTogZmFsc2UsXG4gIG92ZXJyaWRlczoge30sXG4gIGNvbG9yU2NoZW1lOiAnZDNDYXRlZ29yeTEwJyxcbiAgc2hvdzogdHJ1ZSxcbiAgc2hvd0xhYmVsOiBmYWxzZSxcbiAgdGl0bGVDb2x1bW46ICcnLFxuICBkZXNjcmlwdGlvbkNvbHVtbnM6IFtdLFxuICB0aW1lQ29sdW1uOiAnJyxcbiAgaW50ZXJ2YWxFbmRDb2x1bW46ICcnLFxuXG4gIGFkZEFubm90YXRpb25MYXllcjogKCkgPT4ge30sXG4gIHJlbW92ZUFubm90YXRpb25MYXllcjogKCkgPT4ge30sXG4gIGNsb3NlOiAoKSA9PiB7fSxcbn07XG5cbmNvbnN0IE5vdEZvdW5kQ29udGVudFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICAmJiA+IGRpdjpmaXJzdC1jaGlsZCB7XG4gICAgcGFkZGluZy1sZWZ0OiAwO1xuICAgIHBhZGRpbmctcmlnaHQ6IDA7XG4gIH1cbmA7XG5cbmNvbnN0IE5vdEZvdW5kQ29udGVudCA9ICgpID0+IChcbiAgPE5vdEZvdW5kQ29udGVudFdyYXBwZXI+XG4gICAgPEVtcHR5U3RhdGVTbWFsbFxuICAgICAgdGl0bGU9e3QoJ05vIGFubm90YXRpb24gbGF5ZXJzJyl9XG4gICAgICBkZXNjcmlwdGlvbj17XG4gICAgICAgIDxzcGFuPlxuICAgICAgICAgIHt0KCdBZGQgYW4gYW5ub3RhdGlvbiBsYXllcicpfXsnICd9XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGhyZWY9XCIvYW5ub3RhdGlvbmxheWVyL2xpc3RcIlxuICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0KCdoZXJlJyl9XG4gICAgICAgICAgPC9hPlxuICAgICAgICAgIC5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgfVxuICAgICAgaW1hZ2U9XCJlbXB0eS5zdmdcIlxuICAgIC8+XG4gIDwvTm90Rm91bmRDb250ZW50V3JhcHBlcj5cbik7XG5cbmNsYXNzIEFubm90YXRpb25MYXllciBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBjb25zdCB7XG4gICAgICBuYW1lLFxuICAgICAgYW5ub3RhdGlvblR5cGUsXG4gICAgICBzb3VyY2VUeXBlLFxuICAgICAgY29sb3IsXG4gICAgICBvcGFjaXR5LFxuICAgICAgc3R5bGUsXG4gICAgICB3aWR0aCxcbiAgICAgIHNob3dNYXJrZXJzLFxuICAgICAgaGlkZUxpbmUsXG4gICAgICB2YWx1ZSxcbiAgICAgIG92ZXJyaWRlcyxcbiAgICAgIHNob3csXG4gICAgICBzaG93TGFiZWwsXG4gICAgICB0aXRsZUNvbHVtbixcbiAgICAgIGRlc2NyaXB0aW9uQ29sdW1ucyxcbiAgICAgIHRpbWVDb2x1bW4sXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcbiAgICAgIHZpelR5cGUsXG4gICAgfSA9IHByb3BzO1xuXG4gICAgLy8gT25seSBhbGxvdyBvdmVycmlkZSB3aG9sZSB0aW1lX3JhbmdlXG4gICAgaWYgKCdzaW5jZScgaW4gb3ZlcnJpZGVzIHx8ICd1bnRpbCcgaW4gb3ZlcnJpZGVzKSB7XG4gICAgICBvdmVycmlkZXMudGltZV9yYW5nZSA9IG51bGw7XG4gICAgICBkZWxldGUgb3ZlcnJpZGVzLnNpbmNlO1xuICAgICAgZGVsZXRlIG92ZXJyaWRlcy51bnRpbDtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhbm5vdGF0aW9uVHlwZSBpcyBzdXBwb3J0ZWQgYnkgdGhpcyBjaGFydFxuICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCkuZ2V0KHZpelR5cGUpO1xuICAgIGNvbnN0IHN1cHBvcnRlZEFubm90YXRpb25UeXBlcyA9IG1ldGFkYXRhPy5zdXBwb3J0ZWRBbm5vdGF0aW9uVHlwZXMgfHwgW107XG4gICAgY29uc3QgdmFsaWRBbm5vdGF0aW9uVHlwZSA9IHN1cHBvcnRlZEFubm90YXRpb25UeXBlcy5pbmNsdWRlcyhcbiAgICAgIGFubm90YXRpb25UeXBlLFxuICAgIClcbiAgICAgID8gYW5ub3RhdGlvblR5cGVcbiAgICAgIDogc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzWzBdO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIC8vIGJhc2VcbiAgICAgIG5hbWUsXG4gICAgICBhbm5vdGF0aW9uVHlwZTogdmFsaWRBbm5vdGF0aW9uVHlwZSxcbiAgICAgIHNvdXJjZVR5cGUsXG4gICAgICB2YWx1ZSxcbiAgICAgIG92ZXJyaWRlcyxcbiAgICAgIHNob3csXG4gICAgICBzaG93TGFiZWwsXG4gICAgICAvLyBzbGljZVxuICAgICAgdGl0bGVDb2x1bW4sXG4gICAgICBkZXNjcmlwdGlvbkNvbHVtbnMsXG4gICAgICB0aW1lQ29sdW1uLFxuICAgICAgaW50ZXJ2YWxFbmRDb2x1bW4sXG4gICAgICAvLyBkaXNwbGF5XG4gICAgICBjb2xvcjogY29sb3IgfHwgQVVUT01BVElDX0NPTE9SLFxuICAgICAgb3BhY2l0eSxcbiAgICAgIHN0eWxlLFxuICAgICAgd2lkdGgsXG4gICAgICBzaG93TWFya2VycyxcbiAgICAgIGhpZGVMaW5lLFxuICAgICAgLy8gcmVmRGF0YVxuICAgICAgaXNOZXc6ICFuYW1lLFxuICAgICAgc2xpY2U6IG51bGwsXG4gICAgfTtcbiAgICB0aGlzLnN1Ym1pdEFubm90YXRpb24gPSB0aGlzLnN1Ym1pdEFubm90YXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmRlbGV0ZUFubm90YXRpb24gPSB0aGlzLmRlbGV0ZUFubm90YXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmFwcGx5QW5ub3RhdGlvbiA9IHRoaXMuYXBwbHlBbm5vdGF0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5pc1ZhbGlkRm9ybSA9IHRoaXMuaXNWYWxpZEZvcm0uYmluZCh0aGlzKTtcbiAgICAvLyBIYW5kbGVyc1xuICAgIHRoaXMuaGFuZGxlQW5ub3RhdGlvblR5cGUgPSB0aGlzLmhhbmRsZUFubm90YXRpb25UeXBlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVBbm5vdGF0aW9uU291cmNlVHlwZSA9XG4gICAgICB0aGlzLmhhbmRsZUFubm90YXRpb25Tb3VyY2VUeXBlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVTZWxlY3RWYWx1ZSA9IHRoaXMuaGFuZGxlU2VsZWN0VmFsdWUuYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZVRleHRWYWx1ZSA9IHRoaXMuaGFuZGxlVGV4dFZhbHVlLmJpbmQodGhpcyk7XG4gICAgLy8gRmV0Y2ggcmVsYXRlZCBmdW5jdGlvbnNcbiAgICB0aGlzLmZldGNoT3B0aW9ucyA9IHRoaXMuZmV0Y2hPcHRpb25zLmJpbmQodGhpcyk7XG4gICAgdGhpcy5mZXRjaENoYXJ0cyA9IHRoaXMuZmV0Y2hDaGFydHMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZldGNoTmF0aXZlQW5ub3RhdGlvbnMgPSB0aGlzLmZldGNoTmF0aXZlQW5ub3RhdGlvbnMuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZldGNoQXBwbGllZEFubm90YXRpb24gPSB0aGlzLmZldGNoQXBwbGllZEFubm90YXRpb24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmZldGNoU2xpY2VEYXRhID0gdGhpcy5mZXRjaFNsaWNlRGF0YS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuc2hvdWxkRmV0Y2hTbGljZURhdGEgPSB0aGlzLnNob3VsZEZldGNoU2xpY2VEYXRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy5mZXRjaEFwcGxpZWRDaGFydCA9IHRoaXMuZmV0Y2hBcHBsaWVkQ2hhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLmZldGNoQXBwbGllZE5hdGl2ZUFubm90YXRpb24gPVxuICAgICAgdGhpcy5mZXRjaEFwcGxpZWROYXRpdmVBbm5vdGF0aW9uLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zaG91bGRGZXRjaEFwcGxpZWRBbm5vdGF0aW9uID1cbiAgICAgIHRoaXMuc2hvdWxkRmV0Y2hBcHBsaWVkQW5ub3RhdGlvbi5iaW5kKHRoaXMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgaWYgKHRoaXMuc2hvdWxkRmV0Y2hBcHBsaWVkQW5ub3RhdGlvbigpKSB7XG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgLyogVGhlIHZhbHVlIHByb3AgaXMgdGhlIGlkIG9mIHRoZSBjaGFydC9uYXRpdmUuIFRoaXMgZnVuY3Rpb24gd2lsbCBzZXRcbiAgICAgIHZhbHVlIGluIHN0YXRlIHRvIGFuIG9iamVjdCB3aXRoIHRoZSBpZCBhcyB2YWx1ZS52YWx1ZSB0byBiZSB1c2VkIGJ5XG4gICAgICBBc3luY1NlbGVjdCAqL1xuICAgICAgdGhpcy5mZXRjaEFwcGxpZWRBbm5vdGF0aW9uKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICBpZiAodGhpcy5zaG91bGRGZXRjaFNsaWNlRGF0YShwcmV2U3RhdGUpKSB7XG4gICAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgICAgdGhpcy5mZXRjaFNsaWNlRGF0YSh2YWx1ZS52YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3VwcG9ydGVkU291cmNlVHlwZXMoYW5ub3RhdGlvblR5cGUpIHtcbiAgICAvLyBHZXQgdmlzIHR5cGVzIHRoYXQgY2FuIGJlIHNvdXJjZS5cbiAgICBjb25zdCBzb3VyY2VzID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KClcbiAgICAgIC5lbnRyaWVzKClcbiAgICAgIC5maWx0ZXIoKHsgdmFsdWU6IGNoYXJ0TWV0YWRhdGEgfSkgPT5cbiAgICAgICAgY2hhcnRNZXRhZGF0YS5jYW5CZUFubm90YXRpb25UeXBlKGFubm90YXRpb25UeXBlKSxcbiAgICAgIClcbiAgICAgIC5tYXAoKHsga2V5LCB2YWx1ZTogY2hhcnRNZXRhZGF0YSB9KSA9PiAoe1xuICAgICAgICB2YWx1ZToga2V5LFxuICAgICAgICBsYWJlbDogY2hhcnRNZXRhZGF0YS5uYW1lLFxuICAgICAgfSkpO1xuICAgIC8vIFByZXBlbmQgbmF0aXZlIHNvdXJjZSBpZiBhcHBsaWNhYmxlXG4gICAgaWYgKEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEFbYW5ub3RhdGlvblR5cGVdPy5zdXBwb3J0TmF0aXZlU291cmNlKSB7XG4gICAgICBzb3VyY2VzLnVuc2hpZnQoQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEuTkFUSVZFKTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZXM7XG4gIH1cblxuICBzaG91bGRGZXRjaEFwcGxpZWRBbm5vdGF0aW9uKCkge1xuICAgIGNvbnN0IHsgdmFsdWUsIHNvdXJjZVR5cGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuIHZhbHVlICYmIHJlcXVpcmVzUXVlcnkoc291cmNlVHlwZSk7XG4gIH1cblxuICBzaG91bGRGZXRjaFNsaWNlRGF0YShwcmV2U3RhdGUpIHtcbiAgICBjb25zdCB7IHZhbHVlLCBzb3VyY2VUeXBlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGlzQ2hhcnQgPVxuICAgICAgc291cmNlVHlwZSAhPT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFICYmXG4gICAgICByZXF1aXJlc1F1ZXJ5KHNvdXJjZVR5cGUpO1xuICAgIGNvbnN0IHZhbHVlSXNOZXcgPSB2YWx1ZSAmJiBwcmV2U3RhdGUudmFsdWUgIT09IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZUlzTmV3ICYmIGlzQ2hhcnQ7XG4gIH1cblxuICBpc1ZhbGlkRm9ybXVsYUFubm90YXRpb24oZXhwcmVzc2lvbiwgYW5ub3RhdGlvblR5cGUpIHtcbiAgICBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSkge1xuICAgICAgcmV0dXJuIGlzVmFsaWRFeHByZXNzaW9uKGV4cHJlc3Npb24pO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlzVmFsaWRGb3JtKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIG5hbWUsXG4gICAgICBhbm5vdGF0aW9uVHlwZSxcbiAgICAgIHNvdXJjZVR5cGUsXG4gICAgICB2YWx1ZSxcbiAgICAgIHRpbWVDb2x1bW4sXG4gICAgICBpbnRlcnZhbEVuZENvbHVtbixcbiAgICB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXG4gICAgICB2YWxpZGF0ZU5vbkVtcHR5KG5hbWUpLFxuICAgICAgdmFsaWRhdGVOb25FbXB0eShhbm5vdGF0aW9uVHlwZSksXG4gICAgICB2YWxpZGF0ZU5vbkVtcHR5KHZhbHVlKSxcbiAgICBdO1xuICAgIGlmIChzb3VyY2VUeXBlICE9PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcbiAgICAgIGlmIChhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5FVkVOVCkge1xuICAgICAgICBlcnJvcnMucHVzaCh2YWxpZGF0ZU5vbkVtcHR5KHRpbWVDb2x1bW4pKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5JTlRFUlZBTCkge1xuICAgICAgICBlcnJvcnMucHVzaCh2YWxpZGF0ZU5vbkVtcHR5KHRpbWVDb2x1bW4pKTtcbiAgICAgICAgZXJyb3JzLnB1c2godmFsaWRhdGVOb25FbXB0eShpbnRlcnZhbEVuZENvbHVtbikpO1xuICAgICAgfVxuICAgIH1cbiAgICBlcnJvcnMucHVzaCghdGhpcy5pc1ZhbGlkRm9ybXVsYUFubm90YXRpb24odmFsdWUsIGFubm90YXRpb25UeXBlKSk7XG4gICAgcmV0dXJuICFlcnJvcnMuZmlsdGVyKHggPT4geCkubGVuZ3RoO1xuICB9XG5cbiAgaGFuZGxlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGFubm90YXRpb25UeXBlLFxuICAgICAgc291cmNlVHlwZTogbnVsbCxcbiAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgc2xpY2U6IG51bGwsXG4gICAgfSk7XG4gIH1cblxuICBoYW5kbGVBbm5vdGF0aW9uU291cmNlVHlwZShzb3VyY2VUeXBlKSB7XG4gICAgY29uc3QgeyBzb3VyY2VUeXBlOiBwcmV2U291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmIChwcmV2U291cmNlVHlwZSAhPT0gc291cmNlVHlwZSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHNvdXJjZVR5cGUsXG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzbGljZTogbnVsbCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlbGVjdFZhbHVlKHNlbGVjdGVkVmFsdWVPYmplY3QpIHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlOiBzZWxlY3RlZFZhbHVlT2JqZWN0LFxuICAgICAgZGVzY3JpcHRpb25Db2x1bW5zOiBbXSxcbiAgICAgIGludGVydmFsRW5kQ29sdW1uOiBudWxsLFxuICAgICAgdGltZUNvbHVtbjogbnVsbCxcbiAgICAgIHRpdGxlQ29sdW1uOiBudWxsLFxuICAgICAgb3ZlcnJpZGVzOiB7IHRpbWVfcmFuZ2U6IG51bGwgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZVRleHRWYWx1ZShpbnB1dFZhbHVlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZTogaW5wdXRWYWx1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIGZldGNoTmF0aXZlQW5ub3RhdGlvbnMgPSBhc3luYyAoc2VhcmNoLCBwYWdlLCBwYWdlU2l6ZSkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcmlzb24uZW5jb2RlKHtcbiAgICAgIGZpbHRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGNvbDogJ25hbWUnLFxuICAgICAgICAgIG9wcjogJ2N0JyxcbiAgICAgICAgICB2YWx1ZTogc2VhcmNoLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNvbHVtbnM6IFsnaWQnLCAnbmFtZSddLFxuICAgICAgcGFnZSxcbiAgICAgIHBhZ2Vfc2l6ZTogcGFnZVNpemUsXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IGpzb24gfSA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvYW5ub3RhdGlvbl9sYXllci8/cT0ke3F1ZXJ5UGFyYW1zfWAsXG4gICAgfSk7XG5cbiAgICBjb25zdCB7IHJlc3VsdCwgY291bnQgfSA9IGpzb247XG5cbiAgICBjb25zdCBsYXllcnNBcnJheSA9IHJlc3VsdC5tYXAobGF5ZXIgPT4gKHtcbiAgICAgIHZhbHVlOiBsYXllci5pZCxcbiAgICAgIGxhYmVsOiBsYXllci5uYW1lLFxuICAgIH0pKTtcblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBsYXllcnNBcnJheSxcbiAgICAgIHRvdGFsQ291bnQ6IGNvdW50LFxuICAgIH07XG4gIH07XG5cbiAgZmV0Y2hDaGFydHMgPSBhc3luYyAoc2VhcmNoLCBwYWdlLCBwYWdlU2l6ZSkgPT4ge1xuICAgIGNvbnN0IHsgYW5ub3RhdGlvblR5cGUgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHJpc29uLmVuY29kZSh7XG4gICAgICBmaWx0ZXJzOiBbXG4gICAgICAgIHsgY29sOiAnc2xpY2VfbmFtZScsIG9wcjogJ2NoYXJ0X2FsbF90ZXh0JywgdmFsdWU6IHNlYXJjaCB9LFxuICAgICAgICB7XG4gICAgICAgICAgY29sOiAnaWQnLFxuICAgICAgICAgIG9wcjogJ2NoYXJ0X293bmVkX2NyZWF0ZWRfZmF2b3JlZF9ieV9tZScsXG4gICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY29sdW1uczogWydpZCcsICdzbGljZV9uYW1lJywgJ3Zpel90eXBlJ10sXG4gICAgICBvcmRlcl9jb2x1bW46ICdzbGljZV9uYW1lJyxcbiAgICAgIG9yZGVyX2RpcmVjdGlvbjogJ2FzYycsXG4gICAgICBwYWdlLFxuICAgICAgcGFnZV9zaXplOiBwYWdlU2l6ZSxcbiAgICB9KTtcbiAgICBjb25zdCB7IGpzb24gfSA9IGF3YWl0IFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvP3E9JHtxdWVyeVBhcmFtc31gLFxuICAgIH0pO1xuXG4gICAgY29uc3QgeyByZXN1bHQsIGNvdW50IH0gPSBqc29uO1xuICAgIGNvbnN0IHJlZ2lzdHJ5ID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCk7XG5cbiAgICBjb25zdCBjaGFydHNBcnJheSA9IHJlc3VsdFxuICAgICAgLmZpbHRlcihjaGFydCA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gcmVnaXN0cnkuZ2V0KGNoYXJ0LnZpel90eXBlKTtcbiAgICAgICAgcmV0dXJuIG1ldGFkYXRhICYmIG1ldGFkYXRhLmNhbkJlQW5ub3RhdGlvblR5cGUoYW5ub3RhdGlvblR5cGUpO1xuICAgICAgfSlcbiAgICAgIC5tYXAoY2hhcnQgPT4gKHtcbiAgICAgICAgdmFsdWU6IGNoYXJ0LmlkLFxuICAgICAgICBsYWJlbDogY2hhcnQuc2xpY2VfbmFtZSxcbiAgICAgICAgdml6X3R5cGU6IGNoYXJ0LnZpel90eXBlLFxuICAgICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IGNoYXJ0c0FycmF5LFxuICAgICAgdG90YWxDb3VudDogY291bnQsXG4gICAgfTtcbiAgfTtcblxuICBmZXRjaE9wdGlvbnMgPSAoc2VhcmNoLCBwYWdlLCBwYWdlU2l6ZSkgPT4ge1xuICAgIGNvbnN0IHsgc291cmNlVHlwZSB9ID0gdGhpcy5zdGF0ZTtcblxuICAgIGlmIChzb3VyY2VUeXBlID09PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUpIHtcbiAgICAgIHJldHVybiB0aGlzLmZldGNoTmF0aXZlQW5ub3RhdGlvbnMoc2VhcmNoLCBwYWdlLCBwYWdlU2l6ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZldGNoQ2hhcnRzKHNlYXJjaCwgcGFnZSwgcGFnZVNpemUpO1xuICB9O1xuXG4gIGZldGNoU2xpY2VEYXRhID0gaWQgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gcmlzb24uZW5jb2RlKHtcbiAgICAgIGNvbHVtbnM6IFsncXVlcnlfY29udGV4dCddLFxuICAgIH0pO1xuICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvJHtpZH0/cT0ke3F1ZXJ5UGFyYW1zfWAsXG4gICAgfSkudGhlbigoeyBqc29uIH0pID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBqc29uO1xuICAgICAgY29uc3QgcXVlcnlDb250ZXh0ID0gcmVzdWx0LnF1ZXJ5X2NvbnRleHQ7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IEpTT04ucGFyc2UocXVlcnlDb250ZXh0KS5mb3JtX2RhdGE7XG4gICAgICBjb25zdCBkYXRhT2JqZWN0ID0ge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uZm9ybURhdGEsXG4gICAgICAgICAgZ3JvdXBieTogZm9ybURhdGEuZ3JvdXBieT8ubWFwKGNvbHVtbiA9PiBnZXRDb2x1bW5MYWJlbChjb2x1bW4pKSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc2xpY2U6IGRhdGFPYmplY3QsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBmZXRjaEFwcGxpZWRDaGFydChpZCkge1xuICAgIGNvbnN0IHsgYW5ub3RhdGlvblR5cGUgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgcmVnaXN0cnkgPSBnZXRDaGFydE1ldGFkYXRhUmVnaXN0cnkoKTtcbiAgICBjb25zdCBxdWVyeVBhcmFtcyA9IHJpc29uLmVuY29kZSh7XG4gICAgICBjb2x1bW5zOiBbJ3NsaWNlX25hbWUnLCAncXVlcnlfY29udGV4dCcsICd2aXpfdHlwZSddLFxuICAgIH0pO1xuICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvY2hhcnQvJHtpZH0/cT0ke3F1ZXJ5UGFyYW1zfWAsXG4gICAgfSkudGhlbigoeyBqc29uIH0pID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBqc29uO1xuICAgICAgY29uc3Qgc2xpY2VOYW1lID0gcmVzdWx0LnNsaWNlX25hbWU7XG4gICAgICBjb25zdCBxdWVyeUNvbnRleHQgPSByZXN1bHQucXVlcnlfY29udGV4dDtcbiAgICAgIGNvbnN0IHZpelR5cGUgPSByZXN1bHQudml6X3R5cGU7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IEpTT04ucGFyc2UocXVlcnlDb250ZXh0KS5mb3JtX2RhdGE7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IHJlZ2lzdHJ5LmdldCh2aXpUeXBlKTtcbiAgICAgIGNvbnN0IGNhbkJlQW5ub3RhdGlvblR5cGUgPVxuICAgICAgICBtZXRhZGF0YSAmJiBtZXRhZGF0YS5jYW5CZUFubm90YXRpb25UeXBlKGFubm90YXRpb25UeXBlKTtcbiAgICAgIGlmIChjYW5CZUFubm90YXRpb25UeXBlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZTogaWQsXG4gICAgICAgICAgICBsYWJlbDogc2xpY2VOYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2xpY2U6IHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgLi4uZm9ybURhdGEsXG4gICAgICAgICAgICAgIGdyb3VwYnk6IGZvcm1EYXRhLmdyb3VwYnk/Lm1hcChjb2x1bW4gPT4gZ2V0Q29sdW1uTGFiZWwoY29sdW1uKSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2hBcHBsaWVkTmF0aXZlQW5ub3RhdGlvbihpZCkge1xuICAgIFN1cGVyc2V0Q2xpZW50LmdldCh7XG4gICAgICBlbmRwb2ludDogYC9hcGkvdjEvYW5ub3RhdGlvbl9sYXllci8ke2lkfWAsXG4gICAgfSkudGhlbigoeyBqc29uIH0pID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBqc29uO1xuICAgICAgY29uc3QgbGF5ZXIgPSByZXN1bHQ7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICB2YWx1ZTogbGF5ZXIuaWQsXG4gICAgICAgICAgbGFiZWw6IGxheWVyLm5hbWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZldGNoQXBwbGllZEFubm90YXRpb24oaWQpIHtcbiAgICBjb25zdCB7IHNvdXJjZVR5cGUgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBpZiAoc291cmNlVHlwZSA9PT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFKSB7XG4gICAgICByZXR1cm4gdGhpcy5mZXRjaEFwcGxpZWROYXRpdmVBbm5vdGF0aW9uKGlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hBcHBsaWVkQ2hhcnQoaWQpO1xuICB9XG5cbiAgZGVsZXRlQW5ub3RhdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLnJlbW92ZUFubm90YXRpb25MYXllcigpO1xuICAgIHRoaXMucHJvcHMuY2xvc2UoKTtcbiAgfVxuXG4gIGFwcGx5QW5ub3RhdGlvbigpIHtcbiAgICBjb25zdCB7IHZhbHVlLCBzb3VyY2VUeXBlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGlmICh0aGlzLmlzVmFsaWRGb3JtKCkpIHtcbiAgICAgIGNvbnN0IGFubm90YXRpb25GaWVsZHMgPSBbXG4gICAgICAgICduYW1lJyxcbiAgICAgICAgJ2Fubm90YXRpb25UeXBlJyxcbiAgICAgICAgJ3NvdXJjZVR5cGUnLFxuICAgICAgICAnY29sb3InLFxuICAgICAgICAnb3BhY2l0eScsXG4gICAgICAgICdzdHlsZScsXG4gICAgICAgICd3aWR0aCcsXG4gICAgICAgICdzaG93TWFya2VycycsXG4gICAgICAgICdoaWRlTGluZScsXG4gICAgICAgICdvdmVycmlkZXMnLFxuICAgICAgICAnc2hvdycsXG4gICAgICAgICdzaG93TGFiZWwnLFxuICAgICAgICAndGl0bGVDb2x1bW4nLFxuICAgICAgICAnZGVzY3JpcHRpb25Db2x1bW5zJyxcbiAgICAgICAgJ3RpbWVDb2x1bW4nLFxuICAgICAgICAnaW50ZXJ2YWxFbmRDb2x1bW4nLFxuICAgICAgXTtcbiAgICAgIGNvbnN0IG5ld0Fubm90YXRpb24gPSB7fTtcbiAgICAgIGFubm90YXRpb25GaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlW2ZpZWxkXSAhPT0gbnVsbCkge1xuICAgICAgICAgIG5ld0Fubm90YXRpb25bZmllbGRdID0gdGhpcy5zdGF0ZVtmaWVsZF07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmVwYXJlIG5ld0Fubm90YXRpb24udmFsdWUgZm9yIHVzZSBpbiBydW5Bbm5vdGF0aW9uUXVlcnkoKVxuICAgICAgY29uc3QgYXBwbGljYWJsZVZhbHVlID0gcmVxdWlyZXNRdWVyeShzb3VyY2VUeXBlKSA/IHZhbHVlLnZhbHVlIDogdmFsdWU7XG4gICAgICBuZXdBbm5vdGF0aW9uLnZhbHVlID0gYXBwbGljYWJsZVZhbHVlO1xuXG4gICAgICBpZiAobmV3QW5ub3RhdGlvbi5jb2xvciA9PT0gQVVUT01BVElDX0NPTE9SKSB7XG4gICAgICAgIG5ld0Fubm90YXRpb24uY29sb3IgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByb3BzLmFkZEFubm90YXRpb25MYXllcihuZXdBbm5vdGF0aW9uKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc05ldzogZmFsc2UgfSk7XG4gICAgfVxuICB9XG5cbiAgc3VibWl0QW5ub3RhdGlvbigpIHtcbiAgICB0aGlzLmFwcGx5QW5ub3RhdGlvbigpO1xuICAgIHRoaXMucHJvcHMuY2xvc2UoKTtcbiAgfVxuXG4gIHJlbmRlckNoYXJ0SGVhZGVyKGxhYmVsLCBkZXNjcmlwdGlvbiwgdmFsdWUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPENvbnRyb2xIZWFkZXJcbiAgICAgICAgaG92ZXJlZFxuICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17IXZhbHVlID8gWydNYW5kYXRvcnknXSA6IFtdfVxuICAgICAgLz5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyVmFsdWVDb25maWd1cmF0aW9uKCkge1xuICAgIGNvbnN0IHsgYW5ub3RhdGlvblR5cGUsIHNvdXJjZVR5cGUsIHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCBsYWJlbCA9ICcnO1xuICAgIGxldCBkZXNjcmlwdGlvbiA9ICcnO1xuICAgIGlmIChyZXF1aXJlc1F1ZXJ5KHNvdXJjZVR5cGUpKSB7XG4gICAgICBpZiAoc291cmNlVHlwZSA9PT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFKSB7XG4gICAgICAgIGxhYmVsID0gdCgnQW5ub3RhdGlvbiBsYXllcicpO1xuICAgICAgICBkZXNjcmlwdGlvbiA9IHQoJ1NlbGVjdCB0aGUgQW5ub3RhdGlvbiBMYXllciB5b3Ugd291bGQgbGlrZSB0byB1c2UuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsYWJlbCA9IHQoJ0NoYXJ0Jyk7XG4gICAgICAgIGRlc2NyaXB0aW9uID0gdChcbiAgICAgICAgICBgVXNlIGFub3RoZXIgZXhpc3RpbmcgY2hhcnQgYXMgYSBzb3VyY2UgZm9yIGFubm90YXRpb25zIGFuZCBvdmVybGF5cy5cbiAgICAgICAgICBZb3VyIGNoYXJ0IG11c3QgYmUgb25lIG9mIHRoZXNlIHZpc3VhbGl6YXRpb24gdHlwZXM6IFslc11gLFxuICAgICAgICAgIHRoaXMuZ2V0U3VwcG9ydGVkU291cmNlVHlwZXMoYW5ub3RhdGlvblR5cGUpXG4gICAgICAgICAgICAubWFwKHggPT4geC5sYWJlbClcbiAgICAgICAgICAgIC5qb2luKCcsICcpLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQSkge1xuICAgICAgbGFiZWwgPSB0KCdGb3JtdWxhJyk7XG4gICAgICBkZXNjcmlwdGlvbiA9IHQoYEV4cGVjdHMgYSBmb3JtdWxhIHdpdGggZGVwZW5kaW5nIHRpbWUgcGFyYW1ldGVyICd4J1xuICAgICAgICBpbiBtaWxsaXNlY29uZHMgc2luY2UgZXBvY2guIG1hdGhqcyBpcyB1c2VkIHRvIGV2YWx1YXRlIHRoZSBmb3JtdWxhcy5cbiAgICAgICAgRXhhbXBsZTogJzJ4KzUnYCk7XG4gICAgfVxuICAgIGlmIChyZXF1aXJlc1F1ZXJ5KHNvdXJjZVR5cGUpKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8QXN5bmNTZWxlY3RcbiAgICAgICAgICAvKiBrZXkgdG8gZm9yY2UgcmUtcmVuZGVyIG9uIHNvdXJjZVR5cGUgY2hhbmdlICovXG4gICAgICAgICAga2V5PXtzb3VyY2VUeXBlfVxuICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciB2YWx1ZScpfVxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXZhbHVlXCJcbiAgICAgICAgICBoZWFkZXI9e3RoaXMucmVuZGVyQ2hhcnRIZWFkZXIobGFiZWwsIGRlc2NyaXB0aW9uLCB2YWx1ZSl9XG4gICAgICAgICAgb3B0aW9ucz17dGhpcy5mZXRjaE9wdGlvbnN9XG4gICAgICAgICAgdmFsdWU9e3ZhbHVlIHx8IG51bGx9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlU2VsZWN0VmFsdWV9XG4gICAgICAgICAgbm90Rm91bmRDb250ZW50PXs8Tm90Rm91bmRDb250ZW50IC8+fVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLkZPUk1VTEEpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLXZhbHVlXCJcbiAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgc2hvd0hlYWRlclxuICAgICAgICAgIGRlc2NyaXB0aW9uPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgICBsYWJlbD17bGFiZWx9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVUZXh0VmFsdWV9XG4gICAgICAgICAgdmFsaWRhdGlvbkVycm9ycz17XG4gICAgICAgICAgICAhdGhpcy5pc1ZhbGlkRm9ybXVsYUFubm90YXRpb24odmFsdWUsIGFubm90YXRpb25UeXBlKVxuICAgICAgICAgICAgICA/IFt0KCdCYWQgZm9ybXVsYS4nKV1cbiAgICAgICAgICAgICAgOiBbXVxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHJlbmRlclNsaWNlQ29uZmlndXJhdGlvbigpIHtcbiAgICBjb25zdCB7XG4gICAgICBhbm5vdGF0aW9uVHlwZSxcbiAgICAgIHNvdXJjZVR5cGUsXG4gICAgICB2YWx1ZSxcbiAgICAgIHNsaWNlLFxuICAgICAgb3ZlcnJpZGVzLFxuICAgICAgdGl0bGVDb2x1bW4sXG4gICAgICB0aW1lQ29sdW1uLFxuICAgICAgaW50ZXJ2YWxFbmRDb2x1bW4sXG4gICAgICBkZXNjcmlwdGlvbkNvbHVtbnMsXG4gICAgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBpZiAoIXNsaWNlIHx8ICF2YWx1ZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGlmIChzb3VyY2VUeXBlICE9PSBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUy5OQVRJVkUgJiYgc2xpY2UpIHtcbiAgICAgIGNvbnN0IGNvbHVtbnMgPSAoc2xpY2UuZGF0YS5ncm91cGJ5IHx8IFtdKVxuICAgICAgICAuY29uY2F0KHNsaWNlLmRhdGEuYWxsX2NvbHVtbnMgfHwgW10pXG4gICAgICAgIC5tYXAoeCA9PiAoeyB2YWx1ZTogeCwgbGFiZWw6IHggfSkpO1xuICAgICAgY29uc3QgdGltZUNvbHVtbk9wdGlvbnMgPSBzbGljZS5kYXRhLmluY2x1ZGVfdGltZVxuICAgICAgICA/IFt7IHZhbHVlOiAnX190aW1lc3RhbXAnLCBsYWJlbDogJ19fdGltZXN0YW1wJyB9XS5jb25jYXQoY29sdW1ucylcbiAgICAgICAgOiBjb2x1bW5zO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5SaWdodDogJzJyZW0nIH19PlxuICAgICAgICAgIDxQb3BvdmVyU2VjdGlvblxuICAgICAgICAgICAgaXNTZWxlY3RlZFxuICAgICAgICAgICAgdGl0bGU9e3QoJ0Fubm90YXRpb24gU2xpY2UgQ29uZmlndXJhdGlvbicpfVxuICAgICAgICAgICAgaW5mbz17dChgVGhpcyBzZWN0aW9uIGFsbG93cyB5b3UgdG8gY29uZmlndXJlIGhvdyB0byB1c2UgdGhlIHNsaWNlXG4gICAgICAgICAgICAgIHRvIGdlbmVyYXRlIGFubm90YXRpb25zLmApfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsoYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuRVZFTlQgfHxcbiAgICAgICAgICAgICAgYW5ub3RhdGlvblR5cGUgPT09IEFOTk9UQVRJT05fVFlQRVMuSU5URVJWQUwpICYmIChcbiAgICAgICAgICAgICAgPFNlbGVjdENvbnRyb2xcbiAgICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgdGltZSBjb2x1bW4nKX1cbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdGltZS1jb2x1bW5cIlxuICAgICAgICAgICAgICAgIGxhYmVsPXtcbiAgICAgICAgICAgICAgICAgIGFubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMXG4gICAgICAgICAgICAgICAgICAgID8gdCgnSW50ZXJ2YWwgc3RhcnQgY29sdW1uJylcbiAgICAgICAgICAgICAgICAgICAgOiB0KCdFdmVudCB0aW1lIGNvbHVtbicpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgJ1RoaXMgY29sdW1uIG11c3QgY29udGFpbiBkYXRlL3RpbWUgaW5mb3JtYXRpb24uJyxcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9eyF0aW1lQ29sdW1uID8gWydNYW5kYXRvcnknXSA6IFtdfVxuICAgICAgICAgICAgICAgIGNsZWFyYWJsZT17ZmFsc2V9XG4gICAgICAgICAgICAgICAgb3B0aW9ucz17dGltZUNvbHVtbk9wdGlvbnN9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3RpbWVDb2x1bW59XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHRpbWVDb2x1bW46IHYgfSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLklOVEVSVkFMICYmIChcbiAgICAgICAgICAgICAgPFNlbGVjdENvbnRyb2xcbiAgICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgaW50ZXJ2YWwgZW5kJyl9XG4gICAgICAgICAgICAgICAgaG92ZXJlZFxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLWludGVydmFsRW5kXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnSW50ZXJ2YWwgRW5kIGNvbHVtbicpfVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KFxuICAgICAgICAgICAgICAgICAgJ1RoaXMgY29sdW1uIG11c3QgY29udGFpbiBkYXRlL3RpbWUgaW5mb3JtYXRpb24uJyxcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM9eyFpbnRlcnZhbEVuZENvbHVtbiA/IFsnTWFuZGF0b3J5J10gOiBbXX1cbiAgICAgICAgICAgICAgICBvcHRpb25zPXtjb2x1bW5zfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtpbnRlcnZhbEVuZENvbHVtbn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gdGhpcy5zZXRTdGF0ZSh7IGludGVydmFsRW5kQ29sdW1uOiB2YWx1ZSB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxuICAgICAgICAgICAgICBhcmlhTGFiZWw9e3QoJ0Fubm90YXRpb24gbGF5ZXIgdGl0bGUgY29sdW1uJyl9XG4gICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdGl0bGVcIlxuICAgICAgICAgICAgICBsYWJlbD17dCgnVGl0bGUgQ29sdW1uJyl9XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdQaWNrIGEgdGl0bGUgZm9yIHlvdSBhbm5vdGF0aW9uLicpfVxuICAgICAgICAgICAgICBvcHRpb25zPXtbeyB2YWx1ZTogJycsIGxhYmVsOiB0KCdOb25lJykgfV0uY29uY2F0KGNvbHVtbnMpfVxuICAgICAgICAgICAgICB2YWx1ZT17dGl0bGVDb2x1bW59XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB0aGlzLnNldFN0YXRlKHsgdGl0bGVDb2x1bW46IHZhbHVlIH0pfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHthbm5vdGF0aW9uVHlwZSAhPT0gQU5OT1RBVElPTl9UWVBFUy5USU1FX1NFUklFUyAmJiAoXG4gICAgICAgICAgICAgIDxTZWxlY3RDb250cm9sXG4gICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIGRlc2NyaXB0aW9uIGNvbHVtbnMnKX1cbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItdGl0bGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdEZXNjcmlwdGlvbiBDb2x1bW5zJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoXG4gICAgICAgICAgICAgICAgICBcIlBpY2sgb25lIG9yIG1vcmUgY29sdW1ucyB0aGF0IHNob3VsZCBiZSBzaG93biBpbiB0aGUgYW5ub3RhdGlvbi4gSWYgeW91IGRvbid0IHNlbGVjdCBhIGNvbHVtbiBhbGwgb2YgdGhlbSB3aWxsIGJlIHNob3duLlwiLFxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgbXVsdGlcbiAgICAgICAgICAgICAgICBvcHRpb25zPXtjb2x1bW5zfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbkNvbHVtbnN9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3ZhbHVlID0+IHRoaXMuc2V0U3RhdGUoeyBkZXNjcmlwdGlvbkNvbHVtbnM6IHZhbHVlIH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAnMXJlbScgfX0+XG4gICAgICAgICAgICAgIDxDaGVja2JveENvbnRyb2xcbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tb3ZlcnJpZGUtdGltZV9yYW5nZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e3QoJ092ZXJyaWRlIHRpbWUgcmFuZ2UnKX1cbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dChgVGhpcyBjb250cm9scyB3aGV0aGVyIHRoZSBcInRpbWVfcmFuZ2VcIiBmaWVsZCBmcm9tIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgICB2aWV3IHNob3VsZCBiZSBwYXNzZWQgZG93biB0byB0aGUgY2hhcnQgY29udGFpbmluZyB0aGUgYW5ub3RhdGlvbiBkYXRhLmApfVxuICAgICAgICAgICAgICAgIHZhbHVlPXsndGltZV9yYW5nZScgaW4gb3ZlcnJpZGVzfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvdmVycmlkZXMudGltZV9yYW5nZTtcbiAgICAgICAgICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlczogeyAuLi5vdmVycmlkZXMsIHRpbWVfcmFuZ2U6IG51bGwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcyB9IH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxDaGVja2JveENvbnRyb2xcbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tb3ZlcnJpZGUtdGltZWdyYWluXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnT3ZlcnJpZGUgdGltZSBncmFpbicpfVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KGBUaGlzIGNvbnRyb2xzIHdoZXRoZXIgdGhlIHRpbWUgZ3JhaW4gZmllbGQgZnJvbSB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgICAgdmlldyBzaG91bGQgYmUgcGFzc2VkIGRvd24gdG8gdGhlIGNoYXJ0IGNvbnRhaW5pbmcgdGhlIGFubm90YXRpb24gZGF0YS5gKX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17J3RpbWVfZ3JhaW5fc3FsYScgaW4gb3ZlcnJpZGVzfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHtcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZSBvdmVycmlkZXMudGltZV9ncmFpbl9zcWxhO1xuICAgICAgICAgICAgICAgICAgZGVsZXRlIG92ZXJyaWRlcy5ncmFudWxhcml0eTtcbiAgICAgICAgICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4ub3ZlcnJpZGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZV9ncmFpbl9zcWxhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JhbnVsYXJpdHk6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgb3ZlcnJpZGVzOiB7IC4uLm92ZXJyaWRlcyB9IH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxUZXh0Q29udHJvbFxuICAgICAgICAgICAgICAgIGhvdmVyZWRcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10aW1lc2hpZnRcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdUaW1lIFNoaWZ0Jyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoYFRpbWUgZGVsdGEgaW4gbmF0dXJhbCBsYW5ndWFnZVxuICAgICAgICAgICAgICAgICAgKGV4YW1wbGU6ICAyNCBob3VycywgNyBkYXlzLCA1NiB3ZWVrcywgMzY1IGRheXMpYCl9XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtvdmVycmlkZXMudGltZV9zaGlmdH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PlxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG92ZXJyaWRlczogeyAuLi5vdmVycmlkZXMsIHRpbWVfc2hpZnQ6IHYgfSB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgcmVuZGVyRGlzcGxheUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgY29uc3Qge1xuICAgICAgY29sb3IsXG4gICAgICBvcGFjaXR5LFxuICAgICAgc3R5bGUsXG4gICAgICB3aWR0aCxcbiAgICAgIHNob3dNYXJrZXJzLFxuICAgICAgaGlkZUxpbmUsXG4gICAgICBhbm5vdGF0aW9uVHlwZSxcbiAgICB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBjb2xvclNjaGVtZSA9IGdldENhdGVnb3JpY2FsU2NoZW1lUmVnaXN0cnkoKVxuICAgICAgLmdldCh0aGlzLnByb3BzLmNvbG9yU2NoZW1lKVxuICAgICAgLmNvbG9ycy5jb25jYXQoKTtcbiAgICBpZiAoXG4gICAgICBjb2xvciAmJlxuICAgICAgY29sb3IgIT09IEFVVE9NQVRJQ19DT0xPUiAmJlxuICAgICAgIWNvbG9yU2NoZW1lLmZpbmQoeCA9PiB4LnRvTG93ZXJDYXNlKCkgPT09IGNvbG9yLnRvTG93ZXJDYXNlKCkpXG4gICAgKSB7XG4gICAgICBjb2xvclNjaGVtZS5wdXNoKGNvbG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxQb3BvdmVyU2VjdGlvblxuICAgICAgICBpc1NlbGVjdGVkXG4gICAgICAgIHRpdGxlPXt0KCdEaXNwbGF5IGNvbmZpZ3VyYXRpb24nKX1cbiAgICAgICAgaW5mbz17dCgnQ29uZmlndXJlIHlvdXIgaG93IHlvdSBvdmVybGF5IGlzIGRpc3BsYXllZCBoZXJlLicpfVxuICAgICAgPlxuICAgICAgICA8U2VsZWN0Q29udHJvbFxuICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciBzdHJva2UnKX1cbiAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1zdHJva2VcIlxuICAgICAgICAgIGxhYmVsPXt0KCdTdHlsZScpfVxuICAgICAgICAgIC8vIHNlZSAnLi4vLi4vLi4vdmlzdWFsaXphdGlvbnMvbnZkM192aXMuY3NzJ1xuICAgICAgICAgIG9wdGlvbnM9e1tcbiAgICAgICAgICAgIHsgdmFsdWU6ICdzb2xpZCcsIGxhYmVsOiB0KCdTb2xpZCcpIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAnZGFzaGVkJywgbGFiZWw6IHQoJ0Rhc2hlZCcpIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAnbG9uZ0Rhc2hlZCcsIGxhYmVsOiB0KCdMb25nIGRhc2hlZCcpIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAnZG90dGVkJywgbGFiZWw6IHQoJ0RvdHRlZCcpIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgICB2YWx1ZT17c3R5bGV9XG4gICAgICAgICAgY2xlYXJhYmxlPXtmYWxzZX1cbiAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgc3R5bGU6IHYgfSl9XG4gICAgICAgIC8+XG4gICAgICAgIDxTZWxlY3RDb250cm9sXG4gICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIG9wYWNpdHknKX1cbiAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1vcGFjaXR5XCJcbiAgICAgICAgICBsYWJlbD17dCgnT3BhY2l0eScpfVxuICAgICAgICAgIC8vIHNlZSAnLi4vLi4vLi4vdmlzdWFsaXphdGlvbnMvbnZkM192aXMuY3NzJ1xuICAgICAgICAgIG9wdGlvbnM9e1tcbiAgICAgICAgICAgIHsgdmFsdWU6ICcnLCBsYWJlbDogdCgnU29saWQnKSB9LFxuICAgICAgICAgICAgeyB2YWx1ZTogJ29wYWNpdHlMb3cnLCBsYWJlbDogJzAuMicgfSxcbiAgICAgICAgICAgIHsgdmFsdWU6ICdvcGFjaXR5TWVkaXVtJywgbGFiZWw6ICcwLjUnIH0sXG4gICAgICAgICAgICB7IHZhbHVlOiAnb3BhY2l0eUhpZ2gnLCBsYWJlbDogJzAuOCcgfSxcbiAgICAgICAgICBdfVxuICAgICAgICAgIHZhbHVlPXtvcGFjaXR5fVxuICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB0aGlzLnNldFN0YXRlKHsgb3BhY2l0eTogdmFsdWUgfSl9XG4gICAgICAgIC8+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPENvbnRyb2xIZWFkZXIgbGFiZWw9e3QoJ0NvbG9yJyl9IC8+XG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nIH19PlxuICAgICAgICAgICAgPENvbXBhY3RQaWNrZXJcbiAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICBjb2xvcnM9e2NvbG9yU2NoZW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZUNvbXBsZXRlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBjb2xvcjogdi5oZXggfSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Ub3A6ICcwLjVyZW0nLCBtYXJnaW5Cb3R0b206ICcwLjVyZW0nIH19XG4gICAgICAgICAgICAgIGJ1dHRvblN0eWxlPXtjb2xvciA9PT0gQVVUT01BVElDX0NPTE9SID8gJ3N1Y2Nlc3MnIDogJ2RlZmF1bHQnfVxuICAgICAgICAgICAgICBidXR0b25TaXplPVwieHNtYWxsXCJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGNvbG9yOiBBVVRPTUFUSUNfQ09MT1IgfSl9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt0KCdBdXRvbWF0aWMgQ29sb3InKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPFRleHRDb250cm9sXG4gICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItc3Ryb2tlLXdpZHRoXCJcbiAgICAgICAgICBsYWJlbD17dCgnTGluZSB3aWR0aCcpfVxuICAgICAgICAgIGlzSW50XG4gICAgICAgICAgdmFsdWU9e3dpZHRofVxuICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyB3aWR0aDogdiB9KX1cbiAgICAgICAgLz5cbiAgICAgICAge2Fubm90YXRpb25UeXBlID09PSBBTk5PVEFUSU9OX1RZUEVTLlRJTUVfU0VSSUVTICYmIChcbiAgICAgICAgICA8Q2hlY2tib3hDb250cm9sXG4gICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1zaG93LW1hcmtlcnNcIlxuICAgICAgICAgICAgbGFiZWw9e3QoJ1Nob3cgTWFya2VycycpfVxuICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1Nob3dzIG9yIGhpZGVzIG1hcmtlcnMgZm9yIHRoZSB0aW1lIHNlcmllcycpfVxuICAgICAgICAgICAgdmFsdWU9e3Nob3dNYXJrZXJzfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3YgPT4gdGhpcy5zZXRTdGF0ZSh7IHNob3dNYXJrZXJzOiB2IH0pfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHthbm5vdGF0aW9uVHlwZSA9PT0gQU5OT1RBVElPTl9UWVBFUy5USU1FX1NFUklFUyAmJiAoXG4gICAgICAgICAgPENoZWNrYm94Q29udHJvbFxuICAgICAgICAgICAgaG92ZXJlZFxuICAgICAgICAgICAgbmFtZT1cImFubm90YXRpb24tbGF5ZXItaGlkZS1saW5lXCJcbiAgICAgICAgICAgIGxhYmVsPXt0KCdIaWRlIExpbmUnKX1cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdIaWRlcyB0aGUgTGluZSBmb3IgdGhlIHRpbWUgc2VyaWVzJyl9XG4gICAgICAgICAgICB2YWx1ZT17aGlkZUxpbmV9XG4gICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgaGlkZUxpbmU6IHYgfSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGlzTmV3LCBuYW1lLCBhbm5vdGF0aW9uVHlwZSwgc291cmNlVHlwZSwgc2hvdywgc2hvd0xhYmVsIH0gPVxuICAgICAgdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy5pc1ZhbGlkRm9ybSgpO1xuICAgIGNvbnN0IG1ldGFkYXRhID0gZ2V0Q2hhcnRNZXRhZGF0YVJlZ2lzdHJ5KCkuZ2V0KHRoaXMucHJvcHMudml6VHlwZSk7XG4gICAgY29uc3Qgc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzID0gbWV0YWRhdGFcbiAgICAgID8gbWV0YWRhdGEuc3VwcG9ydGVkQW5ub3RhdGlvblR5cGVzLm1hcChcbiAgICAgICAgICB0eXBlID0+IEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEFbdHlwZV0sXG4gICAgICAgIClcbiAgICAgIDogW107XG4gICAgY29uc3Qgc3VwcG9ydGVkU291cmNlVHlwZXMgPSB0aGlzLmdldFN1cHBvcnRlZFNvdXJjZVR5cGVzKGFubm90YXRpb25UeXBlKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7dGhpcy5wcm9wcy5lcnJvciAmJiAoXG4gICAgICAgICAgPHNwYW4gc3R5bGU9e3sgY29sb3I6IHRoaXMucHJvcHMudGhlbWUuY29sb3JzLmVycm9yLmJhc2UgfX0+XG4gICAgICAgICAgICBFUlJPUjoge3RoaXMucHJvcHMuZXJyb3J9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICApfVxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogJ3JvdycgfX0+XG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5SaWdodDogJzJyZW0nIH19PlxuICAgICAgICAgICAgPFBvcG92ZXJTZWN0aW9uXG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWRcbiAgICAgICAgICAgICAgdGl0bGU9e3QoJ0xheWVyIGNvbmZpZ3VyYXRpb24nKX1cbiAgICAgICAgICAgICAgaW5mbz17dCgnQ29uZmlndXJlIHRoZSBiYXNpY3Mgb2YgeW91ciBBbm5vdGF0aW9uIExheWVyLicpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci1uYW1lXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17dCgnTmFtZScpfVxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17bmFtZX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgbmFtZTogdiB9KX1cbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshbmFtZSA/IFt0KCdNYW5kYXRvcnknKV0gOiBbXX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxheWVyLWhpZGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdIaWRlIGxheWVyJyl9XG4gICAgICAgICAgICAgICAgdmFsdWU9eyFzaG93fVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2ID0+IHRoaXMuc2V0U3RhdGUoeyBzaG93OiAhdiB9KX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPENoZWNrYm94Q29udHJvbFxuICAgICAgICAgICAgICAgIG5hbWU9XCJhbm5vdGF0aW9uLWxhYmVsLXNob3dcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdTaG93IGxhYmVsJyl9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3Nob3dMYWJlbH1cbiAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3QoJ1doZXRoZXIgdG8gYWx3YXlzIHNob3cgdGhlIGFubm90YXRpb24gbGFiZWwnKX1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17diA9PiB0aGlzLnNldFN0YXRlKHsgc2hvd0xhYmVsOiB2IH0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxuICAgICAgICAgICAgICAgIGFyaWFMYWJlbD17dCgnQW5ub3RhdGlvbiBsYXllciB0eXBlJyl9XG4gICAgICAgICAgICAgICAgaG92ZXJlZFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXt0KCdDaG9vc2UgdGhlIGFubm90YXRpb24gbGF5ZXIgdHlwZScpfVxuICAgICAgICAgICAgICAgIGxhYmVsPXt0KCdBbm5vdGF0aW9uIGxheWVyIHR5cGUnKX1cbiAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1sYXllci10eXBlXCJcbiAgICAgICAgICAgICAgICBjbGVhcmFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e3N1cHBvcnRlZEFubm90YXRpb25UeXBlc31cbiAgICAgICAgICAgICAgICB2YWx1ZT17YW5ub3RhdGlvblR5cGV9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQW5ub3RhdGlvblR5cGV9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHtzdXBwb3J0ZWRTb3VyY2VUeXBlcy5sZW5ndGggPiAwICYmIChcbiAgICAgICAgICAgICAgICA8U2VsZWN0Q29udHJvbFxuICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsPXt0KCdBbm5vdGF0aW9uIHNvdXJjZSB0eXBlJyl9XG4gICAgICAgICAgICAgICAgICBob3ZlcmVkXG4gICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj17dCgnQ2hvb3NlIHRoZSBzb3VyY2Ugb2YgeW91ciBhbm5vdGF0aW9ucycpfVxuICAgICAgICAgICAgICAgICAgbGFiZWw9e3QoJ0Fubm90YXRpb24gc291cmNlJyl9XG4gICAgICAgICAgICAgICAgICBuYW1lPVwiYW5ub3RhdGlvbi1zb3VyY2UtdHlwZVwiXG4gICAgICAgICAgICAgICAgICBvcHRpb25zPXtzdXBwb3J0ZWRTb3VyY2VUeXBlc31cbiAgICAgICAgICAgICAgICAgIG5vdEZvdW5kQ29udGVudD17PE5vdEZvdW5kQ29udGVudCAvPn1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtzb3VyY2VUeXBlfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQW5ub3RhdGlvblNvdXJjZVR5cGV9XG4gICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uRXJyb3JzPXshc291cmNlVHlwZSA/IFt0KCdNYW5kYXRvcnknKV0gOiBbXX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJWYWx1ZUNvbmZpZ3VyYXRpb24oKX1cbiAgICAgICAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3RoaXMucmVuZGVyU2xpY2VDb25maWd1cmF0aW9uKCl9XG4gICAgICAgICAge3RoaXMucmVuZGVyRGlzcGxheUNvbmZpZ3VyYXRpb24oKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nIH19PlxuICAgICAgICAgIHtpc05ldyA/IChcbiAgICAgICAgICAgIDxCdXR0b24gYnV0dG9uU2l6ZT1cInNtYWxsXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5jbG9zZSgpfT5cbiAgICAgICAgICAgICAge3QoJ0NhbmNlbCcpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxCdXR0b24gYnV0dG9uU2l6ZT1cInNtYWxsXCIgb25DbGljaz17dGhpcy5kZWxldGVBbm5vdGF0aW9ufT5cbiAgICAgICAgICAgICAge3QoJ1JlbW92ZScpfVxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICBidXR0b25TaXplPVwic21hbGxcIlxuICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzVmFsaWR9XG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuYXBwbHlBbm5vdGF0aW9ufVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dCgnQXBwbHknKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGJ1dHRvblNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICAgIGJ1dHRvblN0eWxlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNWYWxpZH1cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zdWJtaXRBbm5vdGF0aW9ufVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dCgnT0snKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cbn1cblxuQW5ub3RhdGlvbkxheWVyLnByb3BUeXBlcyA9IHByb3BUeXBlcztcbkFubm90YXRpb25MYXllci5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShBbm5vdGF0aW9uTGF5ZXIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/explore/components/controls/AnnotationLayerControl/AnnotationLayer.jsx\n");

/***/ }),

/***/ "./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js":
/*!***********************************************************************************!*\
  !*** ./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js ***!
  \***********************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ANNOTATION_SOURCE_TYPES: () => (/* binding */ ANNOTATION_SOURCE_TYPES),\n/* harmony export */   ANNOTATION_SOURCE_TYPES_METADATA: () => (/* binding */ ANNOTATION_SOURCE_TYPES_METADATA),\n/* harmony export */   ANNOTATION_TYPES: () => (/* binding */ ANNOTATION_TYPES),\n/* harmony export */   ANNOTATION_TYPES_METADATA: () => (/* binding */ ANNOTATION_TYPES_METADATA),\n/* harmony export */   DEFAULT_ANNOTATION_TYPE: () => (/* binding */ DEFAULT_ANNOTATION_TYPE),\n/* harmony export */   requiresQuery: () => (/* binding */ requiresQuery)\n/* harmony export */ });\n/* unused harmony export applyNativeColumns */\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @superset-ui/core */ \"./packages/superset-ui-core/src/translation/TranslatorSingleton.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\nfunction extractTypes(metadata) {\n  return Object.keys(metadata).reduce((prev, key) => {\n    const result = prev;\n    result[key] = key;\n    return result;\n  }, {});\n}\n\nconst ANNOTATION_TYPES_METADATA = {\n  FORMULA: {\n    value: 'FORMULA',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Formula')\n  },\n  EVENT: {\n    value: 'EVENT',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Event'),\n    supportNativeSource: true\n  },\n  INTERVAL: {\n    value: 'INTERVAL',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Interval'),\n    supportNativeSource: true\n  },\n  TIME_SERIES: {\n    value: 'TIME_SERIES',\n    label: (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_0__.t)('Time series')\n  }\n};\n\nconst ANNOTATION_TYPES = extractTypes(ANNOTATION_TYPES_METADATA);\n\nconst DEFAULT_ANNOTATION_TYPE = ANNOTATION_TYPES.FORMULA;\n\nconst ANNOTATION_SOURCE_TYPES_METADATA = {\n  NATIVE: {\n    value: 'NATIVE',\n    label: 'Superset annotation'\n  }\n};\n\nconst ANNOTATION_SOURCE_TYPES = extractTypes(\n  ANNOTATION_SOURCE_TYPES_METADATA\n);\n\nfunction requiresQuery(annotationSourceType) {\n  return !!annotationSourceType;\n}\n\nconst NATIVE_COLUMN_NAMES = {\n  timeColumn: 'start_dttm',\n  intervalEndColumn: 'end_dttm',\n  titleColumn: 'short_descr',\n  descriptionColumns: ['long_descr']\n};\n\nfunction applyNativeColumns(annotation) {\n  if (annotation.sourceType === ANNOTATION_SOURCE_TYPES.NATIVE) {\n    return { ...annotation, ...NATIVE_COLUMN_NAMES };\n  }\n  return annotation;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extractTypes, \"extractTypes\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_TYPES_METADATA, \"ANNOTATION_TYPES_METADATA\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_TYPES, \"ANNOTATION_TYPES\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(DEFAULT_ANNOTATION_TYPE, \"DEFAULT_ANNOTATION_TYPE\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_SOURCE_TYPES_METADATA, \"ANNOTATION_SOURCE_TYPES_METADATA\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(ANNOTATION_SOURCE_TYPES, \"ANNOTATION_SOURCE_TYPES\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(requiresQuery, \"requiresQuery\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(NATIVE_COLUMN_NAMES, \"NATIVE_COLUMN_NAMES\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");reactHotLoader.register(applyNativeColumns, \"applyNativeColumns\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvblR5cGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9zcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL0Fubm90YXRpb25MYXllckNvbnRyb2wvQW5ub3RhdGlvblR5cGVzLmpzP2IzOWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgdCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcblxuZnVuY3Rpb24gZXh0cmFjdFR5cGVzKG1ldGFkYXRhKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhtZXRhZGF0YSkucmVkdWNlKChwcmV2LCBrZXkpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBwcmV2O1xuICAgIHJlc3VsdFtrZXldID0ga2V5O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIHt9KTtcbn1cblxuZXhwb3J0IGNvbnN0IEFOTk9UQVRJT05fVFlQRVNfTUVUQURBVEEgPSB7XG4gIEZPUk1VTEE6IHtcbiAgICB2YWx1ZTogJ0ZPUk1VTEEnLFxuICAgIGxhYmVsOiB0KCdGb3JtdWxhJyksXG4gIH0sXG4gIEVWRU5UOiB7XG4gICAgdmFsdWU6ICdFVkVOVCcsXG4gICAgbGFiZWw6IHQoJ0V2ZW50JyksXG4gICAgc3VwcG9ydE5hdGl2ZVNvdXJjZTogdHJ1ZSxcbiAgfSxcbiAgSU5URVJWQUw6IHtcbiAgICB2YWx1ZTogJ0lOVEVSVkFMJyxcbiAgICBsYWJlbDogdCgnSW50ZXJ2YWwnKSxcbiAgICBzdXBwb3J0TmF0aXZlU291cmNlOiB0cnVlLFxuICB9LFxuICBUSU1FX1NFUklFUzoge1xuICAgIHZhbHVlOiAnVElNRV9TRVJJRVMnLFxuICAgIGxhYmVsOiB0KCdUaW1lIHNlcmllcycpLFxuICB9LFxufTtcblxuZXhwb3J0IGNvbnN0IEFOTk9UQVRJT05fVFlQRVMgPSBleHRyYWN0VHlwZXMoQU5OT1RBVElPTl9UWVBFU19NRVRBREFUQSk7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0FOTk9UQVRJT05fVFlQRSA9IEFOTk9UQVRJT05fVFlQRVMuRk9STVVMQTtcblxuZXhwb3J0IGNvbnN0IEFOTk9UQVRJT05fU09VUkNFX1RZUEVTX01FVEFEQVRBID0ge1xuICBOQVRJVkU6IHtcbiAgICB2YWx1ZTogJ05BVElWRScsXG4gICAgbGFiZWw6ICdTdXBlcnNldCBhbm5vdGF0aW9uJyxcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCBBTk5PVEFUSU9OX1NPVVJDRV9UWVBFUyA9IGV4dHJhY3RUeXBlcyhcbiAgQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVNfTUVUQURBVEEsXG4pO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZXNRdWVyeShhbm5vdGF0aW9uU291cmNlVHlwZSkge1xuICByZXR1cm4gISFhbm5vdGF0aW9uU291cmNlVHlwZTtcbn1cblxuY29uc3QgTkFUSVZFX0NPTFVNTl9OQU1FUyA9IHtcbiAgdGltZUNvbHVtbjogJ3N0YXJ0X2R0dG0nLFxuICBpbnRlcnZhbEVuZENvbHVtbjogJ2VuZF9kdHRtJyxcbiAgdGl0bGVDb2x1bW46ICdzaG9ydF9kZXNjcicsXG4gIGRlc2NyaXB0aW9uQ29sdW1uczogWydsb25nX2Rlc2NyJ10sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlOYXRpdmVDb2x1bW5zKGFubm90YXRpb24pIHtcbiAgaWYgKGFubm90YXRpb24uc291cmNlVHlwZSA9PT0gQU5OT1RBVElPTl9TT1VSQ0VfVFlQRVMuTkFUSVZFKSB7XG4gICAgcmV0dXJuIHsgLi4uYW5ub3RhdGlvbiwgLi4uTkFUSVZFX0NPTFVNTl9OQU1FUyB9O1xuICB9XG4gIHJldHVybiBhbm5vdGF0aW9uO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/explore/components/controls/AnnotationLayerControl/AnnotationTypes.js\n");

/***/ })

}]);