{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport {\n  ensureIsArray,\n  FeatureFlag,\n  isFeatureEnabled,\n  logging,\n  styled,\n  t } from\n'@superset-ui/core';\nimport { PLACEHOLDER_DATASOURCE } from 'src/dashboard/constants';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { isCurrentUserBot } from 'src/utils/isBot';\nimport { ChartSource } from 'src/types/ChartSource';\nimport { ResourceStatus } from 'src/hooks/apiResources/apiResources';\nimport ChartRenderer from './ChartRenderer';\nimport { ChartErrorMessage } from './ChartErrorMessage';\nimport { getChartRequiredFieldsMissingMessage } from '../../utils/getChartRequiredFieldsMissingMessage';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n\nconst propTypes = {\n  annotationData: PropTypes.object,\n  actions: PropTypes.object,\n  chartId: PropTypes.number.isRequired,\n  datasource: PropTypes.object,\n  // current chart is included by dashboard\n  dashboardId: PropTypes.number,\n  // original selected values for FilterBox viz\n  // so that FilterBox can pre-populate selected values\n  // only affect UI control\n  initialValues: PropTypes.object,\n  // formData contains chart's own filter parameter\n  // and merged with extra filter that current dashboard applying\n  formData: PropTypes.object.isRequired,\n  labelsColor: PropTypes.object,\n  labelsColorMap: PropTypes.object,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  setControlValue: PropTypes.func,\n  timeout: PropTypes.number,\n  vizType: PropTypes.string.isRequired,\n  triggerRender: PropTypes.bool,\n  force: PropTypes.bool,\n  isFiltersInitialized: PropTypes.bool,\n  // state\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  chartStackTrace: PropTypes.string,\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  chartIsStale: PropTypes.bool,\n  errorMessage: PropTypes.node,\n  // dashboard callbacks\n  addFilter: PropTypes.func,\n  onQuery: PropTypes.func,\n  onFilterMenuOpen: PropTypes.func,\n  onFilterMenuClose: PropTypes.func,\n  ownState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool\n};\n\nconst BLANK = {};\nconst NONEXISTENT_DATASET = t(\n  'The dataset associated with this chart no longer exists'\n);\n\nconst defaultProps = {\n  addFilter: () => BLANK,\n  onFilterMenuOpen: () => BLANK,\n  onFilterMenuClose: () => BLANK,\n  initialValues: BLANK,\n  setControlValue() {},\n  triggerRender: false,\n  dashboardId: null,\n  chartStackTrace: null,\n  force: false,\n  isInView: true\n};\n\nconst Styles = styled.div`\n  min-height: ${(p) => p.height}px;\n  position: relative;\n  text-align: center;\n\n  .chart-tooltip {\n    opacity: 0.75;\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  }\n\n  .slice_container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    height: ${(p) => p.height}px;\n\n    .pivot_table tbody tr {\n      font-feature-settings: 'tnum' 1;\n    }\n\n    .alert {\n      margin: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\n\nconst LoadingDiv = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 80%;\n  transform: translate(-50%, -50%);\n`;\n\nconst MessageSpan = styled.span`\n  display: block;\n  margin: ${({ theme }) => theme.gridUnit * 4}px auto;\n  width: fit-content;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst MonospaceDiv = styled.div`\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n  word-break: break-word;\n  overflow-x: auto;\n  white-space: pre-wrap;\n`;\n\nclass Chart extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleRenderContainerFailure =\n    this.handleRenderContainerFailure.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.triggerQuery) {\n      this.runQuery();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.triggerQuery) {\n      this.runQuery();\n    }\n  }\n\n  runQuery() {\n    // Create chart with POST request\n    this.props.actions.postChartFormData(\n      this.props.formData,\n      Boolean(this.props.force || getUrlParam(URL_PARAMS.force)), // allow override via url params force=true\n      this.props.timeout,\n      this.props.chartId,\n      this.props.dashboardId,\n      this.props.ownState\n    );\n  }\n\n  handleRenderContainerFailure(error, info) {\n    const { actions, chartId } = this.props;\n    logging.warn(error);\n    actions.chartRenderingFailed(\n      error.toString(),\n      chartId,\n      info ? info.componentStack : null\n    );\n\n    actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n      slice_id: chartId,\n      has_err: true,\n      error_details: error.toString(),\n      start_offset: this.renderStartTime,\n      ts: new Date().getTime(),\n      duration: Logger.getTimestamp() - this.renderStartTime\n    });\n  }\n\n  renderErrorMessage(queryResponse) {var _queryResponse$errors;\n    const {\n      chartId,\n      chartAlert,\n      chartStackTrace,\n      datasource,\n      dashboardId,\n      height,\n      datasetsStatus\n    } = this.props;\n    const error = queryResponse == null ? void 0 : (_queryResponse$errors = queryResponse.errors) == null ? void 0 : _queryResponse$errors[0];\n    const message = chartAlert || (queryResponse == null ? void 0 : queryResponse.message);\n\n    // if datasource is still loading, don't render JS errors\n    if (\n    chartAlert !== undefined &&\n    chartAlert !== NONEXISTENT_DATASET &&\n    datasource === PLACEHOLDER_DATASOURCE &&\n    datasetsStatus !== ResourceStatus.Error)\n    {\n      return (\n        _jsx(Styles, {\n\n          \"data-ui-anchor\": \"chart\",\n          className: \"chart-container\",\n          \"data-test\": \"chart-container\",\n          height: height, children:\n\n          _jsx(Loading, {}) }, chartId\n        ));\n\n    }\n\n    return (\n      _jsx(ChartErrorMessage, {\n\n        chartId: chartId,\n        error: error,\n        subtitle: _jsx(MonospaceDiv, { children: message }),\n        copyText: message,\n        link: queryResponse ? queryResponse.link : null,\n        source: dashboardId ? ChartSource.Dashboard : ChartSource.Explore,\n        stackTrace: chartStackTrace }, chartId\n      ));\n\n  }\n\n  renderSpinner(databaseName) {\n    const message = databaseName ?\n    t('Waiting on %s', databaseName) :\n    t('Waiting on database...');\n\n    return (\n      _jsxs(LoadingDiv, { children: [\n        _jsx(Loading, { position: \"inline-centered\" }),\n        _jsx(MessageSpan, { children: message })] }\n      ));\n\n  }\n\n  renderChartContainer() {\n    return (\n      _jsx(\"div\", { className: \"slice_container\", \"data-test\": \"slice-container\", children:\n        this.props.isInView ||\n        !isFeatureEnabled(FeatureFlag.DashboardVirtualization) ||\n        isCurrentUserBot() ?\n        _jsx(ChartRenderer, { ...\n          this.props,\n          source: this.props.dashboardId ? 'dashboard' : 'explore',\n          \"data-test\": this.props.vizType }\n        ) :\n\n        _jsx(Loading, {}) }\n\n      ));\n\n  }\n\n  render() {var _datasource$database;\n    const {\n      height,\n      chartAlert,\n      chartStatus,\n      datasource,\n      errorMessage,\n      chartIsStale,\n      queriesResponse = [],\n      width\n    } = this.props;\n    const databaseName = datasource == null ? void 0 : (_datasource$database = datasource.database) == null ? void 0 : _datasource$database.name;\n\n    const isLoading = chartStatus === 'loading';\n    this.renderContainerStartTime = Logger.getTimestamp();\n    if (chartStatus === 'failed') {\n      return queriesResponse.map((item) => this.renderErrorMessage(item));\n    }\n\n    if (errorMessage && ensureIsArray(queriesResponse).length === 0) {\n      return (\n        _jsx(EmptyStateBig, {\n          title: t('Add required control values to preview chart'),\n          description: getChartRequiredFieldsMissingMessage(true),\n          image: \"chart.svg\" }\n        ));\n\n    }\n\n    if (\n    !isLoading &&\n    !chartAlert &&\n    !errorMessage &&\n    chartIsStale &&\n    ensureIsArray(queriesResponse).length === 0)\n    {\n      return (\n        _jsx(EmptyStateBig, {\n          title: t('Your chart is ready to go!'),\n          description:\n          _jsxs(\"span\", { children: [\n            t(\n              'Click on \"Create chart\" button in the control panel on the left to preview a visualization or'\n            ), ' ',\n            _jsx(\"span\", { role: \"button\", tabIndex: 0, onClick: this.props.onQuery, children:\n              t('click here') }\n            ), \".\"] }\n\n          ),\n\n          image: \"chart.svg\" }\n        ));\n\n    }\n\n    return (\n      _jsx(ErrorBoundary, {\n        onError: this.handleRenderContainerFailure,\n        showMessage: false, children:\n\n        _jsx(Styles, {\n          \"data-ui-anchor\": \"chart\",\n          className: \"chart-container\",\n          \"data-test\": \"chart-container\",\n          height: height,\n          width: width, children:\n\n          isLoading ?\n          this.renderSpinner(databaseName) :\n          this.renderChartContainer() }\n        ) }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;const _default =\n\nChart;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(BLANK, \"BLANK\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(NONEXISTENT_DATASET, \"NONEXISTENT_DATASET\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(Styles, \"Styles\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(LoadingDiv, \"LoadingDiv\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(MessageSpan, \"MessageSpan\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(MonospaceDiv, \"MonospaceDiv\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(Chart, \"Chart\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/components/Chart/Chart.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["PropTypes","PureComponent","ensureIsArray","FeatureFlag","isFeatureEnabled","logging","styled","t","PLACEHOLDER_DATASOURCE","Loading","EmptyStateBig","ErrorBoundary","Logger","LOG_ACTIONS_RENDER_CHART","URL_PARAMS","getUrlParam","isCurrentUserBot","ChartSource","ResourceStatus","ChartRenderer","ChartErrorMessage","getChartRequiredFieldsMissingMessage","jsx","_jsx","jsxs","_jsxs","propTypes","annotationData","object","actions","chartId","number","isRequired","datasource","dashboardId","initialValues","formData","labelsColor","labelsColorMap","width","height","setControlValue","func","timeout","vizType","string","triggerRender","bool","force","isFiltersInitialized","chartAlert","chartStatus","chartStackTrace","queriesResponse","arrayOf","triggerQuery","chartIsStale","errorMessage","node","addFilter","onQuery","onFilterMenuOpen","onFilterMenuClose","ownState","postTransformProps","datasetsStatus","oneOf","isInView","emitCrossFilters","BLANK","NONEXISTENT_DATASET","defaultProps","Styles","div","p","theme","typography","sizes","s","gridUnit","LoadingDiv","MessageSpan","span","colors","grayscale","base","MonospaceDiv","families","monospace","Chart","constructor","props","handleRenderContainerFailure","bind","componentDidMount","runQuery","componentDidUpdate","postChartFormData","Boolean","error","info","warn","chartRenderingFailed","toString","componentStack","logEvent","slice_id","has_err","error_details","start_offset","renderStartTime","ts","Date","getTime","duration","getTimestamp","renderErrorMessage","queryResponse","_queryResponse$errors","errors","message","undefined","Error","className","children","subtitle","copyText","link","source","Dashboard","Explore","stackTrace","renderSpinner","databaseName","position","renderChartContainer","DashboardVirtualization","render","_datasource$database","database","name","isLoading","renderContainerStartTime","map","item","length","title","description","image","role","tabIndex","onClick","onError","showMessage","__reactstandin__regenerateByEval","key","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/Chart/Chart.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport {\n  ensureIsArray,\n  FeatureFlag,\n  isFeatureEnabled,\n  logging,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport { PLACEHOLDER_DATASOURCE } from 'src/dashboard/constants';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport { Logger, LOG_ACTIONS_RENDER_CHART } from 'src/logger/LogUtils';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { isCurrentUserBot } from 'src/utils/isBot';\nimport { ChartSource } from 'src/types/ChartSource';\nimport { ResourceStatus } from 'src/hooks/apiResources/apiResources';\nimport ChartRenderer from './ChartRenderer';\nimport { ChartErrorMessage } from './ChartErrorMessage';\nimport { getChartRequiredFieldsMissingMessage } from '../../utils/getChartRequiredFieldsMissingMessage';\n\nconst propTypes = {\n  annotationData: PropTypes.object,\n  actions: PropTypes.object,\n  chartId: PropTypes.number.isRequired,\n  datasource: PropTypes.object,\n  // current chart is included by dashboard\n  dashboardId: PropTypes.number,\n  // original selected values for FilterBox viz\n  // so that FilterBox can pre-populate selected values\n  // only affect UI control\n  initialValues: PropTypes.object,\n  // formData contains chart's own filter parameter\n  // and merged with extra filter that current dashboard applying\n  formData: PropTypes.object.isRequired,\n  labelsColor: PropTypes.object,\n  labelsColorMap: PropTypes.object,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  setControlValue: PropTypes.func,\n  timeout: PropTypes.number,\n  vizType: PropTypes.string.isRequired,\n  triggerRender: PropTypes.bool,\n  force: PropTypes.bool,\n  isFiltersInitialized: PropTypes.bool,\n  // state\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  chartStackTrace: PropTypes.string,\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  chartIsStale: PropTypes.bool,\n  errorMessage: PropTypes.node,\n  // dashboard callbacks\n  addFilter: PropTypes.func,\n  onQuery: PropTypes.func,\n  onFilterMenuOpen: PropTypes.func,\n  onFilterMenuClose: PropTypes.func,\n  ownState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool,\n};\n\nconst BLANK = {};\nconst NONEXISTENT_DATASET = t(\n  'The dataset associated with this chart no longer exists',\n);\n\nconst defaultProps = {\n  addFilter: () => BLANK,\n  onFilterMenuOpen: () => BLANK,\n  onFilterMenuClose: () => BLANK,\n  initialValues: BLANK,\n  setControlValue() {},\n  triggerRender: false,\n  dashboardId: null,\n  chartStackTrace: null,\n  force: false,\n  isInView: true,\n};\n\nconst Styles = styled.div`\n  min-height: ${p => p.height}px;\n  position: relative;\n  text-align: center;\n\n  .chart-tooltip {\n    opacity: 0.75;\n    font-size: ${({ theme }) => theme.typography.sizes.s}px;\n  }\n\n  .slice_container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    height: ${p => p.height}px;\n\n    .pivot_table tbody tr {\n      font-feature-settings: 'tnum' 1;\n    }\n\n    .alert {\n      margin: ${({ theme }) => theme.gridUnit * 2}px;\n    }\n  }\n`;\n\nconst LoadingDiv = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 80%;\n  transform: translate(-50%, -50%);\n`;\n\nconst MessageSpan = styled.span`\n  display: block;\n  margin: ${({ theme }) => theme.gridUnit * 4}px auto;\n  width: fit-content;\n  color: ${({ theme }) => theme.colors.grayscale.base};\n`;\n\nconst MonospaceDiv = styled.div`\n  font-family: ${({ theme }) => theme.typography.families.monospace};\n  word-break: break-word;\n  overflow-x: auto;\n  white-space: pre-wrap;\n`;\n\nclass Chart extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleRenderContainerFailure =\n      this.handleRenderContainerFailure.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.triggerQuery) {\n      this.runQuery();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.triggerQuery) {\n      this.runQuery();\n    }\n  }\n\n  runQuery() {\n    // Create chart with POST request\n    this.props.actions.postChartFormData(\n      this.props.formData,\n      Boolean(this.props.force || getUrlParam(URL_PARAMS.force)), // allow override via url params force=true\n      this.props.timeout,\n      this.props.chartId,\n      this.props.dashboardId,\n      this.props.ownState,\n    );\n  }\n\n  handleRenderContainerFailure(error, info) {\n    const { actions, chartId } = this.props;\n    logging.warn(error);\n    actions.chartRenderingFailed(\n      error.toString(),\n      chartId,\n      info ? info.componentStack : null,\n    );\n\n    actions.logEvent(LOG_ACTIONS_RENDER_CHART, {\n      slice_id: chartId,\n      has_err: true,\n      error_details: error.toString(),\n      start_offset: this.renderStartTime,\n      ts: new Date().getTime(),\n      duration: Logger.getTimestamp() - this.renderStartTime,\n    });\n  }\n\n  renderErrorMessage(queryResponse) {\n    const {\n      chartId,\n      chartAlert,\n      chartStackTrace,\n      datasource,\n      dashboardId,\n      height,\n      datasetsStatus,\n    } = this.props;\n    const error = queryResponse?.errors?.[0];\n    const message = chartAlert || queryResponse?.message;\n\n    // if datasource is still loading, don't render JS errors\n    if (\n      chartAlert !== undefined &&\n      chartAlert !== NONEXISTENT_DATASET &&\n      datasource === PLACEHOLDER_DATASOURCE &&\n      datasetsStatus !== ResourceStatus.Error\n    ) {\n      return (\n        <Styles\n          key={chartId}\n          data-ui-anchor=\"chart\"\n          className=\"chart-container\"\n          data-test=\"chart-container\"\n          height={height}\n        >\n          <Loading />\n        </Styles>\n      );\n    }\n\n    return (\n      <ChartErrorMessage\n        key={chartId}\n        chartId={chartId}\n        error={error}\n        subtitle={<MonospaceDiv>{message}</MonospaceDiv>}\n        copyText={message}\n        link={queryResponse ? queryResponse.link : null}\n        source={dashboardId ? ChartSource.Dashboard : ChartSource.Explore}\n        stackTrace={chartStackTrace}\n      />\n    );\n  }\n\n  renderSpinner(databaseName) {\n    const message = databaseName\n      ? t('Waiting on %s', databaseName)\n      : t('Waiting on database...');\n\n    return (\n      <LoadingDiv>\n        <Loading position=\"inline-centered\" />\n        <MessageSpan>{message}</MessageSpan>\n      </LoadingDiv>\n    );\n  }\n\n  renderChartContainer() {\n    return (\n      <div className=\"slice_container\" data-test=\"slice-container\">\n        {this.props.isInView ||\n        !isFeatureEnabled(FeatureFlag.DashboardVirtualization) ||\n        isCurrentUserBot() ? (\n          <ChartRenderer\n            {...this.props}\n            source={this.props.dashboardId ? 'dashboard' : 'explore'}\n            data-test={this.props.vizType}\n          />\n        ) : (\n          <Loading />\n        )}\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      height,\n      chartAlert,\n      chartStatus,\n      datasource,\n      errorMessage,\n      chartIsStale,\n      queriesResponse = [],\n      width,\n    } = this.props;\n    const databaseName = datasource?.database?.name;\n\n    const isLoading = chartStatus === 'loading';\n    this.renderContainerStartTime = Logger.getTimestamp();\n    if (chartStatus === 'failed') {\n      return queriesResponse.map(item => this.renderErrorMessage(item));\n    }\n\n    if (errorMessage && ensureIsArray(queriesResponse).length === 0) {\n      return (\n        <EmptyStateBig\n          title={t('Add required control values to preview chart')}\n          description={getChartRequiredFieldsMissingMessage(true)}\n          image=\"chart.svg\"\n        />\n      );\n    }\n\n    if (\n      !isLoading &&\n      !chartAlert &&\n      !errorMessage &&\n      chartIsStale &&\n      ensureIsArray(queriesResponse).length === 0\n    ) {\n      return (\n        <EmptyStateBig\n          title={t('Your chart is ready to go!')}\n          description={\n            <span>\n              {t(\n                'Click on \"Create chart\" button in the control panel on the left to preview a visualization or',\n              )}{' '}\n              <span role=\"button\" tabIndex={0} onClick={this.props.onQuery}>\n                {t('click here')}\n              </span>\n              .\n            </span>\n          }\n          image=\"chart.svg\"\n        />\n      );\n    }\n\n    return (\n      <ErrorBoundary\n        onError={this.handleRenderContainerFailure}\n        showMessage={false}\n      >\n        <Styles\n          data-ui-anchor=\"chart\"\n          className=\"chart-container\"\n          data-test=\"chart-container\"\n          height={height}\n          width={width}\n        >\n          {isLoading\n            ? this.renderSpinner(databaseName)\n            : this.renderChartContainer()}\n        </Styles>\n      </ErrorBoundary>\n    );\n  }\n}\n\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;\n\nexport default Chart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}