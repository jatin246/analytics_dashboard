{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { CurrencyFormatter, ensureIsArray, getNumberFormatter, getTimeFormatter, isSavedMetric, NumberFormats, SMART_DATE_DETAILED_ID, SMART_DATE_ID, SMART_DATE_VERBOSE_ID } from '@superset-ui/core';\nexport const getSmartDateDetailedFormatter = () => getTimeFormatter(SMART_DATE_DETAILED_ID);\nexport const getSmartDateFormatter = () => getTimeFormatter(SMART_DATE_ID);\nexport const getSmartDateVerboseFormatter = () => getTimeFormatter(SMART_DATE_VERBOSE_ID);\nexport const getPercentFormatter = (format) => getNumberFormatter(!format || format === NumberFormats.SMART_NUMBER ?\nNumberFormats.PERCENT :\nformat);\nexport const getYAxisFormatter = (metrics, forcePercentFormatter, customFormatters, defaultFormatter, format) => {\n  if (forcePercentFormatter) {\n    return getPercentFormatter(format);\n  }\n  const metricsArray = ensureIsArray(metrics);\n  if (metricsArray.every(isSavedMetric) &&\n  metricsArray.\n  map((metric) => customFormatters[metric]).\n  every((formatter, _, formatters) => {var _formatter$currency, _formatters$, _formatters$$currency;return formatter instanceof CurrencyFormatter &&\n    (formatter == null ? void 0 : (_formatter$currency = formatter.currency) == null ? void 0 : _formatter$currency.symbol) === ((_formatters$ =\n    formatters[0]) == null ? void 0 : (_formatters$$currency = _formatters$.currency) == null ? void 0 : _formatters$$currency.symbol);})) {\n    return customFormatters[metricsArray[0]];\n  }\n  return defaultFormatter != null ? defaultFormatter : getNumberFormatter();\n};\nexport function getTooltipTimeFormatter(format) {\n  if (format === SMART_DATE_ID) {\n    return getSmartDateDetailedFormatter();\n  }\n  if (format) {\n    return getTimeFormatter(format);\n  }\n  return String;\n}\nexport function getXAxisFormatter(format) {\n  if (format === SMART_DATE_ID || !format) {\n    return undefined;\n  }\n  if (format) {\n    return getTimeFormatter(format);\n  }\n  return String;\n};(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getSmartDateDetailedFormatter, \"getSmartDateDetailedFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");reactHotLoader.register(getSmartDateFormatter, \"getSmartDateFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");reactHotLoader.register(getSmartDateVerboseFormatter, \"getSmartDateVerboseFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");reactHotLoader.register(getPercentFormatter, \"getPercentFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");reactHotLoader.register(getYAxisFormatter, \"getYAxisFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");reactHotLoader.register(getTooltipTimeFormatter, \"getTooltipTimeFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");reactHotLoader.register(getXAxisFormatter, \"getXAxisFormatter\", \"/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["CurrencyFormatter","ensureIsArray","getNumberFormatter","getTimeFormatter","isSavedMetric","NumberFormats","SMART_DATE_DETAILED_ID","SMART_DATE_ID","SMART_DATE_VERBOSE_ID","getSmartDateDetailedFormatter","getSmartDateFormatter","getSmartDateVerboseFormatter","getPercentFormatter","format","SMART_NUMBER","PERCENT","getYAxisFormatter","metrics","forcePercentFormatter","customFormatters","defaultFormatter","metricsArray","every","map","metric","formatter","_","formatters","_formatter$currency","_formatters$","_formatters$$currency","currency","symbol","getTooltipTimeFormatter","String","getXAxisFormatter","undefined","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/plugins/plugin-chart-echarts/src/utils/formatters.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  CurrencyFormatter,\n  ensureIsArray,\n  getNumberFormatter,\n  getTimeFormatter,\n  isSavedMetric,\n  NumberFormats,\n  QueryFormMetric,\n  SMART_DATE_DETAILED_ID,\n  SMART_DATE_ID,\n  SMART_DATE_VERBOSE_ID,\n  TimeFormatter,\n  ValueFormatter,\n} from '@superset-ui/core';\n\nexport const getSmartDateDetailedFormatter = () =>\n  getTimeFormatter(SMART_DATE_DETAILED_ID);\n\nexport const getSmartDateFormatter = () => getTimeFormatter(SMART_DATE_ID);\n\nexport const getSmartDateVerboseFormatter = () =>\n  getTimeFormatter(SMART_DATE_VERBOSE_ID);\n\nexport const getPercentFormatter = (format?: string) =>\n  getNumberFormatter(\n    !format || format === NumberFormats.SMART_NUMBER\n      ? NumberFormats.PERCENT\n      : format,\n  );\n\nexport const getYAxisFormatter = (\n  metrics: QueryFormMetric[],\n  forcePercentFormatter: boolean,\n  customFormatters: Record<string, ValueFormatter>,\n  defaultFormatter: ValueFormatter,\n  format?: string,\n) => {\n  if (forcePercentFormatter) {\n    return getPercentFormatter(format);\n  }\n  const metricsArray = ensureIsArray(metrics);\n  if (\n    metricsArray.every(isSavedMetric) &&\n    metricsArray\n      .map(metric => customFormatters[metric])\n      .every(\n        (formatter, _, formatters) =>\n          formatter instanceof CurrencyFormatter &&\n          (formatter as CurrencyFormatter)?.currency?.symbol ===\n            (formatters[0] as CurrencyFormatter)?.currency?.symbol,\n      )\n  ) {\n    return customFormatters[metricsArray[0]];\n  }\n  return defaultFormatter ?? getNumberFormatter();\n};\n\nexport function getTooltipTimeFormatter(\n  format?: string,\n): TimeFormatter | StringConstructor {\n  if (format === SMART_DATE_ID) {\n    return getSmartDateDetailedFormatter();\n  }\n  if (format) {\n    return getTimeFormatter(format);\n  }\n  return String;\n}\n\nexport function getXAxisFormatter(\n  format?: string,\n): TimeFormatter | StringConstructor | undefined {\n  if (format === SMART_DATE_ID || !format) {\n    return undefined;\n  }\n  if (format) {\n    return getTimeFormatter(format);\n  }\n  return String;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}