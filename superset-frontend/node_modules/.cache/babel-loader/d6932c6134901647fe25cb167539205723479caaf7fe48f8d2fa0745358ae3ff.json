{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useCallback, useRef } from 'react';\nimport { t, useTheme } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport { CronPicker } from 'src/components/CronPicker';\nimport { StyledInputContainer } from '../AlertReportModal';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nvar ScheduleType;\n(function (ScheduleType) {\n  ScheduleType[\"Picker\"] = \"picker\";\n  ScheduleType[\"Input\"] = \"input\";\n})(ScheduleType || (ScheduleType = {}));\nconst SCHEDULE_TYPE_OPTIONS = [\n{\n  label: t('Recurring (every)'),\n  value: ScheduleType.Picker\n},\n{\n  label: t('CRON Schedule'),\n  value: ScheduleType.Input\n}];\n\nexport const AlertReportCronScheduler = ({ value, onChange }) => {\n  const theme = useTheme();\n  const inputRef = useRef(null);\n  const [scheduleFormat, setScheduleFormat] = useState(ScheduleType.Picker);\n  const customSetValue = useCallback((newValue) => {var _inputRef$current;\n    onChange(newValue);\n    (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.setValue(newValue);\n  }, [inputRef, onChange]);\n  const handleBlur = useCallback((event) => {\n    onChange(event.target.value);\n  }, [onChange]);\n  const handlePressEnter = useCallback(() => {var _inputRef$current2;\n    onChange(((_inputRef$current2 = inputRef.current) == null ? void 0 : _inputRef$current2.input.value) || '');\n  }, [onChange]);\n  const [error, onError] = useState();\n  return _jsxs(_Fragment, { children: [\n    _jsxs(StyledInputContainer, { children: [\n      _jsxs(\"div\", { className: \"control-label\", children: [\n        t('Schedule type'),\n        _jsx(\"span\", { className: \"required\", children: \"*\" })] }\n      ),\n      _jsx(\"div\", { className: \"input-container\", children:\n        _jsx(Select, { ariaLabel: t('Schedule type'), placeholder: t('Schedule type'), onChange: (e) => {\n            setScheduleFormat(e);\n          }, value: scheduleFormat, options: SCHEDULE_TYPE_OPTIONS }) }\n      )] }\n    ),\n\n    _jsxs(StyledInputContainer, { \"data-test\": \"input-content\", className: \"styled-input\", children: [\n      _jsxs(\"div\", { className: \"control-label\", children: [\n        t('Schedule'),\n        _jsx(\"span\", { className: \"required\", children: \"*\" })] }\n      ),\n      scheduleFormat === ScheduleType.Input && _jsx(Input, { type: \"text\", name: \"crontab\", ref: inputRef, style: error ? { borderColor: theme.colors.error.base } : {}, placeholder: t('CRON expression'), value: value, onBlur: handleBlur, onChange: (e) => customSetValue(e.target.value), onPressEnter: handlePressEnter }),\n      scheduleFormat === ScheduleType.Picker && _jsx(CronPicker, { clearButton: false, value: value, setValue: customSetValue, displayError: scheduleFormat === ScheduleType.Picker, onError: onError })] }\n    )] }\n  );\n};__signature__(AlertReportCronScheduler, \"useTheme{theme}\\nuseRef{inputRef}\\nuseState{[scheduleFormat, setScheduleFormat](ScheduleType.Picker)}\\nuseCallback{customSetValue}\\nuseCallback{handleBlur}\\nuseCallback{handlePressEnter}\\nuseState{[error, onError]}\", () => [useTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ScheduleType, \"ScheduleType\", \"/app/superset-frontend/src/features/alerts/components/AlertReportCronScheduler.tsx\");reactHotLoader.register(SCHEDULE_TYPE_OPTIONS, \"SCHEDULE_TYPE_OPTIONS\", \"/app/superset-frontend/src/features/alerts/components/AlertReportCronScheduler.tsx\");reactHotLoader.register(AlertReportCronScheduler, \"AlertReportCronScheduler\", \"/app/superset-frontend/src/features/alerts/components/AlertReportCronScheduler.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useCallback","useRef","t","useTheme","Select","Input","CronPicker","StyledInputContainer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ScheduleType","SCHEDULE_TYPE_OPTIONS","label","value","Picker","AlertReportCronScheduler","onChange","theme","inputRef","scheduleFormat","setScheduleFormat","customSetValue","newValue","_inputRef$current","current","setValue","handleBlur","event","target","handlePressEnter","_inputRef$current2","input","error","onError","children","className","ariaLabel","placeholder","e","options","type","name","ref","style","borderColor","colors","base","onBlur","onPressEnter","clearButton","displayError","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/features/alerts/components/AlertReportCronScheduler.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useCallback, useRef, FocusEvent, FC } from 'react';\n\nimport { t, useTheme } from '@superset-ui/core';\n\nimport { AntdInput, Select } from 'src/components';\nimport { Input } from 'src/components/Input';\nimport { CronPicker, CronError } from 'src/components/CronPicker';\nimport { StyledInputContainer } from '../AlertReportModal';\n\nexport interface AlertReportCronSchedulerProps {\n  value: string;\n  onChange: (change: string) => any;\n}\n\nenum ScheduleType {\n  Picker = 'picker',\n  Input = 'input',\n}\n\nconst SCHEDULE_TYPE_OPTIONS = [\n  {\n    label: t('Recurring (every)'),\n    value: ScheduleType.Picker,\n  },\n  {\n    label: t('CRON Schedule'),\n    value: ScheduleType.Input,\n  },\n];\n\nexport const AlertReportCronScheduler: FC<AlertReportCronSchedulerProps> = ({\n  value,\n  onChange,\n}) => {\n  const theme = useTheme();\n  const inputRef = useRef<AntdInput>(null);\n  const [scheduleFormat, setScheduleFormat] = useState<ScheduleType>(\n    ScheduleType.Picker,\n  );\n\n  const customSetValue = useCallback(\n    (newValue: string) => {\n      onChange(newValue);\n      inputRef.current?.setValue(newValue);\n    },\n    [inputRef, onChange],\n  );\n\n  const handleBlur = useCallback(\n    (event: FocusEvent<HTMLInputElement>) => {\n      onChange(event.target.value);\n    },\n    [onChange],\n  );\n\n  const handlePressEnter = useCallback(() => {\n    onChange(inputRef.current?.input.value || '');\n  }, [onChange]);\n\n  const [error, onError] = useState<CronError>();\n\n  return (\n    <>\n      <StyledInputContainer>\n        <div className=\"control-label\">\n          {t('Schedule type')}\n          <span className=\"required\">*</span>\n        </div>\n        <div className=\"input-container\">\n          <Select\n            ariaLabel={t('Schedule type')}\n            placeholder={t('Schedule type')}\n            onChange={(e: ScheduleType) => {\n              setScheduleFormat(e);\n            }}\n            value={scheduleFormat}\n            options={SCHEDULE_TYPE_OPTIONS}\n          />\n        </div>\n      </StyledInputContainer>\n\n      <StyledInputContainer data-test=\"input-content\" className=\"styled-input\">\n        <div className=\"control-label\">\n          {t('Schedule')}\n          <span className=\"required\">*</span>\n        </div>\n        {scheduleFormat === ScheduleType.Input && (\n          <Input\n            type=\"text\"\n            name=\"crontab\"\n            ref={inputRef}\n            style={error ? { borderColor: theme.colors.error.base } : {}}\n            placeholder={t('CRON expression')}\n            value={value}\n            onBlur={handleBlur}\n            onChange={e => customSetValue(e.target.value)}\n            onPressEnter={handlePressEnter}\n          />\n        )}\n        {scheduleFormat === ScheduleType.Picker && (\n          <CronPicker\n            clearButton={false}\n            value={value}\n            setValue={customSetValue}\n            displayError={scheduleFormat === ScheduleType.Picker}\n            onError={onError}\n          />\n        )}\n      </StyledInputContainer>\n    </>\n  );\n};\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAwB,OAAO;AAErE,SAASC,CAAC,EAAEC,QAAQ,QAAQ,mBAAmB;AAE/C,SAAoBC,MAAM,QAAQ,gBAAgB;AAClD,SAASC,KAAK,QAAQ,sBAAsB;AAC5C,SAASC,UAAU,QAAmB,2BAA2B;AACjE,SAASC,oBAAoB,QAAQ,qBAAqB,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA,EAAAC,QAAA,IAAAC,SAAA;AAO3D,IAAKC,YAGJ;AAHD,WAAKA,YAAY;EACfA,YAAA,qBAAiB;EACjBA,YAAA,mBAAe;AACjB,CAAC,EAHIA,YAAY,KAAZA,YAAY;AAKjB,MAAMC,qBAAqB,GAAG;AAC5B;EACEC,KAAK,EAAEd,CAAC,CAAC,mBAAmB,CAAC;EAC7Be,KAAK,EAAEH,YAAY,CAACI;CACrB;AACD;EACEF,KAAK,EAAEd,CAAC,CAAC,eAAe,CAAC;EACzBe,KAAK,EAAEH,YAAY,CAACT;CACrB,CACF;;AAED,OAAO,MAAMc,wBAAwB,GAAsCA,CAAC,EAC1EF,KAAK,EACLG,QAAQ,EACT,KAAI;EACH,MAAMC,KAAK,GAAGlB,QAAQ,EAAE;EACxB,MAAMmB,QAAQ,GAAGrB,MAAM,CAAY,IAAI,CAAC;EACxC,MAAM,CAACsB,cAAc,EAAEC,iBAAiB,CAAC,GAAGzB,QAAQ,CAClDe,YAAY,CAACI,MAAM,CACpB;EAED,MAAMO,cAAc,GAAGzB,WAAW,CAChC,CAAC0B,QAAgB,KAAI,KAAAC,iBAAA;IACnBP,QAAQ,CAACM,QAAQ,CAAC;IAClB,CAAAC,iBAAA,GAAAL,QAAQ,CAACM,OAAO,qBAAhBD,iBAAA,CAAkBE,QAAQ,CAACH,QAAQ,CAAC;EACtC,CAAC,EACD,CAACJ,QAAQ,EAAEF,QAAQ,CAAC,CACrB;EAED,MAAMU,UAAU,GAAG9B,WAAW,CAC5B,CAAC+B,KAAmC,KAAI;IACtCX,QAAQ,CAACW,KAAK,CAACC,MAAM,CAACf,KAAK,CAAC;EAC9B,CAAC,EACD,CAACG,QAAQ,CAAC,CACX;EAED,MAAMa,gBAAgB,GAAGjC,WAAW,CAAC,MAAK,KAAAkC,kBAAA;IACxCd,QAAQ,CAAC,EAAAc,kBAAA,GAAAZ,QAAQ,CAACM,OAAO,qBAAhBM,kBAAA,CAAkBC,KAAK,CAAClB,KAAK,KAAI,EAAE,CAAC;EAC/C,CAAC,EAAE,CAACG,QAAQ,CAAC,CAAC;EAEd,MAAM,CAACgB,KAAK,EAAEC,OAAO,CAAC,GAAGtC,QAAQ,EAAa;EAE9C,OACEY,KAAA,CAAAE,SAAA,IAAAyB,QAAA;IACE3B,KAAA,CAACJ,oBAAoB,IAAA+B,QAAA;MACnB3B,KAAA,UAAK4B,SAAS,EAAC,eAAe,EAAAD,QAAA;QAC3BpC,CAAC,CAAC,eAAe,CAAC;QACnBO,IAAA,WAAM8B,SAAS,EAAC,UAAU,EAAAD,QAAA,EAAC,GAAC,EAAM,CACpC;MAAK,CACL;MAAA7B,IAAA,UAAK8B,SAAS,EAAC,iBAAiB,EAAAD,QAAA;QAC9B7B,IAAA,CAACL,MAAM,IACLoC,SAAS,EAAEtC,CAAC,CAAC,eAAe,CAAE,EAC9BuC,WAAW,EAAEvC,CAAC,CAAC,eAAe,CAAE,EAChCkB,QAAQ,EAAEA,CAACsB,CAAe,KAAI;YAC5BlB,iBAAiB,CAACkB,CAAC,CAAC;UACtB,CAAE,EACFzB,KAAK,EAAEM,cAAe,EACtBoB,OAAO,EAAE5B,qBAAsB,GAEnC;MAAK,CACP;IAAsB,CAEtB;;IAAAJ,KAAA,CAACJ,oBAAoB,IAAC,aAAU,eAAe,EAACgC,SAAS,EAAC,cAAc,EAAAD,QAAA;MACtE3B,KAAA,UAAK4B,SAAS,EAAC,eAAe,EAAAD,QAAA;QAC3BpC,CAAC,CAAC,UAAU,CAAC;QACdO,IAAA,WAAM8B,SAAS,EAAC,UAAU,EAAAD,QAAA,EAAC,GAAC,EAAM,CACpC;MAAK,CACL;MAACf,cAAc,KAAKT,YAAY,CAACT,KAAK,IACpCI,IAAA,CAACJ,KAAK,IACJuC,IAAI,EAAC,MAAM,EACXC,IAAI,EAAC,SAAS,EACdC,GAAG,EAAExB,QAAS,EACdyB,KAAK,EAAEX,KAAK,GAAG,EAAEY,WAAW,EAAE3B,KAAK,CAAC4B,MAAM,CAACb,KAAK,CAACc,IAAI,EAAE,GAAG,EAAG,EAC7DT,WAAW,EAAEvC,CAAC,CAAC,iBAAiB,CAAE,EAClCe,KAAK,EAAEA,KAAM,EACbkC,MAAM,EAAErB,UAAW,EACnBV,QAAQ,EAAEA,CAAAsB,CAAC,KAAIjB,cAAc,CAACiB,CAAC,CAACV,MAAM,CAACf,KAAK,CAAE,EAC9CmC,YAAY,EAAEnB,gBAAiB,GAElC;MACAV,cAAc,KAAKT,YAAY,CAACI,MAAM,IACrCT,IAAA,CAACH,UAAU,IACT+C,WAAW,EAAE,KAAM,EACnBpC,KAAK,EAAEA,KAAM,EACbY,QAAQ,EAAEJ,cAAe,EACzB6B,YAAY,EAAE/B,cAAc,KAAKT,YAAY,CAACI,MAAO,EACrDmB,OAAO,EAAEA,OAAQ,GAEpB;IACmB,CACxB;EAAA,CAAG;AAEP,CAAC,CAACkB,aAAA,CAjFWpC,wBAAwB,mOAIrBhB,QAAQ,sBAAAqD,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CApBnB9C,YAGJ,wGAAA0C,cAAA,CAAAI,QAAA,CAEK7C,qBAAqB,iHAAAyC,cAAA,CAAAI,QAAA,CAWdzC,wBAAwB,4IAAA0C,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}