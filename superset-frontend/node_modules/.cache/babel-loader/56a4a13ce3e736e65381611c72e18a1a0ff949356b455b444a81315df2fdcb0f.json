{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport cx from 'classnames';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { addAlpha, css, isFeatureEnabled, FeatureFlag, styled, t, useTheme, useElementOnScreen } from '@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport BuilderComponentPane from 'src/dashboard/components/BuilderComponentPane';\nimport DashboardHeader from 'src/dashboard/containers/DashboardHeader';\nimport Icons from 'src/components/Icons';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport { Droppable } from 'src/dashboard/components/dnd/DragDroppable';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport getDirectPathToTabIndex from 'src/dashboard/util/getDirectPathToTabIndex';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { FilterBarOrientation } from 'src/dashboard/types';\nimport { setDirectPathToChild, setEditMode } from 'src/dashboard/actions/dashboardState';\nimport { deleteTopLevelTabs, handleComponentDrop } from 'src/dashboard/actions/dashboardLayout';\nimport { DASHBOARD_GRID_ID, DASHBOARD_ROOT_DEPTH, DASHBOARD_ROOT_ID, DashboardStandaloneMode } from 'src/dashboard/util/constants';\nimport FilterBar from 'src/dashboard/components/nativeFilters/FilterBar';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport ResizableSidebar from 'src/components/ResizableSidebar';\nimport { BUILDER_SIDEPANEL_WIDTH, CLOSED_FILTER_BAR_WIDTH, FILTER_BAR_HEADER_HEIGHT, MAIN_HEADER_HEIGHT, OPEN_FILTER_BAR_MAX_WIDTH, OPEN_FILTER_BAR_WIDTH, EMPTY_CONTAINER_Z_INDEX } from 'src/dashboard/constants';\nimport BasicErrorAlert from 'src/components/ErrorMessage/BasicErrorAlert';\nimport { getRootLevelTabsComponent, shouldFocusTabs } from './utils';\nimport DashboardContainer from './DashboardContainer';\nimport { useNativeFilters } from './state';\nimport DashboardWrapper from './DashboardWrapper';\n// @z-index-above-dashboard-charts + 1 = 11\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";const FiltersPanel = styled.div`\n  grid-column: 1;\n  grid-row: 1 / span 2;\n  z-index: 11;\n  width: ${({ width }) => width}px;\n  ${({ hidden }) => hidden && `display: none;`}\n`;\nconst StickyPanel = styled.div`\n  position: sticky;\n  top: -1px;\n  width: ${({ width }) => width}px;\n  flex: 0 0 ${({ width }) => width}px;\n`;\n// @z-index-above-dashboard-popovers (99) + 1 = 100\nconst StyledHeader = styled.div`\n  ${({ theme }) => css`\n    grid-column: 2;\n    grid-row: 1;\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    max-width: 100vw;\n\n    .empty-droptarget:before {\n      position: absolute;\n      content: '';\n      display: none;\n      width: calc(100% - ${theme.gridUnit * 2}px);\n      height: calc(100% - ${theme.gridUnit * 2}px);\n      left: ${theme.gridUnit}px;\n      top: ${theme.gridUnit}px;\n      border: 1px dashed transparent;\n      border-radius: ${theme.gridUnit}px;\n      opacity: 0.5;\n    }\n  `}\n`;\nconst StyledContent = styled.div`\n  grid-column: 2;\n  grid-row: 2;\n  // @z-index-above-dashboard-header (100) + 1 = 101\n  ${({ fullSizeChartId }) => fullSizeChartId && `z-index: 101;`}\n`;\nconst DashboardContentWrapper = styled.div`\n  ${({ theme }) => css`\n    &.dashboard {\n      position: relative;\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n\n      /* drop shadow for top-level tabs only */\n      & .dashboard-component-tabs {\n        box-shadow: 0 ${theme.gridUnit}px ${theme.gridUnit}px 0\n          ${addAlpha(theme.colors.grayscale.dark2, parseFloat(theme.opacity.light) / 100)};\n        padding-left: ${theme.gridUnit *\n2}px; /* note this is added to tab-level padding, to match header */\n      }\n\n      .dropdown-toggle.btn.btn-primary .caret {\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .background--transparent {\n        background-color: transparent;\n      }\n\n      .background--white {\n        background-color: ${theme.colors.grayscale.light5};\n      }\n    }\n    &.dashboard--editing {\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed transparent;\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n      }\n\n      .grid-row.grid-row--hovered:after,\n      .dashboard-component-tabs > .grid-row--hovered:after {\n        border: 2px dashed ${theme.colors.primary.base};\n      }\n\n      .resizable-container {\n        & .dashboard-component-chart-holder {\n          .dashboard-chart {\n            .chart-container {\n              cursor: move;\n              opacity: 0.2;\n            }\n\n            .slice_container {\n              /* disable chart interactions in edit mode */\n              pointer-events: none;\n            }\n          }\n\n          &:hover .dashboard-chart .chart-container {\n            opacity: 0.7;\n          }\n        }\n\n        &:hover,\n        &.resizable-container--resizing:hover {\n          & > .dashboard-component-chart-holder:after {\n            border: 1px dashed ${theme.colors.primary.base};\n          }\n        }\n      }\n\n      .resizable-container--resizing:hover > .grid-row:after,\n      .hover-menu:hover + .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed ${theme.colors.primary.base};\n        z-index: 2;\n      }\n\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu + div:after {\n        border: 1px dashed ${theme.colors.grayscale.light2};\n      }\n\n      /* provide hit area in case row contents is edge to edge */\n      .dashboard-component-tabs-content {\n        > .dragdroppable-row {\n          padding-top: ${theme.gridUnit * 4}px;\n        }\n      }\n\n      .dashboard-component-chart-holder {\n        &:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          pointer-events: none;\n          border: 1px solid transparent;\n        }\n\n        &:hover:after {\n          border: 1px dashed ${theme.colors.primary.base};\n          z-index: 2;\n        }\n      }\n\n      .contract-trigger:before {\n        display: none;\n      }\n    }\n\n    & .dashboard-component-tabs-content {\n      & > div:not(:last-child):not(.empty-droptarget) {\n        margin-bottom: ${theme.gridUnit * 4}px;\n      }\n\n      & > .empty-droptarget {\n        z-index: ${EMPTY_CONTAINER_Z_INDEX};\n        position: absolute;\n        width: 100%;\n      }\n\n      & > .empty-droptarget:first-child:not(.empty-droptarget--full) {\n        height: ${theme.gridUnit * 4}px;\n        top: 0;\n      }\n\n      & > .empty-droptarget:last-child {\n        height: ${theme.gridUnit * 4}px;\n        bottom: ${-theme.gridUnit * 4}px;\n      }\n    }\n  `}\n`;\nconst StyledDashboardContent = styled.div`\n  ${({ theme, editMode, marginLeft }) => css`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    height: auto;\n    flex: 1;\n\n    .grid-container .dashboard-component-tabs {\n      box-shadow: none;\n      padding-left: 0;\n    }\n\n    .grid-container {\n      /* without this, the grid will not get smaller upon toggling the builder panel on */\n      width: 0;\n      flex: 1;\n      position: relative;\n      margin-top: ${theme.gridUnit * 6}px;\n      margin-right: ${theme.gridUnit * 8}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      margin-left: ${marginLeft}px;\n\n      ${editMode &&\n`\n      max-width: calc(100% - ${BUILDER_SIDEPANEL_WIDTH + theme.gridUnit * 16}px);\n    `}\n\n      /* this is the ParentSize wrapper */\n    & > div:first-child {\n        height: inherit !important;\n      }\n    }\n\n    .dashboard-builder-sidepane {\n      width: ${BUILDER_SIDEPANEL_WIDTH}px;\n      z-index: 1;\n    }\n\n    .dashboard-component-chart-holder {\n      width: 100%;\n      height: 100%;\n      background-color: ${theme.colors.grayscale.light5};\n      position: relative;\n      padding: ${theme.gridUnit * 4}px;\n      overflow-y: visible;\n\n      // transitionable traits to show filter relevance\n      transition:\n        opacity ${theme.transitionTiming}s ease-in-out,\n        border-color ${theme.transitionTiming}s ease-in-out,\n        box-shadow ${theme.transitionTiming}s ease-in-out;\n\n      &.fade-in {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow:\n          inset 0 0 0 2px ${theme.colors.primary.base},\n          0 0 0 3px\n            ${addAlpha(theme.colors.primary.base, parseFloat(theme.opacity.light) / 100)};\n      }\n\n      &.fade-out {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow: none;\n      }\n\n      & .missing-chart-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        overflow-y: auto;\n        justify-content: center;\n\n        .missing-chart-body {\n          font-size: ${theme.typography.sizes.s}px;\n          position: relative;\n          display: flex;\n        }\n      }\n    }\n  `}\n`;\nconst DashboardBuilder = () => {var _dashboardLayout$DASH, _dashboardLayout$DASH2;\n  const dispatch = useDispatch();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n  const dashboardId = useSelector(({ dashboardInfo }) => `${dashboardInfo.id}`);\n  const dashboardLayout = useSelector((state) => state.dashboardLayout.present);\n  const editMode = useSelector((state) => state.dashboardState.editMode);\n  const canEdit = useSelector(({ dashboardInfo }) => dashboardInfo.dash_edit_perm);\n  const dashboardIsSaving = useSelector(({ dashboardState }) => dashboardState.dashboardIsSaving);\n  const fullSizeChartId = useSelector((state) => state.dashboardState.fullSizeChartId);\n  const crossFiltersEnabled = isFeatureEnabled(FeatureFlag.DashboardCrossFilters);\n  const filterBarOrientation = useSelector(({ dashboardInfo }) => isFeatureEnabled(FeatureFlag.HorizontalFilterBar) ?\n  dashboardInfo.filterBarOrientation :\n  FilterBarOrientation.Vertical);\n  const handleChangeTab = useCallback(({ pathToTabIndex }) => {\n    dispatch(setDirectPathToChild(pathToTabIndex));\n    window.scrollTo(0, 0);\n  }, [dispatch]);\n  const handleDeleteTopLevelTabs = useCallback(() => {\n    dispatch(deleteTopLevelTabs());\n    const firstTab = getDirectPathToTabIndex(getRootLevelTabsComponent(dashboardLayout), 0);\n    dispatch(setDirectPathToChild(firstTab));\n  }, [dashboardLayout, dispatch]);\n  const handleDrop = useCallback((dropResult) => dispatch(handleComponentDrop(dropResult)), [dispatch]);\n  const headerRef = useRef(null);\n  const dashboardRoot = dashboardLayout[DASHBOARD_ROOT_ID];\n  const rootChildId = dashboardRoot == null ? void 0 : dashboardRoot.children[0];\n  const topLevelTabs = rootChildId !== DASHBOARD_GRID_ID ?\n  dashboardLayout[rootChildId] :\n  undefined;\n  const standaloneMode = getUrlParam(URL_PARAMS.standalone);\n  const isReport = standaloneMode === DashboardStandaloneMode.Report;\n  const hideDashboardHeader = uiConfig.hideTitle ||\n  standaloneMode === DashboardStandaloneMode.HideNavAndTitle ||\n  isReport;\n  const [barTopOffset, setBarTopOffset] = useState(0);\n  useEffect(() => {var _headerRef$current, _headerRef$current$ge;\n    setBarTopOffset(((_headerRef$current = headerRef.current) == null ? void 0 : (_headerRef$current$ge = _headerRef$current.getBoundingClientRect()) == null ? void 0 : _headerRef$current$ge.height) || 0);\n    let observer;\n    if (global.hasOwnProperty('ResizeObserver') && headerRef.current) {\n      observer = new ResizeObserver((entries) => {\n        setBarTopOffset((current) => {var _entries$, _entries$$contentRect;return (entries == null ? void 0 : (_entries$ = entries[0]) == null ? void 0 : (_entries$$contentRect = _entries$.contentRect) == null ? void 0 : _entries$$contentRect.height) || current;});\n      });\n      observer.observe(headerRef.current);\n    }\n    return () => {var _observer;\n      (_observer = observer) == null ? void 0 : _observer.disconnect();\n    };\n  }, []);\n  const { showDashboard, missingInitialFilters, dashboardFiltersOpen, toggleDashboardFiltersOpen, nativeFiltersEnabled } = useNativeFilters();\n  const [containerRef, isSticky] = useElementOnScreen({\n    threshold: [1]\n  });\n  const showFilterBar = (crossFiltersEnabled || nativeFiltersEnabled) && !editMode;\n  const offset = FILTER_BAR_HEADER_HEIGHT + (\n  isSticky || standaloneMode ? 0 : MAIN_HEADER_HEIGHT);\n  const filterBarHeight = `calc(100vh - ${offset}px)`;\n  const filterBarOffset = dashboardFiltersOpen ? 0 : barTopOffset + 20;\n  const draggableStyle = useMemo(() => ({\n    marginLeft: dashboardFiltersOpen ||\n    editMode ||\n    !nativeFiltersEnabled ||\n    filterBarOrientation === FilterBarOrientation.Horizontal ?\n    0 :\n    -32\n  }), [\n  dashboardFiltersOpen,\n  editMode,\n  filterBarOrientation,\n  nativeFiltersEnabled]\n  );\n  // If a new tab was added, update the directPathToChild to reflect it\n  const currentTopLevelTabs = useRef(topLevelTabs);\n  useEffect(() => {var _currentTopLevelTabs$, _currentTopLevelTabs$2, _topLevelTabs$childre;\n    const currentTabsLength = (_currentTopLevelTabs$ = currentTopLevelTabs.current) == null ? void 0 : (_currentTopLevelTabs$2 = _currentTopLevelTabs$.children) == null ? void 0 : _currentTopLevelTabs$2.length;\n    const newTabsLength = topLevelTabs == null ? void 0 : (_topLevelTabs$childre = topLevelTabs.children) == null ? void 0 : _topLevelTabs$childre.length;\n    if (currentTabsLength !== undefined &&\n    newTabsLength !== undefined &&\n    newTabsLength > currentTabsLength) {\n      const lastTab = getDirectPathToTabIndex(getRootLevelTabsComponent(dashboardLayout), newTabsLength - 1);\n      dispatch(setDirectPathToChild(lastTab));\n    }\n    currentTopLevelTabs.current = topLevelTabs;\n  }, [topLevelTabs]);\n  const renderDraggableContent = useCallback(({ dropIndicatorProps }) => _jsxs(\"div\", { children: [\n    !hideDashboardHeader && _jsx(DashboardHeader, {}),\n    showFilterBar &&\n    filterBarOrientation === FilterBarOrientation.Horizontal && _jsx(FilterBar, { orientation: FilterBarOrientation.Horizontal, hidden: isReport }),\n    dropIndicatorProps && _jsx(\"div\", { ...dropIndicatorProps }),\n    !isReport && topLevelTabs && !uiConfig.hideNav && _jsx(WithPopoverMenu, { shouldFocus: shouldFocusTabs, menuItems: [\n      _jsx(IconButton, { icon: _jsx(Icons.FallOutlined, { iconSize: \"xl\" }), label: t('Collapse tab content'), onClick: handleDeleteTopLevelTabs })],\n      editMode: editMode, children:\n\n      _jsx(DashboardComponent, { id: topLevelTabs == null ? void 0 : topLevelTabs.id, parentId: DASHBOARD_ROOT_ID, depth: DASHBOARD_ROOT_DEPTH + 1, index: 0, renderTabContent: false, renderHoverMenu: false, onChangeTab: handleChangeTab }) }\n    )] }\n  ), [\n  nativeFiltersEnabled,\n  filterBarOrientation,\n  editMode,\n  handleChangeTab,\n  handleDeleteTopLevelTabs,\n  hideDashboardHeader,\n  isReport,\n  topLevelTabs,\n  uiConfig.hideNav]\n  );\n  const dashboardContentMarginLeft = !dashboardFiltersOpen &&\n  !editMode &&\n  nativeFiltersEnabled &&\n  filterBarOrientation !== FilterBarOrientation.Horizontal ?\n  0 :\n  theme.gridUnit * 8;\n  return _jsxs(DashboardWrapper, { children: [\n    showFilterBar &&\n    filterBarOrientation === FilterBarOrientation.Vertical && _jsx(_Fragment, { children:\n      _jsx(ResizableSidebar, { id: `dashboard:${dashboardId}`, enable: dashboardFiltersOpen, minWidth: OPEN_FILTER_BAR_WIDTH, maxWidth: OPEN_FILTER_BAR_MAX_WIDTH, initialWidth: OPEN_FILTER_BAR_WIDTH, children:\n        (adjustedWidth) => {\n          const filterBarWidth = dashboardFiltersOpen ?\n          adjustedWidth :\n          CLOSED_FILTER_BAR_WIDTH;\n          return _jsx(FiltersPanel, { width: filterBarWidth, hidden: isReport, \"data-test\": \"dashboard-filters-panel\", children:\n            _jsx(StickyPanel, { ref: containerRef, width: filterBarWidth, children:\n              _jsx(ErrorBoundary, { children:\n                _jsx(FilterBar, { orientation: FilterBarOrientation.Vertical, verticalConfig: {\n                    filtersOpen: dashboardFiltersOpen,\n                    toggleFiltersBar: toggleDashboardFiltersOpen,\n                    width: filterBarWidth,\n                    height: filterBarHeight,\n                    offset: filterBarOffset\n                  } }) }\n              ) }\n            ) }\n          );\n        } }\n      ) }\n    ),\n    _jsx(StyledHeader, { ref: headerRef, children:\n\n      _jsx(Droppable, { \"data-test\": \"top-level-tabs\", className: cx(!topLevelTabs && editMode && 'empty-droptarget'), component: dashboardRoot, parentComponent: null, depth: DASHBOARD_ROOT_DEPTH, index: 0, orientation: \"column\", onDrop: handleDrop, editMode: editMode\n        // you cannot drop on/displace tabs if they already exist\n        , disableDragDrop: !!topLevelTabs, style: draggableStyle, children:\n        renderDraggableContent }\n      ) }\n    ),\n    _jsxs(StyledContent, { fullSizeChartId: fullSizeChartId, children: [\n      _jsx(Global, { styles: css`\n            // @z-index-above-dashboard-header (100) + 1 = 101\n            ${fullSizeChartId &&\n        `div > .filterStatusPopover.ant-popover{z-index: 101}`}\n          ` }),\n      !editMode &&\n      !topLevelTabs &&\n      ((_dashboardLayout$DASH = dashboardLayout[DASHBOARD_GRID_ID]) == null ? void 0 : (_dashboardLayout$DASH2 = _dashboardLayout$DASH.children) == null ? void 0 : _dashboardLayout$DASH2.length) === 0 && _jsx(EmptyStateBig, { title: t('There are no charts added to this dashboard'), description: canEdit &&\n        t('Go to the edit mode to configure the dashboard and add charts'), buttonText: canEdit && t('Edit the dashboard'), buttonAction: () => dispatch(setEditMode(true)), image: \"dashboard.svg\" }),\n      _jsx(DashboardContentWrapper, { \"data-test\": \"dashboard-content-wrapper\", className: cx('dashboard', editMode && 'dashboard--editing'), children:\n        _jsxs(StyledDashboardContent, { className: \"dashboard-content\", editMode: editMode, marginLeft: dashboardContentMarginLeft, children: [\n          showDashboard ? missingInitialFilters.length > 0 ? _jsx(\"div\", { css: css`\n                    display: flex;\n                    flex-direction: row;\n                    align-items: center;\n                    justify-content: center;\n                    flex: 1;\n                    & div {\n                      width: 500px;\n                    }\n                  `, children:\n            _jsx(BasicErrorAlert, { title: t('Unable to load dashboard'), body: t(`The following filters have the 'Select first filter value by default'\n                    option checked and could not be loaded, which is preventing the dashboard\n                    from rendering: %s`, missingInitialFilters.join(', ')) }) }\n          ) : _jsx(DashboardContainer, { topLevelTabs: topLevelTabs }) : _jsx(Loading, {}),\n          editMode && _jsx(BuilderComponentPane, { topOffset: barTopOffset })] }\n        ) }\n      )] }\n    ),\n    dashboardIsSaving && _jsx(Loading, { css: css`\n            && {\n              position: fixed;\n            }\n          ` })] }\n  );\n};__signature__(DashboardBuilder, \"useDispatch{dispatch}\\nuseUiConfig{uiConfig}\\nuseTheme{theme}\\nuseSelector{dashboardId}\\nuseSelector{dashboardLayout}\\nuseSelector{editMode}\\nuseSelector{canEdit}\\nuseSelector{dashboardIsSaving}\\nuseSelector{fullSizeChartId}\\nuseSelector{filterBarOrientation}\\nuseCallback{handleChangeTab}\\nuseCallback{handleDeleteTopLevelTabs}\\nuseCallback{handleDrop}\\nuseRef{headerRef}\\nuseState{[barTopOffset, setBarTopOffset](0)}\\nuseEffect{}\\nuseNativeFilters{{ showDashboard, missingInitialFilters, dashboardFiltersOpen, toggleDashboardFiltersOpen, nativeFiltersEnabled, }}\\nuseElementOnScreen{[containerRef, isSticky]}\\nuseMemo{draggableStyle}\\nuseRef{currentTopLevelTabs}\\nuseEffect{}\\nuseCallback{renderDraggableContent}\", () => [useDispatch, useUiConfig, useTheme, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useSelector, useNativeFilters, useElementOnScreen]);const _default =\nDashboardBuilder;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FiltersPanel, \"FiltersPanel\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StickyPanel, \"StickyPanel\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StyledHeader, \"StyledHeader\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StyledContent, \"StyledContent\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(DashboardContentWrapper, \"DashboardContentWrapper\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(StyledDashboardContent, \"StyledDashboardContent\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(DashboardBuilder, \"DashboardBuilder\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["cx","useCallback","useEffect","useMemo","useRef","useState","addAlpha","css","isFeatureEnabled","FeatureFlag","styled","t","useTheme","useElementOnScreen","Global","useDispatch","useSelector","ErrorBoundary","BuilderComponentPane","DashboardHeader","Icons","IconButton","Droppable","DashboardComponent","WithPopoverMenu","getDirectPathToTabIndex","URL_PARAMS","getUrlParam","FilterBarOrientation","setDirectPathToChild","setEditMode","deleteTopLevelTabs","handleComponentDrop","DASHBOARD_GRID_ID","DASHBOARD_ROOT_DEPTH","DASHBOARD_ROOT_ID","DashboardStandaloneMode","FilterBar","Loading","EmptyStateBig","useUiConfig","ResizableSidebar","BUILDER_SIDEPANEL_WIDTH","CLOSED_FILTER_BAR_WIDTH","FILTER_BAR_HEADER_HEIGHT","MAIN_HEADER_HEIGHT","OPEN_FILTER_BAR_MAX_WIDTH","OPEN_FILTER_BAR_WIDTH","EMPTY_CONTAINER_Z_INDEX","BasicErrorAlert","getRootLevelTabsComponent","shouldFocusTabs","DashboardContainer","useNativeFilters","DashboardWrapper","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FiltersPanel","div","width","hidden","StickyPanel","StyledHeader","theme","gridUnit","StyledContent","fullSizeChartId","DashboardContentWrapper","colors","grayscale","dark2","parseFloat","opacity","light","light5","primary","base","light2","StyledDashboardContent","editMode","marginLeft","transitionTiming","borderRadius","typography","sizes","s","DashboardBuilder","_dashboardLayout$DASH","_dashboardLayout$DASH2","dispatch","uiConfig","dashboardId","dashboardInfo","id","dashboardLayout","state","present","dashboardState","canEdit","dash_edit_perm","dashboardIsSaving","crossFiltersEnabled","DashboardCrossFilters","filterBarOrientation","HorizontalFilterBar","Vertical","handleChangeTab","pathToTabIndex","window","scrollTo","handleDeleteTopLevelTabs","firstTab","handleDrop","dropResult","headerRef","dashboardRoot","rootChildId","children","topLevelTabs","undefined","standaloneMode","standalone","isReport","Report","hideDashboardHeader","hideTitle","HideNavAndTitle","barTopOffset","setBarTopOffset","_headerRef$current","_headerRef$current$ge","current","getBoundingClientRect","height","observer","global","hasOwnProperty","ResizeObserver","entries","_entries$","_entries$$contentRect","contentRect","observe","_observer","disconnect","showDashboard","missingInitialFilters","dashboardFiltersOpen","toggleDashboardFiltersOpen","nativeFiltersEnabled","containerRef","isSticky","threshold","showFilterBar","offset","filterBarHeight","filterBarOffset","draggableStyle","Horizontal","currentTopLevelTabs","_currentTopLevelTabs$","_currentTopLevelTabs$2","_topLevelTabs$childre","currentTabsLength","length","newTabsLength","lastTab","renderDraggableContent","dropIndicatorProps","orientation","hideNav","shouldFocus","menuItems","icon","FallOutlined","iconSize","label","onClick","parentId","depth","index","renderTabContent","renderHoverMenu","onChangeTab","dashboardContentMarginLeft","enable","minWidth","maxWidth","initialWidth","adjustedWidth","filterBarWidth","ref","verticalConfig","filtersOpen","toggleFiltersBar","className","component","parentComponent","onDrop","disableDragDrop","style","styles","title","description","buttonText","buttonAction","image","body","join","topOffset","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/dashboard/components/DashboardBuilder/DashboardBuilder.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-env browser */\nimport cx from 'classnames';\nimport { FC, useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport {\n  addAlpha,\n  css,\n  isFeatureEnabled,\n  FeatureFlag,\n  JsonObject,\n  styled,\n  t,\n  useTheme,\n  useElementOnScreen,\n} from '@superset-ui/core';\nimport { Global } from '@emotion/react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ErrorBoundary from 'src/components/ErrorBoundary';\nimport BuilderComponentPane from 'src/dashboard/components/BuilderComponentPane';\nimport DashboardHeader from 'src/dashboard/containers/DashboardHeader';\nimport Icons from 'src/components/Icons';\nimport IconButton from 'src/dashboard/components/IconButton';\nimport { Droppable } from 'src/dashboard/components/dnd/DragDroppable';\nimport DashboardComponent from 'src/dashboard/containers/DashboardComponent';\nimport WithPopoverMenu from 'src/dashboard/components/menu/WithPopoverMenu';\nimport getDirectPathToTabIndex from 'src/dashboard/util/getDirectPathToTabIndex';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport {\n  DashboardLayout,\n  FilterBarOrientation,\n  RootState,\n} from 'src/dashboard/types';\nimport {\n  setDirectPathToChild,\n  setEditMode,\n} from 'src/dashboard/actions/dashboardState';\nimport {\n  deleteTopLevelTabs,\n  handleComponentDrop,\n} from 'src/dashboard/actions/dashboardLayout';\nimport {\n  DASHBOARD_GRID_ID,\n  DASHBOARD_ROOT_DEPTH,\n  DASHBOARD_ROOT_ID,\n  DashboardStandaloneMode,\n} from 'src/dashboard/util/constants';\nimport FilterBar from 'src/dashboard/components/nativeFilters/FilterBar';\nimport Loading from 'src/components/Loading';\nimport { EmptyStateBig } from 'src/components/EmptyState';\nimport { useUiConfig } from 'src/components/UiConfigContext';\nimport ResizableSidebar from 'src/components/ResizableSidebar';\nimport {\n  BUILDER_SIDEPANEL_WIDTH,\n  CLOSED_FILTER_BAR_WIDTH,\n  FILTER_BAR_HEADER_HEIGHT,\n  MAIN_HEADER_HEIGHT,\n  OPEN_FILTER_BAR_MAX_WIDTH,\n  OPEN_FILTER_BAR_WIDTH,\n  EMPTY_CONTAINER_Z_INDEX,\n} from 'src/dashboard/constants';\nimport BasicErrorAlert from 'src/components/ErrorMessage/BasicErrorAlert';\nimport { getRootLevelTabsComponent, shouldFocusTabs } from './utils';\nimport DashboardContainer from './DashboardContainer';\nimport { useNativeFilters } from './state';\nimport DashboardWrapper from './DashboardWrapper';\n\ntype DashboardBuilderProps = {};\n\n// @z-index-above-dashboard-charts + 1 = 11\nconst FiltersPanel = styled.div<{ width: number; hidden: boolean }>`\n  grid-column: 1;\n  grid-row: 1 / span 2;\n  z-index: 11;\n  width: ${({ width }) => width}px;\n  ${({ hidden }) => hidden && `display: none;`}\n`;\n\nconst StickyPanel = styled.div<{ width: number }>`\n  position: sticky;\n  top: -1px;\n  width: ${({ width }) => width}px;\n  flex: 0 0 ${({ width }) => width}px;\n`;\n\n// @z-index-above-dashboard-popovers (99) + 1 = 100\nconst StyledHeader = styled.div`\n  ${({ theme }) => css`\n    grid-column: 2;\n    grid-row: 1;\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    max-width: 100vw;\n\n    .empty-droptarget:before {\n      position: absolute;\n      content: '';\n      display: none;\n      width: calc(100% - ${theme.gridUnit * 2}px);\n      height: calc(100% - ${theme.gridUnit * 2}px);\n      left: ${theme.gridUnit}px;\n      top: ${theme.gridUnit}px;\n      border: 1px dashed transparent;\n      border-radius: ${theme.gridUnit}px;\n      opacity: 0.5;\n    }\n  `}\n`;\n\nconst StyledContent = styled.div<{\n  fullSizeChartId: number | null;\n}>`\n  grid-column: 2;\n  grid-row: 2;\n  // @z-index-above-dashboard-header (100) + 1 = 101\n  ${({ fullSizeChartId }) => fullSizeChartId && `z-index: 101;`}\n`;\n\nconst DashboardContentWrapper = styled.div`\n  ${({ theme }) => css`\n    &.dashboard {\n      position: relative;\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n\n      /* drop shadow for top-level tabs only */\n      & .dashboard-component-tabs {\n        box-shadow: 0 ${theme.gridUnit}px ${theme.gridUnit}px 0\n          ${addAlpha(\n            theme.colors.grayscale.dark2,\n            parseFloat(theme.opacity.light) / 100,\n          )};\n        padding-left: ${theme.gridUnit *\n        2}px; /* note this is added to tab-level padding, to match header */\n      }\n\n      .dropdown-toggle.btn.btn-primary .caret {\n        color: ${theme.colors.grayscale.light5};\n      }\n\n      .background--transparent {\n        background-color: transparent;\n      }\n\n      .background--white {\n        background-color: ${theme.colors.grayscale.light5};\n      }\n    }\n    &.dashboard--editing {\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed transparent;\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        z-index: 1;\n        pointer-events: none;\n      }\n\n      .grid-row.grid-row--hovered:after,\n      .dashboard-component-tabs > .grid-row--hovered:after {\n        border: 2px dashed ${theme.colors.primary.base};\n      }\n\n      .resizable-container {\n        & .dashboard-component-chart-holder {\n          .dashboard-chart {\n            .chart-container {\n              cursor: move;\n              opacity: 0.2;\n            }\n\n            .slice_container {\n              /* disable chart interactions in edit mode */\n              pointer-events: none;\n            }\n          }\n\n          &:hover .dashboard-chart .chart-container {\n            opacity: 0.7;\n          }\n        }\n\n        &:hover,\n        &.resizable-container--resizing:hover {\n          & > .dashboard-component-chart-holder:after {\n            border: 1px dashed ${theme.colors.primary.base};\n          }\n        }\n      }\n\n      .resizable-container--resizing:hover > .grid-row:after,\n      .hover-menu:hover + .grid-row:after,\n      .dashboard-component-tabs > .hover-menu:hover + div:after {\n        border: 1px dashed ${theme.colors.primary.base};\n        z-index: 2;\n      }\n\n      .grid-row:after,\n      .dashboard-component-tabs > .hover-menu + div:after {\n        border: 1px dashed ${theme.colors.grayscale.light2};\n      }\n\n      /* provide hit area in case row contents is edge to edge */\n      .dashboard-component-tabs-content {\n        > .dragdroppable-row {\n          padding-top: ${theme.gridUnit * 4}px;\n        }\n      }\n\n      .dashboard-component-chart-holder {\n        &:after {\n          content: '';\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          pointer-events: none;\n          border: 1px solid transparent;\n        }\n\n        &:hover:after {\n          border: 1px dashed ${theme.colors.primary.base};\n          z-index: 2;\n        }\n      }\n\n      .contract-trigger:before {\n        display: none;\n      }\n    }\n\n    & .dashboard-component-tabs-content {\n      & > div:not(:last-child):not(.empty-droptarget) {\n        margin-bottom: ${theme.gridUnit * 4}px;\n      }\n\n      & > .empty-droptarget {\n        z-index: ${EMPTY_CONTAINER_Z_INDEX};\n        position: absolute;\n        width: 100%;\n      }\n\n      & > .empty-droptarget:first-child:not(.empty-droptarget--full) {\n        height: ${theme.gridUnit * 4}px;\n        top: 0;\n      }\n\n      & > .empty-droptarget:last-child {\n        height: ${theme.gridUnit * 4}px;\n        bottom: ${-theme.gridUnit * 4}px;\n      }\n    }\n  `}\n`;\n\nconst StyledDashboardContent = styled.div<{\n  editMode: boolean;\n  marginLeft: number;\n}>`\n  ${({ theme, editMode, marginLeft }) => css`\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    height: auto;\n    flex: 1;\n\n    .grid-container .dashboard-component-tabs {\n      box-shadow: none;\n      padding-left: 0;\n    }\n\n    .grid-container {\n      /* without this, the grid will not get smaller upon toggling the builder panel on */\n      width: 0;\n      flex: 1;\n      position: relative;\n      margin-top: ${theme.gridUnit * 6}px;\n      margin-right: ${theme.gridUnit * 8}px;\n      margin-bottom: ${theme.gridUnit * 6}px;\n      margin-left: ${marginLeft}px;\n\n      ${editMode &&\n      `\n      max-width: calc(100% - ${\n        BUILDER_SIDEPANEL_WIDTH + theme.gridUnit * 16\n      }px);\n    `}\n\n      /* this is the ParentSize wrapper */\n    & > div:first-child {\n        height: inherit !important;\n      }\n    }\n\n    .dashboard-builder-sidepane {\n      width: ${BUILDER_SIDEPANEL_WIDTH}px;\n      z-index: 1;\n    }\n\n    .dashboard-component-chart-holder {\n      width: 100%;\n      height: 100%;\n      background-color: ${theme.colors.grayscale.light5};\n      position: relative;\n      padding: ${theme.gridUnit * 4}px;\n      overflow-y: visible;\n\n      // transitionable traits to show filter relevance\n      transition:\n        opacity ${theme.transitionTiming}s ease-in-out,\n        border-color ${theme.transitionTiming}s ease-in-out,\n        box-shadow ${theme.transitionTiming}s ease-in-out;\n\n      &.fade-in {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow:\n          inset 0 0 0 2px ${theme.colors.primary.base},\n          0 0 0 3px\n            ${addAlpha(\n              theme.colors.primary.base,\n              parseFloat(theme.opacity.light) / 100,\n            )};\n      }\n\n      &.fade-out {\n        border-radius: ${theme.borderRadius}px;\n        box-shadow: none;\n      }\n\n      & .missing-chart-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        overflow-y: auto;\n        justify-content: center;\n\n        .missing-chart-body {\n          font-size: ${theme.typography.sizes.s}px;\n          position: relative;\n          display: flex;\n        }\n      }\n    }\n  `}\n`;\n\nconst DashboardBuilder: FC<DashboardBuilderProps> = () => {\n  const dispatch = useDispatch();\n  const uiConfig = useUiConfig();\n  const theme = useTheme();\n\n  const dashboardId = useSelector<RootState, string>(\n    ({ dashboardInfo }) => `${dashboardInfo.id}`,\n  );\n  const dashboardLayout = useSelector<RootState, DashboardLayout>(\n    state => state.dashboardLayout.present,\n  );\n  const editMode = useSelector<RootState, boolean>(\n    state => state.dashboardState.editMode,\n  );\n  const canEdit = useSelector<RootState, boolean>(\n    ({ dashboardInfo }) => dashboardInfo.dash_edit_perm,\n  );\n  const dashboardIsSaving = useSelector<RootState, boolean>(\n    ({ dashboardState }) => dashboardState.dashboardIsSaving,\n  );\n  const fullSizeChartId = useSelector<RootState, number | null>(\n    state => state.dashboardState.fullSizeChartId,\n  );\n  const crossFiltersEnabled = isFeatureEnabled(\n    FeatureFlag.DashboardCrossFilters,\n  );\n  const filterBarOrientation = useSelector<RootState, FilterBarOrientation>(\n    ({ dashboardInfo }) =>\n      isFeatureEnabled(FeatureFlag.HorizontalFilterBar)\n        ? dashboardInfo.filterBarOrientation\n        : FilterBarOrientation.Vertical,\n  );\n\n  const handleChangeTab = useCallback(\n    ({ pathToTabIndex }: { pathToTabIndex: string[] }) => {\n      dispatch(setDirectPathToChild(pathToTabIndex));\n      window.scrollTo(0, 0);\n    },\n    [dispatch],\n  );\n\n  const handleDeleteTopLevelTabs = useCallback(() => {\n    dispatch(deleteTopLevelTabs());\n\n    const firstTab = getDirectPathToTabIndex(\n      getRootLevelTabsComponent(dashboardLayout),\n      0,\n    );\n    dispatch(setDirectPathToChild(firstTab));\n  }, [dashboardLayout, dispatch]);\n\n  const handleDrop = useCallback(\n    dropResult => dispatch(handleComponentDrop(dropResult)),\n    [dispatch],\n  );\n\n  const headerRef = useRef<HTMLDivElement>(null);\n  const dashboardRoot = dashboardLayout[DASHBOARD_ROOT_ID];\n  const rootChildId = dashboardRoot?.children[0];\n  const topLevelTabs =\n    rootChildId !== DASHBOARD_GRID_ID\n      ? dashboardLayout[rootChildId]\n      : undefined;\n  const standaloneMode = getUrlParam(URL_PARAMS.standalone);\n  const isReport = standaloneMode === DashboardStandaloneMode.Report;\n  const hideDashboardHeader =\n    uiConfig.hideTitle ||\n    standaloneMode === DashboardStandaloneMode.HideNavAndTitle ||\n    isReport;\n\n  const [barTopOffset, setBarTopOffset] = useState(0);\n\n  useEffect(() => {\n    setBarTopOffset(headerRef.current?.getBoundingClientRect()?.height || 0);\n\n    let observer: ResizeObserver;\n    if (global.hasOwnProperty('ResizeObserver') && headerRef.current) {\n      observer = new ResizeObserver(entries => {\n        setBarTopOffset(\n          current => entries?.[0]?.contentRect?.height || current,\n        );\n      });\n\n      observer.observe(headerRef.current);\n    }\n\n    return () => {\n      observer?.disconnect();\n    };\n  }, []);\n\n  const {\n    showDashboard,\n    missingInitialFilters,\n    dashboardFiltersOpen,\n    toggleDashboardFiltersOpen,\n    nativeFiltersEnabled,\n  } = useNativeFilters();\n\n  const [containerRef, isSticky] = useElementOnScreen<HTMLDivElement>({\n    threshold: [1],\n  });\n\n  const showFilterBar =\n    (crossFiltersEnabled || nativeFiltersEnabled) && !editMode;\n\n  const offset =\n    FILTER_BAR_HEADER_HEIGHT +\n    (isSticky || standaloneMode ? 0 : MAIN_HEADER_HEIGHT);\n\n  const filterBarHeight = `calc(100vh - ${offset}px)`;\n  const filterBarOffset = dashboardFiltersOpen ? 0 : barTopOffset + 20;\n\n  const draggableStyle = useMemo(\n    () => ({\n      marginLeft:\n        dashboardFiltersOpen ||\n        editMode ||\n        !nativeFiltersEnabled ||\n        filterBarOrientation === FilterBarOrientation.Horizontal\n          ? 0\n          : -32,\n    }),\n    [\n      dashboardFiltersOpen,\n      editMode,\n      filterBarOrientation,\n      nativeFiltersEnabled,\n    ],\n  );\n\n  // If a new tab was added, update the directPathToChild to reflect it\n  const currentTopLevelTabs = useRef(topLevelTabs);\n  useEffect(() => {\n    const currentTabsLength = currentTopLevelTabs.current?.children?.length;\n    const newTabsLength = topLevelTabs?.children?.length;\n\n    if (\n      currentTabsLength !== undefined &&\n      newTabsLength !== undefined &&\n      newTabsLength > currentTabsLength\n    ) {\n      const lastTab = getDirectPathToTabIndex(\n        getRootLevelTabsComponent(dashboardLayout),\n        newTabsLength - 1,\n      );\n      dispatch(setDirectPathToChild(lastTab));\n    }\n\n    currentTopLevelTabs.current = topLevelTabs;\n  }, [topLevelTabs]);\n\n  const renderDraggableContent = useCallback(\n    ({ dropIndicatorProps }: { dropIndicatorProps: JsonObject }) => (\n      <div>\n        {!hideDashboardHeader && <DashboardHeader />}\n        {showFilterBar &&\n          filterBarOrientation === FilterBarOrientation.Horizontal && (\n            <FilterBar\n              orientation={FilterBarOrientation.Horizontal}\n              hidden={isReport}\n            />\n          )}\n        {dropIndicatorProps && <div {...dropIndicatorProps} />}\n        {!isReport && topLevelTabs && !uiConfig.hideNav && (\n          <WithPopoverMenu\n            shouldFocus={shouldFocusTabs}\n            menuItems={[\n              <IconButton\n                icon={<Icons.FallOutlined iconSize=\"xl\" />}\n                label={t('Collapse tab content')}\n                onClick={handleDeleteTopLevelTabs}\n              />,\n            ]}\n            editMode={editMode}\n          >\n            {/* @ts-ignore */}\n            <DashboardComponent\n              id={topLevelTabs?.id}\n              parentId={DASHBOARD_ROOT_ID}\n              depth={DASHBOARD_ROOT_DEPTH + 1}\n              index={0}\n              renderTabContent={false}\n              renderHoverMenu={false}\n              onChangeTab={handleChangeTab}\n            />\n          </WithPopoverMenu>\n        )}\n      </div>\n    ),\n    [\n      nativeFiltersEnabled,\n      filterBarOrientation,\n      editMode,\n      handleChangeTab,\n      handleDeleteTopLevelTabs,\n      hideDashboardHeader,\n      isReport,\n      topLevelTabs,\n      uiConfig.hideNav,\n    ],\n  );\n\n  const dashboardContentMarginLeft =\n    !dashboardFiltersOpen &&\n    !editMode &&\n    nativeFiltersEnabled &&\n    filterBarOrientation !== FilterBarOrientation.Horizontal\n      ? 0\n      : theme.gridUnit * 8;\n\n  return (\n    <DashboardWrapper>\n      {showFilterBar &&\n        filterBarOrientation === FilterBarOrientation.Vertical && (\n          <>\n            <ResizableSidebar\n              id={`dashboard:${dashboardId}`}\n              enable={dashboardFiltersOpen}\n              minWidth={OPEN_FILTER_BAR_WIDTH}\n              maxWidth={OPEN_FILTER_BAR_MAX_WIDTH}\n              initialWidth={OPEN_FILTER_BAR_WIDTH}\n            >\n              {adjustedWidth => {\n                const filterBarWidth = dashboardFiltersOpen\n                  ? adjustedWidth\n                  : CLOSED_FILTER_BAR_WIDTH;\n                return (\n                  <FiltersPanel\n                    width={filterBarWidth}\n                    hidden={isReport}\n                    data-test=\"dashboard-filters-panel\"\n                  >\n                    <StickyPanel ref={containerRef} width={filterBarWidth}>\n                      <ErrorBoundary>\n                        <FilterBar\n                          orientation={FilterBarOrientation.Vertical}\n                          verticalConfig={{\n                            filtersOpen: dashboardFiltersOpen,\n                            toggleFiltersBar: toggleDashboardFiltersOpen,\n                            width: filterBarWidth,\n                            height: filterBarHeight,\n                            offset: filterBarOffset,\n                          }}\n                        />\n                      </ErrorBoundary>\n                    </StickyPanel>\n                  </FiltersPanel>\n                );\n              }}\n            </ResizableSidebar>\n          </>\n        )}\n      <StyledHeader ref={headerRef}>\n        {/* @ts-ignore */}\n        <Droppable\n          data-test=\"top-level-tabs\"\n          className={cx(!topLevelTabs && editMode && 'empty-droptarget')}\n          component={dashboardRoot}\n          parentComponent={null}\n          depth={DASHBOARD_ROOT_DEPTH}\n          index={0}\n          orientation=\"column\"\n          onDrop={handleDrop}\n          editMode={editMode}\n          // you cannot drop on/displace tabs if they already exist\n          disableDragDrop={!!topLevelTabs}\n          style={draggableStyle}\n        >\n          {renderDraggableContent}\n        </Droppable>\n      </StyledHeader>\n      <StyledContent fullSizeChartId={fullSizeChartId}>\n        <Global\n          styles={css`\n            // @z-index-above-dashboard-header (100) + 1 = 101\n            ${fullSizeChartId &&\n            `div > .filterStatusPopover.ant-popover{z-index: 101}`}\n          `}\n        />\n        {!editMode &&\n          !topLevelTabs &&\n          dashboardLayout[DASHBOARD_GRID_ID]?.children?.length === 0 && (\n            <EmptyStateBig\n              title={t('There are no charts added to this dashboard')}\n              description={\n                canEdit &&\n                t(\n                  'Go to the edit mode to configure the dashboard and add charts',\n                )\n              }\n              buttonText={canEdit && t('Edit the dashboard')}\n              buttonAction={() => dispatch(setEditMode(true))}\n              image=\"dashboard.svg\"\n            />\n          )}\n        <DashboardContentWrapper\n          data-test=\"dashboard-content-wrapper\"\n          className={cx('dashboard', editMode && 'dashboard--editing')}\n        >\n          <StyledDashboardContent\n            className=\"dashboard-content\"\n            editMode={editMode}\n            marginLeft={dashboardContentMarginLeft}\n          >\n            {showDashboard ? (\n              missingInitialFilters.length > 0 ? (\n                <div\n                  css={css`\n                    display: flex;\n                    flex-direction: row;\n                    align-items: center;\n                    justify-content: center;\n                    flex: 1;\n                    & div {\n                      width: 500px;\n                    }\n                  `}\n                >\n                  <BasicErrorAlert\n                    title={t('Unable to load dashboard')}\n                    body={t(\n                      `The following filters have the 'Select first filter value by default'\n                    option checked and could not be loaded, which is preventing the dashboard\n                    from rendering: %s`,\n                      missingInitialFilters.join(', '),\n                    )}\n                  />\n                </div>\n              ) : (\n                <DashboardContainer topLevelTabs={topLevelTabs} />\n              )\n            ) : (\n              <Loading />\n            )}\n            {editMode && <BuilderComponentPane topOffset={barTopOffset} />}\n          </StyledDashboardContent>\n        </DashboardContentWrapper>\n      </StyledContent>\n      {dashboardIsSaving && (\n        <Loading\n          css={css`\n            && {\n              position: fixed;\n            }\n          `}\n        />\n      )}\n    </DashboardWrapper>\n  );\n};\n\nexport default DashboardBuilder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}