{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport { t } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { FormLabel } from 'src/components/Form';\nimport AsyncSelect from 'src/components/Select/AsyncSelect';\nimport { FilterContainer } from './Base';import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nfunction SelectFilter({ Header, name, fetchSelects, initialValue, onSelect, selects = [] }, ref) {\n  const [selectedOption, setSelectedOption] = useState(initialValue);\n  const onChange = (selected) => {\n    onSelect(selected ? { label: selected.label, value: selected.value } : undefined);\n    setSelectedOption(selected);\n  };\n  const onClear = () => {\n    onSelect(undefined, true);\n    setSelectedOption(undefined);\n  };\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      onClear();\n    }\n  }));\n  const fetchAndFormatSelects = useMemo(() => async (inputValue, page, pageSize) => {\n    if (fetchSelects) {\n      const selectValues = await fetchSelects(inputValue, page, pageSize);\n      return {\n        data: selectValues.data,\n        totalCount: selectValues.totalCount\n      };\n    }\n    return {\n      data: [],\n      totalCount: 0\n    };\n  }, [fetchSelects]);\n  return _jsx(FilterContainer, { children:\n    fetchSelects ? _jsx(AsyncSelect, { allowClear: true, ariaLabel: typeof Header === 'string' ? Header : name || t('Filter'), \"data-test\": \"filters-select\", header: _jsx(FormLabel, { children: Header }), onChange: onChange, onClear: onClear, options: fetchAndFormatSelects, placeholder: t('Select or type a value'), showSearch: true, value: selectedOption }) : _jsx(Select, { allowClear: true, ariaLabel: typeof Header === 'string' ? Header : name || t('Filter'), \"data-test\": \"filters-select\", header: _jsx(FormLabel, { children: Header }), labelInValue: true, onChange: onChange, onClear: onClear, options: selects, placeholder: t('Select or type a value'), showSearch: true, value: selectedOption }) }\n  );\n}__signature__(SelectFilter, \"useState{[selectedOption, setSelectedOption](initialValue)}\\nuseImperativeHandle{}\\nuseMemo{fetchAndFormatSelects}\", () => [useImperativeHandle]);const _default = /*#__PURE__*/\nforwardRef(SelectFilter);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(SelectFilter, \"SelectFilter\", \"/app/superset-frontend/src/components/ListView/Filters/Select.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/components/ListView/Filters/Select.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useMemo","forwardRef","useImperativeHandle","t","Select","FormLabel","AsyncSelect","FilterContainer","jsx","_jsx","SelectFilter","Header","name","fetchSelects","initialValue","onSelect","selects","ref","selectedOption","setSelectedOption","onChange","selected","label","value","undefined","onClear","clearFilter","fetchAndFormatSelects","inputValue","page","pageSize","selectValues","data","totalCount","children","allowClear","ariaLabel","header","options","placeholder","showSearch","labelInValue","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/ListView/Filters/Select.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  useState,\n  useMemo,\n  forwardRef,\n  useImperativeHandle,\n  type RefObject,\n} from 'react';\n\nimport { t } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport { Filter, SelectOption } from 'src/components/ListView/types';\nimport { FormLabel } from 'src/components/Form';\nimport AsyncSelect from 'src/components/Select/AsyncSelect';\nimport { FilterContainer, BaseFilter, FilterHandler } from './Base';\n\ninterface SelectFilterProps extends BaseFilter {\n  fetchSelects?: Filter['fetchSelects'];\n  name?: string;\n  onSelect: (selected: SelectOption | undefined, isClear?: boolean) => void;\n  paginate?: boolean;\n  selects: Filter['selects'];\n}\n\nfunction SelectFilter(\n  {\n    Header,\n    name,\n    fetchSelects,\n    initialValue,\n    onSelect,\n    selects = [],\n  }: SelectFilterProps,\n  ref: RefObject<FilterHandler>,\n) {\n  const [selectedOption, setSelectedOption] = useState(initialValue);\n\n  const onChange = (selected: SelectOption) => {\n    onSelect(\n      selected ? { label: selected.label, value: selected.value } : undefined,\n    );\n    setSelectedOption(selected);\n  };\n\n  const onClear = () => {\n    onSelect(undefined, true);\n    setSelectedOption(undefined);\n  };\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      onClear();\n    },\n  }));\n\n  const fetchAndFormatSelects = useMemo(\n    () => async (inputValue: string, page: number, pageSize: number) => {\n      if (fetchSelects) {\n        const selectValues = await fetchSelects(inputValue, page, pageSize);\n        return {\n          data: selectValues.data,\n          totalCount: selectValues.totalCount,\n        };\n      }\n      return {\n        data: [],\n        totalCount: 0,\n      };\n    },\n    [fetchSelects],\n  );\n\n  return (\n    <FilterContainer>\n      {fetchSelects ? (\n        <AsyncSelect\n          allowClear\n          ariaLabel={typeof Header === 'string' ? Header : name || t('Filter')}\n          data-test=\"filters-select\"\n          header={<FormLabel>{Header}</FormLabel>}\n          onChange={onChange}\n          onClear={onClear}\n          options={fetchAndFormatSelects}\n          placeholder={t('Select or type a value')}\n          showSearch\n          value={selectedOption}\n        />\n      ) : (\n        <Select\n          allowClear\n          ariaLabel={typeof Header === 'string' ? Header : name || t('Filter')}\n          data-test=\"filters-select\"\n          header={<FormLabel>{Header}</FormLabel>}\n          labelInValue\n          onChange={onChange}\n          onClear={onClear}\n          options={selects}\n          placeholder={t('Select or type a value')}\n          showSearch\n          value={selectedOption}\n        />\n      )}\n    </FilterContainer>\n  );\n}\nexport default forwardRef(SelectFilter);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}