{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { memo } from 'react';\nimport { formatNumber, styled } from '@superset-ui/core';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst StyledLegend = styled.div`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    position: absolute;\n    background: ${theme.colors.grayscale.light5};\n    box-shadow: 0 0 ${theme.gridUnit}px ${theme.colors.grayscale.light2};\n    margin: ${theme.gridUnit * 6}px;\n    padding: ${theme.gridUnit * 3}px ${theme.gridUnit * 5}px;\n    outline: none;\n    overflow-y: scroll;\n    max-height: 200px;\n\n    & ul {\n      list-style: none;\n      padding-left: 0;\n      margin: 0;\n\n      & li a {\n        color: ${theme.colors.grayscale.base};\n        text-decoration: none;\n\n        & span {\n          margin-right: ${theme.gridUnit * 3}px;\n        }\n      }\n    }\n  `}\n`;\nconst categoryDelimiter = ' - ';\nconst Legend = ({ format: d3Format = null, forceCategorical = false, position = 'tr', categories: categoriesObject = {}, toggleCategory = () => {}, showSingleCategory = () => {} }) => {\n  const format = (value) => {\n    if (!d3Format || forceCategorical) {\n      return value;\n    }\n    const numValue = parseFloat(value);\n    return formatNumber(d3Format, numValue);\n  };\n  const formatCategoryLabel = (k) => {\n    if (!d3Format) {\n      return k;\n    }\n    if (k.includes(categoryDelimiter)) {\n      const values = k.split(categoryDelimiter);\n      return format(values[0]) + categoryDelimiter + format(values[1]);\n    }\n    return format(k);\n  };\n  if (Object.keys(categoriesObject).length === 0 || position === null) {\n    return null;\n  }\n  const categories = Object.entries(categoriesObject).map(([k, v]) => {\n    const style = { color: `rgba(${v.color.join(', ')})` };\n    const icon = v.enabled ? '\\u25FC' : '\\u25FB';\n    return _jsx(\"li\", { children:\n      _jsxs(\"a\", { href: \"#\", role: \"button\", onClick: () => toggleCategory(k), onDoubleClick: () => showSingleCategory(k), children: [\n        _jsx(\"span\", { style: style, children: icon }), \" \", formatCategoryLabel(k)] }\n      ) }, k\n    );\n  });\n  const vertical = (position == null ? void 0 : position.charAt(0)) === 't' ? 'top' : 'bottom';\n  const horizontal = (position == null ? void 0 : position.charAt(1)) === 'r' ? 'right' : 'left';\n  const style = {\n    position: 'absolute',\n    [vertical]: '0px',\n    [horizontal]: '10px'\n  };\n  return _jsx(StyledLegend, { className: \"dupa\", style: style, children:\n    _jsx(\"ul\", { children: categories }) }\n  );\n};const _default = /*#__PURE__*/\nmemo(Legend);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledLegend, \"StyledLegend\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.tsx\");reactHotLoader.register(categoryDelimiter, \"categoryDelimiter\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.tsx\");reactHotLoader.register(Legend, \"Legend\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["memo","formatNumber","styled","jsx","_jsx","jsxs","_jsxs","StyledLegend","div","theme","typography","sizes","s","colors","grayscale","light5","gridUnit","light2","base","categoryDelimiter","Legend","format","d3Format","forceCategorical","position","categories","categoriesObject","toggleCategory","showSingleCategory","value","numValue","parseFloat","formatCategoryLabel","k","includes","values","split","Object","keys","length","entries","map","v","style","color","join","icon","enabled","children","href","role","onClick","onDoubleClick","vertical","charAt","horizontal","className","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/components/Legend.tsx"],"sourcesContent":["/* eslint-disable react/jsx-sort-default-props */\n/* eslint-disable react/sort-prop-types */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { memo } from 'react';\nimport { formatNumber, styled } from '@superset-ui/core';\n\nconst StyledLegend = styled.div`\n  ${({ theme }) => `\n    font-size: ${theme.typography.sizes.s}px;\n    position: absolute;\n    background: ${theme.colors.grayscale.light5};\n    box-shadow: 0 0 ${theme.gridUnit}px ${theme.colors.grayscale.light2};\n    margin: ${theme.gridUnit * 6}px;\n    padding: ${theme.gridUnit * 3}px ${theme.gridUnit * 5}px;\n    outline: none;\n    overflow-y: scroll;\n    max-height: 200px;\n\n    & ul {\n      list-style: none;\n      padding-left: 0;\n      margin: 0;\n\n      & li a {\n        color: ${theme.colors.grayscale.base};\n        text-decoration: none;\n\n        & span {\n          margin-right: ${theme.gridUnit * 3}px;\n        }\n      }\n    }\n  `}\n`;\n\nconst categoryDelimiter = ' - ';\n\nexport type LegendProps = {\n  format: string | null;\n  forceCategorical?: boolean;\n  position?: null | 'tl' | 'tr' | 'bl' | 'br';\n  categories: Record<string, { enabled: boolean; color: number[] }>;\n  toggleCategory?: (key: string) => void;\n  showSingleCategory?: (key: string) => void;\n};\n\nconst Legend = ({\n  format: d3Format = null,\n  forceCategorical = false,\n  position = 'tr',\n  categories: categoriesObject = {},\n  toggleCategory = () => {},\n  showSingleCategory = () => {},\n}: LegendProps) => {\n  const format = (value: string) => {\n    if (!d3Format || forceCategorical) {\n      return value;\n    }\n\n    const numValue = parseFloat(value);\n\n    return formatNumber(d3Format, numValue);\n  };\n\n  const formatCategoryLabel = (k: string) => {\n    if (!d3Format) {\n      return k;\n    }\n\n    if (k.includes(categoryDelimiter)) {\n      const values = k.split(categoryDelimiter);\n\n      return format(values[0]) + categoryDelimiter + format(values[1]);\n    }\n\n    return format(k);\n  };\n\n  if (Object.keys(categoriesObject).length === 0 || position === null) {\n    return null;\n  }\n\n  const categories = Object.entries(categoriesObject).map(([k, v]) => {\n    const style = { color: `rgba(${v.color.join(', ')})` };\n    const icon = v.enabled ? '\\u25FC' : '\\u25FB';\n\n    return (\n      <li key={k}>\n        <a\n          href=\"#\"\n          role=\"button\"\n          onClick={() => toggleCategory(k)}\n          onDoubleClick={() => showSingleCategory(k)}\n        >\n          <span style={style}>{icon}</span> {formatCategoryLabel(k)}\n        </a>\n      </li>\n    );\n  });\n\n  const vertical = position?.charAt(0) === 't' ? 'top' : 'bottom';\n  const horizontal = position?.charAt(1) === 'r' ? 'right' : 'left';\n  const style = {\n    position: 'absolute' as const,\n    [vertical]: '0px',\n    [horizontal]: '10px',\n  };\n\n  return (\n    <StyledLegend className=\"dupa\" style={style}>\n      <ul>{categories}</ul>\n    </StyledLegend>\n  );\n};\n\nexport default memo(Legend);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}