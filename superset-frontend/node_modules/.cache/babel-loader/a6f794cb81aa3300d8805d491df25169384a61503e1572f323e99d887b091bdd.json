{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useEffect, useState } from 'react';\nimport { styled, ensureIsArray, t, getClientErrorObject } from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport { getChartDataRequest } from 'src/components/Chart/chartAction';\nimport ViewQuery from 'src/explore/components/controls/ViewQuery';import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nconst ViewQueryModalContainer = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\nconst ViewQueryModal = (props) => {\n  const [result, setResult] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const loadChartData = (resultType) => {\n    setIsLoading(true);\n    getChartDataRequest({\n      formData: props.latestQueryFormData,\n      resultFormat: 'json',\n      resultType\n    }).\n    then(({ json }) => {\n      setResult(ensureIsArray(json.result));\n      setIsLoading(false);\n      setError(null);\n    }).\n    catch((response) => {\n      getClientErrorObject(response).then(({ error, message }) => {\n        setError(error ||\n        message ||\n        response.statusText ||\n        t('Sorry, An error occurred'));\n        setIsLoading(false);\n      });\n    });\n  };\n  useEffect(() => {\n    loadChartData('query');\n  }, [JSON.stringify(props.latestQueryFormData)]);\n  if (isLoading) {\n    return _jsx(Loading, {});\n  }\n  if (error) {\n    return _jsx(\"pre\", { children: error });\n  }\n  return _jsx(ViewQueryModalContainer, { children:\n    result.map((item) => item.query ? _jsx(ViewQuery, { sql: item.query, language: item.language || undefined }) : null) }\n  );\n};__signature__(ViewQueryModal, \"useState{[result, setResult]([])}\\nuseState{[isLoading, setIsLoading](false)}\\nuseState{[error, setError](null)}\\nuseEffect{}\");const _default =\nViewQueryModal;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(ViewQueryModalContainer, \"ViewQueryModalContainer\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModal.tsx\");reactHotLoader.register(ViewQueryModal, \"ViewQueryModal\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModal.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModal.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useEffect","useState","styled","ensureIsArray","t","getClientErrorObject","Loading","getChartDataRequest","ViewQuery","jsx","_jsx","ViewQueryModalContainer","div","ViewQueryModal","props","result","setResult","isLoading","setIsLoading","error","setError","loadChartData","resultType","formData","latestQueryFormData","resultFormat","then","json","catch","response","message","statusText","JSON","stringify","children","map","item","query","sql","language","undefined","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/explore/components/controls/ViewQueryModal.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FC, useEffect, useState } from 'react';\n\nimport {\n  styled,\n  ensureIsArray,\n  t,\n  getClientErrorObject,\n} from '@superset-ui/core';\nimport Loading from 'src/components/Loading';\nimport { getChartDataRequest } from 'src/components/Chart/chartAction';\nimport ViewQuery from 'src/explore/components/controls/ViewQuery';\n\ninterface Props {\n  latestQueryFormData: object;\n}\n\ntype Result = {\n  query: string;\n  language: string;\n};\n\nconst ViewQueryModalContainer = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ViewQueryModal: FC<Props> = props => {\n  const [result, setResult] = useState<Result[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const loadChartData = (resultType: string) => {\n    setIsLoading(true);\n    getChartDataRequest({\n      formData: props.latestQueryFormData,\n      resultFormat: 'json',\n      resultType,\n    })\n      .then(({ json }) => {\n        setResult(ensureIsArray(json.result));\n        setIsLoading(false);\n        setError(null);\n      })\n      .catch(response => {\n        getClientErrorObject(response).then(({ error, message }) => {\n          setError(\n            error ||\n              message ||\n              response.statusText ||\n              t('Sorry, An error occurred'),\n          );\n          setIsLoading(false);\n        });\n      });\n  };\n  useEffect(() => {\n    loadChartData('query');\n  }, [JSON.stringify(props.latestQueryFormData)]);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n  if (error) {\n    return <pre>{error}</pre>;\n  }\n\n  return (\n    <ViewQueryModalContainer>\n      {result.map(item =>\n        item.query ? (\n          <ViewQuery sql={item.query} language={item.language || undefined} />\n        ) : null,\n      )}\n    </ViewQueryModalContainer>\n  );\n};\n\nexport default ViewQueryModal;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAAaA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE/C,SACEC,MAAM,EACNC,aAAa,EACbC,CAAC,EACDC,oBAAoB,QACf,mBAAmB;AAC1B,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,SAASC,mBAAmB,QAAQ,kCAAkC;AACtE,OAAOC,SAAS,MAAM,2CAA2C,CAAC,SAAAC,GAAA,IAAAC,IAAA;AAWlE,MAAMC,uBAAuB,GAAGT,MAAM,CAACU,GAAG;;;;CAIzC;AAED,MAAMC,cAAc,GAAcA,CAAAC,KAAK,KAAG;EACxC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAW,EAAE,CAAC;EAClD,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAgB,IAAI,CAAC;EAEvD,MAAMoB,aAAa,GAAGA,CAACC,UAAkB,KAAI;IAC3CJ,YAAY,CAAC,IAAI,CAAC;IAClBX,mBAAmB,CAAC;MAClBgB,QAAQ,EAAET,KAAK,CAACU,mBAAmB;MACnCC,YAAY,EAAE,MAAM;MACpBH;KACD,CAAC;IACCI,IAAI,CAAC,CAAC,EAAEC,IAAI,EAAE,KAAI;MACjBX,SAAS,CAACb,aAAa,CAACwB,IAAI,CAACZ,MAAM,CAAC,CAAC;MACrCG,YAAY,CAAC,KAAK,CAAC;MACnBE,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC;IACDQ,KAAK,CAAC,CAAAC,QAAQ,KAAG;MAChBxB,oBAAoB,CAACwB,QAAQ,CAAC,CAACH,IAAI,CAAC,CAAC,EAAEP,KAAK,EAAEW,OAAO,EAAE,KAAI;QACzDV,QAAQ,CACND,KAAK;QACHW,OAAO;QACPD,QAAQ,CAACE,UAAU;QACnB3B,CAAC,CAAC,0BAA0B,CAAC,CAChC;QACDc,YAAY,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC;IACJ,CAAC,CAAC;EACN,CAAC;EACDlB,SAAS,CAAC,MAAK;IACbqB,aAAa,CAAC,OAAO,CAAC;EACxB,CAAC,EAAE,CAACW,IAAI,CAACC,SAAS,CAACnB,KAAK,CAACU,mBAAmB,CAAC,CAAC,CAAC;EAE/C,IAAIP,SAAS,EAAE;IACb,OAAOP,IAAA,CAACJ,OAAO,KAAG;;EAEpB,IAAIa,KAAK,EAAE;IACT,OAAOT,IAAA,UAAAwB,QAAA,EAAMf,KAAK,EAAM,CAAC;;EAG3B,OACET,IAAA,CAACC,uBAAuB,IAAAuB,QAAA;IACrBnB,MAAM,CAACoB,GAAG,CAAC,CAAAC,IAAI,KACdA,IAAI,CAACC,KAAK,GACR3B,IAAA,CAACF,SAAS,IAAC8B,GAAG,EAAEF,IAAI,CAACC,KAAM,EAACE,QAAQ,EAAEH,IAAI,CAACG,QAAQ,IAAIC,SAAU,GAAG,GAClE,IAAI,CACT;EACsB,CAAC;AAE9B,CAAC,CAACC,aAAA,CAjDI5B,cAAc,yIAAA6B,QAAA;AAmDL7B,cAAc,CAA7B,eAAA6B,QAAA,CAA8B,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAL,SAAA,MAAAG,cAAA,WAAAA,cAAA,CAAAG,QAAA,CAzDxBnC,uBAAuB,0GAAAgC,cAAA,CAAAG,QAAA,CAMvBjC,cAAc,iGAAA8B,cAAA,CAAAG,QAAA,CAAAJ,QAAA,kHAAAK,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAP,SAAA,CAAAO,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}