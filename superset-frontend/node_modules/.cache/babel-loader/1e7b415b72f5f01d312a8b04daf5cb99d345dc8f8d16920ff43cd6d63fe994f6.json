{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect } from 'react';\nimport { t, styled, SupersetClient } from '@superset-ui/core';\nimport { FormLabel } from 'src/components/Form';\nimport Modal from 'src/components/Modal';\nimport AsyncSelect from 'src/components/Select/AsyncSelect';\nimport Button from 'src/components/Button';\nimport { loadTags } from 'src/components/Tags/utils';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst BulkTagModalContainer = styled.div`\n  .bulk-tag-text {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2.5}px;\n  }\n`;\nconst BulkTagModal = ({ show, selected = [], onHide, refreshData, resourceName, addSuccessToast, addDangerToast }) => {\n  useEffect(() => {}, []);\n  const [tags, setTags] = useState([]);\n  const onSave = async () => {\n    await SupersetClient.post({\n      endpoint: `/api/v1/tag/bulk_create`,\n      jsonPayload: {\n        tags: tags.map((tag) => ({\n          name: tag.value,\n          objects_to_tag: selected.map((item) => [\n          resourceName,\n          +item.original.id]\n          )\n        }))\n      }\n    }).\n    then(({ json = {} }) => {\n      const skipped = json.result.objects_skipped;\n      const tagged = json.result.objects_tagged;\n      if (skipped.length > 0) {\n        addSuccessToast(t('%s items could not be tagged because you don’t have edit permissions to all selected objects.', skipped.length, resourceName));\n      }\n      addSuccessToast(t('Tagged %s %ss', tagged.length, resourceName));\n    }).\n    catch((err) => {\n      addDangerToast(t('Failed to tag items'));\n    });\n    refreshData();\n    onHide();\n    setTags([]);\n  };\n  return _jsx(Modal, { title: t('Bulk tag'), show: show, onHide: () => {\n      setTags([]);\n      onHide();\n    }, footer: _jsxs(\"div\", { children: [\n      _jsx(Button, { \"data-test\": \"modal-save-dashboard-button\", buttonStyle: \"secondary\", onClick: onHide, children:\n        t('Cancel') }\n      ),\n      _jsx(Button, { \"data-test\": \"modal-save-dashboard-button\", buttonStyle: \"primary\", onClick: onSave, children:\n        t('Save') }\n      )] }\n    ), children:\n    _jsxs(BulkTagModalContainer, { children: [\n      _jsx(\"div\", { className: \"bulk-tag-text\", children:\n        t('You are adding tags to %s %ss', selected.length, resourceName) }\n      ),\n      _jsx(FormLabel, { children: t('tags') }),\n      _jsx(AsyncSelect, { ariaLabel: \"tags\"\n        // @ts-ignore\n        , value: tags, options: loadTags, onHide: onHide\n        // @ts-ignore\n        , onChange: (tags) => setTags(tags), placeholder: t('Select Tags'), mode: \"multiple\" })] }\n    ) }\n  );\n};__signature__(BulkTagModal, \"useEffect{}\\nuseState{[tags, setTags]([])}\");const _default =\nBulkTagModal;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(BulkTagModalContainer, \"BulkTagModalContainer\", \"/app/superset-frontend/src/features/tags/BulkTagModal.tsx\");reactHotLoader.register(BulkTagModal, \"BulkTagModal\", \"/app/superset-frontend/src/features/tags/BulkTagModal.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/features/tags/BulkTagModal.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useEffect","t","styled","SupersetClient","FormLabel","Modal","AsyncSelect","Button","loadTags","jsx","_jsx","jsxs","_jsxs","BulkTagModalContainer","div","theme","gridUnit","BulkTagModal","show","selected","onHide","refreshData","resourceName","addSuccessToast","addDangerToast","tags","setTags","onSave","post","endpoint","jsonPayload","map","tag","name","value","objects_to_tag","item","original","id","then","json","skipped","result","objects_skipped","tagged","objects_tagged","length","catch","err","title","footer","children","buttonStyle","onClick","className","ariaLabel","options","onChange","placeholder","mode","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/features/tags/BulkTagModal.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useEffect, FC } from 'react';\n\nimport { t, styled, SupersetClient } from '@superset-ui/core';\nimport { FormLabel } from 'src/components/Form';\nimport Modal from 'src/components/Modal';\nimport AsyncSelect from 'src/components/Select/AsyncSelect';\nimport Button from 'src/components/Button';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { TaggableResourceOption } from 'src/features/tags/TagModal';\n\nconst BulkTagModalContainer = styled.div`\n  .bulk-tag-text {\n    margin-bottom: ${({ theme }) => theme.gridUnit * 2.5}px;\n  }\n`;\n\ninterface BulkTagModalProps {\n  onHide: () => void;\n  refreshData: () => void;\n  addSuccessToast: (msg: string) => void;\n  addDangerToast: (msg: string) => void;\n  show: boolean;\n  selected: any[];\n  resourceName: string;\n}\n\nconst BulkTagModal: FC<BulkTagModalProps> = ({\n  show,\n  selected = [],\n  onHide,\n  refreshData,\n  resourceName,\n  addSuccessToast,\n  addDangerToast,\n}) => {\n  useEffect(() => {}, []);\n  const [tags, setTags] = useState<TaggableResourceOption[]>([]);\n\n  const onSave = async () => {\n    await SupersetClient.post({\n      endpoint: `/api/v1/tag/bulk_create`,\n      jsonPayload: {\n        tags: tags.map(tag => ({\n          name: tag.value,\n          objects_to_tag: selected.map(item => [\n            resourceName,\n            +item.original.id,\n          ]),\n        })),\n      },\n    })\n      .then(({ json = {} }) => {\n        const skipped = json.result.objects_skipped;\n        const tagged = json.result.objects_tagged;\n        if (skipped.length > 0) {\n          addSuccessToast(\n            t(\n              '%s items could not be tagged because you don’t have edit permissions to all selected objects.',\n              skipped.length,\n              resourceName,\n            ),\n          );\n        }\n        addSuccessToast(t('Tagged %s %ss', tagged.length, resourceName));\n      })\n      .catch(err => {\n        addDangerToast(t('Failed to tag items'));\n      });\n\n    refreshData();\n    onHide();\n    setTags([]);\n  };\n\n  return (\n    <Modal\n      title={t('Bulk tag')}\n      show={show}\n      onHide={() => {\n        setTags([]);\n        onHide();\n      }}\n      footer={\n        <div>\n          <Button\n            data-test=\"modal-save-dashboard-button\"\n            buttonStyle=\"secondary\"\n            onClick={onHide}\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"modal-save-dashboard-button\"\n            buttonStyle=\"primary\"\n            onClick={onSave}\n          >\n            {t('Save')}\n          </Button>\n        </div>\n      }\n    >\n      <BulkTagModalContainer>\n        <div className=\"bulk-tag-text\">\n          {t('You are adding tags to %s %ss', selected.length, resourceName)}\n        </div>\n        <FormLabel>{t('tags')}</FormLabel>\n        <AsyncSelect\n          ariaLabel=\"tags\"\n          // @ts-ignore\n          value={tags}\n          options={loadTags}\n          onHide={onHide}\n          // @ts-ignore\n          onChange={tags => setTags(tags)}\n          placeholder={t('Select Tags')}\n          mode=\"multiple\"\n        />\n      </BulkTagModalContainer>\n    </Modal>\n  );\n};\n\nexport default BulkTagModal;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SAASA,QAAQ,EAAEC,SAAS,QAAY,OAAO;AAE/C,SAASC,CAAC,EAAEC,MAAM,EAAEC,cAAc,QAAQ,mBAAmB;AAC7D,SAASC,SAAS,QAAQ,qBAAqB;AAC/C,OAAOC,KAAK,MAAM,sBAAsB;AACxC,OAAOC,WAAW,MAAM,mCAAmC;AAC3D,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,SAASC,QAAQ,QAAQ,2BAA2B,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAGrD,MAAMC,qBAAqB,GAAGX,MAAM,CAACY,GAAG;;qBAEnB,CAAC,EAAEC,KAAK,EAAE,KAAKA,KAAK,CAACC,QAAQ,GAAG,GAAG;;CAEvD;AAYD,MAAMC,YAAY,GAA0BA,CAAC,EAC3CC,IAAI,EACJC,QAAQ,GAAG,EAAE,EACbC,MAAM,EACNC,WAAW,EACXC,YAAY,EACZC,eAAe,EACfC,cAAc,EACf,KAAI;EACHxB,SAAS,CAAC,MAAK,CAAE,CAAC,EAAE,EAAE,CAAC;EACvB,MAAM,CAACyB,IAAI,EAAEC,OAAO,CAAC,GAAG3B,QAAQ,CAA2B,EAAE,CAAC;EAE9D,MAAM4B,MAAM,GAAG,MAAAA,CAAA,KAAW;IACxB,MAAMxB,cAAc,CAACyB,IAAI,CAAC;MACxBC,QAAQ,EAAE,yBAAyB;MACnCC,WAAW,EAAE;QACXL,IAAI,EAAEA,IAAI,CAACM,GAAG,CAAC,CAAAC,GAAG,MAAK;UACrBC,IAAI,EAAED,GAAG,CAACE,KAAK;UACfC,cAAc,EAAEhB,QAAQ,CAACY,GAAG,CAAC,CAAAK,IAAI,KAAI;UACnCd,YAAY;UACZ,CAACc,IAAI,CAACC,QAAQ,CAACC,EAAE;UAClB;SACF,CAAC;;KAEL,CAAC;IACCC,IAAI,CAAC,CAAC,EAAEC,IAAI,GAAG,EAAE,EAAE,KAAI;MACtB,MAAMC,OAAO,GAAGD,IAAI,CAACE,MAAM,CAACC,eAAe;MAC3C,MAAMC,MAAM,GAAGJ,IAAI,CAACE,MAAM,CAACG,cAAc;MACzC,IAAIJ,OAAO,CAACK,MAAM,GAAG,CAAC,EAAE;QACtBvB,eAAe,CACbtB,CAAC,CACC,+FAA+F,EAC/FwC,OAAO,CAACK,MAAM,EACdxB,YAAY,CACb,CACF;;MAEHC,eAAe,CAACtB,CAAC,CAAC,eAAe,EAAE2C,MAAM,CAACE,MAAM,EAAExB,YAAY,CAAC,CAAC;IAClE,CAAC,CAAC;IACDyB,KAAK,CAAC,CAAAC,GAAG,KAAG;MACXxB,cAAc,CAACvB,CAAC,CAAC,qBAAqB,CAAC,CAAC;IAC1C,CAAC,CAAC;IAEJoB,WAAW,EAAE;IACbD,MAAM,EAAE;IACRM,OAAO,CAAC,EAAE,CAAC;EACb,CAAC;EAED,OACEhB,IAAA,CAACL,KAAK,IACJ4C,KAAK,EAAEhD,CAAC,CAAC,UAAU,CAAE,EACrBiB,IAAI,EAAEA,IAAK,EACXE,MAAM,EAAEA,CAAA,KAAK;MACXM,OAAO,CAAC,EAAE,CAAC;MACXN,MAAM,EAAE;IACV,CAAE,EACF8B,MAAM,EACJtC,KAAA,UAAAuC,QAAA;MACEzC,IAAA,CAACH,MAAM,IACL,aAAU,6BAA6B,EACvC6C,WAAW,EAAC,WAAW,EACvBC,OAAO,EAAEjC,MAAO,EAAA+B,QAAA;QAEflD,CAAC,CAAC,QAAQ,CAAC;MACN,CACR;MAAAS,IAAA,CAACH,MAAM,IACL,aAAU,6BAA6B,EACvC6C,WAAW,EAAC,SAAS,EACrBC,OAAO,EAAE1B,MAAO,EAAAwB,QAAA;QAEflD,CAAC,CAAC,MAAM,CAAC;MACJ,CACV;IAAK,CACN,EAAAkD,QAAA;IAEDvC,KAAA,CAACC,qBAAqB,IAAAsC,QAAA;MACpBzC,IAAA,UAAK4C,SAAS,EAAC,eAAe,EAAAH,QAAA;QAC3BlD,CAAC,CAAC,+BAA+B,EAAEkB,QAAQ,CAAC2B,MAAM,EAAExB,YAAY,CAAC;MAC/D,CACL;MAAAZ,IAAA,CAACN,SAAS,IAAA+C,QAAA,EAAElD,CAAC,CAAC,MAAM,CAAC,EAAY,CACjC;MAAAS,IAAA,CAACJ,WAAW,IACViD,SAAS,EAAC;QACV;QAAA,EACArB,KAAK,EAAET,IAAK,EACZ+B,OAAO,EAAEhD,QAAS,EAClBY,MAAM,EAAEA;QACR;QAAA,EACAqC,QAAQ,EAAEA,CAAAhC,IAAI,KAAIC,OAAO,CAACD,IAAI,CAAE,EAChCiC,WAAW,EAAEzD,CAAC,CAAC,aAAa,CAAE,EAC9B0D,IAAI,EAAC,UAAU,GAEnB;IAAuB,CACzB;EAAO,CAAC;AAEZ,CAAC,CAACC,aAAA,CA9FI3C,YAAY,sDAAA4C,QAAA;AAgGH5C,YAAY,CAA3B,eAAA4C,QAAA,CAA4B,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAhHtBrD,qBAAqB,wFAAAiD,cAAA,CAAAI,QAAA,CAgBrBjD,YAAY,+EAAA6C,cAAA,CAAAI,QAAA,CAAAL,QAAA,kGAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}