{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/light';\nimport sql from 'react-syntax-highlighter/dist/cjs/languages/hljs/sql';\nimport github from 'react-syntax-highlighter/dist/cjs/styles/hljs/github';\nimport { t } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nSyntaxHighlighter.registerLanguage('sql', sql);\nconst shrinkSql = (sql, maxLines, maxWidth) => {\n  const ssql = sql || '';\n  let lines = ssql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('{...}');\n  }\n  return lines.\n  map((line) => {\n    if (line.length > maxWidth) {\n      return `${line.slice(0, maxWidth)}{...}`;\n    }\n    return line;\n  }).\n  join('\\n');\n};\nfunction TriggerNode({ shrink, sql, maxLines, maxWidth }) {\n  return _jsx(SyntaxHighlighter, { language: \"sql\", style: github, children:\n    shrink ? shrinkSql(sql, maxLines, maxWidth) : sql }\n  );\n}\nfunction HighlightSqlModal({ rawSql, sql }) {\n  return _jsxs(\"div\", { children: [\n    _jsx(\"h4\", { children: t('Source SQL') }),\n    _jsx(SyntaxHighlighter, { language: \"sql\", style: github, children:\n      sql }\n    ),\n    rawSql && rawSql !== sql && _jsxs(\"div\", { children: [\n      _jsx(\"h4\", { children: t('Executed SQL') }),\n      _jsx(SyntaxHighlighter, { language: \"sql\", style: github, children:\n        rawSql }\n      )] }\n    )] }\n  );\n}\nfunction HighlightedSql({ sql, rawSql, maxWidth = 50, maxLines = 5, shrink = false }) {\n  return _jsx(ModalTrigger, { modalTitle: t('SQL'), modalBody: _jsx(HighlightSqlModal, { rawSql: rawSql, sql: sql }), triggerNode: _jsx(TriggerNode, { shrink: shrink, sql: sql, maxLines: maxLines, maxWidth: maxWidth }) });\n}const _default =\nHighlightedSql;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(shrinkSql, \"shrinkSql\", \"/app/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx\");reactHotLoader.register(TriggerNode, \"TriggerNode\", \"/app/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx\");reactHotLoader.register(HighlightSqlModal, \"HighlightSqlModal\", \"/app/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx\");reactHotLoader.register(HighlightedSql, \"HighlightedSql\", \"/app/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["SyntaxHighlighter","sql","github","t","ModalTrigger","jsx","_jsx","jsxs","_jsxs","registerLanguage","shrinkSql","maxLines","maxWidth","ssql","lines","split","length","slice","push","map","line","join","TriggerNode","shrink","language","style","children","HighlightSqlModal","rawSql","HighlightedSql","modalTitle","modalBody","triggerNode","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/SqlLab/components/HighlightedSql/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/light';\nimport sql from 'react-syntax-highlighter/dist/cjs/languages/hljs/sql';\nimport github from 'react-syntax-highlighter/dist/cjs/styles/hljs/github';\nimport { t } from '@superset-ui/core';\nimport ModalTrigger from 'src/components/ModalTrigger';\n\nSyntaxHighlighter.registerLanguage('sql', sql);\n\nexport interface HighlightedSqlProps {\n  sql: string;\n  rawSql?: string;\n  maxWidth?: number;\n  maxLines?: number;\n  shrink?: any;\n}\n\ninterface HighlightedSqlModalTypes {\n  rawSql?: string;\n  sql: string;\n}\n\ninterface TriggerNodeProps {\n  shrink: boolean;\n  sql: string;\n  maxLines: number;\n  maxWidth: number;\n}\n\nconst shrinkSql = (sql: string, maxLines: number, maxWidth: number) => {\n  const ssql = sql || '';\n  let lines = ssql.split('\\n');\n  if (lines.length >= maxLines) {\n    lines = lines.slice(0, maxLines);\n    lines.push('{...}');\n  }\n  return lines\n    .map(line => {\n      if (line.length > maxWidth) {\n        return `${line.slice(0, maxWidth)}{...}`;\n      }\n      return line;\n    })\n    .join('\\n');\n};\n\nfunction TriggerNode({ shrink, sql, maxLines, maxWidth }: TriggerNodeProps) {\n  return (\n    <SyntaxHighlighter language=\"sql\" style={github}>\n      {shrink ? shrinkSql(sql, maxLines, maxWidth) : sql}\n    </SyntaxHighlighter>\n  );\n}\n\nfunction HighlightSqlModal({ rawSql, sql }: HighlightedSqlModalTypes) {\n  return (\n    <div>\n      <h4>{t('Source SQL')}</h4>\n      <SyntaxHighlighter language=\"sql\" style={github}>\n        {sql}\n      </SyntaxHighlighter>\n      {rawSql && rawSql !== sql && (\n        <div>\n          <h4>{t('Executed SQL')}</h4>\n          <SyntaxHighlighter language=\"sql\" style={github}>\n            {rawSql}\n          </SyntaxHighlighter>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction HighlightedSql({\n  sql,\n  rawSql,\n  maxWidth = 50,\n  maxLines = 5,\n  shrink = false,\n}: HighlightedSqlProps) {\n  return (\n    <ModalTrigger\n      modalTitle={t('SQL')}\n      modalBody={<HighlightSqlModal rawSql={rawSql} sql={sql} />}\n      triggerNode={\n        <TriggerNode\n          shrink={shrink}\n          sql={sql}\n          maxLines={maxLines}\n          maxWidth={maxWidth}\n        />\n      }\n    />\n  );\n}\n\nexport default HighlightedSql;\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,OAAOA,iBAAiB,MAAM,yCAAyC;AACvE,OAAOC,GAAG,MAAM,sDAAsD;AACtE,OAAOC,MAAM,MAAM,sDAAsD;AACzE,SAASC,CAAC,QAAQ,mBAAmB;AACrC,OAAOC,YAAY,MAAM,6BAA6B,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAEvDR,iBAAiB,CAACS,gBAAgB,CAAC,KAAK,EAAER,GAAG,CAAC;AAsB9C,MAAMS,SAAS,GAAGA,CAACT,GAAW,EAAEU,QAAgB,EAAEC,QAAgB,KAAI;EACpE,MAAMC,IAAI,GAAGZ,GAAG,IAAI,EAAE;EACtB,IAAIa,KAAK,GAAGD,IAAI,CAACE,KAAK,CAAC,IAAI,CAAC;EAC5B,IAAID,KAAK,CAACE,MAAM,IAAIL,QAAQ,EAAE;IAC5BG,KAAK,GAAGA,KAAK,CAACG,KAAK,CAAC,CAAC,EAAEN,QAAQ,CAAC;IAChCG,KAAK,CAACI,IAAI,CAAC,OAAO,CAAC;;EAErB,OAAOJ,KAAK;EACTK,GAAG,CAAC,CAAAC,IAAI,KAAG;IACV,IAAIA,IAAI,CAACJ,MAAM,GAAGJ,QAAQ,EAAE;MAC1B,OAAO,GAAGQ,IAAI,CAACH,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAAC,OAAO;;IAE1C,OAAOQ,IAAI;EACb,CAAC,CAAC;EACDC,IAAI,CAAC,IAAI,CAAC;AACf,CAAC;AAED,SAASC,WAAWA,CAAC,EAAEC,MAAM,EAAEtB,GAAG,EAAEU,QAAQ,EAAEC,QAAQ,EAAoB;EACxE,OACEN,IAAA,CAACN,iBAAiB,IAACwB,QAAQ,EAAC,KAAK,EAACC,KAAK,EAAEvB,MAAO,EAAAwB,QAAA;IAC7CH,MAAM,GAAGb,SAAS,CAACT,GAAG,EAAEU,QAAQ,EAAEC,QAAQ,CAAC,GAAGX,GAAG;EACjC,CAAC;AAExB;AAEA,SAAS0B,iBAAiBA,CAAC,EAAEC,MAAM,EAAE3B,GAAG,EAA4B;EAClE,OACEO,KAAA,UAAAkB,QAAA;IACEpB,IAAA,SAAAoB,QAAA,EAAKvB,CAAC,CAAC,YAAY,CAAC,EAAK,CACzB;IAAAG,IAAA,CAACN,iBAAiB,IAACwB,QAAQ,EAAC,KAAK,EAACC,KAAK,EAAEvB,MAAO,EAAAwB,QAAA;MAC7CzB,GAAG;IACa,CACnB;IAAC2B,MAAM,IAAIA,MAAM,KAAK3B,GAAG,IACvBO,KAAA,UAAAkB,QAAA;MACEpB,IAAA,SAAAoB,QAAA,EAAKvB,CAAC,CAAC,cAAc,CAAC,EAAK,CAC3B;MAAAG,IAAA,CAACN,iBAAiB,IAACwB,QAAQ,EAAC,KAAK,EAACC,KAAK,EAAEvB,MAAO,EAAAwB,QAAA;QAC7CE,MAAM;MACU,CACrB;IAAK,CACN;EACE,CAAC;AAEV;AAEA,SAASC,cAAcA,CAAC,EACtB5B,GAAG,EACH2B,MAAM,EACNhB,QAAQ,GAAG,EAAE,EACbD,QAAQ,GAAG,CAAC,EACZY,MAAM,GAAG,KAAK,EACM;EACpB,OACEjB,IAAA,CAACF,YAAY,IACX0B,UAAU,EAAE3B,CAAC,CAAC,KAAK,CAAE,EACrB4B,SAAS,EAAEzB,IAAA,CAACqB,iBAAiB,IAACC,MAAM,EAAEA,MAAO,EAAC3B,GAAG,EAAEA,GAAI,GAAI,EAC3D+B,WAAW,EACT1B,IAAA,CAACgB,WAAW,IACVC,MAAM,EAAEA,MAAO,EACftB,GAAG,EAAEA,GAAI,EACTU,QAAQ,EAAEA,QAAS,EACnBC,QAAQ,EAAEA,QAAS,GAEtB,GACD;AAEN,CAAC,MAAAqB,QAAA;AAEcJ,cAAc,CAA7B,eAAAI,QAAA,CAA8B,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAnExB5B,SAAS,wFAAAwB,cAAA,CAAAI,QAAA,CAiBNhB,WAAW,0FAAAY,cAAA,CAAAI,QAAA,CAQXX,iBAAiB,gGAAAO,cAAA,CAAAI,QAAA,CAmBjBT,cAAc,6FAAAK,cAAA,CAAAI,QAAA,CAAAL,QAAA,8GAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}