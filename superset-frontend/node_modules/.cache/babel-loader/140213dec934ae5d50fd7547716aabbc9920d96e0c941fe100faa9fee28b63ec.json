{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { css, styled, t, useTheme } from '@superset-ui/core';\nimport { isCrossFilterScopeGlobal } from 'src/dashboard/types';\nimport { useSelector } from 'react-redux';\nimport { CHART_TYPE } from 'src/dashboard/util/componentTypes';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { FilterTitle } from 'src/dashboard/components/nativeFilters/FiltersConfigModal/FilterTitleContainer';\nimport { NEW_CHART_SCOPING_ID } from './constants';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst AddButtonContainer = styled.div`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit * 2}px;\n\n    & button > [role='img']:first-of-type {\n      margin-right: ${theme.gridUnit}px;\n      line-height: 0;\n    }\n\n    span[role='img'] {\n      padding-bottom: 1px;\n    }\n\n    .ant-btn > .anticon + span {\n      margin-left: 0;\n    }\n  `}\n`;\nconst ScopingTitle = ({ isActive, onClick, id, label, onRemove }) => {\n  const theme = useTheme();\n  return _jsxs(FilterTitle, { className: isActive ? 'active' : '', onClick: () => onClick(id), children: [\n    label,\n    _jsx(Icons.Trash, { iconColor: theme.colors.grayscale.light3, onClick: (event) => {\n        event.stopPropagation();\n        onRemove(id);\n      }, css: css`\n          margin-left: auto;\n        ` })] }\n  );\n};__signature__(ScopingTitle, \"useTheme{theme}\", () => [useTheme]);\nexport const ChartsScopingListPanel = ({ activeChartId, chartConfigs, setCurrentChartId, removeCustomScope, addNewCustomScope }) => {\n  const theme = useTheme();\n  const layout = useSelector((state) => state.dashboardLayout.present);\n  const customScopedCharts = useMemo(() => {\n    const chartLayoutItems = Object.values(layout).filter((item) => item.type === CHART_TYPE);\n    return Object.values(chartConfigs).\n    filter((config) => !isCrossFilterScopeGlobal(config.crossFilters.scope) &&\n    config.id !== NEW_CHART_SCOPING_ID).\n    map((config) => {\n      const chartLayoutItem = chartLayoutItems.find((item) => item.meta.chartId === config.id);\n      return {\n        id: config.id,\n        label: (chartLayoutItem == null ? void 0 : chartLayoutItem.meta.sliceNameOverride) || (\n        chartLayoutItem == null ? void 0 : chartLayoutItem.meta.sliceName) ||\n        ''\n      };\n    });\n  }, [chartConfigs, layout]);\n  const newScoping = chartConfigs[NEW_CHART_SCOPING_ID];\n  return _jsxs(_Fragment, { children: [\n    _jsx(AddButtonContainer, { children:\n      _jsxs(Button, { buttonStyle: \"link\", buttonSize: \"xsmall\", onClick: addNewCustomScope, children: [\n        _jsx(Icons.PlusSmall, {}), \" \", t('Add custom scoping')] }\n      ) }\n    ),\n    _jsx(FilterTitle, { role: \"button\", onClick: () => setCurrentChartId(undefined), className: activeChartId === undefined ? 'active' : '', children:\n      t('All charts/global scoping') }\n    ),\n    _jsx(\"div\", { css: css`\n          width: 100%;\n          height: 1px;\n          background-color: ${theme.colors.grayscale.light3};\n          margin: ${theme.gridUnit * 3}px 0;\n        ` }),\n    customScopedCharts.map((chartInfo) => _jsx(ScopingTitle, { id: chartInfo.id, onClick: setCurrentChartId, onRemove: removeCustomScope, isActive: activeChartId === chartInfo.id, label: chartInfo.label }, chartInfo.id)),\n    newScoping && _jsx(ScopingTitle, { id: newScoping.id, onClick: setCurrentChartId, onRemove: removeCustomScope, isActive: activeChartId === newScoping.id, label: `[${t('new custom scoping')}]` })] }\n  );\n};__signature__(ChartsScopingListPanel, \"useTheme{theme}\\nuseSelector{layout}\\nuseMemo{customScopedCharts}\", () => [useTheme, useSelector]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AddButtonContainer, \"AddButtonContainer\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/CrossFilters/ScopingModal/ChartsScopingListPanel.tsx\");reactHotLoader.register(ScopingTitle, \"ScopingTitle\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/CrossFilters/ScopingModal/ChartsScopingListPanel.tsx\");reactHotLoader.register(ChartsScopingListPanel, \"ChartsScopingListPanel\", \"/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/CrossFilters/ScopingModal/ChartsScopingListPanel.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useMemo","css","styled","t","useTheme","isCrossFilterScopeGlobal","useSelector","CHART_TYPE","Icons","Button","FilterTitle","NEW_CHART_SCOPING_ID","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddButtonContainer","div","theme","gridUnit","ScopingTitle","isActive","onClick","id","label","onRemove","className","children","Trash","iconColor","colors","grayscale","light3","event","stopPropagation","__signature__","ChartsScopingListPanel","activeChartId","chartConfigs","setCurrentChartId","removeCustomScope","addNewCustomScope","layout","state","dashboardLayout","present","customScopedCharts","chartLayoutItems","Object","values","filter","item","type","config","crossFilters","scope","map","chartLayoutItem","find","meta","chartId","sliceNameOverride","sliceName","newScoping","buttonStyle","buttonSize","PlusSmall","role","undefined","chartInfo","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/dashboard/components/nativeFilters/FilterBar/CrossFilters/ScopingModal/ChartsScopingListPanel.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { ReactNode, useMemo } from 'react';\nimport { css, styled, t, useTheme } from '@superset-ui/core';\nimport {\n  ChartConfiguration,\n  DashboardLayout,\n  isCrossFilterScopeGlobal,\n  RootState,\n} from 'src/dashboard/types';\nimport { useSelector } from 'react-redux';\nimport { CHART_TYPE } from 'src/dashboard/util/componentTypes';\nimport Icons from 'src/components/Icons';\nimport Button from 'src/components/Button';\nimport { FilterTitle } from 'src/dashboard/components/nativeFilters/FiltersConfigModal/FilterTitleContainer';\nimport { NEW_CHART_SCOPING_ID } from './constants';\n\nconst AddButtonContainer = styled.div`\n  ${({ theme }) => css`\n    margin-top: ${theme.gridUnit * 2}px;\n\n    & button > [role='img']:first-of-type {\n      margin-right: ${theme.gridUnit}px;\n      line-height: 0;\n    }\n\n    span[role='img'] {\n      padding-bottom: 1px;\n    }\n\n    .ant-btn > .anticon + span {\n      margin-left: 0;\n    }\n  `}\n`;\n\nconst ScopingTitle = ({\n  isActive,\n  onClick,\n  id,\n  label,\n  onRemove,\n}: {\n  isActive: boolean;\n  onClick: (id: number) => void;\n  id: number;\n  label: ReactNode;\n  onRemove: (id: number) => void;\n}) => {\n  const theme = useTheme();\n  return (\n    <FilterTitle\n      className={isActive ? 'active' : ''}\n      onClick={() => onClick(id)}\n    >\n      {label}\n      <Icons.Trash\n        iconColor={theme.colors.grayscale.light3}\n        onClick={event => {\n          event.stopPropagation();\n          onRemove(id);\n        }}\n        css={css`\n          margin-left: auto;\n        `}\n      />\n    </FilterTitle>\n  );\n};\n\nexport interface ChartsScopingListPanelProps {\n  activeChartId: number | undefined;\n  chartConfigs: ChartConfiguration;\n  setCurrentChartId: (chartId: number | undefined) => void;\n  removeCustomScope: (chartId: number) => void;\n  addNewCustomScope: () => void;\n}\nexport const ChartsScopingListPanel = ({\n  activeChartId,\n  chartConfigs,\n  setCurrentChartId,\n  removeCustomScope,\n  addNewCustomScope,\n}: ChartsScopingListPanelProps) => {\n  const theme = useTheme();\n  const layout = useSelector<RootState, DashboardLayout>(\n    state => state.dashboardLayout.present,\n  );\n  const customScopedCharts = useMemo(() => {\n    const chartLayoutItems = Object.values(layout).filter(\n      item => item.type === CHART_TYPE,\n    );\n    return Object.values(chartConfigs)\n      .filter(\n        config =>\n          !isCrossFilterScopeGlobal(config.crossFilters.scope) &&\n          config.id !== NEW_CHART_SCOPING_ID,\n      )\n      .map(config => {\n        const chartLayoutItem = chartLayoutItems.find(\n          item => item.meta.chartId === config.id,\n        );\n        return {\n          id: config.id,\n          label:\n            chartLayoutItem?.meta.sliceNameOverride ||\n            chartLayoutItem?.meta.sliceName ||\n            '',\n        };\n      });\n  }, [chartConfigs, layout]);\n\n  const newScoping = chartConfigs[NEW_CHART_SCOPING_ID];\n  return (\n    <>\n      <AddButtonContainer>\n        <Button\n          buttonStyle=\"link\"\n          buttonSize=\"xsmall\"\n          onClick={addNewCustomScope}\n        >\n          <Icons.PlusSmall /> {t('Add custom scoping')}\n        </Button>\n      </AddButtonContainer>\n      <FilterTitle\n        role=\"button\"\n        onClick={() => setCurrentChartId(undefined)}\n        className={activeChartId === undefined ? 'active' : ''}\n      >\n        {t('All charts/global scoping')}\n      </FilterTitle>\n      <div\n        css={css`\n          width: 100%;\n          height: 1px;\n          background-color: ${theme.colors.grayscale.light3};\n          margin: ${theme.gridUnit * 3}px 0;\n        `}\n      />\n      {customScopedCharts.map(chartInfo => (\n        <ScopingTitle\n          key={chartInfo.id}\n          id={chartInfo.id}\n          onClick={setCurrentChartId}\n          onRemove={removeCustomScope}\n          isActive={activeChartId === chartInfo.id}\n          label={chartInfo.label}\n        />\n      ))}\n      {newScoping && (\n        <ScopingTitle\n          id={newScoping.id}\n          onClick={setCurrentChartId}\n          onRemove={removeCustomScope}\n          isActive={activeChartId === newScoping.id}\n          label={`[${t('new custom scoping')}]`}\n        />\n      )}\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}