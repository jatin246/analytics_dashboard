{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import { Tag as AntdTag } from 'antd';\nimport { styled, useCSSTextTruncation } from '@superset-ui/core';\nimport { Tooltip } from '../Tooltip';\nimport { CustomCloseIcon } from '../Tags/Tag';\nimport { SELECT_ALL_VALUE } from './utils';\nimport { NoElement } from './styles';import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nconst StyledTag = styled(AntdTag)`\n  & .ant-tag-close-icon {\n    display: inline-flex;\n    align-items: center;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  & .tag-content {\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n// TODO: use antd Tag props instead of any. Currently it's causing a typescript error\nconst Tag = (props) => {\n  const [tagRef, tagIsTruncated] = useCSSTextTruncation();\n  return _jsx(Tooltip, { title: tagIsTruncated ? props.children : null, children:\n    _jsx(StyledTag, { closeIcon: props != null && props.closable ? CustomCloseIcon : undefined, ...props, className: \"ant-select-selection-item\", children:\n      _jsx(\"span\", { className: \"tag-content\", ref: tagRef, children:\n        props.children }\n      ) }\n    ) }\n  );\n};\n/**\n * Custom tag renderer\n */__signature__(Tag, \"useCSSTextTruncation{[tagRef, tagIsTruncated]}\", () => [useCSSTextTruncation]);\nexport const customTagRender = (props) => {\n  const { label, value } = props;\n  const onPreventMouseDown = (event) => {\n    // if close icon is clicked, stop propagation to avoid opening the dropdown\n    const target = event.target;\n    if (target.tagName === 'svg' ||\n    target.tagName === 'path' ||\n    target.tagName === 'span' &&\n    target.className.includes('ant-tag-close-icon')) {\n      event.stopPropagation();\n    }\n  };\n  if (value !== SELECT_ALL_VALUE) {\n    return _jsx(Tag, { onMouseDown: onPreventMouseDown, ...props, children:\n      label }\n    );\n  }\n  return _jsx(NoElement, {});\n};;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledTag, \"StyledTag\", \"/app/superset-frontend/src/components/Select/CustomTag.tsx\");reactHotLoader.register(Tag, \"Tag\", \"/app/superset-frontend/src/components/Select/CustomTag.tsx\");reactHotLoader.register(customTagRender, \"customTagRender\", \"/app/superset-frontend/src/components/Select/CustomTag.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["Tag","AntdTag","styled","useCSSTextTruncation","Tooltip","CustomCloseIcon","SELECT_ALL_VALUE","NoElement","jsx","_jsx","StyledTag","theme","gridUnit","props","tagRef","tagIsTruncated","title","children","closeIcon","closable","undefined","className","ref","__signature__","customTagRender","label","value","onPreventMouseDown","event","target","tagName","includes","stopPropagation","onMouseDown","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/Select/CustomTag.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { MouseEvent } from 'react';\nimport { Tag as AntdTag } from 'antd';\nimport { styled, useCSSTextTruncation } from '@superset-ui/core';\nimport { Tooltip } from '../Tooltip';\nimport { CustomCloseIcon } from '../Tags/Tag';\nimport { CustomTagProps } from './types';\nimport { SELECT_ALL_VALUE } from './utils';\nimport { NoElement } from './styles';\n\nconst StyledTag = styled(AntdTag)`\n  & .ant-tag-close-icon {\n    display: inline-flex;\n    align-items: center;\n    margin-left: ${({ theme }) => theme.gridUnit}px;\n  }\n\n  & .tag-content {\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n\n// TODO: use antd Tag props instead of any. Currently it's causing a typescript error\nconst Tag = (props: any) => {\n  const [tagRef, tagIsTruncated] = useCSSTextTruncation<HTMLSpanElement>();\n  return (\n    <Tooltip title={tagIsTruncated ? props.children : null}>\n      <StyledTag\n        closeIcon={props?.closable ? CustomCloseIcon : undefined}\n        {...props}\n        className=\"ant-select-selection-item\"\n      >\n        <span className=\"tag-content\" ref={tagRef}>\n          {props.children}\n        </span>\n      </StyledTag>\n    </Tooltip>\n  );\n};\n\n/**\n * Custom tag renderer\n */\nexport const customTagRender = (props: CustomTagProps) => {\n  const { label, value } = props;\n\n  const onPreventMouseDown = (event: MouseEvent<HTMLElement>) => {\n    // if close icon is clicked, stop propagation to avoid opening the dropdown\n    const target = event.target as HTMLElement;\n    if (\n      target.tagName === 'svg' ||\n      target.tagName === 'path' ||\n      (target.tagName === 'span' &&\n        target.className.includes('ant-tag-close-icon'))\n    ) {\n      event.stopPropagation();\n    }\n  };\n\n  if (value !== SELECT_ALL_VALUE) {\n    return (\n      <Tag onMouseDown={onPreventMouseDown} {...(props as object)}>\n        {label}\n      </Tag>\n    );\n  }\n  return <NoElement />;\n};\n"],"mappings":"uSAmBA,SAASA,GAAG,IAAIC,OAAO,QAAQ,MAAM;AACrC,SAASC,MAAM,EAAEC,oBAAoB,QAAQ,mBAAmB;AAChE,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,eAAe,QAAQ,aAAa;AAE7C,SAASC,gBAAgB,QAAQ,SAAS;AAC1C,SAASC,SAAS,QAAQ,UAAU,CAAC,SAAAC,GAAA,IAAAC,IAAA;AAErC,MAAMC,SAAS,GAAGR,MAAM,CAACD,OAAO,CAAC;;;;mBAId,CAAC,EAAEU,KAAK,EAAE,KAAKA,KAAK,CAACC,QAAQ;;;;;;;CAO/C;AAED;AACA,MAAMZ,GAAG,GAAGA,CAACa,KAAU,KAAI;EACzB,MAAM,CAACC,MAAM,EAAEC,cAAc,CAAC,GAAGZ,oBAAoB,EAAmB;EACxE,OACEM,IAAA,CAACL,OAAO,IAACY,KAAK,EAAED,cAAc,GAAGF,KAAK,CAACI,QAAQ,GAAG,IAAK,EAAAA,QAAA;IACrDR,IAAA,CAACC,SAAS,IACRQ,SAAS,EAAEL,KAAK,YAALA,KAAK,CAAEM,QAAQ,GAAGd,eAAe,GAAGe,SAAU,KACrDP,KAAK,EACTQ,SAAS,EAAC,2BAA2B,EAAAJ,QAAA;MAErCR,IAAA,WAAMY,SAAS,EAAC,aAAa,EAACC,GAAG,EAAER,MAAO,EAAAG,QAAA;QACvCJ,KAAK,CAACI,QAAQ;MACX,CACR;IAAW,CACb;EAAS,CAAC;AAEd,CAAC;AAED;;GAAAM,aAAA,CAjBMvB,GAAG,2DAC0BG,oBAAoB;AAmBvD,OAAO,MAAMqB,eAAe,GAAGA,CAACX,KAAqB,KAAI;EACvD,MAAM,EAAEY,KAAK,EAAEC,KAAK,EAAE,GAAGb,KAAK;EAE9B,MAAMc,kBAAkB,GAAGA,CAACC,KAA8B,KAAI;IAC5D;IACA,MAAMC,MAAM,GAAGD,KAAK,CAACC,MAAqB;IAC1C,IACEA,MAAM,CAACC,OAAO,KAAK,KAAK;IACxBD,MAAM,CAACC,OAAO,KAAK,MAAM;IACxBD,MAAM,CAACC,OAAO,KAAK,MAAM;IACxBD,MAAM,CAACR,SAAS,CAACU,QAAQ,CAAC,oBAAoB,CAAE,EAClD;MACAH,KAAK,CAACI,eAAe,EAAE;;EAE3B,CAAC;EAED,IAAIN,KAAK,KAAKpB,gBAAgB,EAAE;IAC9B,OACEG,IAAA,CAACT,GAAG,IAACiC,WAAW,EAAEN,kBAAmB,KAAMd,KAAgB,EAAAI,QAAA;MACxDQ,KAAK;IACH,CAAC;;EAGV,OAAOhB,IAAA,CAACF,SAAS,KAAG;AACtB,CAAC,CAAC,mBAAA2B,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAhB,SAAA,MAAAc,cAAA,WAAAA,cAAA,CAAAG,QAAA,CA1DI3B,SAAS,6EAAAwB,cAAA,CAAAG,QAAA,CAcTrC,GAAG,uEAAAkC,cAAA,CAAAG,QAAA,CAoBIb,eAAe,2GAAAc,WAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAG,WAAA,GAAAlB,SAAA,CAAAkB,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}