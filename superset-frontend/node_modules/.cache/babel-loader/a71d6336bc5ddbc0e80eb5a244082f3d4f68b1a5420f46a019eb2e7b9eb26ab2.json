{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ArcLayer } from 'deck.gl/typed';\nimport { t } from '@superset-ui/core';\nimport { commonLayerProps } from '../common';\nimport { createCategoricalDeckGLComponent } from '../../factory';\nimport TooltipRow from '../../TooltipRow';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nfunction getPoints(data) {\n  const points = [];\n  data.forEach((d) => {\n    points.push(d.sourcePosition);\n    points.push(d.targetPosition);\n  });\n  return points;\n}\nfunction setTooltipContent(formData) {\n  return (o) => {var _o$object, _o$object$sourcePosit, _o$object2, _o$object2$sourcePosi, _o$object3, _o$object3$targetPosi, _o$object4, _o$object4$targetPosi, _o$object5;return _jsxs(\"div\", { className: \"deckgl-tooltip\", children: [\n      _jsx(TooltipRow, { label: t('Start (Longitude, Latitude): '), value: `${(_o$object = o.object) == null ? void 0 : (_o$object$sourcePosit = _o$object.sourcePosition) == null ? void 0 : _o$object$sourcePosit[0]}, ${(_o$object2 = o.object) == null ? void 0 : (_o$object2$sourcePosi = _o$object2.sourcePosition) == null ? void 0 : _o$object2$sourcePosi[1]}` }),\n      _jsx(TooltipRow, { label: t('End (Longitude, Latitude): '), value: `${(_o$object3 = o.object) == null ? void 0 : (_o$object3$targetPosi = _o$object3.targetPosition) == null ? void 0 : _o$object3$targetPosi[0]}, ${(_o$object4 = o.object) == null ? void 0 : (_o$object4$targetPosi = _o$object4.targetPosition) == null ? void 0 : _o$object4$targetPosi[1]}` }),\n      formData.dimension && _jsx(TooltipRow, { label: `${formData == null ? void 0 : formData.dimension}: `, value: `${(_o$object5 = o.object) == null ? void 0 : _o$object5.cat_color}` })] }\n    );};\n}\nexport function getLayer(fd, payload, onAddFilter, setTooltip) {\n  const data = payload.data.features;\n  const sc = fd.color_picker;\n  const tc = fd.target_color_picker;\n  return new ArcLayer({\n    data,\n    getSourceColor: (d) => d.sourceColor || d.color || [sc.r, sc.g, sc.b, 255 * sc.a],\n    getTargetColor: (d) => d.targetColor || d.color || [tc.r, tc.g, tc.b, 255 * tc.a],\n    id: `path-layer-${fd.slice_id}`,\n    strokeWidth: fd.stroke_width ? fd.stroke_width : 3,\n    ...commonLayerProps(fd, setTooltip, setTooltipContent(fd))\n  });\n}const _default =\ncreateCategoricalDeckGLComponent(getLayer, getPoints);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(getPoints, \"getPoints\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");reactHotLoader.register(setTooltipContent, \"setTooltipContent\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");reactHotLoader.register(getLayer, \"getLayer\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["ArcLayer","t","commonLayerProps","createCategoricalDeckGLComponent","TooltipRow","jsx","_jsx","jsxs","_jsxs","getPoints","data","points","forEach","d","push","sourcePosition","targetPosition","setTooltipContent","formData","o","_o$object","_o$object$sourcePosit","_o$object2","_o$object2$sourcePosi","_o$object3","_o$object3$targetPosi","_o$object4","_o$object4$targetPosi","_o$object5","className","children","label","value","object","dimension","cat_color","getLayer","fd","payload","onAddFilter","setTooltip","features","sc","color_picker","tc","target_color_picker","getSourceColor","sourceColor","color","r","g","b","a","getTargetColor","targetColor","id","slice_id","strokeWidth","stroke_width","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/plugins/legacy-preset-chart-deckgl/src/layers/Arc/Arc.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ArcLayer } from 'deck.gl/typed';\nimport {\n  HandlerFunction,\n  JsonObject,\n  QueryFormData,\n  t,\n} from '@superset-ui/core';\nimport { commonLayerProps } from '../common';\nimport { createCategoricalDeckGLComponent } from '../../factory';\nimport TooltipRow from '../../TooltipRow';\nimport { TooltipProps } from '../../components/Tooltip';\nimport { Point } from '../../types';\n\nfunction getPoints(data: JsonObject[]) {\n  const points: Point[] = [];\n  data.forEach(d => {\n    points.push(d.sourcePosition);\n    points.push(d.targetPosition);\n  });\n\n  return points;\n}\n\nfunction setTooltipContent(formData: QueryFormData) {\n  return (o: JsonObject) => (\n    <div className=\"deckgl-tooltip\">\n      <TooltipRow\n        label={t('Start (Longitude, Latitude): ')}\n        value={`${o.object?.sourcePosition?.[0]}, ${o.object?.sourcePosition?.[1]}`}\n      />\n      <TooltipRow\n        label={t('End (Longitude, Latitude): ')}\n        value={`${o.object?.targetPosition?.[0]}, ${o.object?.targetPosition?.[1]}`}\n      />\n      {formData.dimension && (\n        <TooltipRow\n          label={`${formData?.dimension}: `}\n          value={`${o.object?.cat_color}`}\n        />\n      )}\n    </div>\n  );\n}\n\nexport function getLayer(\n  fd: QueryFormData,\n  payload: JsonObject,\n  onAddFilter: HandlerFunction,\n  setTooltip: (tooltip: TooltipProps['tooltip']) => void,\n) {\n  const data = payload.data.features;\n  const sc = fd.color_picker;\n  const tc = fd.target_color_picker;\n\n  return new ArcLayer({\n    data,\n    getSourceColor: d =>\n      d.sourceColor || d.color || [sc.r, sc.g, sc.b, 255 * sc.a],\n    getTargetColor: d =>\n      d.targetColor || d.color || [tc.r, tc.g, tc.b, 255 * tc.a],\n    id: `path-layer-${fd.slice_id}` as const,\n    strokeWidth: fd.stroke_width ? fd.stroke_width : 3,\n    ...commonLayerProps(fd, setTooltip, setTooltipContent(fd)),\n  });\n}\n\nexport default createCategoricalDeckGLComponent(getLayer, getPoints);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}