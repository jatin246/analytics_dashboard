{"ast":null,"code":"import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Menu } from 'src/components/Menu';\nimport { Behavior, FAST_DEBOUNCE, css, ensureIsArray, getChartMetadataRegistry, getExtensionsRegistry, logging, t, useTheme } from '@superset-ui/core';\nimport rison from 'rison';\n\nimport { FixedSizeList as List } from 'react-window';\nimport Icons from 'src/components/Icons';\nimport { Input } from 'src/components/Input';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport Loading from 'src/components/Loading';\nimport { cachedSupersetGet, supersetGetCache } from 'src/utils/cachedSupersetGet';\nimport { useVerboseMap } from 'src/hooks/apiResources/datasets';\nimport { MenuItemTooltip } from '../DisabledMenuItemTooltip';\nimport DrillByModal from './DrillByModal';\nimport { getSubmenuYOffset } from '../utils';\nimport { MenuItemWithTruncation } from '../MenuItemWithTruncation';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst SUBMENU_HEIGHT = 200;\nconst SHOW_COLUMNS_SEARCH_THRESHOLD = 10;\nconst SEARCH_INPUT_HEIGHT = 48;\nconst loadDrillByOptions = getExtensionsRegistry().get('load.drillby.options');\nconst queryString = rison.encode({\n  columns: [\n  'table_name',\n  'owners.first_name',\n  'owners.last_name',\n  'created_by.first_name',\n  'created_by.last_name',\n  'created_on_humanized',\n  'changed_by.first_name',\n  'changed_by.last_name',\n  'changed_on_humanized',\n  'columns.column_name',\n  'columns.verbose_name',\n  'columns.groupby']\n\n});\nexport const DrillByMenuItems = ({ drillByConfig, formData, contextMenuY = 0, submenuIndex = 0, onSelection = () => {}, onClick = () => {}, excludedColumns, openNewModal = true, canDownload, open, ...rest }) => {\n  const theme = useTheme();\n  const { addDangerToast } = useToasts();\n  const [isLoadingColumns, setIsLoadingColumns] = useState(true);\n  const [searchInput, setSearchInput] = useState('');\n  const [dataset, setDataset] = useState();\n  const [columns, setColumns] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [currentColumn, setCurrentColumn] = useState();\n  const ref = useRef(null);\n  const showSearch = loadDrillByOptions || columns.length > SHOW_COLUMNS_SEARCH_THRESHOLD;\n  const handleSelection = useCallback((event, column) => {\n    onClick(event);\n    onSelection(column, drillByConfig);\n    setCurrentColumn(column);\n    if (openNewModal) {\n      setShowModal(true);\n    }\n  }, [drillByConfig, onClick, onSelection, openNewModal]);\n  const closeModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n  useEffect(() => {\n    if (open) {var _ref$current;\n      (_ref$current = ref.current) == null ? void 0 : _ref$current.input.focus();\n    } else\n    {var _ref$current2;\n      // Reset search input when menu is closed\n      (_ref$current2 = ref.current) == null ? void 0 : _ref$current2.setValue('');\n      setSearchInput('');\n    }\n  }, [open]);\n  const hasDrillBy = drillByConfig == null ? void 0 : drillByConfig.groupbyFieldName;\n  const handlesDimensionContextMenu = useMemo(() => {var _getChartMetadataRegi;return (_getChartMetadataRegi = getChartMetadataRegistry().\n    get(formData.viz_type)) == null ? void 0 : _getChartMetadataRegi.\n    behaviors.find((behavior) => behavior === Behavior.DrillBy);}, [formData.viz_type]);\n  const verboseMap = useVerboseMap(dataset);\n  useEffect(() => {\n    async function loadOptions() {\n      const datasetId = Number(formData.datasource.split('__')[0]);\n      try {\n        setIsLoadingColumns(true);\n        let response;\n        if (loadDrillByOptions) {\n          response = await loadDrillByOptions(datasetId, formData);\n        } else\n        {\n          response = await cachedSupersetGet({\n            endpoint: `/api/v1/dataset/${datasetId}?q=${queryString}`\n          });\n        }\n        const { json } = response;\n        const { result } = json;\n        setDataset(result);\n        setColumns(ensureIsArray(result.columns).\n        filter((column) => column.groupby).\n        filter((column) => {var _drillByConfig$groupb, _ensureIsArray;return !ensureIsArray(formData[(_drillByConfig$groupb = drillByConfig == null ? void 0 : drillByConfig.groupbyFieldName) != null ? _drillByConfig$groupb : '']).includes(column.column_name) &&\n          column.column_name !== formData.x_axis && ((_ensureIsArray =\n          ensureIsArray(excludedColumns)) == null ? void 0 : _ensureIsArray.every((excludedCol) => excludedCol.column_name !== column.column_name));}));\n      }\n      catch (error) {\n        logging.error(error);\n        supersetGetCache.delete(`/api/v1/dataset/${datasetId}`);\n        addDangerToast(t('Failed to load dimensions for drill by'));\n      } finally\n      {\n        setIsLoadingColumns(false);\n      }\n    }\n    if (handlesDimensionContextMenu && hasDrillBy) {\n      loadOptions();\n    }\n  }, [\n  addDangerToast,\n  drillByConfig == null ? void 0 : drillByConfig.groupbyFieldName,\n  excludedColumns,\n  formData,\n  handlesDimensionContextMenu,\n  hasDrillBy]\n  );\n  const handleInput = _debounce((value) => setSearchInput(value), FAST_DEBOUNCE);\n  const filteredColumns = useMemo(() => columns.filter((column) => (column.verbose_name || column.column_name).\n  toLowerCase().\n  includes(searchInput.toLowerCase())), [columns, searchInput]);\n  const submenuYOffset = useMemo(() => getSubmenuYOffset(contextMenuY, filteredColumns.length || 1, submenuIndex, SUBMENU_HEIGHT, showSearch ? SEARCH_INPUT_HEIGHT : 0), [contextMenuY, filteredColumns.length, submenuIndex, showSearch]);\n  let tooltip;\n  if (!handlesDimensionContextMenu) {\n    tooltip = t('Drill by is not yet supported for this chart type');\n  } else\n  if (!hasDrillBy) {\n    tooltip = t('Drill by is not available for this data point');\n  }\n  if (!handlesDimensionContextMenu || !hasDrillBy) {\n    return _jsx(Menu.Item, { disabled: true, ...rest, children:\n      _jsxs(\"div\", { children: [\n        t('Drill by'),\n        _jsx(MenuItemTooltip, { title: tooltip })] }\n      ) }, \"drill-by-disabled\"\n    );\n  }\n  const Row = ({ index, data, style }) => {\n    const { columns, ...rest } = data;\n    const column = columns[index];\n    return _jsx(MenuItemWithTruncation, { tooltipText: column.verbose_name || column.column_name, ...rest, onClick: (e) => handleSelection(e, column), style: style, children:\n      column.verbose_name || column.column_name }, `drill-by-item-${column.column_name}`\n    );\n  };\n  return _jsxs(_Fragment, { children: [\n    _jsx(Menu.SubMenu, { title: t('Drill by'), popupClassName: \"chart-context-submenu\", popupOffset: [0, submenuYOffset], ...rest, children:\n      _jsxs(\"div\", { \"data-test\": \"drill-by-submenu\", children: [\n        showSearch && _jsx(Input, { ref: ref, prefix: _jsx(Icons.Search, { iconSize: \"l\", iconColor: theme.colors.grayscale.light1 }), onChange: (e) => {\n            e.stopPropagation();\n            handleInput(e.target.value);\n          }, placeholder: t('Search columns'), onClick: (e) => {\n            // prevent closing menu when clicking on input\n            e.nativeEvent.stopImmediatePropagation();\n          }, allowClear: true, css: css`\n                width: auto;\n                max-width: 100%;\n                margin: ${theme.gridUnit * 2}px ${theme.gridUnit * 3}px;\n                box-shadow: none;\n              ` }),\n        isLoadingColumns ? _jsx(\"div\", { css: css`\n                padding: ${theme.gridUnit * 3}px 0;\n              `, children:\n          _jsx(Loading, { position: \"inline-centered\" }) }\n        ) : filteredColumns.length ? _jsx(List, { width: \"100%\", height: SUBMENU_HEIGHT, itemSize: 35, itemCount: filteredColumns.length, itemData: { columns: filteredColumns, ...rest }, overscanCount: 20, children:\n          Row }\n        ) : _jsx(Menu.Item, { disabled: true, ...rest, children:\n          t('No columns found') }, \"no-drill-by-columns-found\"\n        )] }\n      ) }\n    ),\n    showModal && _jsx(DrillByModal, { column: currentColumn, drillByConfig: drillByConfig, formData: formData, onHideModal: closeModal, dataset: { ...dataset, verbose_map: verboseMap }, canDownload: canDownload })] }\n  );\n};__signature__(DrillByMenuItems, \"useTheme{theme}\\nuseToasts{{ addDangerToast }}\\nuseState{[isLoadingColumns, setIsLoadingColumns](true)}\\nuseState{[searchInput, setSearchInput]('')}\\nuseState{[dataset, setDataset]}\\nuseState{[columns, setColumns]([])}\\nuseState{[showModal, setShowModal](false)}\\nuseState{[currentColumn, setCurrentColumn]}\\nuseRef{ref}\\nuseCallback{handleSelection}\\nuseCallback{closeModal}\\nuseEffect{}\\nuseMemo{handlesDimensionContextMenu}\\nuseVerboseMap{verboseMap}\\nuseEffect{}\\nuseMemo{filteredColumns}\\nuseMemo{submenuYOffset}\", () => [useTheme, useToasts, useVerboseMap]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(SUBMENU_HEIGHT, \"SUBMENU_HEIGHT\", \"/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx\");reactHotLoader.register(SHOW_COLUMNS_SEARCH_THRESHOLD, \"SHOW_COLUMNS_SEARCH_THRESHOLD\", \"/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx\");reactHotLoader.register(SEARCH_INPUT_HEIGHT, \"SEARCH_INPUT_HEIGHT\", \"/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx\");reactHotLoader.register(loadDrillByOptions, \"loadDrillByOptions\", \"/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx\");reactHotLoader.register(queryString, \"queryString\", \"/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx\");reactHotLoader.register(DrillByMenuItems, \"DrillByMenuItems\", \"/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useCallback","useEffect","useMemo","useRef","useState","Menu","Behavior","FAST_DEBOUNCE","css","ensureIsArray","getChartMetadataRegistry","getExtensionsRegistry","logging","t","useTheme","rison","FixedSizeList","List","Icons","Input","useToasts","Loading","cachedSupersetGet","supersetGetCache","useVerboseMap","MenuItemTooltip","DrillByModal","getSubmenuYOffset","MenuItemWithTruncation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SUBMENU_HEIGHT","SHOW_COLUMNS_SEARCH_THRESHOLD","SEARCH_INPUT_HEIGHT","loadDrillByOptions","get","queryString","encode","columns","DrillByMenuItems","drillByConfig","formData","contextMenuY","submenuIndex","onSelection","onClick","excludedColumns","openNewModal","canDownload","open","rest","theme","addDangerToast","isLoadingColumns","setIsLoadingColumns","searchInput","setSearchInput","dataset","setDataset","setColumns","showModal","setShowModal","currentColumn","setCurrentColumn","ref","showSearch","length","handleSelection","event","column","closeModal","_ref$current","current","input","focus","_ref$current2","setValue","hasDrillBy","groupbyFieldName","handlesDimensionContextMenu","_getChartMetadataRegi","viz_type","behaviors","find","behavior","DrillBy","verboseMap","loadOptions","datasetId","Number","datasource","split","response","endpoint","json","result","filter","groupby","_drillByConfig$groupb","_ensureIsArray","includes","column_name","x_axis","every","excludedCol","error","delete","handleInput","_debounce","value","filteredColumns","verbose_name","toLowerCase","submenuYOffset","tooltip","Item","disabled","children","title","Row","index","data","style","tooltipText","e","SubMenu","popupClassName","popupOffset","prefix","Search","iconSize","iconColor","colors","grayscale","light1","onChange","stopPropagation","target","placeholder","nativeEvent","stopImmediatePropagation","allowClear","gridUnit","position","width","height","itemSize","itemCount","itemData","overscanCount","onHideModal","verbose_map","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/Chart/DrillBy/DrillByMenuItems.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport {\n  CSSProperties,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { Menu } from 'src/components/Menu';\nimport {\n  BaseFormData,\n  Behavior,\n  Column,\n  ContextMenuFilters,\n  FAST_DEBOUNCE,\n  JsonResponse,\n  css,\n  ensureIsArray,\n  getChartMetadataRegistry,\n  getExtensionsRegistry,\n  logging,\n  t,\n  useTheme,\n} from '@superset-ui/core';\nimport rison from 'rison';\nimport { debounce } from 'lodash';\nimport { FixedSizeList as List } from 'react-window';\nimport { AntdInput } from 'src/components';\nimport Icons from 'src/components/Icons';\nimport { Input } from 'src/components/Input';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport Loading from 'src/components/Loading';\nimport {\n  cachedSupersetGet,\n  supersetGetCache,\n} from 'src/utils/cachedSupersetGet';\nimport { useVerboseMap } from 'src/hooks/apiResources/datasets';\nimport { MenuItemTooltip } from '../DisabledMenuItemTooltip';\nimport DrillByModal from './DrillByModal';\nimport { getSubmenuYOffset } from '../utils';\nimport { MenuItemWithTruncation } from '../MenuItemWithTruncation';\nimport { Dataset } from '../types';\n\nconst SUBMENU_HEIGHT = 200;\nconst SHOW_COLUMNS_SEARCH_THRESHOLD = 10;\nconst SEARCH_INPUT_HEIGHT = 48;\n\nexport interface DrillByMenuItemsProps {\n  drillByConfig?: ContextMenuFilters['drillBy'];\n  formData: BaseFormData & { [key: string]: any };\n  contextMenuY?: number;\n  submenuIndex?: number;\n  onSelection?: (...args: any) => void;\n  onClick?: (event: MouseEvent) => void;\n  openNewModal?: boolean;\n  excludedColumns?: Column[];\n  canDownload: boolean;\n  open: boolean;\n}\n\nconst loadDrillByOptions = getExtensionsRegistry().get('load.drillby.options');\n\nconst queryString = rison.encode({\n  columns: [\n    'table_name',\n    'owners.first_name',\n    'owners.last_name',\n    'created_by.first_name',\n    'created_by.last_name',\n    'created_on_humanized',\n    'changed_by.first_name',\n    'changed_by.last_name',\n    'changed_on_humanized',\n    'columns.column_name',\n    'columns.verbose_name',\n    'columns.groupby',\n  ],\n});\n\nexport const DrillByMenuItems = ({\n  drillByConfig,\n  formData,\n  contextMenuY = 0,\n  submenuIndex = 0,\n  onSelection = () => {},\n  onClick = () => {},\n  excludedColumns,\n  openNewModal = true,\n  canDownload,\n  open,\n  ...rest\n}: DrillByMenuItemsProps) => {\n  const theme = useTheme();\n  const { addDangerToast } = useToasts();\n  const [isLoadingColumns, setIsLoadingColumns] = useState(true);\n  const [searchInput, setSearchInput] = useState('');\n  const [dataset, setDataset] = useState<Dataset>();\n  const [columns, setColumns] = useState<Column[]>([]);\n  const [showModal, setShowModal] = useState(false);\n  const [currentColumn, setCurrentColumn] = useState();\n  const ref = useRef<AntdInput>(null);\n  const showSearch =\n    loadDrillByOptions || columns.length > SHOW_COLUMNS_SEARCH_THRESHOLD;\n  const handleSelection = useCallback(\n    (event, column) => {\n      onClick(event);\n      onSelection(column, drillByConfig);\n      setCurrentColumn(column);\n      if (openNewModal) {\n        setShowModal(true);\n      }\n    },\n    [drillByConfig, onClick, onSelection, openNewModal],\n  );\n  const closeModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n\n  useEffect(() => {\n    if (open) {\n      ref.current?.input.focus();\n    } else {\n      // Reset search input when menu is closed\n      ref.current?.setValue('');\n      setSearchInput('');\n    }\n  }, [open]);\n\n  const hasDrillBy = drillByConfig?.groupbyFieldName;\n\n  const handlesDimensionContextMenu = useMemo(\n    () =>\n      getChartMetadataRegistry()\n        .get(formData.viz_type)\n        ?.behaviors.find(behavior => behavior === Behavior.DrillBy),\n    [formData.viz_type],\n  );\n  const verboseMap = useVerboseMap(dataset);\n\n  useEffect(() => {\n    async function loadOptions() {\n      const datasetId = Number(formData.datasource.split('__')[0]);\n      try {\n        setIsLoadingColumns(true);\n        let response: JsonResponse;\n        if (loadDrillByOptions) {\n          response = await loadDrillByOptions(datasetId, formData);\n        } else {\n          response = await cachedSupersetGet({\n            endpoint: `/api/v1/dataset/${datasetId}?q=${queryString}`,\n          });\n        }\n        const { json } = response;\n        const { result } = json;\n        setDataset(result);\n        setColumns(\n          ensureIsArray(result.columns)\n            .filter(column => column.groupby)\n            .filter(\n              column =>\n                !ensureIsArray(\n                  formData[drillByConfig?.groupbyFieldName ?? ''],\n                ).includes(column.column_name) &&\n                column.column_name !== formData.x_axis &&\n                ensureIsArray(excludedColumns)?.every(\n                  excludedCol => excludedCol.column_name !== column.column_name,\n                ),\n            ),\n        );\n      } catch (error) {\n        logging.error(error);\n        supersetGetCache.delete(`/api/v1/dataset/${datasetId}`);\n        addDangerToast(t('Failed to load dimensions for drill by'));\n      } finally {\n        setIsLoadingColumns(false);\n      }\n    }\n    if (handlesDimensionContextMenu && hasDrillBy) {\n      loadOptions();\n    }\n  }, [\n    addDangerToast,\n    drillByConfig?.groupbyFieldName,\n    excludedColumns,\n    formData,\n    handlesDimensionContextMenu,\n    hasDrillBy,\n  ]);\n\n  const handleInput = debounce(\n    (value: string) => setSearchInput(value),\n    FAST_DEBOUNCE,\n  );\n\n  const filteredColumns = useMemo(\n    () =>\n      columns.filter(column =>\n        (column.verbose_name || column.column_name)\n          .toLowerCase()\n          .includes(searchInput.toLowerCase()),\n      ),\n    [columns, searchInput],\n  );\n\n  const submenuYOffset = useMemo(\n    () =>\n      getSubmenuYOffset(\n        contextMenuY,\n        filteredColumns.length || 1,\n        submenuIndex,\n        SUBMENU_HEIGHT,\n        showSearch ? SEARCH_INPUT_HEIGHT : 0,\n      ),\n    [contextMenuY, filteredColumns.length, submenuIndex, showSearch],\n  );\n\n  let tooltip: ReactNode;\n\n  if (!handlesDimensionContextMenu) {\n    tooltip = t('Drill by is not yet supported for this chart type');\n  } else if (!hasDrillBy) {\n    tooltip = t('Drill by is not available for this data point');\n  }\n\n  if (!handlesDimensionContextMenu || !hasDrillBy) {\n    return (\n      <Menu.Item key=\"drill-by-disabled\" disabled {...rest}>\n        <div>\n          {t('Drill by')}\n          <MenuItemTooltip title={tooltip} />\n        </div>\n      </Menu.Item>\n    );\n  }\n\n  const Row = ({\n    index,\n    data,\n    style,\n  }: {\n    index: number;\n    data: { columns: Column[] };\n    style: CSSProperties;\n  }) => {\n    const { columns, ...rest } = data;\n    const column = columns[index];\n    return (\n      <MenuItemWithTruncation\n        key={`drill-by-item-${column.column_name}`}\n        tooltipText={column.verbose_name || column.column_name}\n        {...rest}\n        onClick={e => handleSelection(e, column)}\n        style={style}\n      >\n        {column.verbose_name || column.column_name}\n      </MenuItemWithTruncation>\n    );\n  };\n\n  return (\n    <>\n      <Menu.SubMenu\n        title={t('Drill by')}\n        popupClassName=\"chart-context-submenu\"\n        popupOffset={[0, submenuYOffset]}\n        {...rest}\n      >\n        <div data-test=\"drill-by-submenu\">\n          {showSearch && (\n            <Input\n              ref={ref}\n              prefix={\n                <Icons.Search\n                  iconSize=\"l\"\n                  iconColor={theme.colors.grayscale.light1}\n                />\n              }\n              onChange={e => {\n                e.stopPropagation();\n                handleInput(e.target.value);\n              }}\n              placeholder={t('Search columns')}\n              onClick={e => {\n                // prevent closing menu when clicking on input\n                e.nativeEvent.stopImmediatePropagation();\n              }}\n              allowClear\n              css={css`\n                width: auto;\n                max-width: 100%;\n                margin: ${theme.gridUnit * 2}px ${theme.gridUnit * 3}px;\n                box-shadow: none;\n              `}\n            />\n          )}\n          {isLoadingColumns ? (\n            <div\n              css={css`\n                padding: ${theme.gridUnit * 3}px 0;\n              `}\n            >\n              <Loading position=\"inline-centered\" />\n            </div>\n          ) : filteredColumns.length ? (\n            <List\n              width=\"100%\"\n              height={SUBMENU_HEIGHT}\n              itemSize={35}\n              itemCount={filteredColumns.length}\n              itemData={{ columns: filteredColumns, ...rest }}\n              overscanCount={20}\n            >\n              {Row}\n            </List>\n          ) : (\n            <Menu.Item disabled key=\"no-drill-by-columns-found\" {...rest}>\n              {t('No columns found')}\n            </Menu.Item>\n          )}\n        </div>\n      </Menu.SubMenu>\n      {showModal && (\n        <DrillByModal\n          column={currentColumn}\n          drillByConfig={drillByConfig}\n          formData={formData}\n          onHideModal={closeModal}\n          dataset={{ ...dataset!, verbose_map: verboseMap }}\n          canDownload={canDownload}\n        />\n      )}\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}