{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { css, ensureIsArray, getCurrencySymbol, styled, t } from '@superset-ui/core';\nimport { Select } from 'src/components';\nimport ControlHeader from '../../ControlHeader';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nconst CurrencyControlContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n\n    & > :first-child {\n      margin-right: ${theme.gridUnit * 4}px;\n      min-width: 0;\n      flex: 1;\n    }\n\n    & > :nth-child(2) {\n      min-width: 0;\n      flex: 1;\n    }\n  `}\n`;\nexport const CURRENCY_SYMBOL_POSITION_OPTIONS = [\n{ value: 'prefix', label: t('Prefix') },\n{ value: 'suffix', label: t('Suffix') }];\n\nexport const CurrencyControl = ({ onChange, value: currency = {}, symbolSelectOverrideProps = {}, currencySelectOverrideProps = {}, symbolSelectAdditionalStyles, currencySelectAdditionalStyles, ...props }) => {\n  const currencies = useSelector((state) => {var _state$common;return (_state$common = state.common) == null ? void 0 : _state$common.currencies;});\n  const currenciesOptions = useMemo(() => ensureIsArray(currencies).map((currencyCode) => ({\n    value: currencyCode,\n    label: `${getCurrencySymbol({\n      symbol: currencyCode\n    })} (${currencyCode})`\n  })), [currencies]);\n  return _jsxs(_Fragment, { children: [\n    _jsx(ControlHeader, { ...props }),\n    _jsxs(CurrencyControlContainer, { css: css`\n          & > :first-child {\n            ${symbolSelectAdditionalStyles};\n          }\n          & > :nth-child(2) {\n            ${currencySelectAdditionalStyles};\n          }\n        `, className: \"currency-control-container\", children: [\n      _jsx(Select, { ariaLabel: t('Currency prefix or suffix'), options: CURRENCY_SYMBOL_POSITION_OPTIONS, placeholder: t('Prefix or suffix'), onChange: (symbolPosition) => {\n          onChange({ ...currency, symbolPosition });\n        }, onClear: () => onChange({ ...currency, symbolPosition: undefined }), value: currency == null ? void 0 : currency.symbolPosition, allowClear: true, ...symbolSelectOverrideProps }),\n      _jsx(Select, { ariaLabel: t('Currency symbol'), options: currenciesOptions, placeholder: t('Currency'), onChange: (symbol) => {\n          onChange({ ...currency, symbol });\n        }, onClear: () => onChange({ ...currency, symbol: undefined }), value: currency == null ? void 0 : currency.symbol, allowClear: true, allowNewOptions: true, ...currencySelectOverrideProps })] }\n    )] }\n  );\n};__signature__(CurrencyControl, \"useSelector{currencies}\\nuseMemo{currenciesOptions}\", () => [useSelector]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(CurrencyControlContainer, \"CurrencyControlContainer\", \"/app/superset-frontend/src/explore/components/controls/CurrencyControl/CurrencyControl.tsx\");reactHotLoader.register(CURRENCY_SYMBOL_POSITION_OPTIONS, \"CURRENCY_SYMBOL_POSITION_OPTIONS\", \"/app/superset-frontend/src/explore/components/controls/CurrencyControl/CurrencyControl.tsx\");reactHotLoader.register(CurrencyControl, \"CurrencyControl\", \"/app/superset-frontend/src/explore/components/controls/CurrencyControl/CurrencyControl.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useMemo","useSelector","css","ensureIsArray","getCurrencySymbol","styled","t","Select","ControlHeader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CurrencyControlContainer","div","theme","gridUnit","CURRENCY_SYMBOL_POSITION_OPTIONS","value","label","CurrencyControl","onChange","currency","symbolSelectOverrideProps","currencySelectOverrideProps","symbolSelectAdditionalStyles","currencySelectAdditionalStyles","props","currencies","state","_state$common","common","currenciesOptions","map","currencyCode","symbol","children","className","ariaLabel","options","placeholder","symbolPosition","onClear","undefined","allowClear","allowNewOptions","__signature__","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/explore/components/controls/CurrencyControl/CurrencyControl.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  css,\n  Currency,\n  ensureIsArray,\n  getCurrencySymbol,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport { CSSObject } from '@emotion/react';\nimport { Select } from 'src/components';\nimport { ViewState } from 'src/views/types';\nimport { SelectProps } from 'src/components/Select/types';\nimport ControlHeader from '../../ControlHeader';\n\nexport interface CurrencyControlProps {\n  onChange: (currency: Partial<Currency>) => void;\n  value?: Partial<Currency>;\n  symbolSelectOverrideProps?: Partial<SelectProps>;\n  currencySelectOverrideProps?: Partial<SelectProps>;\n  symbolSelectAdditionalStyles?: CSSObject;\n  currencySelectAdditionalStyles?: CSSObject;\n}\n\nconst CurrencyControlContainer = styled.div`\n  ${({ theme }) => css`\n    display: flex;\n    align-items: center;\n\n    & > :first-child {\n      margin-right: ${theme.gridUnit * 4}px;\n      min-width: 0;\n      flex: 1;\n    }\n\n    & > :nth-child(2) {\n      min-width: 0;\n      flex: 1;\n    }\n  `}\n`;\n\nexport const CURRENCY_SYMBOL_POSITION_OPTIONS = [\n  { value: 'prefix', label: t('Prefix') },\n  { value: 'suffix', label: t('Suffix') },\n];\n\nexport const CurrencyControl = ({\n  onChange,\n  value: currency = {},\n  symbolSelectOverrideProps = {},\n  currencySelectOverrideProps = {},\n  symbolSelectAdditionalStyles,\n  currencySelectAdditionalStyles,\n  ...props\n}: CurrencyControlProps) => {\n  const currencies = useSelector<ViewState, string[]>(\n    state => state.common?.currencies,\n  );\n  const currenciesOptions = useMemo(\n    () =>\n      ensureIsArray(currencies).map(currencyCode => ({\n        value: currencyCode,\n        label: `${getCurrencySymbol({\n          symbol: currencyCode,\n        })} (${currencyCode})`,\n      })),\n    [currencies],\n  );\n  return (\n    <>\n      <ControlHeader {...props} />\n      <CurrencyControlContainer\n        css={css`\n          & > :first-child {\n            ${symbolSelectAdditionalStyles};\n          }\n          & > :nth-child(2) {\n            ${currencySelectAdditionalStyles};\n          }\n        `}\n        className=\"currency-control-container\"\n      >\n        <Select\n          ariaLabel={t('Currency prefix or suffix')}\n          options={CURRENCY_SYMBOL_POSITION_OPTIONS}\n          placeholder={t('Prefix or suffix')}\n          onChange={(symbolPosition: string) => {\n            onChange({ ...currency, symbolPosition });\n          }}\n          onClear={() => onChange({ ...currency, symbolPosition: undefined })}\n          value={currency?.symbolPosition}\n          allowClear\n          {...symbolSelectOverrideProps}\n        />\n        <Select\n          ariaLabel={t('Currency symbol')}\n          options={currenciesOptions}\n          placeholder={t('Currency')}\n          onChange={(symbol: string) => {\n            onChange({ ...currency, symbol });\n          }}\n          onClear={() => onChange({ ...currency, symbol: undefined })}\n          value={currency?.symbol}\n          allowClear\n          allowNewOptions\n          {...currencySelectOverrideProps}\n        />\n      </CurrencyControlContainer>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}