{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();function _EMOTION_STRINGIFIED_CSS_ERROR__() {return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";}var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo, useState, useCallback, useEffect } from 'react';\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport rison from 'rison';\nimport { t, SupersetClient, styled, isFeatureEnabled, FeatureFlag, getClientErrorObject, ensureIsArray } from '@superset-ui/core';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst FormItem = AntdForm.Item;\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;var _ref = process.env.NODE_ENV === \"production\" ? { name: \"1blj7km\", styles: \"margin-top:1em\" } : { name: \"1gtq0eh-PropertiesModal\", styles: \"margin-top:1em;label:PropertiesModal;\", map: \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9hcHAvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Qcm9wZXJ0aWVzTW9kYWwvaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTZPaUUiLCJmaWxlIjoiL2FwcC9zdXBlcnNldC1mcm9udGVuZC9zcmMvZXhwbG9yZS9jb21wb25lbnRzL1Byb3BlcnRpZXNNb2RhbC9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgeyB1c2VNZW1vLCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBNb2RhbCBmcm9tICdzcmMvY29tcG9uZW50cy9Nb2RhbCc7XG5pbXBvcnQgeyBJbnB1dCwgVGV4dEFyZWEgfSBmcm9tICdzcmMvY29tcG9uZW50cy9JbnB1dCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJ3NyYy9jb21wb25lbnRzL0J1dHRvbic7XG5pbXBvcnQgeyBBc3luY1NlbGVjdCwgUm93LCBDb2wsIEFudGRGb3JtIH0gZnJvbSAnc3JjL2NvbXBvbmVudHMnO1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uJztcbmltcG9ydCB7IHQsIFN1cGVyc2V0Q2xpZW50LCBzdHlsZWQsIGlzRmVhdHVyZUVuYWJsZWQsIEZlYXR1cmVGbGFnLCBnZXRDbGllbnRFcnJvck9iamVjdCwgZW5zdXJlSXNBcnJheSwgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgd2l0aFRvYXN0cyBmcm9tICdzcmMvY29tcG9uZW50cy9NZXNzYWdlVG9hc3RzL3dpdGhUb2FzdHMnO1xuaW1wb3J0IHsgbG9hZFRhZ3MgfSBmcm9tICdzcmMvY29tcG9uZW50cy9UYWdzL3V0aWxzJztcbmltcG9ydCB7IGZldGNoVGFncywgT0JKRUNUX1RZUEVTIH0gZnJvbSAnc3JjL2ZlYXR1cmVzL3RhZ3MvdGFncyc7XG5jb25zdCBGb3JtSXRlbSA9IEFudGRGb3JtLkl0ZW07XG5jb25zdCBTdHlsZWRGb3JtSXRlbSA9IHN0eWxlZChBbnRkRm9ybS5JdGVtKSBgXG4gIG1hcmdpbi1ib3R0b206IDA7XG5gO1xuY29uc3QgU3R5bGVkSGVscEJsb2NrID0gc3R5bGVkLnNwYW4gYFxuICBtYXJnaW4tYm90dG9tOiAwO1xuYDtcbmZ1bmN0aW9uIFByb3BlcnRpZXNNb2RhbCh7IHNsaWNlLCBvbkhpZGUsIG9uU2F2ZSwgc2hvdywgYWRkU3VjY2Vzc1RvYXN0LCB9KSB7XG4gICAgY29uc3QgW3N1Ym1pdHRpbmcsIHNldFN1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGNvbnN0IFtmb3JtXSA9IEFudGRGb3JtLnVzZUZvcm0oKTtcbiAgICAvLyB2YWx1ZXMgb2YgZm9ybSBpbnB1dHNcbiAgICBjb25zdCBbbmFtZSwgc2V0TmFtZV0gPSB1c2VTdGF0ZShzbGljZS5zbGljZV9uYW1lIHx8ICcnKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRPd25lcnMsIHNldFNlbGVjdGVkT3duZXJzXSA9IHVzZVN0YXRlKG51bGwpO1xuICAgIGNvbnN0IFt0YWdzLCBzZXRUYWdzXSA9IHVzZVN0YXRlKFtdKTtcbiAgICBjb25zdCB0YWdzQXNTZWxlY3RWYWx1ZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0VGFncyA9IHRhZ3MubWFwKCh0YWcpID0+ICh7XG4gICAgICAgICAgICB2YWx1ZTogdGFnLmlkLFxuICAgICAgICAgICAgbGFiZWw6IHRhZy5uYW1lLFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RUYWdzO1xuICAgIH0sIFt0YWdzLmxlbmd0aF0pO1xuICAgIGZ1bmN0aW9uIHNob3dFcnJvcih7IGVycm9yLCBzdGF0dXNUZXh0LCBtZXNzYWdlIH0pIHtcbiAgICAgICAgbGV0IGVycm9yVGV4dCA9IGVycm9yIHx8IHN0YXR1c1RleHQgfHwgdCgnQW4gZXJyb3IgaGFzIG9jY3VycmVkJyk7XG4gICAgICAgIGlmIChtZXNzYWdlID09PSAnRm9yYmlkZGVuJykge1xuICAgICAgICAgICAgZXJyb3JUZXh0ID0gdCgnWW91IGRvIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZWRpdCB0aGlzIGNoYXJ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgTW9kYWwuZXJyb3Ioe1xuICAgICAgICAgICAgdGl0bGU6IHQoJ0Vycm9yJyksXG4gICAgICAgICAgICBjb250ZW50OiBlcnJvclRleHQsXG4gICAgICAgICAgICBva0J1dHRvblByb3BzOiB7IGRhbmdlcjogdHJ1ZSwgY2xhc3NOYW1lOiAnYnRuLWRhbmdlcicgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGZldGNoQ2hhcnRPd25lcnMgPSB1c2VDYWxsYmFjayhhc3luYyBmdW5jdGlvbiBmZXRjaENoYXJ0T3duZXJzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke3NsaWNlLnNsaWNlX2lkfWAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNoYXJ0ID0gcmVzcG9uc2UuanNvbi5yZXN1bHQ7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZE93bmVycyhjaGFydD8ub3duZXJzPy5tYXAoKG93bmVyKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBvd25lci5pZCxcbiAgICAgICAgICAgICAgICBsYWJlbDogYCR7b3duZXIuZmlyc3RfbmFtZX0gJHtvd25lci5sYXN0X25hbWV9YCxcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBjb25zdCBjbGllbnRFcnJvciA9IGF3YWl0IGdldENsaWVudEVycm9yT2JqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgICAgIHNob3dFcnJvcihjbGllbnRFcnJvcik7XG4gICAgICAgIH1cbiAgICB9LCBbc2xpY2Uuc2xpY2VfaWRdKTtcbiAgICBjb25zdCBsb2FkT3B0aW9ucyA9IHVzZU1lbW8oKCkgPT4gKGlucHV0ID0gJycsIHBhZ2UsIHBhZ2VTaXplKSA9PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gcmlzb24uZW5jb2RlKHtcbiAgICAgICAgICAgIGZpbHRlcjogaW5wdXQsXG4gICAgICAgICAgICBwYWdlLFxuICAgICAgICAgICAgcGFnZV9zaXplOiBwYWdlU2l6ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBTdXBlcnNldENsaWVudC5nZXQoe1xuICAgICAgICAgICAgZW5kcG9pbnQ6IGAvYXBpL3YxL2NoYXJ0L3JlbGF0ZWQvb3duZXJzP3E9JHtxdWVyeX1gLFxuICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+ICh7XG4gICAgICAgICAgICBkYXRhOiByZXNwb25zZS5qc29uLnJlc3VsdFxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uZXh0cmEuYWN0aXZlKVxuICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0udGV4dCxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IHJlc3BvbnNlLmpzb24uY291bnQsXG4gICAgICAgIH0pKTtcbiAgICB9LCBbXSk7XG4gICAgY29uc3Qgb25TdWJtaXQgPSBhc3luYyAodmFsdWVzKSA9PiB7XG4gICAgICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7XG4gICAgICAgIGNvbnN0IHsgY2VydGlmaWVkX2J5OiBjZXJ0aWZpZWRCeSwgY2VydGlmaWNhdGlvbl9kZXRhaWxzOiBjZXJ0aWZpY2F0aW9uRGV0YWlscywgZGVzY3JpcHRpb24sIGNhY2hlX3RpbWVvdXQ6IGNhY2hlVGltZW91dCwgfSA9IHZhbHVlcztcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgIHNsaWNlX25hbWU6IG5hbWUgfHwgbnVsbCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgICAgICAgY2FjaGVfdGltZW91dDogY2FjaGVUaW1lb3V0IHx8IG51bGwsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IGNlcnRpZmllZEJ5IHx8IG51bGwsXG4gICAgICAgICAgICBjZXJ0aWZpY2F0aW9uX2RldGFpbHM6IGNlcnRpZmllZEJ5ICYmIGNlcnRpZmljYXRpb25EZXRhaWxzID8gY2VydGlmaWNhdGlvbkRldGFpbHMgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoc2VsZWN0ZWRPd25lcnMpIHtcbiAgICAgICAgICAgIHBheWxvYWQub3duZXJzID0gc2VsZWN0ZWRPd25lcnMubWFwKG8gPT4gby52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVGFnZ2luZ1N5c3RlbSkpIHtcbiAgICAgICAgICAgIHBheWxvYWQudGFncyA9IHRhZ3MubWFwKHRhZyA9PiB0YWcuaWQpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBTdXBlcnNldENsaWVudC5wdXQoe1xuICAgICAgICAgICAgICAgIGVuZHBvaW50OiBgL2FwaS92MS9jaGFydC8ke3NsaWNlLnNsaWNlX2lkfWAsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgcmVkdXggc3RhdGVcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDaGFydCA9IHtcbiAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgIC4uLnJlcy5qc29uLnJlc3VsdCxcbiAgICAgICAgICAgICAgICB0YWdzLFxuICAgICAgICAgICAgICAgIGlkOiBzbGljZS5zbGljZV9pZCxcbiAgICAgICAgICAgICAgICBvd25lcnM6IHNlbGVjdGVkT3duZXJzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG9uU2F2ZSh1cGRhdGVkQ2hhcnQpO1xuICAgICAgICAgICAgYWRkU3VjY2Vzc1RvYXN0KHQoJ0NoYXJ0IHByb3BlcnRpZXMgdXBkYXRlZCcpKTtcbiAgICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChyZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudEVycm9yID0gYXdhaXQgZ2V0Q2xpZW50RXJyb3JPYmplY3QocmVzKTtcbiAgICAgICAgICAgIHNob3dFcnJvcihjbGllbnRFcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0U3VibWl0dGluZyhmYWxzZSk7XG4gICAgfTtcbiAgICBjb25zdCBvd25lcnNMYWJlbCA9IHQoJ093bmVycycpO1xuICAgIC8vIGdldCB0aGUgb3duZXJzIG9mIHRoaXMgc2xpY2VcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBmZXRjaENoYXJ0T3duZXJzKCk7XG4gICAgfSwgW2ZldGNoQ2hhcnRPd25lcnNdKTtcbiAgICAvLyB1cGRhdGUgbmFtZSBhZnRlciBpdCdzIGNoYW5nZWQgaW4gYW5vdGhlciBtb2RhbFxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIHNldE5hbWUoc2xpY2Uuc2xpY2VfbmFtZSB8fCAnJyk7XG4gICAgfSwgW3NsaWNlLnNsaWNlX25hbWVdKTtcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWlzRmVhdHVyZUVuYWJsZWQoRmVhdHVyZUZsYWcuVGFnZ2luZ1N5c3RlbSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmZXRjaFRhZ3Moe1xuICAgICAgICAgICAgICAgIG9iamVjdFR5cGU6IE9CSkVDVF9UWVBFUy5DSEFSVCxcbiAgICAgICAgICAgICAgICBvYmplY3RJZDogc2xpY2Uuc2xpY2VfaWQsXG4gICAgICAgICAgICAgICAgaW5jbHVkZVR5cGVzOiBmYWxzZSxcbiAgICAgICAgICAgIH0sICh0YWdzKSA9PiBzZXRUYWdzKHRhZ3MpLCBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgc2hvd0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2hvd0Vycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0sIFtzbGljZS5zbGljZV9pZF0pO1xuICAgIGNvbnN0IGhhbmRsZUNoYW5nZVRhZ3MgPSAodGFncykgPT4ge1xuICAgICAgICBjb25zdCBwYXJzZWRUYWdzID0gZW5zdXJlSXNBcnJheSh0YWdzKS5tYXAociA9PiAoe1xuICAgICAgICAgICAgaWQ6IHIudmFsdWUsXG4gICAgICAgICAgICBuYW1lOiByLmxhYmVsLFxuICAgICAgICB9KSk7XG4gICAgICAgIHNldFRhZ3MocGFyc2VkVGFncyk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVDbGVhclRhZ3MgPSAoKSA9PiB7XG4gICAgICAgIHNldFRhZ3MoW10pO1xuICAgIH07XG4gICAgcmV0dXJuICg8TW9kYWwgc2hvdz17c2hvd30gb25IaWRlPXtvbkhpZGV9IHRpdGxlPXt0KCdFZGl0IENoYXJ0IFByb3BlcnRpZXMnKX0gZm9vdGVyPXs8PlxuICAgICAgICAgIDxCdXR0b24gZGF0YS10ZXN0PVwicHJvcGVydGllcy1tb2RhbC1jYW5jZWwtYnV0dG9uXCIgaHRtbFR5cGU9XCJidXR0b25cIiBidXR0b25TaXplPVwic21hbGxcIiBvbkNsaWNrPXtvbkhpZGV9IGN0YT5cbiAgICAgICAgICAgIHt0KCdDYW5jZWwnKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8QnV0dG9uIGRhdGEtdGVzdD1cInByb3BlcnRpZXMtbW9kYWwtc2F2ZS1idXR0b25cIiBodG1sVHlwZT1cInN1Ym1pdFwiIGJ1dHRvblNpemU9XCJzbWFsbFwiIGJ1dHRvblN0eWxlPVwicHJpbWFyeVwiIG9uQ2xpY2s9e2Zvcm0uc3VibWl0fSBkaXNhYmxlZD17c3VibWl0dGluZyB8fCAhbmFtZSB8fCBzbGljZS5pc19tYW5hZ2VkX2V4dGVybmFsbHl9IHRvb2x0aXA9e3NsaWNlLmlzX21hbmFnZWRfZXh0ZXJuYWxseVxuICAgICAgICAgICAgICAgID8gdChcIlRoaXMgY2hhcnQgaXMgbWFuYWdlZCBleHRlcm5hbGx5LCBhbmQgY2FuJ3QgYmUgZWRpdGVkIGluIFN1cGVyc2V0XCIpXG4gICAgICAgICAgICAgICAgOiAnJ30gY3RhPlxuICAgICAgICAgICAge3QoJ1NhdmUnKX1cbiAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgPC8+fSByZXNwb25zaXZlIHdyYXBQcm9wcz17eyAnZGF0YS10ZXN0JzogJ3Byb3BlcnRpZXMtZWRpdC1tb2RhbCcgfX0+XG4gICAgICA8QW50ZEZvcm0gZm9ybT17Zm9ybX0gb25GaW5pc2g9e29uU3VibWl0fSBsYXlvdXQ9XCJ2ZXJ0aWNhbFwiIGluaXRpYWxWYWx1ZXM9e3tcbiAgICAgICAgICAgIG5hbWU6IHNsaWNlLnNsaWNlX25hbWUgfHwgJycsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogc2xpY2UuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICBjYWNoZV90aW1lb3V0OiBzbGljZS5jYWNoZV90aW1lb3V0ICE9IG51bGwgPyBzbGljZS5jYWNoZV90aW1lb3V0IDogJycsXG4gICAgICAgICAgICBjZXJ0aWZpZWRfYnk6IHNsaWNlLmNlcnRpZmllZF9ieSB8fCAnJyxcbiAgICAgICAgICAgIGNlcnRpZmljYXRpb25fZGV0YWlsczogc2xpY2UuY2VydGlmaWVkX2J5ICYmIHNsaWNlLmNlcnRpZmljYXRpb25fZGV0YWlsc1xuICAgICAgICAgICAgICAgID8gc2xpY2UuY2VydGlmaWNhdGlvbl9kZXRhaWxzXG4gICAgICAgICAgICAgICAgOiAnJyxcbiAgICAgICAgfX0+XG4gICAgICAgIDxSb3cgZ3V0dGVyPXsxNn0+XG4gICAgICAgICAgPENvbCB4cz17MjR9IG1kPXsxMn0+XG4gICAgICAgICAgICA8aDM+e3QoJ0Jhc2ljIGluZm9ybWF0aW9uJyl9PC9oMz5cbiAgICAgICAgICAgIDxGb3JtSXRlbSBsYWJlbD17dCgnTmFtZScpfSByZXF1aXJlZD5cbiAgICAgICAgICAgICAgPElucHV0IGFyaWEtbGFiZWw9e3QoJ05hbWUnKX0gbmFtZT1cIm5hbWVcIiBkYXRhLXRlc3Q9XCJwcm9wZXJ0aWVzLW1vZGFsLW5hbWUtaW5wdXRcIiB0eXBlPVwidGV4dFwiIHZhbHVlPXtuYW1lfSBvbkNoYW5nZT17KGV2ZW50KSA9PiBzZXROYW1lKGV2ZW50LnRhcmdldC52YWx1ZSA/PyAnJyl9Lz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRGb3JtSXRlbSBsYWJlbD17dCgnRGVzY3JpcHRpb24nKX0gbmFtZT1cImRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgPFRleHRBcmVhIHJvd3M9ezN9IHN0eWxlPXt7IG1heFdpZHRoOiAnMTAwJScgfX0vPlxuICAgICAgICAgICAgICA8L1N0eWxlZEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dCgnVGhlIGRlc2NyaXB0aW9uIGNhbiBiZSBkaXNwbGF5ZWQgYXMgd2lkZ2V0IGhlYWRlcnMgaW4gdGhlIGRhc2hib2FyZCB2aWV3LiBTdXBwb3J0cyBtYXJrZG93bi4nKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgPGgzPnt0KCdDZXJ0aWZpY2F0aW9uJyl9PC9oMz5cbiAgICAgICAgICAgIDxGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEZvcm1JdGVtIGxhYmVsPXt0KCdDZXJ0aWZpZWQgYnknKX0gbmFtZT1cImNlcnRpZmllZF9ieVwiPlxuICAgICAgICAgICAgICAgIDxJbnB1dCBhcmlhLWxhYmVsPXt0KCdDZXJ0aWZpZWQgYnknKX0vPlxuICAgICAgICAgICAgICA8L1N0eWxlZEZvcm1JdGVtPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dCgnUGVyc29uIG9yIGdyb3VwIHRoYXQgaGFzIGNlcnRpZmllZCB0aGlzIGNoYXJ0LicpfVxuICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgIDwvRm9ybUl0ZW0+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRGb3JtSXRlbSBsYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9IG5hbWU9XCJjZXJ0aWZpY2F0aW9uX2RldGFpbHNcIj5cbiAgICAgICAgICAgICAgICA8SW5wdXQgYXJpYS1sYWJlbD17dCgnQ2VydGlmaWNhdGlvbiBkZXRhaWxzJyl9Lz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoJ0FueSBhZGRpdGlvbmFsIGRldGFpbCB0byBzaG93IGluIHRoZSBjZXJ0aWZpY2F0aW9uIHRvb2x0aXAuJyl9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICA8L0NvbD5cbiAgICAgICAgICA8Q29sIHhzPXsyNH0gbWQ9ezEyfT5cbiAgICAgICAgICAgIDxoMz57dCgnQ29uZmlndXJhdGlvbicpfTwvaDM+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0+XG4gICAgICAgICAgICAgIDxTdHlsZWRGb3JtSXRlbSBsYWJlbD17dCgnQ2FjaGUgdGltZW91dCcpfSBuYW1lPVwiY2FjaGVfdGltZW91dFwiPlxuICAgICAgICAgICAgICAgIDxJbnB1dCBhcmlhLWxhYmVsPVwiQ2FjaGUgdGltZW91dFwiLz5cbiAgICAgICAgICAgICAgPC9TdHlsZWRGb3JtSXRlbT5cbiAgICAgICAgICAgICAgPFN0eWxlZEhlbHBCbG9jayBjbGFzc05hbWU9XCJoZWxwLWJsb2NrXCI+XG4gICAgICAgICAgICAgICAge3QoXCJEdXJhdGlvbiAoaW4gc2Vjb25kcykgb2YgdGhlIGNhY2hpbmcgdGltZW91dCBmb3IgdGhpcyBjaGFydC4gU2V0IHRvIC0xIHRvIGJ5cGFzcyB0aGUgY2FjaGUuIE5vdGUgdGhpcyBkZWZhdWx0cyB0byB0aGUgZGF0YXNldCdzIHRpbWVvdXQgaWYgdW5kZWZpbmVkLlwiKX1cbiAgICAgICAgICAgICAgPC9TdHlsZWRIZWxwQmxvY2s+XG4gICAgICAgICAgICA8L0Zvcm1JdGVtPlxuICAgICAgICAgICAgPGgzIHN0eWxlPXt7IG1hcmdpblRvcDogJzFlbScgfX0+e3QoJ0FjY2VzcycpfTwvaDM+XG4gICAgICAgICAgICA8Rm9ybUl0ZW0gbGFiZWw9e293bmVyc0xhYmVsfT5cbiAgICAgICAgICAgICAgPEFzeW5jU2VsZWN0IGFyaWFMYWJlbD17b3duZXJzTGFiZWx9IG1vZGU9XCJtdWx0aXBsZVwiIG5hbWU9XCJvd25lcnNcIiB2YWx1ZT17c2VsZWN0ZWRPd25lcnMgfHwgW119IG9uQ2hhbmdlPXtzZXRTZWxlY3RlZE93bmVyc30gb3B0aW9ucz17bG9hZE9wdGlvbnN9IGRpc2FibGVkPXshc2VsZWN0ZWRPd25lcnN9IGFsbG93Q2xlYXIvPlxuICAgICAgICAgICAgICA8U3R5bGVkSGVscEJsb2NrIGNsYXNzTmFtZT1cImhlbHAtYmxvY2tcIj5cbiAgICAgICAgICAgICAgICB7dCgnQSBsaXN0IG9mIHVzZXJzIHdobyBjYW4gYWx0ZXIgdGhlIGNoYXJ0LiBTZWFyY2hhYmxlIGJ5IG5hbWUgb3IgdXNlcm5hbWUuJyl9XG4gICAgICAgICAgICAgIDwvU3R5bGVkSGVscEJsb2NrPlxuICAgICAgICAgICAgPC9Gb3JtSXRlbT5cbiAgICAgICAgICAgIHtpc0ZlYXR1cmVFbmFibGVkKEZlYXR1cmVGbGFnLlRhZ2dpbmdTeXN0ZW0pICYmICg8aDMgY3NzPXt7IG1hcmdpblRvcDogJzFlbScgfX0+e3QoJ1RhZ3MnKX08L2gzPil9XG4gICAgICAgICAgICB7aXNGZWF0dXJlRW5hYmxlZChGZWF0dXJlRmxhZy5UYWdnaW5nU3lzdGVtKSAmJiAoPEZvcm1JdGVtPlxuICAgICAgICAgICAgICAgIDxBc3luY1NlbGVjdCBhcmlhTGFiZWw9XCJUYWdzXCIgbW9kZT1cIm11bHRpcGxlXCIgdmFsdWU9e3RhZ3NBc1NlbGVjdFZhbHVlc30gb3B0aW9ucz17bG9hZFRhZ3N9IG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VUYWdzfSBvbkNsZWFyPXtoYW5kbGVDbGVhclRhZ3N9IGFsbG93Q2xlYXIvPlxuICAgICAgICAgICAgICAgIDxTdHlsZWRIZWxwQmxvY2sgY2xhc3NOYW1lPVwiaGVscC1ibG9ja1wiPlxuICAgICAgICAgICAgICAgICAge3QoJ0EgbGlzdCBvZiB0YWdzIHRoYXQgaGF2ZSBiZWVuIGFwcGxpZWQgdG8gdGhpcyBjaGFydC4nKX1cbiAgICAgICAgICAgICAgICA8L1N0eWxlZEhlbHBCbG9jaz5cbiAgICAgICAgICAgICAgPC9Gb3JtSXRlbT4pfVxuICAgICAgICAgIDwvQ29sPlxuICAgICAgICA8L1Jvdz5cbiAgICAgIDwvQW50ZEZvcm0+XG4gICAgPC9Nb2RhbD4pO1xufVxuZXhwb3J0IGRlZmF1bHQgd2l0aFRvYXN0cyhQcm9wZXJ0aWVzTW9kYWwpO1xuIl19 */\", toString: _EMOTION_STRINGIFIED_CSS_ERROR__ };\nfunction PropertiesModal({ slice, onHide, onSave, show, addSuccessToast }) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState(null);\n  const [tags, setTags] = useState([]);\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag) => ({\n      value: tag.id,\n      label: tag.name\n    }));\n    return selectTags;\n  }, [tags.length]);\n  function showError({ error, statusText, message }) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' }\n    });\n  }\n  const fetchChartOwners = useCallback(async function fetchChartOwners() {\n    try {var _chart$owners;\n      const response = await SupersetClient.get({\n        endpoint: `/api/v1/chart/${slice.slice_id}`\n      });\n      const chart = response.json.result;\n      setSelectedOwners(chart == null ? void 0 : (_chart$owners = chart.owners) == null ? void 0 : _chart$owners.map((owner) => ({\n        value: owner.id,\n        label: `${owner.first_name} ${owner.last_name}`\n      })));\n    }\n    catch (response) {\n      const clientError = await getClientErrorObject(response);\n      showError(clientError);\n    }\n  }, [slice.slice_id]);\n  const loadOptions = useMemo(() => (input = '', page, pageSize) => {\n    const query = rison.encode({\n      filter: input,\n      page,\n      page_size: pageSize\n    });\n    return SupersetClient.get({\n      endpoint: `/api/v1/chart/related/owners?q=${query}`\n    }).then((response) => ({\n      data: response.json.result.\n      filter((item) => item.extra.active).\n      map((item) => ({\n        value: item.value,\n        label: item.text\n      })),\n      totalCount: response.json.count\n    }));\n  }, []);\n  const onSubmit = async (values) => {\n    setSubmitting(true);\n    const { certified_by: certifiedBy, certification_details: certificationDetails, description, cache_timeout: cacheTimeout } = values;\n    const payload = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details: certifiedBy && certificationDetails ? certificationDetails : null\n    };\n    if (selectedOwners) {\n      payload.owners = selectedOwners.map((o) => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map((tag) => tag.id);\n    }\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload)\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    }\n    catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n  const ownersLabel = t('Owners');\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem))\n    return;\n    try {\n      fetchTags({\n        objectType: OBJECT_TYPES.CHART,\n        objectId: slice.slice_id,\n        includeTypes: false\n      }, (tags) => setTags(tags), (error) => {\n        showError(error);\n      });\n    }\n    catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n  const handleChangeTags = (tags) => {\n    const parsedTags = ensureIsArray(tags).map((r) => ({\n      id: r.value,\n      name: r.label\n    }));\n    setTags(parsedTags);\n  };\n  const handleClearTags = () => {\n    setTags([]);\n  };\n  return _jsx(Modal, { show: show, onHide: onHide, title: t('Edit Chart Properties'), footer: _jsxs(_Fragment, { children: [\n      _jsx(Button, { \"data-test\": \"properties-modal-cancel-button\", htmlType: \"button\", buttonSize: \"small\", onClick: onHide, cta: true, children:\n        t('Cancel') }\n      ),\n      _jsx(Button, { \"data-test\": \"properties-modal-save-button\", htmlType: \"submit\", buttonSize: \"small\", buttonStyle: \"primary\", onClick: form.submit, disabled: submitting || !name || slice.is_managed_externally, tooltip: slice.is_managed_externally ?\n        t(\"This chart is managed externally, and can't be edited in Superset\") :\n        '', cta: true, children:\n        t('Save') }\n      )] }\n    ), responsive: true, wrapProps: { 'data-test': 'properties-edit-modal' }, children:\n    _jsx(AntdForm, { form: form, onFinish: onSubmit, layout: \"vertical\", initialValues: {\n        name: slice.slice_name || '',\n        description: slice.description || '',\n        cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n        certified_by: slice.certified_by || '',\n        certification_details: slice.certified_by && slice.certification_details ?\n        slice.certification_details :\n        ''\n      }, children:\n      _jsxs(Row, { gutter: 16, children: [\n        _jsxs(Col, { xs: 24, md: 12, children: [\n          _jsx(\"h3\", { children: t('Basic information') }),\n          _jsx(FormItem, { label: t('Name'), required: true, children:\n            _jsx(Input, { \"aria-label\": t('Name'), name: \"name\", \"data-test\": \"properties-modal-name-input\", type: \"text\", value: name, onChange: (event) => {var _event$target$value;return setName((_event$target$value = event.target.value) != null ? _event$target$value : '');} }) }\n          ),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Description'), name: \"description\", children:\n              _jsx(TextArea, { rows: 3, style: { maxWidth: '100%' } }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('The description can be displayed as widget headers in the dashboard view. Supports markdown.') }\n            )] }\n          ),\n          _jsx(\"h3\", { children: t('Certification') }),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Certified by'), name: \"certified_by\", children:\n              _jsx(Input, { \"aria-label\": t('Certified by') }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('Person or group that has certified this chart.') }\n            )] }\n          ),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Certification details'), name: \"certification_details\", children:\n              _jsx(Input, { \"aria-label\": t('Certification details') }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('Any additional detail to show in the certification tooltip.') }\n            )] }\n          )] }\n        ),\n        _jsxs(Col, { xs: 24, md: 12, children: [\n          _jsx(\"h3\", { children: t('Configuration') }),\n          _jsxs(FormItem, { children: [\n            _jsx(StyledFormItem, { label: t('Cache timeout'), name: \"cache_timeout\", children:\n              _jsx(Input, { \"aria-label\": \"Cache timeout\" }) }\n            ),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t(\"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\") }\n            )] }\n          ),\n          _jsx(\"h3\", { style: { marginTop: '1em' }, children: t('Access') }),\n          _jsxs(FormItem, { label: ownersLabel, children: [\n            _jsx(AsyncSelect, { ariaLabel: ownersLabel, mode: \"multiple\", name: \"owners\", value: selectedOwners || [], onChange: setSelectedOwners, options: loadOptions, disabled: !selectedOwners, allowClear: true }),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('A list of users who can alter the chart. Searchable by name or username.') }\n            )] }\n          ),\n          isFeatureEnabled(FeatureFlag.TaggingSystem) && _jsx(\"h3\", { css: _ref, children: t('Tags') }),\n          isFeatureEnabled(FeatureFlag.TaggingSystem) && _jsxs(FormItem, { children: [\n            _jsx(AsyncSelect, { ariaLabel: \"Tags\", mode: \"multiple\", value: tagsAsSelectValues, options: loadTags, onChange: handleChangeTags, onClear: handleClearTags, allowClear: true }),\n            _jsx(StyledHelpBlock, { className: \"help-block\", children:\n              t('A list of tags that have been applied to this chart.') }\n            )] }\n          )] }\n        )] }\n      ) }\n    ) }\n  );\n}__signature__(PropertiesModal, \"useState{[submitting, setSubmitting](false)}\\nuseForm{[form]}\\nuseState{[name, setName](slice.slice_name || '')}\\nuseState{[selectedOwners, setSelectedOwners](null)}\\nuseState{[tags, setTags]([])}\\nuseMemo{tagsAsSelectValues}\\nuseCallback{fetchChartOwners}\\nuseMemo{loadOptions}\\nuseEffect{}\\nuseEffect{}\\nuseEffect{}\");const _default =\nwithToasts(PropertiesModal);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(FormItem, \"FormItem\", \"/app/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(StyledFormItem, \"StyledFormItem\", \"/app/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(StyledHelpBlock, \"StyledHelpBlock\", \"/app/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(PropertiesModal, \"PropertiesModal\", \"/app/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/explore/components/PropertiesModal/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useMemo","useState","useCallback","useEffect","Modal","Input","TextArea","Button","AsyncSelect","Row","Col","AntdForm","rison","t","SupersetClient","styled","isFeatureEnabled","FeatureFlag","getClientErrorObject","ensureIsArray","withToasts","loadTags","fetchTags","OBJECT_TYPES","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","FormItem","Item","StyledFormItem","StyledHelpBlock","span","_ref","process","env","NODE_ENV","name","styles","map","toString","_EMOTION_STRINGIFIED_CSS_ERROR__","PropertiesModal","slice","onHide","onSave","show","addSuccessToast","submitting","setSubmitting","form","useForm","setName","slice_name","selectedOwners","setSelectedOwners","tags","setTags","tagsAsSelectValues","selectTags","tag","value","id","label","length","showError","error","statusText","message","errorText","title","content","okButtonProps","danger","className","fetchChartOwners","_chart$owners","response","get","endpoint","slice_id","chart","json","result","owners","owner","first_name","last_name","clientError","loadOptions","input","page","pageSize","query","encode","filter","page_size","then","data","item","extra","active","text","totalCount","count","onSubmit","values","certified_by","certifiedBy","certification_details","certificationDetails","description","cache_timeout","cacheTimeout","payload","o","TaggingSystem","res","put","headers","body","JSON","stringify","updatedChart","ownersLabel","objectType","CHART","objectId","includeTypes","handleChangeTags","parsedTags","r","handleClearTags","footer","children","htmlType","buttonSize","onClick","cta","buttonStyle","submit","disabled","is_managed_externally","tooltip","responsive","wrapProps","onFinish","layout","initialValues","gutter","xs","md","required","type","onChange","event","_event$target$value","target","rows","style","maxWidth","marginTop","ariaLabel","mode","options","allowClear","css","onClear","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/explore/components/PropertiesModal/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { ChangeEvent, useMemo, useState, useCallback, useEffect } from 'react';\n\nimport Modal from 'src/components/Modal';\nimport { Input, TextArea } from 'src/components/Input';\nimport Button from 'src/components/Button';\nimport { AsyncSelect, Row, Col, AntdForm } from 'src/components';\nimport { SelectValue } from 'antd/lib/select';\nimport rison from 'rison';\nimport {\n  t,\n  SupersetClient,\n  styled,\n  isFeatureEnabled,\n  FeatureFlag,\n  getClientErrorObject,\n  ensureIsArray,\n} from '@superset-ui/core';\nimport Chart, { Slice } from 'src/types/Chart';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport { loadTags } from 'src/components/Tags/utils';\nimport { fetchTags, OBJECT_TYPES } from 'src/features/tags/tags';\nimport TagType from 'src/types/TagType';\n\nexport type PropertiesModalProps = {\n  slice: Slice;\n  show: boolean;\n  onHide: () => void;\n  onSave: (chart: Chart) => void;\n  permissionsError?: string;\n  existingOwners?: SelectValue;\n  addSuccessToast: (msg: string) => void;\n};\n\nconst FormItem = AntdForm.Item;\n\nconst StyledFormItem = styled(AntdForm.Item)`\n  margin-bottom: 0;\n`;\n\nconst StyledHelpBlock = styled.span`\n  margin-bottom: 0;\n`;\n\nfunction PropertiesModal({\n  slice,\n  onHide,\n  onSave,\n  show,\n  addSuccessToast,\n}: PropertiesModalProps) {\n  const [submitting, setSubmitting] = useState(false);\n  const [form] = AntdForm.useForm();\n  // values of form inputs\n  const [name, setName] = useState(slice.slice_name || '');\n  const [selectedOwners, setSelectedOwners] = useState<SelectValue | null>(\n    null,\n  );\n\n  const [tags, setTags] = useState<TagType[]>([]);\n\n  const tagsAsSelectValues = useMemo(() => {\n    const selectTags = tags.map((tag: { id: number; name: string }) => ({\n      value: tag.id,\n      label: tag.name,\n    }));\n    return selectTags;\n  }, [tags.length]);\n\n  function showError({ error, statusText, message }: any) {\n    let errorText = error || statusText || t('An error has occurred');\n    if (message === 'Forbidden') {\n      errorText = t('You do not have permission to edit this chart');\n    }\n    Modal.error({\n      title: t('Error'),\n      content: errorText,\n      okButtonProps: { danger: true, className: 'btn-danger' },\n    });\n  }\n\n  const fetchChartOwners = useCallback(\n    async function fetchChartOwners() {\n      try {\n        const response = await SupersetClient.get({\n          endpoint: `/api/v1/chart/${slice.slice_id}`,\n        });\n        const chart = response.json.result;\n        setSelectedOwners(\n          chart?.owners?.map((owner: any) => ({\n            value: owner.id,\n            label: `${owner.first_name} ${owner.last_name}`,\n          })),\n        );\n      } catch (response) {\n        const clientError = await getClientErrorObject(response);\n        showError(clientError);\n      }\n    },\n    [slice.slice_id],\n  );\n\n  const loadOptions = useMemo(\n    () =>\n      (input = '', page: number, pageSize: number) => {\n        const query = rison.encode({\n          filter: input,\n          page,\n          page_size: pageSize,\n        });\n        return SupersetClient.get({\n          endpoint: `/api/v1/chart/related/owners?q=${query}`,\n        }).then(response => ({\n          data: response.json.result\n            .filter((item: { extra: { active: boolean } }) => item.extra.active)\n            .map((item: { value: number; text: string }) => ({\n              value: item.value,\n              label: item.text,\n            })),\n          totalCount: response.json.count,\n        }));\n      },\n    [],\n  );\n\n  const onSubmit = async (values: {\n    certified_by?: string;\n    certification_details?: string;\n    description?: string;\n    cache_timeout?: number;\n  }) => {\n    setSubmitting(true);\n    const {\n      certified_by: certifiedBy,\n      certification_details: certificationDetails,\n      description,\n      cache_timeout: cacheTimeout,\n    } = values;\n    const payload: { [key: string]: any } = {\n      slice_name: name || null,\n      description: description || null,\n      cache_timeout: cacheTimeout || null,\n      certified_by: certifiedBy || null,\n      certification_details:\n        certifiedBy && certificationDetails ? certificationDetails : null,\n    };\n    if (selectedOwners) {\n      payload.owners = (\n        selectedOwners as {\n          value: number;\n          label: string;\n        }[]\n      ).map(o => o.value);\n    }\n    if (isFeatureEnabled(FeatureFlag.TaggingSystem)) {\n      payload.tags = tags.map(tag => tag.id);\n    }\n\n    try {\n      const res = await SupersetClient.put({\n        endpoint: `/api/v1/chart/${slice.slice_id}`,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      // update the redux state\n      const updatedChart = {\n        ...payload,\n        ...res.json.result,\n        tags,\n        id: slice.slice_id,\n        owners: selectedOwners,\n      };\n      onSave(updatedChart);\n      addSuccessToast(t('Chart properties updated'));\n      onHide();\n    } catch (res) {\n      const clientError = await getClientErrorObject(res);\n      showError(clientError);\n    }\n    setSubmitting(false);\n  };\n\n  const ownersLabel = t('Owners');\n\n  // get the owners of this slice\n  useEffect(() => {\n    fetchChartOwners();\n  }, [fetchChartOwners]);\n\n  // update name after it's changed in another modal\n  useEffect(() => {\n    setName(slice.slice_name || '');\n  }, [slice.slice_name]);\n\n  useEffect(() => {\n    if (!isFeatureEnabled(FeatureFlag.TaggingSystem)) return;\n    try {\n      fetchTags(\n        {\n          objectType: OBJECT_TYPES.CHART,\n          objectId: slice.slice_id,\n          includeTypes: false,\n        },\n        (tags: TagType[]) => setTags(tags),\n        error => {\n          showError(error);\n        },\n      );\n    } catch (error) {\n      showError(error);\n    }\n  }, [slice.slice_id]);\n\n  const handleChangeTags = (tags: { label: string; value: number }[]) => {\n    const parsedTags: TagType[] = ensureIsArray(tags).map(r => ({\n      id: r.value,\n      name: r.label,\n    }));\n    setTags(parsedTags);\n  };\n\n  const handleClearTags = () => {\n    setTags([]);\n  };\n\n  return (\n    <Modal\n      show={show}\n      onHide={onHide}\n      title={t('Edit Chart Properties')}\n      footer={\n        <>\n          <Button\n            data-test=\"properties-modal-cancel-button\"\n            htmlType=\"button\"\n            buttonSize=\"small\"\n            onClick={onHide}\n            cta\n          >\n            {t('Cancel')}\n          </Button>\n          <Button\n            data-test=\"properties-modal-save-button\"\n            htmlType=\"submit\"\n            buttonSize=\"small\"\n            buttonStyle=\"primary\"\n            onClick={form.submit}\n            disabled={submitting || !name || slice.is_managed_externally}\n            tooltip={\n              slice.is_managed_externally\n                ? t(\n                    \"This chart is managed externally, and can't be edited in Superset\",\n                  )\n                : ''\n            }\n            cta\n          >\n            {t('Save')}\n          </Button>\n        </>\n      }\n      responsive\n      wrapProps={{ 'data-test': 'properties-edit-modal' }}\n    >\n      <AntdForm\n        form={form}\n        onFinish={onSubmit}\n        layout=\"vertical\"\n        initialValues={{\n          name: slice.slice_name || '',\n          description: slice.description || '',\n          cache_timeout: slice.cache_timeout != null ? slice.cache_timeout : '',\n          certified_by: slice.certified_by || '',\n          certification_details:\n            slice.certified_by && slice.certification_details\n              ? slice.certification_details\n              : '',\n        }}\n      >\n        <Row gutter={16}>\n          <Col xs={24} md={12}>\n            <h3>{t('Basic information')}</h3>\n            <FormItem label={t('Name')} required>\n              <Input\n                aria-label={t('Name')}\n                name=\"name\"\n                data-test=\"properties-modal-name-input\"\n                type=\"text\"\n                value={name}\n                onChange={(event: ChangeEvent<HTMLInputElement>) =>\n                  setName(event.target.value ?? '')\n                }\n              />\n            </FormItem>\n            <FormItem>\n              <StyledFormItem label={t('Description')} name=\"description\">\n                <TextArea rows={3} style={{ maxWidth: '100%' }} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'The description can be displayed as widget headers in the dashboard view. Supports markdown.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3>{t('Certification')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Certified by')} name=\"certified_by\">\n                <Input aria-label={t('Certified by')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t('Person or group that has certified this chart.')}\n              </StyledHelpBlock>\n            </FormItem>\n            <FormItem>\n              <StyledFormItem\n                label={t('Certification details')}\n                name=\"certification_details\"\n              >\n                <Input aria-label={t('Certification details')} />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'Any additional detail to show in the certification tooltip.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n          </Col>\n          <Col xs={24} md={12}>\n            <h3>{t('Configuration')}</h3>\n            <FormItem>\n              <StyledFormItem label={t('Cache timeout')} name=\"cache_timeout\">\n                <Input aria-label=\"Cache timeout\" />\n              </StyledFormItem>\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  \"Duration (in seconds) of the caching timeout for this chart. Set to -1 to bypass the cache. Note this defaults to the dataset's timeout if undefined.\",\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            <h3 style={{ marginTop: '1em' }}>{t('Access')}</h3>\n            <FormItem label={ownersLabel}>\n              <AsyncSelect\n                ariaLabel={ownersLabel}\n                mode=\"multiple\"\n                name=\"owners\"\n                value={selectedOwners || []}\n                onChange={setSelectedOwners}\n                options={loadOptions}\n                disabled={!selectedOwners}\n                allowClear\n              />\n              <StyledHelpBlock className=\"help-block\">\n                {t(\n                  'A list of users who can alter the chart. Searchable by name or username.',\n                )}\n              </StyledHelpBlock>\n            </FormItem>\n            {isFeatureEnabled(FeatureFlag.TaggingSystem) && (\n              <h3 css={{ marginTop: '1em' }}>{t('Tags')}</h3>\n            )}\n            {isFeatureEnabled(FeatureFlag.TaggingSystem) && (\n              <FormItem>\n                <AsyncSelect\n                  ariaLabel=\"Tags\"\n                  mode=\"multiple\"\n                  value={tagsAsSelectValues}\n                  options={loadTags}\n                  onChange={handleChangeTags}\n                  onClear={handleClearTags}\n                  allowClear\n                />\n                <StyledHelpBlock className=\"help-block\">\n                  {t('A list of tags that have been applied to this chart.')}\n                </StyledHelpBlock>\n              </FormItem>\n            )}\n          </Col>\n        </Row>\n      </AntdForm>\n    </Modal>\n  );\n}\n\nexport default withToasts(PropertiesModal);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}