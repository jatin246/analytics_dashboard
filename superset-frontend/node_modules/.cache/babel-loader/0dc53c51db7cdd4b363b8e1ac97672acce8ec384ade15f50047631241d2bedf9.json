{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { Dropdown } from 'src/components/Dropdown';\nimport { Menu } from 'src/components/Menu';\nimport { styled, t } from '@superset-ui/core';\nimport { removeQueryEditor, removeAllOtherQueryEditors, queryEditorSetTitle, cloneQueryToNewTab, toggleLeftBar } from 'src/SqlLab/actions/sqlLab';\nimport TabStatusIcon from '../TabStatusIcon';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst TabTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TabTitle = styled.span`\n  margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n  text-transform: none;\n`;\nconst IconContainer = styled.div`\n  display: inline-block;\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n  text-align: center;\n`;\nconst SqlEditorTabHeader = ({ queryEditor }) => {\n  const qe = useSelector(({ sqlLab: { unsavedQueryEditor } }) => ({\n    ...queryEditor,\n    ...(queryEditor.id === (unsavedQueryEditor == null ? void 0 : unsavedQueryEditor.id) && unsavedQueryEditor)\n  }), shallowEqual);\n  const queryState = useSelector(({ sqlLab }) => {var _sqlLab$queries;return ((_sqlLab$queries = sqlLab.queries[qe.latestQueryId || '']) == null ? void 0 : _sqlLab$queries.state) || '';});\n  const dispatch = useDispatch();\n  const actions = useMemo(() => bindActionCreators({\n    removeQueryEditor,\n    removeAllOtherQueryEditors,\n    queryEditorSetTitle,\n    cloneQueryToNewTab,\n    toggleLeftBar\n  }, dispatch), [dispatch]);\n  function renameTab() {\n    const newTitle = prompt(t('Enter a new title for the tab'));\n    if (newTitle) {\n      actions.queryEditorSetTitle(qe, newTitle, qe.id);\n    }\n  }\n  return _jsxs(TabTitleWrapper, { children: [\n    _jsx(Dropdown, { trigger: ['click'], overlay: _jsxs(Menu, { style: { width: 176 }, children: [\n        _jsxs(Menu.Item, { className: \"close-btn\", onClick: () => actions.removeQueryEditor(qe), \"data-test\": \"close-tab-menu-option\", children: [\n          _jsx(IconContainer, { children:\n            _jsx(\"i\", { className: \"fa fa-close\" }) }\n          ),\n          t('Close tab')] }, \"1\"\n        ),\n        _jsxs(Menu.Item, { onClick: renameTab, \"data-test\": \"rename-tab-menu-option\", children: [\n          _jsx(IconContainer, { children:\n            _jsx(\"i\", { className: \"fa fa-i-cursor\" }) }\n          ),\n          t('Rename tab')] }, \"2\"\n        ),\n        _jsxs(Menu.Item, { onClick: () => actions.toggleLeftBar(qe), \"data-test\": \"toggle-menu-option\", children: [\n          _jsx(IconContainer, { children:\n            _jsx(\"i\", { className: \"fa fa-cogs\" }) }\n          ),\n          qe.hideLeftBar ? t('Expand tool bar') : t('Hide tool bar')] }, \"3\"\n        ),\n        _jsxs(Menu.Item, { onClick: () => actions.removeAllOtherQueryEditors(qe), \"data-test\": \"close-all-other-menu-option\", children: [\n          _jsx(IconContainer, { children:\n            _jsx(\"i\", { className: \"fa fa-times-circle-o\" }) }\n          ),\n          t('Close all other tabs')] }, \"4\"\n        ),\n        _jsxs(Menu.Item, { onClick: () => actions.cloneQueryToNewTab(qe, false), \"data-test\": \"clone-tab-menu-option\", children: [\n          _jsx(IconContainer, { children:\n            _jsx(\"i\", { className: \"fa fa-files-o\" }) }\n          ),\n          t('Duplicate tab')] }, \"5\"\n        )] }\n      ) }),\n    _jsx(TabTitle, { children: qe.name }), \" \", _jsx(TabStatusIcon, { tabState: queryState }), ' '] }\n  );\n};__signature__(SqlEditorTabHeader, \"useSelector{qe}\\nuseSelector{queryState}\\nuseDispatch{dispatch}\\nuseMemo{actions}\", () => [useSelector, useSelector, useDispatch]);const _default =\nSqlEditorTabHeader;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(TabTitleWrapper, \"TabTitleWrapper\", \"/app/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(TabTitle, \"TabTitle\", \"/app/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(IconContainer, \"IconContainer\", \"/app/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(SqlEditorTabHeader, \"SqlEditorTabHeader\", \"/app/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useMemo","bindActionCreators","useSelector","useDispatch","shallowEqual","Dropdown","Menu","styled","t","removeQueryEditor","removeAllOtherQueryEditors","queryEditorSetTitle","cloneQueryToNewTab","toggleLeftBar","TabStatusIcon","jsx","_jsx","jsxs","_jsxs","TabTitleWrapper","div","TabTitle","span","theme","gridUnit","IconContainer","SqlEditorTabHeader","queryEditor","qe","sqlLab","unsavedQueryEditor","id","queryState","_sqlLab$queries","queries","latestQueryId","state","dispatch","actions","renameTab","newTitle","prompt","children","trigger","overlay","style","width","Item","className","onClick","hideLeftBar","name","tabState","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/SqlLab/components/SqlEditorTabHeader/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useMemo, FC } from 'react';\n\nimport { bindActionCreators } from 'redux';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport { Dropdown } from 'src/components/Dropdown';\nimport { Menu } from 'src/components/Menu';\nimport { styled, t, QueryState } from '@superset-ui/core';\nimport {\n  removeQueryEditor,\n  removeAllOtherQueryEditors,\n  queryEditorSetTitle,\n  cloneQueryToNewTab,\n  toggleLeftBar,\n} from 'src/SqlLab/actions/sqlLab';\nimport { QueryEditor, SqlLabRootState } from 'src/SqlLab/types';\nimport TabStatusIcon from '../TabStatusIcon';\n\nconst TabTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst TabTitle = styled.span`\n  margin-right: ${({ theme }) => theme.gridUnit * 2}px;\n  text-transform: none;\n`;\n\nconst IconContainer = styled.div`\n  display: inline-block;\n  width: ${({ theme }) => theme.gridUnit * 8}px;\n  text-align: center;\n`;\n\ninterface Props {\n  queryEditor: QueryEditor;\n}\n\nconst SqlEditorTabHeader: FC<Props> = ({ queryEditor }) => {\n  const qe = useSelector<SqlLabRootState, QueryEditor>(\n    ({ sqlLab: { unsavedQueryEditor } }) => ({\n      ...queryEditor,\n      ...(queryEditor.id === unsavedQueryEditor?.id && unsavedQueryEditor),\n    }),\n    shallowEqual,\n  );\n  const queryState = useSelector<SqlLabRootState, QueryState>(\n    ({ sqlLab }) => sqlLab.queries[qe.latestQueryId || '']?.state || '',\n  );\n  const dispatch = useDispatch();\n  const actions = useMemo(\n    () =>\n      bindActionCreators(\n        {\n          removeQueryEditor,\n          removeAllOtherQueryEditors,\n          queryEditorSetTitle,\n          cloneQueryToNewTab,\n          toggleLeftBar,\n        },\n        dispatch,\n      ),\n    [dispatch],\n  );\n\n  function renameTab() {\n    const newTitle = prompt(t('Enter a new title for the tab'));\n    if (newTitle) {\n      actions.queryEditorSetTitle(qe, newTitle, qe.id);\n    }\n  }\n\n  return (\n    <TabTitleWrapper>\n      <Dropdown\n        trigger={['click']}\n        overlay={\n          <Menu style={{ width: 176 }}>\n            <Menu.Item\n              className=\"close-btn\"\n              key=\"1\"\n              onClick={() => actions.removeQueryEditor(qe)}\n              data-test=\"close-tab-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-close\" />\n              </IconContainer>\n              {t('Close tab')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"2\"\n              onClick={renameTab}\n              data-test=\"rename-tab-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-i-cursor\" />\n              </IconContainer>\n              {t('Rename tab')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"3\"\n              onClick={() => actions.toggleLeftBar(qe)}\n              data-test=\"toggle-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-cogs\" />\n              </IconContainer>\n              {qe.hideLeftBar ? t('Expand tool bar') : t('Hide tool bar')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"4\"\n              onClick={() => actions.removeAllOtherQueryEditors(qe)}\n              data-test=\"close-all-other-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-times-circle-o\" />\n              </IconContainer>\n              {t('Close all other tabs')}\n            </Menu.Item>\n            <Menu.Item\n              key=\"5\"\n              onClick={() => actions.cloneQueryToNewTab(qe, false)}\n              data-test=\"clone-tab-menu-option\"\n            >\n              <IconContainer>\n                <i className=\"fa fa-files-o\" />\n              </IconContainer>\n              {t('Duplicate tab')}\n            </Menu.Item>\n          </Menu>\n        }\n      />\n      <TabTitle>{qe.name}</TabTitle> <TabStatusIcon tabState={queryState} />{' '}\n    </TabTitleWrapper>\n  );\n};\n\nexport default SqlEditorTabHeader;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}