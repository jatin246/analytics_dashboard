{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};import { shallowEqual, useSelector } from 'react-redux';\nimport Alert from 'src/components/Alert';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { FeatureFlag, styled, t, isFeatureEnabled } from '@superset-ui/core';\nimport ResultSet from '../ResultSet';\nimport { LOCALSTORAGE_MAX_QUERY_AGE_MS } from '../../constants';import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nconst EXTRA_HEIGHT_RESULTS = 8; // we need extra height in RESULTS tab. because the height from props was calculated based on PREVIEW tab.\nconst StyledEmptyStateWrapper = styled.div`\n  height: 100%;\n  .ant-empty-image img {\n    margin-right: 28px;\n  }\n\n  p {\n    margin-right: 28px;\n  }\n`;\nconst Results = ({ latestQueryId, height, displayLimit, defaultQueryLimit }) => {\n  const databases = useSelector(({ sqlLab: { databases } }) => databases, shallowEqual);\n  const latestQuery = useSelector(({ sqlLab: { queries } }) => queries[latestQueryId || ''], shallowEqual);\n  if (!latestQuery ||\n  Date.now() - latestQuery.startDttm > LOCALSTORAGE_MAX_QUERY_AGE_MS) {\n    return _jsx(StyledEmptyStateWrapper, { children:\n      _jsx(EmptyStateMedium, { title: t('Run a query to display results'), image: \"document.svg\" }) }\n    );\n  }\n  if (isFeatureEnabled(FeatureFlag.SqllabBackendPersistence) &&\n  latestQuery.state === 'success' &&\n  !latestQuery.resultsKey &&\n  !latestQuery.results) {\n    return _jsx(Alert, { type: \"warning\", message: t('No stored results found, you need to re-run your query') });\n  }\n  return _jsx(ResultSet, { search: true, queryId: latestQuery.id, height: height + EXTRA_HEIGHT_RESULTS, database: databases[latestQuery.dbId], displayLimit: displayLimit, defaultQueryLimit: defaultQueryLimit, showSql: true, showSqlInline: true });\n};__signature__(Results, \"useSelector{databases}\\nuseSelector{latestQuery}\", () => [useSelector, useSelector]);const _default =\nResults;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(EXTRA_HEIGHT_RESULTS, \"EXTRA_HEIGHT_RESULTS\", \"/app/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");reactHotLoader.register(StyledEmptyStateWrapper, \"StyledEmptyStateWrapper\", \"/app/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");reactHotLoader.register(Results, \"Results\", \"/app/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["shallowEqual","useSelector","Alert","EmptyStateMedium","FeatureFlag","styled","t","isFeatureEnabled","ResultSet","LOCALSTORAGE_MAX_QUERY_AGE_MS","jsx","_jsx","EXTRA_HEIGHT_RESULTS","StyledEmptyStateWrapper","div","Results","latestQueryId","height","displayLimit","defaultQueryLimit","databases","sqlLab","latestQuery","queries","Date","now","startDttm","children","title","image","SqllabBackendPersistence","state","resultsKey","results","type","message","search","queryId","id","database","dbId","showSql","showSqlInline","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/SqlLab/components/SouthPane/Results.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FC } from 'react';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport Alert from 'src/components/Alert';\nimport { EmptyStateMedium } from 'src/components/EmptyState';\nimport { FeatureFlag, styled, t, isFeatureEnabled } from '@superset-ui/core';\n\nimport { SqlLabRootState } from 'src/SqlLab/types';\nimport ResultSet from '../ResultSet';\nimport { LOCALSTORAGE_MAX_QUERY_AGE_MS } from '../../constants';\n\nconst EXTRA_HEIGHT_RESULTS = 8; // we need extra height in RESULTS tab. because the height from props was calculated based on PREVIEW tab.\n\ntype Props = {\n  latestQueryId?: string;\n  height: number;\n  displayLimit: number;\n  defaultQueryLimit: number;\n};\n\nconst StyledEmptyStateWrapper = styled.div`\n  height: 100%;\n  .ant-empty-image img {\n    margin-right: 28px;\n  }\n\n  p {\n    margin-right: 28px;\n  }\n`;\n\nconst Results: FC<Props> = ({\n  latestQueryId,\n  height,\n  displayLimit,\n  defaultQueryLimit,\n}) => {\n  const databases = useSelector(\n    ({ sqlLab: { databases } }: SqlLabRootState) => databases,\n    shallowEqual,\n  );\n  const latestQuery = useSelector(\n    ({ sqlLab: { queries } }: SqlLabRootState) => queries[latestQueryId || ''],\n    shallowEqual,\n  );\n\n  if (\n    !latestQuery ||\n    Date.now() - latestQuery.startDttm > LOCALSTORAGE_MAX_QUERY_AGE_MS\n  ) {\n    return (\n      <StyledEmptyStateWrapper>\n        <EmptyStateMedium\n          title={t('Run a query to display results')}\n          image=\"document.svg\"\n        />\n      </StyledEmptyStateWrapper>\n    );\n  }\n\n  if (\n    isFeatureEnabled(FeatureFlag.SqllabBackendPersistence) &&\n    latestQuery.state === 'success' &&\n    !latestQuery.resultsKey &&\n    !latestQuery.results\n  ) {\n    return (\n      <Alert\n        type=\"warning\"\n        message={t('No stored results found, you need to re-run your query')}\n      />\n    );\n  }\n\n  return (\n    <ResultSet\n      search\n      queryId={latestQuery.id}\n      height={height + EXTRA_HEIGHT_RESULTS}\n      database={databases[latestQuery.dbId]}\n      displayLimit={displayLimit}\n      defaultQueryLimit={defaultQueryLimit}\n      showSql\n      showSqlInline\n    />\n  );\n};\n\nexport default Results;\n"],"mappings":"uSAmBA,SAASA,YAAY,EAAEC,WAAW,QAAQ,aAAa;AACvD,OAAOC,KAAK,MAAM,sBAAsB;AACxC,SAASC,gBAAgB,QAAQ,2BAA2B;AAC5D,SAASC,WAAW,EAAEC,MAAM,EAAEC,CAAC,EAAEC,gBAAgB,QAAQ,mBAAmB;AAG5E,OAAOC,SAAS,MAAM,cAAc;AACpC,SAASC,6BAA6B,QAAQ,iBAAiB,CAAC,SAAAC,GAAA,IAAAC,IAAA;AAEhE,MAAMC,oBAAoB,GAAG,CAAC,CAAC,CAAC;AAShC,MAAMC,uBAAuB,GAAGR,MAAM,CAACS,GAAG;;;;;;;;;CASzC;AAED,MAAMC,OAAO,GAAcA,CAAC,EAC1BC,aAAa,EACbC,MAAM,EACNC,YAAY,EACZC,iBAAiB,EAClB,KAAI;EACH,MAAMC,SAAS,GAAGnB,WAAW,CAC3B,CAAC,EAAEoB,MAAM,EAAE,EAAED,SAAS,EAAE,EAAmB,KAAKA,SAAS,EACzDpB,YAAY,CACb;EACD,MAAMsB,WAAW,GAAGrB,WAAW,CAC7B,CAAC,EAAEoB,MAAM,EAAE,EAAEE,OAAO,EAAE,EAAmB,KAAKA,OAAO,CAACP,aAAa,IAAI,EAAE,CAAC,EAC1EhB,YAAY,CACb;EAED,IACE,CAACsB,WAAW;EACZE,IAAI,CAACC,GAAG,EAAE,GAAGH,WAAW,CAACI,SAAS,GAAGjB,6BAA6B,EAClE;IACA,OACEE,IAAA,CAACE,uBAAuB,IAAAc,QAAA;MACtBhB,IAAA,CAACR,gBAAgB,IACfyB,KAAK,EAAEtB,CAAC,CAAC,gCAAgC,CAAE,EAC3CuB,KAAK,EAAC,cAAc,GAExB;IAAyB,CAAC;;EAI9B,IACEtB,gBAAgB,CAACH,WAAW,CAAC0B,wBAAwB,CAAC;EACtDR,WAAW,CAACS,KAAK,KAAK,SAAS;EAC/B,CAACT,WAAW,CAACU,UAAU;EACvB,CAACV,WAAW,CAACW,OAAO,EACpB;IACA,OACEtB,IAAA,CAACT,KAAK,IACJgC,IAAI,EAAC,SAAS,EACdC,OAAO,EAAE7B,CAAC,CAAC,wDAAwD,CAAE,GACrE;;EAIN,OACEK,IAAA,CAACH,SAAS,IACR4B,MAAM,QACNC,OAAO,EAAEf,WAAW,CAACgB,EAAG,EACxBrB,MAAM,EAAEA,MAAM,GAAGL,oBAAqB,EACtC2B,QAAQ,EAAEnB,SAAS,CAACE,WAAW,CAACkB,IAAI,CAAE,EACtCtB,YAAY,EAAEA,YAAa,EAC3BC,iBAAiB,EAAEA,iBAAkB,EACrCsB,OAAO,QACPC,aAAa,SACb;AAEN,CAAC,CAACC,aAAA,CAvDI5B,OAAO,6DAMOd,WAAW,EAITA,WAAW,SAAA2C,QAAA;AA+ClB7B,OAAO,CAAtB,eAAA6B,QAAA,CAAuB,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CA7EjBrC,oBAAoB,gGAAAiC,cAAA,CAAAI,QAAA,CASpBpC,uBAAuB,mGAAAgC,cAAA,CAAAI,QAAA,CAWvBlC,OAAO,mFAAA8B,cAAA,CAAAI,QAAA,CAAAL,QAAA,2GAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}