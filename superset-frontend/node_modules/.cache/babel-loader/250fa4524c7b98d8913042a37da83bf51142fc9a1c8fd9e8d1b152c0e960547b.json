{"ast":null,"code":"import _isObject from \"lodash/isObject\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};\nimport { t, SupersetClient } from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport { useHistory } from 'react-router-dom';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst CLOSE = t('Close');\nconst SAVE_AS_DATASET = t('Save as Dataset');\nconst OPEN_IN_SQL_LAB = t('Open in SQL Lab');\nconst ViewQueryModalFooter = (props) => {\n  const history = useHistory();\n  const viewInSQLLab = (openInNewWindow, id, type, sql) => {\n    const payload = {\n      datasourceKey: `${id}__${type}`,\n      sql\n    };\n    if (openInNewWindow) {\n      SupersetClient.postForm('/sqllab/', payload);\n    } else\n    {\n      history.push({\n        pathname: '/sqllab',\n        state: {\n          requestedQuery: payload\n        }\n      });\n    }\n  };\n  const openSQL = (openInNewWindow) => {\n    const { datasource } = props;\n    if (_isObject(datasource)) {\n      const { id, type, sql } = datasource;\n      viewInSQLLab(openInNewWindow, id, type, sql);\n    }\n  };\n  return _jsxs(\"div\", { children: [\n    _jsx(Button, { onClick: () => {\n        props == null ? void 0 : props.closeModal == null ? void 0 : props.closeModal();\n        props == null ? void 0 : props.changeDatasource == null ? void 0 : props.changeDatasource();\n      }, children:\n      SAVE_AS_DATASET }\n    ),\n    _jsx(Button, { onClick: ({ metaKey }) => openSQL(Boolean(metaKey)), children:\n      OPEN_IN_SQL_LAB }\n    ),\n    _jsx(Button, { buttonStyle: \"primary\", onClick: () => {\n        props == null ? void 0 : props.closeModal == null ? void 0 : props.closeModal();\n      }, children:\n      CLOSE }\n    )] }\n  );\n};__signature__(ViewQueryModalFooter, \"useHistory{history}\", () => [useHistory]);const _default =\nViewQueryModalFooter;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(CLOSE, \"CLOSE\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModalFooter.tsx\");reactHotLoader.register(SAVE_AS_DATASET, \"SAVE_AS_DATASET\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModalFooter.tsx\");reactHotLoader.register(OPEN_IN_SQL_LAB, \"OPEN_IN_SQL_LAB\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModalFooter.tsx\");reactHotLoader.register(ViewQueryModalFooter, \"ViewQueryModalFooter\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModalFooter.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/explore/components/controls/ViewQueryModalFooter.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["t","SupersetClient","Button","useHistory","jsx","_jsx","jsxs","_jsxs","CLOSE","SAVE_AS_DATASET","OPEN_IN_SQL_LAB","ViewQueryModalFooter","props","history","viewInSQLLab","openInNewWindow","id","type","sql","payload","datasourceKey","postForm","push","pathname","state","requestedQuery","openSQL","datasource","_isObject","children","onClick","closeModal","changeDatasource","metaKey","Boolean","buttonStyle","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/explore/components/controls/ViewQueryModalFooter.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FC } from 'react';\nimport { isObject } from 'lodash';\nimport { t, SupersetClient } from '@superset-ui/core';\nimport Button from 'src/components/Button';\nimport { useHistory } from 'react-router-dom';\n\ninterface SimpleDataSource {\n  id: string;\n  sql: string;\n  type: string;\n}\n\ninterface ViewQueryModalFooterProps {\n  closeModal?: Function;\n  changeDatasource?: Function;\n  datasource?: SimpleDataSource;\n}\n\nconst CLOSE = t('Close');\nconst SAVE_AS_DATASET = t('Save as Dataset');\nconst OPEN_IN_SQL_LAB = t('Open in SQL Lab');\n\nconst ViewQueryModalFooter: FC<ViewQueryModalFooterProps> = (props: {\n  closeModal: () => void;\n  changeDatasource: () => void;\n  datasource: SimpleDataSource;\n}) => {\n  const history = useHistory();\n  const viewInSQLLab = (\n    openInNewWindow: boolean,\n    id: string,\n    type: string,\n    sql: string,\n  ) => {\n    const payload = {\n      datasourceKey: `${id}__${type}`,\n      sql,\n    };\n    if (openInNewWindow) {\n      SupersetClient.postForm('/sqllab/', payload);\n    } else {\n      history.push({\n        pathname: '/sqllab',\n        state: {\n          requestedQuery: payload,\n        },\n      });\n    }\n  };\n\n  const openSQL = (openInNewWindow: boolean) => {\n    const { datasource } = props;\n    if (isObject(datasource)) {\n      const { id, type, sql } = datasource;\n      viewInSQLLab(openInNewWindow, id, type, sql);\n    }\n  };\n  return (\n    <div>\n      <Button\n        onClick={() => {\n          props?.closeModal?.();\n          props?.changeDatasource?.();\n        }}\n      >\n        {SAVE_AS_DATASET}\n      </Button>\n      <Button onClick={({ metaKey }) => openSQL(Boolean(metaKey))}>\n        {OPEN_IN_SQL_LAB}\n      </Button>\n      <Button\n        buttonStyle=\"primary\"\n        onClick={() => {\n          props?.closeModal?.();\n        }}\n      >\n        {CLOSE}\n      </Button>\n    </div>\n  );\n};\n\nexport default ViewQueryModalFooter;\n"],"mappings":";AAoBA,SAASA,CAAC,EAAEC,cAAc,QAAQ,mBAAmB;AACrD,OAAOC,MAAM,MAAM,uBAAuB;AAC1C,SAASC,UAAU,QAAQ,kBAAkB,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAc9C,MAAMC,KAAK,GAAGR,CAAC,CAAC,OAAO,CAAC;AACxB,MAAMS,eAAe,GAAGT,CAAC,CAAC,iBAAiB,CAAC;AAC5C,MAAMU,eAAe,GAAGV,CAAC,CAAC,iBAAiB,CAAC;AAE5C,MAAMW,oBAAoB,GAAkCA,CAACC,KAI5D,KAAI;EACH,MAAMC,OAAO,GAAGV,UAAU,EAAE;EAC5B,MAAMW,YAAY,GAAGA,CACnBC,eAAwB,EACxBC,EAAU,EACVC,IAAY,EACZC,GAAW,KACT;IACF,MAAMC,OAAO,GAAG;MACdC,aAAa,EAAE,GAAGJ,EAAE,KAAKC,IAAI,EAAE;MAC/BC;KACD;IACD,IAAIH,eAAe,EAAE;MACnBd,cAAc,CAACoB,QAAQ,CAAC,UAAU,EAAEF,OAAO,CAAC;KAC7C;IAAM;MACLN,OAAO,CAACS,IAAI,CAAC;QACXC,QAAQ,EAAE,SAAS;QACnBC,KAAK,EAAE;UACLC,cAAc,EAAEN;;OAEnB,CAAC;;EAEN,CAAC;EAED,MAAMO,OAAO,GAAGA,CAACX,eAAwB,KAAI;IAC3C,MAAM,EAAEY,UAAU,EAAE,GAAGf,KAAK;IAC5B,IAAIgB,SAAA,CAASD,UAAU,CAAC,EAAE;MACxB,MAAM,EAAEX,EAAE,EAAEC,IAAI,EAAEC,GAAG,EAAE,GAAGS,UAAU;MACpCb,YAAY,CAACC,eAAe,EAAEC,EAAE,EAAEC,IAAI,EAAEC,GAAG,CAAC;;EAEhD,CAAC;EACD,OACEX,KAAA,UAAAsB,QAAA;IACExB,IAAA,CAACH,MAAM,IACL4B,OAAO,EAAEA,CAAA,KAAK;QACZlB,KAAK,oBAALA,KAAK,CAAEmB,UAAU,oBAAjBnB,KAAK,CAAEmB,UAAU,CAAE,CAAE;QACrBnB,KAAK,oBAALA,KAAK,CAAEoB,gBAAgB,oBAAvBpB,KAAK,CAAEoB,gBAAgB,CAAE,CAAE;MAC7B,CAAE,EAAAH,QAAA;MAEDpB,eAAe;IACV,CACR;IAAAJ,IAAA,CAACH,MAAM,IAAC4B,OAAO,EAAEA,CAAC,EAAEG,OAAO,EAAE,KAAKP,OAAO,CAACQ,OAAO,CAACD,OAAO,CAAC,CAAE,EAAAJ,QAAA;MACzDnB,eAAe;IACV,CACR;IAAAL,IAAA,CAACH,MAAM,IACLiC,WAAW,EAAC,SAAS,EACrBL,OAAO,EAAEA,CAAA,KAAK;QACZlB,KAAK,oBAALA,KAAK,CAAEmB,UAAU,oBAAjBnB,KAAK,CAAEmB,UAAU,CAAE,CAAE;MACvB,CAAE,EAAAF,QAAA;MAEDrB,KAAK;IACA,CACV;EAAK,CAAC;AAEV,CAAC,CAAC4B,aAAA,CA1DIzB,oBAAoB,gCAKRR,UAAU,SAAAkC,QAAA;AAuDb1B,oBAAoB,CAAnC,eAAA0B,QAAA,CAAoC,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAhE9BlC,KAAK,8FAAA8B,cAAA,CAAAI,QAAA,CACLjC,eAAe,wGAAA6B,cAAA,CAAAI,QAAA,CACfhC,eAAe,wGAAA4B,cAAA,CAAAI,QAAA,CAEf/B,oBAAoB,6GAAA2B,cAAA,CAAAI,QAAA,CAAAL,QAAA,wHAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}