{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\n  getSectionContainerElement } from\n'../ControlPopover/ControlPopover';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => _jsx(\"div\", { style: { width: 450, height: 368 } })\n);\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func\n};\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {}\n};\n\nclass AnnotationLayerControl extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError)\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (annotations.includes(originalAnnotation)) {\n      annotations = annotations.map((anno) =>\n      anno === originalAnnotation ? newAnnotation : anno\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true\n    });\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState((prevState) => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible }\n    }));\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter((anno) => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = (annotation == null ? void 0 : annotation.name) || '_new';\n\n    return (\n      _jsx(\"div\", { id: `annotation-pop-${id}`, \"data-test\": \"popover-content\", children:\n        _jsx(AnnotationLayer, { ...\n          annotation,\n          error: error,\n          colorScheme: this.props.colorScheme,\n          vizType: this.props.vizType,\n          addAnnotationLayer: (newAnnotation) =>\n          this.addAnnotationLayer(annotation, newAnnotation),\n\n          removeAnnotationLayer: () => this.removeAnnotationLayer(annotation),\n          close: () => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          } }\n        ) }\n      ));\n\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        _jsx(\"i\", {\n          className: \"fa fa-refresh\",\n          style: { color: theme.colors.primary.base },\n          \"aria-hidden\": true }\n        ));\n\n    }\n    if (annotationError[anno.name]) {\n      return (\n        _jsx(InfoTooltipWithTrigger, {\n          label: \"validation-errors\",\n          bsStyle: \"danger\",\n          tooltip: annotationError[anno.name] }\n        ));\n\n    }\n    if (!anno.show) {\n      return _jsx(\"span\", { style: { color: theme.colors.error.base }, children: \" Hidden \" });\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) =>\n    _jsx(ControlPopover, {\n\n      trigger: \"click\",\n      title: t('Edit annotation layer'),\n      css: (theme) => ({\n        '&:hover': {\n          cursor: 'pointer',\n          backgroundColor: theme.colors.grayscale.light4\n        }\n      }),\n      content: this.renderPopover(\n        i,\n        anno,\n        this.props.annotationError[anno.name]\n      ),\n      visible: this.state.popoverVisible[i],\n      onVisibleChange: (visible) => this.handleVisibleChange(visible, i), children:\n\n      _jsxs(CustomListItem, { selectable: true, children: [\n        _jsx(\"span\", { children: anno.name }),\n        _jsx(\"span\", { style: { float: 'right' }, children: this.renderInfo(anno) })] }\n      ) }, i\n    )\n    );\n\n    const addLayerPopoverKey = 'add';\n    return (\n      _jsx(\"div\", { children:\n        _jsxs(List, { bordered: true, css: (theme) => ({ borderRadius: theme.gridUnit }), children: [\n          annotations,\n          _jsx(ControlPopover, {\n            trigger: \"click\",\n            content: this.renderPopover(addLayerPopoverKey, addedAnnotation),\n            title: t('Add annotation layer'),\n            visible: this.state.popoverVisible[addLayerPopoverKey],\n            destroyTooltipOnHide: true,\n            onVisibleChange: (visible) =>\n            this.handleVisibleChange(visible, addLayerPopoverKey), children:\n\n\n            _jsxs(CustomListItem, { selectable: true, children: [\n              _jsx(\"i\", {\n                \"data-test\": \"add-annotation-layer-button\",\n                className: \"fa fa-plus\" }\n              ), ' ', \"\\xA0 \",\n              t('Add annotation layer')] }\n            ) }\n          )] }\n        ) }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({ charts, explore }) {var _explore$controls, _explore$controls$col;\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: (_explore$controls = explore.controls) == null ? void 0 : (_explore$controls$col = _explore$controls.color_scheme) == null ? void 0 : _explore$controls$col.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: (annotationObj) =>\n    dispatch(runAnnotationQuery(annotationObj))\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);const _default =\n\nconnect(\n  mapStateToProps,\n  mapDispatchToProps\n)(themedAnnotationLayerControl);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(AnnotationLayer, \"AnnotationLayer\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(AnnotationLayerControl, \"AnnotationLayerControl\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(themedAnnotationLayerControl, \"themedAnnotationLayerControl\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["PureComponent","PropTypes","List","connect","t","withTheme","InfoTooltipWithTrigger","AsyncEsmComponent","getChartKey","runAnnotationQuery","CustomListItem","ControlPopover","getSectionContainerElement","jsx","_jsx","jsxs","_jsxs","AnnotationLayer","style","width","height","propTypes","colorScheme","string","isRequired","annotationError","object","annotationQuery","vizType","validationErrors","array","name","actions","value","arrayOf","onChange","func","refreshAnnotationData","defaultProps","AnnotationLayerControl","constructor","props","state","popoverVisible","addedAnnotationIndex","addAnnotationLayer","bind","removeAnnotationLayer","handleVisibleChange","componentDidMount","preload","UNSAFE_componentWillReceiveProps","nextProps","Object","keys","length","setControlValue","originalAnnotation","newAnnotation","annotations","includes","map","anno","setState","annotation","force","visible","popoverKey","prevState","filter","element","setProperty","renderPopover","error","id","children","close","renderInfo","theme","className","color","colors","primary","base","label","bsStyle","tooltip","show","render","addedAnnotation","i","trigger","title","css","cursor","backgroundColor","grayscale","light4","content","onVisibleChange","selectable","float","addLayerPopoverKey","bordered","borderRadius","gridUnit","destroyTooltipOnHide","__reactstandin__regenerateByEval","key","code","eval","mapStateToProps","charts","explore","_explore$controls","_explore$controls$col","chartKey","chart","controls","color_scheme","viz_type","mapDispatchToProps","dispatch","annotationObj","themedAnnotationLayerControl","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/explore/components/controls/AnnotationLayerControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'src/components';\nimport { connect } from 'react-redux';\nimport { t, withTheme } from '@superset-ui/core';\nimport { InfoTooltipWithTrigger } from '@superset-ui/chart-controls';\nimport AsyncEsmComponent from 'src/components/AsyncEsmComponent';\nimport { getChartKey } from 'src/explore/exploreUtils';\nimport { runAnnotationQuery } from 'src/components/Chart/chartAction';\nimport CustomListItem from 'src/explore/components/controls/CustomListItem';\nimport ControlPopover, {\n  getSectionContainerElement,\n} from '../ControlPopover/ControlPopover';\n\nconst AnnotationLayer = AsyncEsmComponent(\n  () => import('./AnnotationLayer'),\n  // size of overlay inner content\n  () => <div style={{ width: 450, height: 368 }} />,\n);\n\nconst propTypes = {\n  colorScheme: PropTypes.string.isRequired,\n  annotationError: PropTypes.object,\n  annotationQuery: PropTypes.object,\n  vizType: PropTypes.string,\n\n  validationErrors: PropTypes.array,\n  name: PropTypes.string.isRequired,\n  actions: PropTypes.object,\n  value: PropTypes.arrayOf(PropTypes.object),\n  onChange: PropTypes.func,\n  refreshAnnotationData: PropTypes.func,\n};\n\nconst defaultProps = {\n  vizType: '',\n  value: [],\n  annotationError: {},\n  annotationQuery: {},\n  onChange: () => {},\n};\n\nclass AnnotationLayerControl extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      popoverVisible: {},\n      addedAnnotationIndex: null,\n    };\n    this.addAnnotationLayer = this.addAnnotationLayer.bind(this);\n    this.removeAnnotationLayer = this.removeAnnotationLayer.bind(this);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n  }\n\n  componentDidMount() {\n    // preload the AnnotationLayer component and dependent libraries i.e. mathjs\n    AnnotationLayer.preload();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const { name, annotationError, validationErrors, value } = nextProps;\n    if (Object.keys(annotationError).length && !validationErrors.length) {\n      this.props.actions.setControlValue(\n        name,\n        value,\n        Object.keys(annotationError),\n      );\n    }\n    if (!Object.keys(annotationError).length && validationErrors.length) {\n      this.props.actions.setControlValue(name, value, []);\n    }\n  }\n\n  addAnnotationLayer(originalAnnotation, newAnnotation) {\n    let annotations = this.props.value;\n    if (annotations.includes(originalAnnotation)) {\n      annotations = annotations.map(anno =>\n        anno === originalAnnotation ? newAnnotation : anno,\n      );\n    } else {\n      annotations = [...annotations, newAnnotation];\n      this.setState({ addedAnnotationIndex: annotations.length - 1 });\n    }\n\n    this.props.refreshAnnotationData({\n      annotation: newAnnotation,\n      force: true,\n    });\n\n    this.props.onChange(annotations);\n  }\n\n  handleVisibleChange(visible, popoverKey) {\n    this.setState(prevState => ({\n      popoverVisible: { ...prevState.popoverVisible, [popoverKey]: visible },\n    }));\n  }\n\n  removeAnnotationLayer(annotation) {\n    const annotations = this.props.value.filter(anno => anno !== annotation);\n    // So scrollbar doesnt get stuck on hidden\n    const element = getSectionContainerElement();\n    if (element) {\n      element.style.setProperty('overflow-y', 'auto', 'important');\n    }\n    this.props.onChange(annotations);\n  }\n\n  renderPopover(popoverKey, annotation, error) {\n    const id = annotation?.name || '_new';\n\n    return (\n      <div id={`annotation-pop-${id}`} data-test=\"popover-content\">\n        <AnnotationLayer\n          {...annotation}\n          error={error}\n          colorScheme={this.props.colorScheme}\n          vizType={this.props.vizType}\n          addAnnotationLayer={newAnnotation =>\n            this.addAnnotationLayer(annotation, newAnnotation)\n          }\n          removeAnnotationLayer={() => this.removeAnnotationLayer(annotation)}\n          close={() => {\n            this.handleVisibleChange(false, popoverKey);\n            this.setState({ addedAnnotationIndex: null });\n          }}\n        />\n      </div>\n    );\n  }\n\n  renderInfo(anno) {\n    const { annotationError, annotationQuery, theme } = this.props;\n    if (annotationQuery[anno.name]) {\n      return (\n        <i\n          className=\"fa fa-refresh\"\n          style={{ color: theme.colors.primary.base }}\n          aria-hidden\n        />\n      );\n    }\n    if (annotationError[anno.name]) {\n      return (\n        <InfoTooltipWithTrigger\n          label=\"validation-errors\"\n          bsStyle=\"danger\"\n          tooltip={annotationError[anno.name]}\n        />\n      );\n    }\n    if (!anno.show) {\n      return <span style={{ color: theme.colors.error.base }}> Hidden </span>;\n    }\n    return '';\n  }\n\n  render() {\n    const { addedAnnotationIndex } = this.state;\n    const addedAnnotation = this.props.value[addedAnnotationIndex];\n\n    const annotations = this.props.value.map((anno, i) => (\n      <ControlPopover\n        key={i}\n        trigger=\"click\"\n        title={t('Edit annotation layer')}\n        css={theme => ({\n          '&:hover': {\n            cursor: 'pointer',\n            backgroundColor: theme.colors.grayscale.light4,\n          },\n        })}\n        content={this.renderPopover(\n          i,\n          anno,\n          this.props.annotationError[anno.name],\n        )}\n        visible={this.state.popoverVisible[i]}\n        onVisibleChange={visible => this.handleVisibleChange(visible, i)}\n      >\n        <CustomListItem selectable>\n          <span>{anno.name}</span>\n          <span style={{ float: 'right' }}>{this.renderInfo(anno)}</span>\n        </CustomListItem>\n      </ControlPopover>\n    ));\n\n    const addLayerPopoverKey = 'add';\n    return (\n      <div>\n        <List bordered css={theme => ({ borderRadius: theme.gridUnit })}>\n          {annotations}\n          <ControlPopover\n            trigger=\"click\"\n            content={this.renderPopover(addLayerPopoverKey, addedAnnotation)}\n            title={t('Add annotation layer')}\n            visible={this.state.popoverVisible[addLayerPopoverKey]}\n            destroyTooltipOnHide\n            onVisibleChange={visible =>\n              this.handleVisibleChange(visible, addLayerPopoverKey)\n            }\n          >\n            <CustomListItem selectable>\n              <i\n                data-test=\"add-annotation-layer-button\"\n                className=\"fa fa-plus\"\n              />{' '}\n              &nbsp; {t('Add annotation layer')}\n            </CustomListItem>\n          </ControlPopover>\n        </List>\n      </div>\n    );\n  }\n}\n\nAnnotationLayerControl.propTypes = propTypes;\nAnnotationLayerControl.defaultProps = defaultProps;\n\n// Tried to hook this up through stores/control.jsx instead of using redux\n// directly, could not figure out how to get access to the color_scheme\nfunction mapStateToProps({ charts, explore }) {\n  const chartKey = getChartKey(explore);\n  const chart = charts[chartKey] || charts[0] || {};\n\n  return {\n    // eslint-disable-next-line camelcase\n    colorScheme: explore.controls?.color_scheme?.value,\n    annotationError: chart.annotationError,\n    annotationQuery: chart.annotationQuery,\n    vizType: explore.controls.viz_type.value,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    refreshAnnotationData: annotationObj =>\n      dispatch(runAnnotationQuery(annotationObj)),\n  };\n}\n\nconst themedAnnotationLayerControl = withTheme(AnnotationLayerControl);\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(themedAnnotationLayerControl);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}