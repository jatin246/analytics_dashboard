{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { Histogram, BarSeries, XAxis, YAxis } from '@data-ui/histogram';\nimport { chartTheme } from '@data-ui/theme';\nimport { LegendOrdinal } from '@vx/legend';\nimport { scaleOrdinal } from '@vx/scale';\nimport { CategoricalColorNamespace, styled, t } from '@superset-ui/core';\nimport WithLegend from './WithLegend';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n\nconst propTypes = {\n  className: PropTypes.string,\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.string,\n      values: PropTypes.arrayOf(PropTypes.number)\n    })\n  ).isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  colorScheme: PropTypes.string,\n  normalized: PropTypes.bool,\n  cumulative: PropTypes.bool,\n  binCount: PropTypes.number,\n  opacity: PropTypes.number,\n  xAxisLabel: PropTypes.string,\n  yAxisLabel: PropTypes.string,\n  showLegend: PropTypes.bool\n};\nconst defaultProps = {\n  binCount: 15,\n  className: '',\n  colorScheme: '',\n  normalized: false,\n  cumulative: false,\n  opacity: 1,\n  xAxisLabel: '',\n  yAxisLabel: ''\n};\n\nclass CustomHistogram extends PureComponent {\n  render() {\n    const {\n      className,\n      data,\n      width,\n      height,\n      binCount,\n      colorScheme,\n      normalized,\n      cumulative,\n      opacity,\n      xAxisLabel,\n      yAxisLabel,\n      showLegend,\n      sliceId\n    } = this.props;\n\n    const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n    const keys = data.map((d) => d.key);\n    const colorScale = scaleOrdinal({\n      domain: keys,\n      range: keys.map((x) => colorFn(x, sliceId, colorScheme))\n    });\n\n    return (\n      _jsx(WithLegend, {\n        className: `superset-legacy-chart-histogram ${className}`,\n        width: width,\n        height: height,\n        position: \"top\",\n        renderLegend: ({ direction, style }) =>\n        showLegend &&\n        _jsx(LegendOrdinal, {\n          style: style,\n          scale: colorScale,\n          direction: direction,\n          shape: \"rect\",\n          labelMargin: \"0 15px 0 0\" }\n        ),\n\n\n        renderChart: (parent) =>\n        _jsxs(Histogram, {\n          width: parent.width,\n          height: parent.height,\n          ariaLabel: \"Histogram\",\n          normalized: normalized,\n          cumulative: cumulative,\n          binCount: binCount,\n          binType: \"numeric\",\n          margin: { top: 20, right: 20 },\n          renderTooltip: ({ datum, color }) =>\n          _jsxs(\"div\", { children: [\n            _jsxs(\"strong\", { style: { color }, children: [\n              datum.bin0, \" \", t('to'), \" \", datum.bin1] }\n            ),\n            _jsxs(\"div\", { children: [\n              _jsxs(\"strong\", { children: [t('count'), \" \"] }),\n              datum.count] }\n            ),\n            _jsxs(\"div\", { children: [\n              _jsxs(\"strong\", { children: [t('cumulative'), \" \"] }),\n              datum.cumulative] }\n            ),\n            _jsxs(\"div\", { children: [\n              _jsxs(\"strong\", { children: [t('percentile (exclusive)'), \" \"] }),\n              `${(\n              (datum.cumulativeDensity - datum.density) *\n              100).\n              toPrecision(4)}th`] }\n            )] }\n          ),\n\n          valueAccessor: (datum) => datum,\n          theme: chartTheme, children: [\n\n          data.map((series) =>\n          _jsx(BarSeries, {\n\n            animated: true,\n            rawData: series.values,\n            fill: colorScale(series.key),\n            fillOpacity: opacity }, series.key\n          )\n          ),\n          _jsx(XAxis, { label: xAxisLabel }),\n          _jsx(YAxis, { label: yAxisLabel })] }\n        ) }\n\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nCustomHistogram.propTypes = propTypes;\nCustomHistogram.defaultProps = defaultProps;const _default =\n\nstyled(CustomHistogram)`\n  .superset-legacy-chart-histogram {\n    overflow: hidden;\n  }\n`;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/plugins/legacy-plugin-chart-histogram/src/Histogram.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/plugins/legacy-plugin-chart-histogram/src/Histogram.jsx\");reactHotLoader.register(CustomHistogram, \"CustomHistogram\", \"/app/superset-frontend/plugins/legacy-plugin-chart-histogram/src/Histogram.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/plugins/legacy-plugin-chart-histogram/src/Histogram.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["PropTypes","PureComponent","Histogram","BarSeries","XAxis","YAxis","chartTheme","LegendOrdinal","scaleOrdinal","CategoricalColorNamespace","styled","t","WithLegend","jsx","_jsx","jsxs","_jsxs","propTypes","className","string","data","arrayOf","shape","key","values","number","isRequired","width","height","colorScheme","normalized","bool","cumulative","binCount","opacity","xAxisLabel","yAxisLabel","showLegend","defaultProps","CustomHistogram","render","sliceId","props","colorFn","getScale","keys","map","d","colorScale","domain","range","x","position","renderLegend","direction","style","scale","labelMargin","renderChart","parent","ariaLabel","binType","margin","top","right","renderTooltip","datum","color","children","bin0","bin1","count","cumulativeDensity","density","toPrecision","valueAccessor","theme","series","animated","rawData","fill","fillOpacity","label","__reactstandin__regenerateByEval","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/plugins/legacy-plugin-chart-histogram/src/Histogram.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable react/sort-prop-types */\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { Histogram, BarSeries, XAxis, YAxis } from '@data-ui/histogram';\nimport { chartTheme } from '@data-ui/theme';\nimport { LegendOrdinal } from '@vx/legend';\nimport { scaleOrdinal } from '@vx/scale';\nimport { CategoricalColorNamespace, styled, t } from '@superset-ui/core';\nimport WithLegend from './WithLegend';\n\nconst propTypes = {\n  className: PropTypes.string,\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.string,\n      values: PropTypes.arrayOf(PropTypes.number),\n    }),\n  ).isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  colorScheme: PropTypes.string,\n  normalized: PropTypes.bool,\n  cumulative: PropTypes.bool,\n  binCount: PropTypes.number,\n  opacity: PropTypes.number,\n  xAxisLabel: PropTypes.string,\n  yAxisLabel: PropTypes.string,\n  showLegend: PropTypes.bool,\n};\nconst defaultProps = {\n  binCount: 15,\n  className: '',\n  colorScheme: '',\n  normalized: false,\n  cumulative: false,\n  opacity: 1,\n  xAxisLabel: '',\n  yAxisLabel: '',\n};\n\nclass CustomHistogram extends PureComponent {\n  render() {\n    const {\n      className,\n      data,\n      width,\n      height,\n      binCount,\n      colorScheme,\n      normalized,\n      cumulative,\n      opacity,\n      xAxisLabel,\n      yAxisLabel,\n      showLegend,\n      sliceId,\n    } = this.props;\n\n    const colorFn = CategoricalColorNamespace.getScale(colorScheme);\n    const keys = data.map(d => d.key);\n    const colorScale = scaleOrdinal({\n      domain: keys,\n      range: keys.map(x => colorFn(x, sliceId, colorScheme)),\n    });\n\n    return (\n      <WithLegend\n        className={`superset-legacy-chart-histogram ${className}`}\n        width={width}\n        height={height}\n        position=\"top\"\n        renderLegend={({ direction, style }) =>\n          showLegend && (\n            <LegendOrdinal\n              style={style}\n              scale={colorScale}\n              direction={direction}\n              shape=\"rect\"\n              labelMargin=\"0 15px 0 0\"\n            />\n          )\n        }\n        renderChart={parent => (\n          <Histogram\n            width={parent.width}\n            height={parent.height}\n            ariaLabel=\"Histogram\"\n            normalized={normalized}\n            cumulative={cumulative}\n            binCount={binCount}\n            binType=\"numeric\"\n            margin={{ top: 20, right: 20 }}\n            renderTooltip={({ datum, color }) => (\n              <div>\n                <strong style={{ color }}>\n                  {datum.bin0} {t('to')} {datum.bin1}\n                </strong>\n                <div>\n                  <strong>{t('count')} </strong>\n                  {datum.count}\n                </div>\n                <div>\n                  <strong>{t('cumulative')} </strong>\n                  {datum.cumulative}\n                </div>\n                <div>\n                  <strong>{t('percentile (exclusive)')} </strong>\n                  {`${(\n                    (datum.cumulativeDensity - datum.density) *\n                    100\n                  ).toPrecision(4)}th`}\n                </div>\n              </div>\n            )}\n            valueAccessor={datum => datum}\n            theme={chartTheme}\n          >\n            {data.map(series => (\n              <BarSeries\n                key={series.key}\n                animated\n                rawData={series.values}\n                fill={colorScale(series.key)}\n                fillOpacity={opacity}\n              />\n            ))}\n            <XAxis label={xAxisLabel} />\n            <YAxis label={yAxisLabel} />\n          </Histogram>\n        )}\n      />\n    );\n  }\n}\n\nCustomHistogram.propTypes = propTypes;\nCustomHistogram.defaultProps = defaultProps;\n\nexport default styled(CustomHistogram)`\n  .superset-legacy-chart-histogram {\n    overflow: hidden;\n  }\n`;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}