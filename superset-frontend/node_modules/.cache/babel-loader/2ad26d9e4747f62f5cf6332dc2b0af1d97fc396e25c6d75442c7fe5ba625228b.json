{"ast":null,"code":"import _isEqual from \"lodash/isEqual\";import _debounce from \"lodash/debounce\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport cx from 'classnames';\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t, logging } from '@superset-ui/core';\n\nimport { withRouter } from 'react-router-dom';\n\nimport { exportChart, mountExploreUrl } from 'src/explore/exploreUtils';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART,\n  LOG_ACTIONS_FORCE_REFRESH_CHART } from\n'src/logger/LogUtils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\n\nimport SliceHeader from '../SliceHeader';\nimport MissingChart from '../MissingChart';\nimport { slicePropShape, chartPropShape } from '../../util/propShapes';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n\nconst propTypes = {\n  id: PropTypes.number.isRequired,\n  componentId: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  updateSliceName: PropTypes.func.isRequired,\n  isComponentVisible: PropTypes.bool,\n  handleToggleFullSize: PropTypes.func.isRequired,\n  setControlValue: PropTypes.func,\n\n  // from redux\n  chart: chartPropShape.isRequired,\n  formData: PropTypes.object.isRequired,\n  labelsColor: PropTypes.object,\n  labelsColorMap: PropTypes.object,\n  datasource: PropTypes.object,\n  slice: slicePropShape.isRequired,\n  sliceName: PropTypes.string.isRequired,\n  timeout: PropTypes.number.isRequired,\n  maxRows: PropTypes.number.isRequired,\n  // all active filter fields in dashboard\n  filters: PropTypes.object.isRequired,\n  refreshChart: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  toggleExpandSlice: PropTypes.func.isRequired,\n  changeFilter: PropTypes.func.isRequired,\n  setFocusedFilterField: PropTypes.func.isRequired,\n  unsetFocusedFilterField: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  isExpanded: PropTypes.bool.isRequired,\n  isCached: PropTypes.bool,\n  supersetCanExplore: PropTypes.bool.isRequired,\n  supersetCanShare: PropTypes.bool.isRequired,\n  supersetCanCSV: PropTypes.bool.isRequired,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  ownState: PropTypes.object,\n  filterState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool\n};\n\nconst defaultProps = {\n  isCached: false,\n  isComponentVisible: true\n};\n\n// we use state + shouldComponentUpdate() logic to prevent perf-wrecking\n// resizing across all slices on a dashboard on every update\nconst RESIZE_TIMEOUT = 500;\nconst SHOULD_UPDATE_ON_PROP_CHANGES = Object.keys(propTypes).filter(\n  (prop) =>\n  prop !== 'width' && prop !== 'height' && prop !== 'isComponentVisible'\n);\nconst DEFAULT_HEADER_HEIGHT = 22;\n\nconst ChartWrapper = styled.div`\n  overflow: hidden;\n  position: relative;\n\n  &.dashboard-chart--overflowable {\n    overflow: visible;\n  }\n`;\n\nconst ChartOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n`;\n\nconst SliceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n`;\n\nclass Chart extends Component {\n  constructor(props) {\n    super(props);this.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    logExploreChart = () => {\n      this.props.logEvent(LOG_ACTIONS_EXPLORE_DASHBOARD_CHART, {\n        slice_id: this.props.slice.slice_id,\n        is_cached: this.props.isCached\n      });\n    };this.\n\n    onExploreChart = async (clickEvent) => {\n      const isOpenInNewTab =\n      clickEvent.shiftKey || clickEvent.ctrlKey || clickEvent.metaKey;\n      try {\n        const lastTabId = window.localStorage.getItem('last_tab_id');\n        const nextTabId = lastTabId ?\n        String(Number.parseInt(lastTabId, 10) + 1) :\n        undefined;\n        const key = await postFormData(\n          this.props.datasource.id,\n          this.props.datasource.type,\n          this.props.formData,\n          this.props.slice.slice_id,\n          nextTabId\n        );\n        const url = mountExploreUrl(null, {\n          [URL_PARAMS.formDataKey.name]: key,\n          [URL_PARAMS.sliceId.name]: this.props.slice.slice_id\n        });\n        if (isOpenInNewTab) {\n          window.open(url, '_blank', 'noreferrer');\n        } else {\n          this.props.history.push(url);\n        }\n      } catch (error) {\n        logging.error(error);\n        this.props.addDangerToast(t('An error occurred while opening Explore'));\n      }\n    };this.state = { width: props.width, height: props.height, descriptionHeight: 0 };this.changeFilter = this.changeFilter.bind(this);this.handleFilterMenuOpen = this.handleFilterMenuOpen.bind(this);this.handleFilterMenuClose = this.handleFilterMenuClose.bind(this);this.exportCSV = this.exportCSV.bind(this);this.exportPivotCSV = this.exportPivotCSV.bind(this);this.exportFullCSV = this.exportFullCSV.bind(this);this.exportXLSX = this.exportXLSX.bind(this);this.exportFullXLSX = this.exportFullXLSX.bind(this);this.forceRefresh = this.forceRefresh.bind(this);this.resize = _debounce(this.resize.bind(this), RESIZE_TIMEOUT);this.setDescriptionRef = this.setDescriptionRef.bind(this);this.setHeaderRef = this.setHeaderRef.bind(this);this.getChartHeight = this.getChartHeight.bind(this);this.getDescriptionHeight = this.getDescriptionHeight.bind(this);}shouldComponentUpdate(nextProps, nextState) {var _this$props, _this$props$chart, _nextProps$chart, _this$props2, _this$props2$chart, _nextProps$formData, _this$props$formData, _nextProps$formData2, _this$props$formData2; // this logic mostly pertains to chart resizing. we keep a copy of the dimensions in\n    // state so that we can buffer component size updates and only update on the final call\n    // which improves performance significantly\n    if (nextState.width !== this.state.width || nextState.height !== this.state.height || nextState.descriptionHeight !== this.state.descriptionHeight || !_isEqual(nextProps.datasource, this.props.datasource)) {return true;} // allow chart to update if the status changed and the previous status was loading.\n    if (((_this$props = this.props) == null ? void 0 : (_this$props$chart = _this$props.chart) == null ? void 0 : _this$props$chart.chartStatus) !== (nextProps == null ? void 0 : (_nextProps$chart = nextProps.chart) == null ? void 0 : _nextProps$chart.chartStatus) && ((_this$props2 = this.props) == null ? void 0 : (_this$props2$chart = _this$props2.chart) == null ? void 0 : _this$props2$chart.chartStatus) === 'loading') {return true;} // allow chart update/re-render only if visible:\n    // under selected tab or no tab layout\n    if (nextProps.isComponentVisible) {if (nextProps.chart.triggerQuery) {return true;}if (nextProps.isFullSize !== this.props.isFullSize) {this.resize();return false;}if (nextProps.width !== this.props.width || nextProps.height !== this.props.height || nextProps.width !== this.state.width || nextProps.height !== this.state.height) {this.resize();}for (let i = 0; i < SHOULD_UPDATE_ON_PROP_CHANGES.length; i += 1) {const prop = SHOULD_UPDATE_ON_PROP_CHANGES[i]; // use deep objects equality comparison to prevent\n        // unnecessary updates when objects references change\n        if (!areObjectsEqual(nextProps[prop], this.props[prop])) {return true;}}} else if ( // chart should re-render if color scheme or label color was changed\n    ((_nextProps$formData = nextProps.formData) == null ? void 0 : _nextProps$formData.color_scheme) !== ((_this$props$formData = this.props.formData) == null ? void 0 : _this$props$formData.color_scheme) || !areObjectsEqual((_nextProps$formData2 = nextProps.formData) == null ? void 0 : _nextProps$formData2.label_colors, (_this$props$formData2 = this.props.formData) == null ? void 0 : _this$props$formData2.label_colors)) {return true;} // `cacheBusterProp` is jected by react-hot-loader\n    return this.props.cacheBusterProp !== nextProps.cacheBusterProp;}componentDidMount() {if (this.props.isExpanded) {const descriptionHeight = this.getDescriptionHeight();this.setState({ descriptionHeight });}}componentWillUnmount() {this.resize.cancel();}componentDidUpdate(prevProps) {if (this.props.isExpanded !== prevProps.isExpanded) {const descriptionHeight = this.getDescriptionHeight(); // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ descriptionHeight });}}getDescriptionHeight() {return this.props.isExpanded && this.descriptionRef ? this.descriptionRef.offsetHeight : 0;}getChartHeight() {const headerHeight = this.getHeaderHeight();return Math.max(this.state.height - headerHeight - this.state.descriptionHeight, 20);}getHeaderHeight() {if (this.headerRef) {const computedStyle = getComputedStyle(this.headerRef).getPropertyValue('margin-bottom');const marginBottom = parseInt(computedStyle, 10) || 0;return this.headerRef.offsetHeight + marginBottom;}return DEFAULT_HEADER_HEIGHT;}setDescriptionRef(ref) {this.descriptionRef = ref;}setHeaderRef(ref) {this.headerRef = ref;}resize() {const { width, height } = this.props;this.setState(() => ({ width, height }));}changeFilter(newSelectedValues = {}) {this.props.logEvent(LOG_ACTIONS_CHANGE_DASHBOARD_FILTER, { id: this.props.chart.id, columns: Object.keys(newSelectedValues).filter((key) => newSelectedValues[key] !== null) });this.props.changeFilter(this.props.chart.id, newSelectedValues);}handleFilterMenuOpen(chartId, column) {this.props.setFocusedFilterField(chartId, column);}handleFilterMenuClose(chartId, column) {this.props.unsetFocusedFilterField(chartId, column);}exportFullCSV() {this.exportCSV(true);}exportCSV(isFullCSV = false) {this.exportTable('csv', isFullCSV);}exportPivotCSV() {this.exportTable('csv', false, true);\n  }\n\n  exportXLSX() {\n    this.exportTable('xlsx', false);\n  }\n\n  exportFullXLSX() {\n    this.exportTable('xlsx', true);\n  }\n\n  exportTable(format, isFullCSV, isPivot = false) {\n    const logAction =\n    format === 'csv' ?\n    LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART :\n    LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART;\n    this.props.logEvent(logAction, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached\n    });\n    exportChart({\n      formData: isFullCSV ?\n      { ...this.props.formData, row_limit: this.props.maxRows } :\n      this.props.formData,\n      resultType: isPivot ? 'post_processed' : 'full',\n      resultFormat: format,\n      force: true,\n      ownState: this.props.ownState\n    });\n  }\n\n  forceRefresh() {\n    this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached\n    });\n    return this.props.refreshChart(\n      this.props.chart.id,\n      true,\n      this.props.dashboardId\n    );\n  }\n\n  render() {\n    const {\n      id,\n      componentId,\n      dashboardId,\n      chart,\n      slice,\n      datasource,\n      isExpanded,\n      editMode,\n      filters,\n      formData,\n      labelsColor,\n      labelsColorMap,\n      updateSliceName,\n      sliceName,\n      toggleExpandSlice,\n      timeout,\n      supersetCanExplore,\n      supersetCanShare,\n      supersetCanCSV,\n      addSuccessToast,\n      addDangerToast,\n      ownState,\n      filterState,\n      handleToggleFullSize,\n      isFullSize,\n      setControlValue,\n      postTransformProps,\n      datasetsStatus,\n      isInView,\n      emitCrossFilters,\n      logEvent\n    } = this.props;\n\n    const { width } = this.state;\n    // this prevents throwing in the case that a gridComponent\n    // references a chart that is not associated with the dashboard\n    if (!chart || !slice) {\n      return _jsx(MissingChart, { height: this.getChartHeight() });\n    }\n\n    const { queriesResponse, chartUpdateEndTime, chartStatus } = chart;\n    const isLoading = chartStatus === 'loading';\n    // eslint-disable-next-line camelcase\n    const isCached = (queriesResponse == null ? void 0 : queriesResponse.map(({ is_cached }) => is_cached)) || [];\n    const cachedDttm =\n    // eslint-disable-next-line camelcase\n    (queriesResponse == null ? void 0 : queriesResponse.map(({ cached_dttm }) => cached_dttm)) || [];\n    const initialValues = {};\n\n    return (\n      _jsxs(SliceContainer, {\n        className: \"chart-slice\",\n        \"data-test\": \"chart-grid-component\",\n        \"data-test-chart-id\": id,\n        \"data-test-viz-type\": slice.viz_type,\n        \"data-test-chart-name\": slice.slice_name, children: [\n\n        _jsx(SliceHeader, {\n          innerRef: this.setHeaderRef,\n          slice: slice,\n          isExpanded: isExpanded,\n          isCached: isCached,\n          cachedDttm: cachedDttm,\n          updatedDttm: chartUpdateEndTime,\n          toggleExpandSlice: toggleExpandSlice,\n          forceRefresh: this.forceRefresh,\n          editMode: editMode,\n          annotationQuery: chart.annotationQuery,\n          logExploreChart: this.logExploreChart,\n          logEvent: logEvent,\n          onExploreChart: this.onExploreChart,\n          exportCSV: this.exportCSV,\n          exportPivotCSV: this.exportPivotCSV,\n          exportXLSX: this.exportXLSX,\n          exportFullCSV: this.exportFullCSV,\n          exportFullXLSX: this.exportFullXLSX,\n          updateSliceName: updateSliceName,\n          sliceName: sliceName,\n          supersetCanExplore: supersetCanExplore,\n          supersetCanShare: supersetCanShare,\n          supersetCanCSV: supersetCanCSV,\n          componentId: componentId,\n          dashboardId: dashboardId,\n          filters: filters,\n          addSuccessToast: addSuccessToast,\n          addDangerToast: addDangerToast,\n          handleToggleFullSize: handleToggleFullSize,\n          isFullSize: isFullSize,\n          chartStatus: chart.chartStatus,\n          formData: formData,\n          width: width,\n          height: this.getHeaderHeight() }\n        ),\n\n\n\n\n\n\n\n\n        isExpanded && slice.description_markeddown &&\n        _jsx(\"div\", {\n          className: \"slice_description bs-callout bs-callout-default\",\n          ref: this.setDescriptionRef\n          // eslint-disable-next-line react/no-danger\n          , dangerouslySetInnerHTML: { __html: slice.description_markeddown },\n          role: \"complementary\" }\n        ),\n\n\n        _jsxs(ChartWrapper, {\n          className: cx('dashboard-chart'),\n          \"aria-label\": slice.description, children: [\n\n          isLoading &&\n          _jsx(ChartOverlay, {\n            style: {\n              width,\n              height: this.getChartHeight()\n            } }\n          ),\n\n\n          _jsx(ChartContainer, {\n            width: width,\n            height: this.getChartHeight(),\n            addFilter: this.changeFilter,\n            onFilterMenuOpen: this.handleFilterMenuOpen,\n            onFilterMenuClose: this.handleFilterMenuClose,\n            annotationData: chart.annotationData,\n            chartAlert: chart.chartAlert,\n            chartId: id,\n            chartStatus: chartStatus,\n            datasource: datasource,\n            dashboardId: dashboardId,\n            initialValues: initialValues,\n            formData: formData,\n            labelsColor: labelsColor,\n            labelsColorMap: labelsColorMap,\n            ownState: ownState,\n            filterState: filterState,\n            queriesResponse: chart.queriesResponse,\n            timeout: timeout,\n            triggerQuery: chart.triggerQuery,\n            vizType: slice.viz_type,\n            setControlValue: setControlValue,\n            postTransformProps: postTransformProps,\n            datasetsStatus: datasetsStatus,\n            isInView: isInView,\n            emitCrossFilters: emitCrossFilters }\n          )] }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;const _default =\n\nwithRouter(Chart);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(RESIZE_TIMEOUT, \"RESIZE_TIMEOUT\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(SHOULD_UPDATE_ON_PROP_CHANGES, \"SHOULD_UPDATE_ON_PROP_CHANGES\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(DEFAULT_HEADER_HEIGHT, \"DEFAULT_HEADER_HEIGHT\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(ChartWrapper, \"ChartWrapper\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(ChartOverlay, \"ChartOverlay\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(SliceContainer, \"SliceContainer\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(Chart, \"Chart\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["cx","Component","PropTypes","styled","t","logging","withRouter","exportChart","mountExploreUrl","ChartContainer","LOG_ACTIONS_CHANGE_DASHBOARD_FILTER","LOG_ACTIONS_EXPLORE_DASHBOARD_CHART","LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART","LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART","LOG_ACTIONS_FORCE_REFRESH_CHART","areObjectsEqual","postFormData","URL_PARAMS","SliceHeader","MissingChart","slicePropShape","chartPropShape","jsx","_jsx","jsxs","_jsxs","propTypes","id","number","isRequired","componentId","string","dashboardId","width","height","updateSliceName","func","isComponentVisible","bool","handleToggleFullSize","setControlValue","chart","formData","object","labelsColor","labelsColorMap","datasource","slice","sliceName","timeout","maxRows","filters","refreshChart","logEvent","toggleExpandSlice","changeFilter","setFocusedFilterField","unsetFocusedFilterField","editMode","isExpanded","isCached","supersetCanExplore","supersetCanShare","supersetCanCSV","addSuccessToast","addDangerToast","ownState","filterState","postTransformProps","datasetsStatus","oneOf","isInView","emitCrossFilters","defaultProps","RESIZE_TIMEOUT","SHOULD_UPDATE_ON_PROP_CHANGES","Object","keys","filter","prop","DEFAULT_HEADER_HEIGHT","ChartWrapper","div","ChartOverlay","SliceContainer","Chart","constructor","props","logExploreChart","slice_id","is_cached","onExploreChart","clickEvent","isOpenInNewTab","shiftKey","ctrlKey","metaKey","lastTabId","window","localStorage","getItem","nextTabId","String","Number","parseInt","undefined","key","type","url","formDataKey","name","sliceId","open","history","push","error","state","descriptionHeight","bind","handleFilterMenuOpen","handleFilterMenuClose","exportCSV","exportPivotCSV","exportFullCSV","exportXLSX","exportFullXLSX","forceRefresh","resize","_debounce","setDescriptionRef","setHeaderRef","getChartHeight","getDescriptionHeight","shouldComponentUpdate","nextProps","nextState","_this$props","_this$props$chart","_nextProps$chart","_this$props2","_this$props2$chart","_nextProps$formData","_this$props$formData","_nextProps$formData2","_this$props$formData2","_isEqual","chartStatus","triggerQuery","isFullSize","i","length","color_scheme","label_colors","cacheBusterProp","componentDidMount","setState","componentWillUnmount","cancel","componentDidUpdate","prevProps","descriptionRef","offsetHeight","headerHeight","getHeaderHeight","Math","max","headerRef","computedStyle","getComputedStyle","getPropertyValue","marginBottom","ref","newSelectedValues","columns","chartId","column","isFullCSV","exportTable","format","isPivot","logAction","row_limit","resultType","resultFormat","force","render","queriesResponse","chartUpdateEndTime","isLoading","map","cachedDttm","cached_dttm","initialValues","className","viz_type","slice_name","children","innerRef","updatedDttm","annotationQuery","description_markeddown","dangerouslySetInnerHTML","__html","role","description","style","addFilter","onFilterMenuOpen","onFilterMenuClose","annotationData","chartAlert","vizType","__reactstandin__regenerateByEval","code","eval","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/dashboard/components/gridComponents/Chart.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport cx from 'classnames';\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { styled, t, logging } from '@superset-ui/core';\nimport { debounce, isEqual } from 'lodash';\nimport { withRouter } from 'react-router-dom';\n\nimport { exportChart, mountExploreUrl } from 'src/explore/exploreUtils';\nimport ChartContainer from 'src/components/Chart/ChartContainer';\nimport {\n  LOG_ACTIONS_CHANGE_DASHBOARD_FILTER,\n  LOG_ACTIONS_EXPLORE_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART,\n  LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART,\n  LOG_ACTIONS_FORCE_REFRESH_CHART,\n} from 'src/logger/LogUtils';\nimport { areObjectsEqual } from 'src/reduxUtils';\nimport { postFormData } from 'src/explore/exploreUtils/formData';\nimport { URL_PARAMS } from 'src/constants';\n\nimport SliceHeader from '../SliceHeader';\nimport MissingChart from '../MissingChart';\nimport { slicePropShape, chartPropShape } from '../../util/propShapes';\n\nconst propTypes = {\n  id: PropTypes.number.isRequired,\n  componentId: PropTypes.string.isRequired,\n  dashboardId: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  updateSliceName: PropTypes.func.isRequired,\n  isComponentVisible: PropTypes.bool,\n  handleToggleFullSize: PropTypes.func.isRequired,\n  setControlValue: PropTypes.func,\n\n  // from redux\n  chart: chartPropShape.isRequired,\n  formData: PropTypes.object.isRequired,\n  labelsColor: PropTypes.object,\n  labelsColorMap: PropTypes.object,\n  datasource: PropTypes.object,\n  slice: slicePropShape.isRequired,\n  sliceName: PropTypes.string.isRequired,\n  timeout: PropTypes.number.isRequired,\n  maxRows: PropTypes.number.isRequired,\n  // all active filter fields in dashboard\n  filters: PropTypes.object.isRequired,\n  refreshChart: PropTypes.func.isRequired,\n  logEvent: PropTypes.func.isRequired,\n  toggleExpandSlice: PropTypes.func.isRequired,\n  changeFilter: PropTypes.func.isRequired,\n  setFocusedFilterField: PropTypes.func.isRequired,\n  unsetFocusedFilterField: PropTypes.func.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  isExpanded: PropTypes.bool.isRequired,\n  isCached: PropTypes.bool,\n  supersetCanExplore: PropTypes.bool.isRequired,\n  supersetCanShare: PropTypes.bool.isRequired,\n  supersetCanCSV: PropTypes.bool.isRequired,\n  addSuccessToast: PropTypes.func.isRequired,\n  addDangerToast: PropTypes.func.isRequired,\n  ownState: PropTypes.object,\n  filterState: PropTypes.object,\n  postTransformProps: PropTypes.func,\n  datasetsStatus: PropTypes.oneOf(['loading', 'error', 'complete']),\n  isInView: PropTypes.bool,\n  emitCrossFilters: PropTypes.bool,\n};\n\nconst defaultProps = {\n  isCached: false,\n  isComponentVisible: true,\n};\n\n// we use state + shouldComponentUpdate() logic to prevent perf-wrecking\n// resizing across all slices on a dashboard on every update\nconst RESIZE_TIMEOUT = 500;\nconst SHOULD_UPDATE_ON_PROP_CHANGES = Object.keys(propTypes).filter(\n  prop =>\n    prop !== 'width' && prop !== 'height' && prop !== 'isComponentVisible',\n);\nconst DEFAULT_HEADER_HEIGHT = 22;\n\nconst ChartWrapper = styled.div`\n  overflow: hidden;\n  position: relative;\n\n  &.dashboard-chart--overflowable {\n    overflow: visible;\n  }\n`;\n\nconst ChartOverlay = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n`;\n\nconst SliceContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-height: 100%;\n`;\n\nclass Chart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: props.width,\n      height: props.height,\n      descriptionHeight: 0,\n    };\n\n    this.changeFilter = this.changeFilter.bind(this);\n    this.handleFilterMenuOpen = this.handleFilterMenuOpen.bind(this);\n    this.handleFilterMenuClose = this.handleFilterMenuClose.bind(this);\n    this.exportCSV = this.exportCSV.bind(this);\n    this.exportPivotCSV = this.exportPivotCSV.bind(this);\n    this.exportFullCSV = this.exportFullCSV.bind(this);\n    this.exportXLSX = this.exportXLSX.bind(this);\n    this.exportFullXLSX = this.exportFullXLSX.bind(this);\n    this.forceRefresh = this.forceRefresh.bind(this);\n    this.resize = debounce(this.resize.bind(this), RESIZE_TIMEOUT);\n    this.setDescriptionRef = this.setDescriptionRef.bind(this);\n    this.setHeaderRef = this.setHeaderRef.bind(this);\n    this.getChartHeight = this.getChartHeight.bind(this);\n    this.getDescriptionHeight = this.getDescriptionHeight.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // this logic mostly pertains to chart resizing. we keep a copy of the dimensions in\n    // state so that we can buffer component size updates and only update on the final call\n    // which improves performance significantly\n    if (\n      nextState.width !== this.state.width ||\n      nextState.height !== this.state.height ||\n      nextState.descriptionHeight !== this.state.descriptionHeight ||\n      !isEqual(nextProps.datasource, this.props.datasource)\n    ) {\n      return true;\n    }\n\n    // allow chart to update if the status changed and the previous status was loading.\n    if (\n      this.props?.chart?.chartStatus !== nextProps?.chart?.chartStatus &&\n      this.props?.chart?.chartStatus === 'loading'\n    ) {\n      return true;\n    }\n\n    // allow chart update/re-render only if visible:\n    // under selected tab or no tab layout\n    if (nextProps.isComponentVisible) {\n      if (nextProps.chart.triggerQuery) {\n        return true;\n      }\n\n      if (nextProps.isFullSize !== this.props.isFullSize) {\n        this.resize();\n        return false;\n      }\n\n      if (\n        nextProps.width !== this.props.width ||\n        nextProps.height !== this.props.height ||\n        nextProps.width !== this.state.width ||\n        nextProps.height !== this.state.height\n      ) {\n        this.resize();\n      }\n\n      for (let i = 0; i < SHOULD_UPDATE_ON_PROP_CHANGES.length; i += 1) {\n        const prop = SHOULD_UPDATE_ON_PROP_CHANGES[i];\n        // use deep objects equality comparison to prevent\n        // unnecessary updates when objects references change\n        if (!areObjectsEqual(nextProps[prop], this.props[prop])) {\n          return true;\n        }\n      }\n    } else if (\n      // chart should re-render if color scheme or label color was changed\n      nextProps.formData?.color_scheme !== this.props.formData?.color_scheme ||\n      !areObjectsEqual(\n        nextProps.formData?.label_colors,\n        this.props.formData?.label_colors,\n      )\n    ) {\n      return true;\n    }\n\n    // `cacheBusterProp` is jected by react-hot-loader\n    return this.props.cacheBusterProp !== nextProps.cacheBusterProp;\n  }\n\n  componentDidMount() {\n    if (this.props.isExpanded) {\n      const descriptionHeight = this.getDescriptionHeight();\n      this.setState({ descriptionHeight });\n    }\n  }\n\n  componentWillUnmount() {\n    this.resize.cancel();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isExpanded !== prevProps.isExpanded) {\n      const descriptionHeight = this.getDescriptionHeight();\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState({ descriptionHeight });\n    }\n  }\n\n  getDescriptionHeight() {\n    return this.props.isExpanded && this.descriptionRef\n      ? this.descriptionRef.offsetHeight\n      : 0;\n  }\n\n  getChartHeight() {\n    const headerHeight = this.getHeaderHeight();\n    return Math.max(\n      this.state.height - headerHeight - this.state.descriptionHeight,\n      20,\n    );\n  }\n\n  getHeaderHeight() {\n    if (this.headerRef) {\n      const computedStyle = getComputedStyle(this.headerRef).getPropertyValue(\n        'margin-bottom',\n      );\n      const marginBottom = parseInt(computedStyle, 10) || 0;\n      return this.headerRef.offsetHeight + marginBottom;\n    }\n    return DEFAULT_HEADER_HEIGHT;\n  }\n\n  setDescriptionRef(ref) {\n    this.descriptionRef = ref;\n  }\n\n  setHeaderRef(ref) {\n    this.headerRef = ref;\n  }\n\n  resize() {\n    const { width, height } = this.props;\n    this.setState(() => ({ width, height }));\n  }\n\n  changeFilter(newSelectedValues = {}) {\n    this.props.logEvent(LOG_ACTIONS_CHANGE_DASHBOARD_FILTER, {\n      id: this.props.chart.id,\n      columns: Object.keys(newSelectedValues).filter(\n        key => newSelectedValues[key] !== null,\n      ),\n    });\n    this.props.changeFilter(this.props.chart.id, newSelectedValues);\n  }\n\n  handleFilterMenuOpen(chartId, column) {\n    this.props.setFocusedFilterField(chartId, column);\n  }\n\n  handleFilterMenuClose(chartId, column) {\n    this.props.unsetFocusedFilterField(chartId, column);\n  }\n\n  logExploreChart = () => {\n    this.props.logEvent(LOG_ACTIONS_EXPLORE_DASHBOARD_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n  };\n\n  onExploreChart = async clickEvent => {\n    const isOpenInNewTab =\n      clickEvent.shiftKey || clickEvent.ctrlKey || clickEvent.metaKey;\n    try {\n      const lastTabId = window.localStorage.getItem('last_tab_id');\n      const nextTabId = lastTabId\n        ? String(Number.parseInt(lastTabId, 10) + 1)\n        : undefined;\n      const key = await postFormData(\n        this.props.datasource.id,\n        this.props.datasource.type,\n        this.props.formData,\n        this.props.slice.slice_id,\n        nextTabId,\n      );\n      const url = mountExploreUrl(null, {\n        [URL_PARAMS.formDataKey.name]: key,\n        [URL_PARAMS.sliceId.name]: this.props.slice.slice_id,\n      });\n      if (isOpenInNewTab) {\n        window.open(url, '_blank', 'noreferrer');\n      } else {\n        this.props.history.push(url);\n      }\n    } catch (error) {\n      logging.error(error);\n      this.props.addDangerToast(t('An error occurred while opening Explore'));\n    }\n  };\n\n  exportFullCSV() {\n    this.exportCSV(true);\n  }\n\n  exportCSV(isFullCSV = false) {\n    this.exportTable('csv', isFullCSV);\n  }\n\n  exportPivotCSV() {\n    this.exportTable('csv', false, true);\n  }\n\n  exportXLSX() {\n    this.exportTable('xlsx', false);\n  }\n\n  exportFullXLSX() {\n    this.exportTable('xlsx', true);\n  }\n\n  exportTable(format, isFullCSV, isPivot = false) {\n    const logAction =\n      format === 'csv'\n        ? LOG_ACTIONS_EXPORT_CSV_DASHBOARD_CHART\n        : LOG_ACTIONS_EXPORT_XLSX_DASHBOARD_CHART;\n    this.props.logEvent(logAction, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n    exportChart({\n      formData: isFullCSV\n        ? { ...this.props.formData, row_limit: this.props.maxRows }\n        : this.props.formData,\n      resultType: isPivot ? 'post_processed' : 'full',\n      resultFormat: format,\n      force: true,\n      ownState: this.props.ownState,\n    });\n  }\n\n  forceRefresh() {\n    this.props.logEvent(LOG_ACTIONS_FORCE_REFRESH_CHART, {\n      slice_id: this.props.slice.slice_id,\n      is_cached: this.props.isCached,\n    });\n    return this.props.refreshChart(\n      this.props.chart.id,\n      true,\n      this.props.dashboardId,\n    );\n  }\n\n  render() {\n    const {\n      id,\n      componentId,\n      dashboardId,\n      chart,\n      slice,\n      datasource,\n      isExpanded,\n      editMode,\n      filters,\n      formData,\n      labelsColor,\n      labelsColorMap,\n      updateSliceName,\n      sliceName,\n      toggleExpandSlice,\n      timeout,\n      supersetCanExplore,\n      supersetCanShare,\n      supersetCanCSV,\n      addSuccessToast,\n      addDangerToast,\n      ownState,\n      filterState,\n      handleToggleFullSize,\n      isFullSize,\n      setControlValue,\n      postTransformProps,\n      datasetsStatus,\n      isInView,\n      emitCrossFilters,\n      logEvent,\n    } = this.props;\n\n    const { width } = this.state;\n    // this prevents throwing in the case that a gridComponent\n    // references a chart that is not associated with the dashboard\n    if (!chart || !slice) {\n      return <MissingChart height={this.getChartHeight()} />;\n    }\n\n    const { queriesResponse, chartUpdateEndTime, chartStatus } = chart;\n    const isLoading = chartStatus === 'loading';\n    // eslint-disable-next-line camelcase\n    const isCached = queriesResponse?.map(({ is_cached }) => is_cached) || [];\n    const cachedDttm =\n      // eslint-disable-next-line camelcase\n      queriesResponse?.map(({ cached_dttm }) => cached_dttm) || [];\n    const initialValues = {};\n\n    return (\n      <SliceContainer\n        className=\"chart-slice\"\n        data-test=\"chart-grid-component\"\n        data-test-chart-id={id}\n        data-test-viz-type={slice.viz_type}\n        data-test-chart-name={slice.slice_name}\n      >\n        <SliceHeader\n          innerRef={this.setHeaderRef}\n          slice={slice}\n          isExpanded={isExpanded}\n          isCached={isCached}\n          cachedDttm={cachedDttm}\n          updatedDttm={chartUpdateEndTime}\n          toggleExpandSlice={toggleExpandSlice}\n          forceRefresh={this.forceRefresh}\n          editMode={editMode}\n          annotationQuery={chart.annotationQuery}\n          logExploreChart={this.logExploreChart}\n          logEvent={logEvent}\n          onExploreChart={this.onExploreChart}\n          exportCSV={this.exportCSV}\n          exportPivotCSV={this.exportPivotCSV}\n          exportXLSX={this.exportXLSX}\n          exportFullCSV={this.exportFullCSV}\n          exportFullXLSX={this.exportFullXLSX}\n          updateSliceName={updateSliceName}\n          sliceName={sliceName}\n          supersetCanExplore={supersetCanExplore}\n          supersetCanShare={supersetCanShare}\n          supersetCanCSV={supersetCanCSV}\n          componentId={componentId}\n          dashboardId={dashboardId}\n          filters={filters}\n          addSuccessToast={addSuccessToast}\n          addDangerToast={addDangerToast}\n          handleToggleFullSize={handleToggleFullSize}\n          isFullSize={isFullSize}\n          chartStatus={chart.chartStatus}\n          formData={formData}\n          width={width}\n          height={this.getHeaderHeight()}\n        />\n\n        {/*\n          This usage of dangerouslySetInnerHTML is safe since it is being used to render\n          markdown that is sanitized with nh3. See:\n             https://github.com/apache/superset/pull/4390\n          and\n             https://github.com/apache/superset/pull/23862\n        */}\n        {isExpanded && slice.description_markeddown && (\n          <div\n            className=\"slice_description bs-callout bs-callout-default\"\n            ref={this.setDescriptionRef}\n            // eslint-disable-next-line react/no-danger\n            dangerouslySetInnerHTML={{ __html: slice.description_markeddown }}\n            role=\"complementary\"\n          />\n        )}\n\n        <ChartWrapper\n          className={cx('dashboard-chart')}\n          aria-label={slice.description}\n        >\n          {isLoading && (\n            <ChartOverlay\n              style={{\n                width,\n                height: this.getChartHeight(),\n              }}\n            />\n          )}\n\n          <ChartContainer\n            width={width}\n            height={this.getChartHeight()}\n            addFilter={this.changeFilter}\n            onFilterMenuOpen={this.handleFilterMenuOpen}\n            onFilterMenuClose={this.handleFilterMenuClose}\n            annotationData={chart.annotationData}\n            chartAlert={chart.chartAlert}\n            chartId={id}\n            chartStatus={chartStatus}\n            datasource={datasource}\n            dashboardId={dashboardId}\n            initialValues={initialValues}\n            formData={formData}\n            labelsColor={labelsColor}\n            labelsColorMap={labelsColorMap}\n            ownState={ownState}\n            filterState={filterState}\n            queriesResponse={chart.queriesResponse}\n            timeout={timeout}\n            triggerQuery={chart.triggerQuery}\n            vizType={slice.viz_type}\n            setControlValue={setControlValue}\n            postTransformProps={postTransformProps}\n            datasetsStatus={datasetsStatus}\n            isInView={isInView}\n            emitCrossFilters={emitCrossFilters}\n          />\n        </ChartWrapper>\n      </SliceContainer>\n    );\n  }\n}\n\nChart.propTypes = propTypes;\nChart.defaultProps = defaultProps;\n\nexport default withRouter(Chart);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}