{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { t, SupersetClient, makeApi, styled, getExtensionsRegistry } from '@superset-ui/core';\nimport moment from 'moment';\nimport ActionsBar from 'src/components/ListView/ActionsBar';\nimport FacePile from 'src/components/FacePile';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ListView, { FilterOperator } from 'src/components/ListView';\nimport SubMenu from 'src/features/home/SubMenu';\nimport { Switch } from 'src/components/Switch';\nimport { DATETIME_WITH_TIME_ZONE } from 'src/constants';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport AlertStatusIcon from 'src/features/alerts/components/AlertStatusIcon';\nimport RecipientIcon from 'src/features/alerts/components/RecipientIcon';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport DeleteModal from 'src/components/DeleteModal';\nimport LastUpdated from 'src/components/LastUpdated';\nimport { useListViewResource, useSingleViewResource } from 'src/views/CRUD/hooks';\nimport { createErrorHandler, createFetchRelated } from 'src/views/CRUD/utils';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport AlertReportModal from 'src/features/alerts/AlertReportModal';\nimport { AlertState } from 'src/features/alerts/types';\nimport { ModifiedInfo } from 'src/components/AuditInfo';\nimport { QueryObjectColumns } from 'src/views/CRUD/types';import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst extensionsRegistry = getExtensionsRegistry();\nconst PAGE_SIZE = 25;\nconst AlertStateLabel = {\n  [AlertState.Success]: t('Success'),\n  [AlertState.Working]: t('Working'),\n  [AlertState.Error]: t('Error'),\n  [AlertState.Noop]: t('Not triggered'),\n  [AlertState.Grace]: t('On Grace')\n};\nconst deleteAlerts = makeApi({\n  requestType: 'rison',\n  method: 'DELETE',\n  endpoint: '/api/v1/report/'\n});\nconst RefreshContainer = styled.div`\n  width: 100%;\n  padding: 0 ${({ theme }) => theme.gridUnit * 4}px\n    ${({ theme }) => theme.gridUnit * 3}px;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\nconst StyledHeaderWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\nconst HeaderExtension = extensionsRegistry.get('alertsreports.header.icon');\nfunction AlertList({ addDangerToast, isReportEnabled = false, user, addSuccessToast }) {\n  const title = isReportEnabled ? t('report') : t('alert');\n  const titlePlural = isReportEnabled ? t('reports') : t('alerts');\n  const pathName = isReportEnabled ? 'Reports' : 'Alerts';\n  const initialFilters = useMemo(() => [\n  {\n    id: 'type',\n    operator: FilterOperator.Equals,\n    value: isReportEnabled ? 'Report' : 'Alert'\n  }],\n  [isReportEnabled]);\n  const { state: { loading, resourceCount: alertsCount, resourceCollection: alerts, bulkSelectEnabled, lastFetched }, hasPerm, fetchData, setResourceCollection, refreshData, toggleBulkSelect } = useListViewResource('report', t('reports'), addDangerToast, true, undefined, initialFilters);\n  const { updateResource } = useSingleViewResource('report', t('reports'), addDangerToast);\n  const [alertModalOpen, setAlertModalOpen] = useState(false);\n  const [currentAlert, setCurrentAlert] = useState(null);\n  const [currentAlertDeleting, setCurrentAlertDeleting] = useState(null);\n  // Actions\n  function handleAlertEdit(alert) {\n    setCurrentAlert(alert);\n    setAlertModalOpen(true);\n  }\n  const generateKey = () => `${new Date().getTime()}`;\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n  useEffect(() => {\n    if (bulkSelectEnabled && canDelete) {\n      toggleBulkSelect();\n    }\n  }, [isReportEnabled]);\n  const handleAlertDelete = ({ id, name }) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/report/${id}`\n    }).then(() => {\n      refreshData();\n      setCurrentAlertDeleting(null);\n      addSuccessToast(t('Deleted: %s', name));\n    }, createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting %s: %s', name, errMsg))));\n  };\n  const handleBulkAlertDelete = async (alertsToDelete) => {\n    try {\n      const { message } = await deleteAlerts(alertsToDelete.map(({ id }) => id));\n      refreshData();\n      addSuccessToast(message);\n    }\n    catch (e) {\n      createErrorHandler((errMsg) => addDangerToast(t('There was an issue deleting the selected %s: %s', titlePlural, errMsg)))(e);\n    }\n  };\n  const initialSort = [{ id: 'name', desc: true }];\n  const toggleActive = useCallback((data, checked) => {\n    if (data != null && data.id) {\n      const update_id = data.id;\n      const original = [...alerts];\n      setResourceCollection(original.map((alert) => {\n        if ((alert == null ? void 0 : alert.id) === data.id) {\n          return {\n            ...alert,\n            active: checked\n          };\n        }\n        return alert;\n      }));\n      updateResource(update_id, { active: checked }, false, false).\n      then().\n      catch(() => setResourceCollection(original));\n    }\n  }, [alerts, setResourceCollection, updateResource]);\n  const columns = useMemo(() => [\n  {\n    Cell: ({ row: { original: { last_state: lastState } } }) => _jsx(AlertStatusIcon, { state: lastState, isReportEnabled: isReportEnabled }),\n    accessor: 'last_state',\n    size: 'xs',\n    disableSortBy: true\n  },\n  {\n    Cell: ({ row: { original: { last_eval_dttm: lastEvalDttm } } }) => lastEvalDttm ?\n    moment.utc(lastEvalDttm).local().format(DATETIME_WITH_TIME_ZONE) :\n    '',\n    accessor: 'last_eval_dttm',\n    Header: t('Last run'),\n    size: 'lg'\n  },\n  {\n    accessor: 'name',\n    Header: t('Name'),\n    size: 'xl'\n  },\n  {\n    Header: t('Schedule'),\n    accessor: 'crontab_humanized',\n    size: 'xl',\n    Cell: ({ row: { original: { crontab_humanized = '', timezone } } }) => _jsx(Tooltip, { title: `${crontab_humanized} (${timezone})`, placement: \"topLeft\", children:\n      _jsx(\"span\", { children: `${crontab_humanized} (${timezone})` }) }\n    )\n  },\n  {\n    Cell: ({ row: { original: { recipients } } }) => recipients.map((r) => _jsx(RecipientIcon, { type: r.type }, r.id)),\n    accessor: 'recipients',\n    Header: t('Notification method'),\n    disableSortBy: true,\n    size: 'xl'\n  },\n  {\n    Cell: ({ row: { original: { owners = [] } } }) => _jsx(FacePile, { users: owners }),\n    Header: t('Owners'),\n    id: 'owners',\n    disableSortBy: true,\n    size: 'xl'\n  },\n  {\n    Cell: ({ row: { original: { changed_on_delta_humanized: changedOn, changed_by: changedBy } } }) => _jsx(ModifiedInfo, { date: changedOn, user: changedBy }),\n    Header: t('Last modified'),\n    accessor: 'changed_on_delta_humanized',\n    size: 'xl'\n  },\n  {\n    Cell: ({ row: { original } }) => {\n      const allowEdit = original.owners.map((o) => o.id).includes(user.userId) ||\n      isUserAdmin(user);\n      return _jsx(Switch, { disabled: !allowEdit, \"data-test\": \"toggle-active\", checked: original.active, onClick: (checked) => toggleActive(original, checked), size: \"small\" });\n    },\n    Header: t('Active'),\n    accessor: 'active',\n    id: 'active',\n    size: 'xl'\n  },\n  {\n    Cell: __signature__(({ row: { original } }) => {\n      const history = useHistory();\n      const handleEdit = () => handleAlertEdit(original);\n      const handleDelete = () => setCurrentAlertDeleting(original);\n      const handleGotoExecutionLog = () => history.push(`/${original.type.toLowerCase()}/${original.id}/log`);\n      const allowEdit = original.owners.map((o) => o.id).includes(user.userId) ||\n      isUserAdmin(user);\n      const actions = [\n      canEdit ?\n      {\n        label: 'execution-log-action',\n        tooltip: t('Execution log'),\n        placement: 'bottom',\n        icon: 'Note',\n        onClick: handleGotoExecutionLog\n      } :\n      null,\n      canEdit ?\n      {\n        label: allowEdit ? 'edit-action' : 'preview-action',\n        tooltip: allowEdit ? t('Edit') : t('View'),\n        placement: 'bottom',\n        icon: allowEdit ? 'Edit' : 'Binoculars',\n        onClick: handleEdit\n      } :\n      null,\n      allowEdit && canDelete ?\n      {\n        label: 'delete-action',\n        tooltip: t('Delete'),\n        placement: 'bottom',\n        icon: 'Trash',\n        onClick: handleDelete\n      } :\n      null].\n      filter((item) => item !== null);\n      return _jsx(ActionsBar, { actions: actions });\n    }, \"useHistory{history}\", () => [useHistory]),\n    Header: t('Actions'),\n    id: 'actions',\n    hidden: !canEdit && !canDelete,\n    disableSortBy: true,\n    size: 'xl'\n  },\n  {\n    accessor: QueryObjectColumns.ChangedBy,\n    hidden: true\n  }],\n  [canDelete, canEdit, isReportEnabled, toggleActive]);\n  const subMenuButtons = [];\n  if (canCreate) {\n    subMenuButtons.push({\n      name: _jsxs(_Fragment, { children: [\n        _jsx(\"i\", { className: \"fa fa-plus\" }), \" \", title] }\n      ),\n      buttonStyle: 'primary',\n      onClick: () => {\n        handleAlertEdit(null);\n      }\n    });\n  }\n  if (canDelete) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n      'data-test': 'bulk-select-toggle'\n    });\n  }\n  const emptyState = {\n    title: t('No %s yet', titlePlural),\n    image: 'filter-results.svg',\n    buttonAction: () => handleAlertEdit(null),\n    buttonText: canCreate ? _jsxs(_Fragment, { children: [\n      _jsx(\"i\", { className: \"fa fa-plus\" }), \" \", title, ' '] }\n    ) : null\n  };\n  const filters = useMemo(() => [\n  {\n    Header: t('Name'),\n    key: 'search',\n    id: 'name',\n    input: 'search',\n    operator: FilterOperator.Contains\n  },\n  {\n    Header: t('Owner'),\n    key: 'owner',\n    id: 'owners',\n    input: 'select',\n    operator: FilterOperator.RelationManyMany,\n    unfilteredLabel: t('All'),\n    fetchSelects: createFetchRelated('report', 'owners', createErrorHandler((errMsg) => t('An error occurred while fetching owners values: %s', errMsg)), user),\n    paginate: true\n  },\n  {\n    Header: t('Status'),\n    key: 'status',\n    id: 'last_state',\n    input: 'select',\n    operator: FilterOperator.Equals,\n    unfilteredLabel: 'Any',\n    selects: [\n    {\n      label: AlertStateLabel[AlertState.Success],\n      value: AlertState.Success\n    },\n    {\n      label: AlertStateLabel[AlertState.Working],\n      value: AlertState.Working\n    },\n    { label: AlertStateLabel[AlertState.Error], value: AlertState.Error },\n    { label: AlertStateLabel[AlertState.Noop], value: AlertState.Noop },\n    { label: AlertStateLabel[AlertState.Grace], value: AlertState.Grace }]\n\n  },\n  {\n    Header: t('Modified by'),\n    key: 'changed_by',\n    id: 'changed_by',\n    input: 'select',\n    operator: FilterOperator.RelationOneMany,\n    unfilteredLabel: t('All'),\n    fetchSelects: createFetchRelated('report', 'changed_by', createErrorHandler((errMsg) => t('An error occurred while fetching dataset datasource values: %s', errMsg)), user),\n    paginate: true\n  }],\n  []);\n  const header = HeaderExtension ? _jsxs(StyledHeaderWithIcon, { children: [\n    _jsx(\"div\", { children: t('Alerts & reports') }),\n    _jsx(HeaderExtension, {})] }\n  ) : t('Alerts & reports');\n  return _jsxs(_Fragment, { children: [\n    _jsx(SubMenu, { activeChild: pathName, name: header, tabs: [\n      {\n        name: 'Alerts',\n        label: t('Alerts'),\n        url: '/alert/list/',\n        usesRouter: true,\n        'data-test': 'alert-list'\n      },\n      {\n        name: 'Reports',\n        label: t('Reports'),\n        url: '/report/list/',\n        usesRouter: true,\n        'data-test': 'report-list'\n      }],\n      buttons: subMenuButtons, children:\n      _jsx(RefreshContainer, { children:\n        _jsx(LastUpdated, { updatedAt: lastFetched, update: () => refreshData() }) }\n      ) }\n    ),\n    _jsx(AlertReportModal, { alert: currentAlert, addDangerToast: addDangerToast, layer: currentAlert, onHide: () => {\n        setAlertModalOpen(false);\n        setCurrentAlert(null);\n        refreshData();\n      }, show: alertModalOpen, isReport: isReportEnabled }, (currentAlert == null ? void 0 : currentAlert.id) || generateKey()),\n    currentAlertDeleting && _jsx(DeleteModal, { description: t('This action will permanently delete %s.', currentAlertDeleting.name), onConfirm: () => {\n        if (currentAlertDeleting) {\n          handleAlertDelete(currentAlertDeleting);\n        }\n      }, onHide: () => setCurrentAlertDeleting(null), open: true, title: t('Delete %s?', title) }),\n    _jsx(ConfirmStatusChange, { title: t('Please confirm'), description: t('Are you sure you want to delete the selected %s?', titlePlural), onConfirm: handleBulkAlertDelete, children:\n      (confirmDelete) => {\n        const bulkActions = canDelete ?\n        [\n        {\n          key: 'delete',\n          name: t('Delete'),\n          onSelect: confirmDelete,\n          type: 'danger'\n        }] :\n\n        [];\n        return _jsx(ListView, { className: \"alerts-list-view\", columns: columns, count: alertsCount, data: alerts, emptyState: emptyState, fetchData: fetchData, filters: filters, initialSort: initialSort, loading: loading, bulkActions: bulkActions, bulkSelectEnabled: bulkSelectEnabled, disableBulkSelect: toggleBulkSelect, refreshData: refreshData, addDangerToast: addDangerToast, addSuccessToast: addSuccessToast, pageSize: PAGE_SIZE });\n      } }\n    )] }\n  );\n}__signature__(AlertList, \"useMemo{initialFilters}\\nuseListViewResource{{ state: { loading, resourceCount: alertsCount, resourceCollection: alerts, bulkSelectEnabled, lastFetched, }, hasPerm, fetchData, setResourceCollection, refreshData, toggleBulkSelect, }}\\nuseSingleViewResource{{ updateResource }}\\nuseState{[alertModalOpen, setAlertModalOpen](false)}\\nuseState{[currentAlert, setCurrentAlert](null)}\\nuseState{[currentAlertDeleting, setCurrentAlertDeleting](null)}\\nuseEffect{}\\nuseCallback{toggleActive}\\nuseMemo{columns}\\nuseMemo{filters}\", () => [useListViewResource, useSingleViewResource]);const _default =\nwithToasts(AlertList);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(extensionsRegistry, \"extensionsRegistry\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(PAGE_SIZE, \"PAGE_SIZE\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(AlertStateLabel, \"AlertStateLabel\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(deleteAlerts, \"deleteAlerts\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(RefreshContainer, \"RefreshContainer\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(StyledHeaderWithIcon, \"StyledHeaderWithIcon\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(HeaderExtension, \"HeaderExtension\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(AlertList, \"AlertList\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/pages/AlertReportList/index.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useMemo","useEffect","useCallback","useHistory","t","SupersetClient","makeApi","styled","getExtensionsRegistry","moment","ActionsBar","FacePile","Tooltip","ListView","FilterOperator","SubMenu","Switch","DATETIME_WITH_TIME_ZONE","withToasts","AlertStatusIcon","RecipientIcon","ConfirmStatusChange","DeleteModal","LastUpdated","useListViewResource","useSingleViewResource","createErrorHandler","createFetchRelated","isUserAdmin","AlertReportModal","AlertState","ModifiedInfo","QueryObjectColumns","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","extensionsRegistry","PAGE_SIZE","AlertStateLabel","Success","Working","Error","Noop","Grace","deleteAlerts","requestType","method","endpoint","RefreshContainer","div","theme","gridUnit","colors","grayscale","light5","StyledHeaderWithIcon","HeaderExtension","get","AlertList","addDangerToast","isReportEnabled","user","addSuccessToast","title","titlePlural","pathName","initialFilters","id","operator","Equals","value","state","loading","resourceCount","alertsCount","resourceCollection","alerts","bulkSelectEnabled","lastFetched","hasPerm","fetchData","setResourceCollection","refreshData","toggleBulkSelect","undefined","updateResource","alertModalOpen","setAlertModalOpen","currentAlert","setCurrentAlert","currentAlertDeleting","setCurrentAlertDeleting","handleAlertEdit","alert","generateKey","Date","getTime","canEdit","canDelete","canCreate","handleAlertDelete","name","delete","then","errMsg","handleBulkAlertDelete","alertsToDelete","message","map","e","initialSort","desc","toggleActive","data","checked","update_id","original","active","catch","columns","Cell","row","last_state","lastState","accessor","size","disableSortBy","last_eval_dttm","lastEvalDttm","utc","local","format","Header","crontab_humanized","timezone","placement","children","recipients","r","type","owners","users","changed_on_delta_humanized","changedOn","changed_by","changedBy","date","allowEdit","o","includes","userId","disabled","onClick","__signature__","history","handleEdit","handleDelete","handleGotoExecutionLog","push","toLowerCase","actions","label","tooltip","icon","filter","item","hidden","ChangedBy","subMenuButtons","className","buttonStyle","emptyState","image","buttonAction","buttonText","filters","key","input","Contains","RelationManyMany","unfilteredLabel","fetchSelects","paginate","selects","RelationOneMany","header","activeChild","tabs","url","usesRouter","buttons","updatedAt","update","layer","onHide","show","isReport","description","onConfirm","open","confirmDelete","bulkActions","onSelect","count","disableBulkSelect","pageSize","_default","reactHotLoader","reactHotLoaderGlobal","default","register","leaveModule","module"],"sources":["/app/superset-frontend/src/pages/AlertReportList/index.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  t,\n  SupersetClient,\n  makeApi,\n  styled,\n  getExtensionsRegistry,\n} from '@superset-ui/core';\nimport moment from 'moment';\nimport ActionsBar, { ActionProps } from 'src/components/ListView/ActionsBar';\nimport FacePile from 'src/components/FacePile';\nimport { Tooltip } from 'src/components/Tooltip';\nimport ListView, {\n  FilterOperator,\n  Filters,\n  ListViewProps,\n} from 'src/components/ListView';\nimport SubMenu, { SubMenuProps } from 'src/features/home/SubMenu';\nimport { Switch } from 'src/components/Switch';\nimport { DATETIME_WITH_TIME_ZONE } from 'src/constants';\nimport withToasts from 'src/components/MessageToasts/withToasts';\nimport AlertStatusIcon from 'src/features/alerts/components/AlertStatusIcon';\nimport RecipientIcon from 'src/features/alerts/components/RecipientIcon';\nimport ConfirmStatusChange from 'src/components/ConfirmStatusChange';\nimport DeleteModal from 'src/components/DeleteModal';\nimport LastUpdated from 'src/components/LastUpdated';\nimport {\n  useListViewResource,\n  useSingleViewResource,\n} from 'src/views/CRUD/hooks';\nimport { createErrorHandler, createFetchRelated } from 'src/views/CRUD/utils';\nimport { isUserAdmin } from 'src/dashboard/util/permissionUtils';\nimport Owner from 'src/types/Owner';\nimport AlertReportModal from 'src/features/alerts/AlertReportModal';\nimport { AlertObject, AlertState } from 'src/features/alerts/types';\nimport { ModifiedInfo } from 'src/components/AuditInfo';\nimport { QueryObjectColumns } from 'src/views/CRUD/types';\n\nconst extensionsRegistry = getExtensionsRegistry();\n\nconst PAGE_SIZE = 25;\n\nconst AlertStateLabel: Record<AlertState, string> = {\n  [AlertState.Success]: t('Success'),\n  [AlertState.Working]: t('Working'),\n  [AlertState.Error]: t('Error'),\n  [AlertState.Noop]: t('Not triggered'),\n  [AlertState.Grace]: t('On Grace'),\n};\n\ninterface AlertListProps {\n  addDangerToast: (msg: string) => void;\n  addSuccessToast: (msg: string) => void;\n  isReportEnabled: boolean;\n  user: {\n    userId: string | number;\n    firstName: string;\n    lastName: string;\n  };\n}\nconst deleteAlerts = makeApi<number[], { message: string }>({\n  requestType: 'rison',\n  method: 'DELETE',\n  endpoint: '/api/v1/report/',\n});\n\nconst RefreshContainer = styled.div`\n  width: 100%;\n  padding: 0 ${({ theme }) => theme.gridUnit * 4}px\n    ${({ theme }) => theme.gridUnit * 3}px;\n  background-color: ${({ theme }) => theme.colors.grayscale.light5};\n`;\n\nconst StyledHeaderWithIcon = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  > *:first-child {\n    margin-right: ${({ theme }) => theme.gridUnit}px;\n  }\n`;\n\nconst HeaderExtension = extensionsRegistry.get('alertsreports.header.icon');\n\nfunction AlertList({\n  addDangerToast,\n  isReportEnabled = false,\n  user,\n  addSuccessToast,\n}: AlertListProps) {\n  const title = isReportEnabled ? t('report') : t('alert');\n  const titlePlural = isReportEnabled ? t('reports') : t('alerts');\n  const pathName = isReportEnabled ? 'Reports' : 'Alerts';\n  const initialFilters = useMemo(\n    () => [\n      {\n        id: 'type',\n        operator: FilterOperator.Equals,\n        value: isReportEnabled ? 'Report' : 'Alert',\n      },\n    ],\n    [isReportEnabled],\n  );\n  const {\n    state: {\n      loading,\n      resourceCount: alertsCount,\n      resourceCollection: alerts,\n      bulkSelectEnabled,\n      lastFetched,\n    },\n    hasPerm,\n    fetchData,\n    setResourceCollection,\n    refreshData,\n    toggleBulkSelect,\n  } = useListViewResource<AlertObject>(\n    'report',\n    t('reports'),\n    addDangerToast,\n    true,\n    undefined,\n    initialFilters,\n  );\n\n  const { updateResource } = useSingleViewResource<Partial<AlertObject>>(\n    'report',\n    t('reports'),\n    addDangerToast,\n  );\n\n  const [alertModalOpen, setAlertModalOpen] = useState<boolean>(false);\n  const [currentAlert, setCurrentAlert] = useState<Partial<AlertObject> | null>(\n    null,\n  );\n  const [currentAlertDeleting, setCurrentAlertDeleting] =\n    useState<AlertObject | null>(null);\n\n  // Actions\n  function handleAlertEdit(alert: AlertObject | null) {\n    setCurrentAlert(alert);\n    setAlertModalOpen(true);\n  }\n\n  const generateKey = () => `${new Date().getTime()}`;\n\n  const canEdit = hasPerm('can_write');\n  const canDelete = hasPerm('can_write');\n  const canCreate = hasPerm('can_write');\n\n  useEffect(() => {\n    if (bulkSelectEnabled && canDelete) {\n      toggleBulkSelect();\n    }\n  }, [isReportEnabled]);\n\n  const handleAlertDelete = ({ id, name }: AlertObject) => {\n    SupersetClient.delete({\n      endpoint: `/api/v1/report/${id}`,\n    }).then(\n      () => {\n        refreshData();\n        setCurrentAlertDeleting(null);\n        addSuccessToast(t('Deleted: %s', name));\n      },\n      createErrorHandler(errMsg =>\n        addDangerToast(t('There was an issue deleting %s: %s', name, errMsg)),\n      ),\n    );\n  };\n\n  const handleBulkAlertDelete = async (alertsToDelete: AlertObject[]) => {\n    try {\n      const { message } = await deleteAlerts(\n        alertsToDelete.map(({ id }) => id),\n      );\n      refreshData();\n      addSuccessToast(message);\n    } catch (e) {\n      createErrorHandler(errMsg =>\n        addDangerToast(\n          t(\n            'There was an issue deleting the selected %s: %s',\n            titlePlural,\n            errMsg,\n          ),\n        ),\n      )(e);\n    }\n  };\n\n  const initialSort = [{ id: 'name', desc: true }];\n\n  const toggleActive = useCallback(\n    (data: AlertObject, checked: boolean) => {\n      if (data?.id) {\n        const update_id = data.id;\n        const original = [...alerts];\n\n        setResourceCollection(\n          original.map(alert => {\n            if (alert?.id === data.id) {\n              return {\n                ...alert,\n                active: checked,\n              };\n            }\n\n            return alert;\n          }),\n        );\n\n        updateResource(update_id, { active: checked }, false, false)\n          .then()\n          .catch(() => setResourceCollection(original));\n      }\n    },\n    [alerts, setResourceCollection, updateResource],\n  );\n\n  const columns = useMemo(\n    () => [\n      {\n        Cell: ({\n          row: {\n            original: { last_state: lastState },\n          },\n        }: any) => (\n          <AlertStatusIcon\n            state={lastState}\n            isReportEnabled={isReportEnabled}\n          />\n        ),\n        accessor: 'last_state',\n        size: 'xs',\n        disableSortBy: true,\n      },\n      {\n        Cell: ({\n          row: {\n            original: { last_eval_dttm: lastEvalDttm },\n          },\n        }: any) =>\n          lastEvalDttm\n            ? moment.utc(lastEvalDttm).local().format(DATETIME_WITH_TIME_ZONE)\n            : '',\n        accessor: 'last_eval_dttm',\n        Header: t('Last run'),\n        size: 'lg',\n      },\n      {\n        accessor: 'name',\n        Header: t('Name'),\n        size: 'xl',\n      },\n      {\n        Header: t('Schedule'),\n        accessor: 'crontab_humanized',\n        size: 'xl',\n        Cell: ({\n          row: {\n            original: { crontab_humanized = '', timezone },\n          },\n        }: any) => (\n          <Tooltip\n            title={`${crontab_humanized} (${timezone})`}\n            placement=\"topLeft\"\n          >\n            <span>{`${crontab_humanized} (${timezone})`}</span>\n          </Tooltip>\n        ),\n      },\n      {\n        Cell: ({\n          row: {\n            original: { recipients },\n          },\n        }: any) =>\n          recipients.map((r: any) => (\n            <RecipientIcon key={r.id} type={r.type} />\n          )),\n        accessor: 'recipients',\n        Header: t('Notification method'),\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: { owners = [] },\n          },\n        }: any) => <FacePile users={owners} />,\n        Header: t('Owners'),\n        id: 'owners',\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        Cell: ({\n          row: {\n            original: {\n              changed_on_delta_humanized: changedOn,\n              changed_by: changedBy,\n            },\n          },\n        }: any) => <ModifiedInfo date={changedOn} user={changedBy} />,\n        Header: t('Last modified'),\n        accessor: 'changed_on_delta_humanized',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          return (\n            <Switch\n              disabled={!allowEdit}\n              data-test=\"toggle-active\"\n              checked={original.active}\n              onClick={(checked: boolean) => toggleActive(original, checked)}\n              size=\"small\"\n            />\n          );\n        },\n        Header: t('Active'),\n        accessor: 'active',\n        id: 'active',\n        size: 'xl',\n      },\n      {\n        Cell: ({ row: { original } }: any) => {\n          const history = useHistory();\n          const handleEdit = () => handleAlertEdit(original);\n          const handleDelete = () => setCurrentAlertDeleting(original);\n          const handleGotoExecutionLog = () =>\n            history.push(`/${original.type.toLowerCase()}/${original.id}/log`);\n\n          const allowEdit =\n            original.owners.map((o: Owner) => o.id).includes(user.userId) ||\n            isUserAdmin(user);\n\n          const actions = [\n            canEdit\n              ? {\n                  label: 'execution-log-action',\n                  tooltip: t('Execution log'),\n                  placement: 'bottom',\n                  icon: 'Note',\n                  onClick: handleGotoExecutionLog,\n                }\n              : null,\n            canEdit\n              ? {\n                  label: allowEdit ? 'edit-action' : 'preview-action',\n                  tooltip: allowEdit ? t('Edit') : t('View'),\n                  placement: 'bottom',\n                  icon: allowEdit ? 'Edit' : 'Binoculars',\n                  onClick: handleEdit,\n                }\n              : null,\n            allowEdit && canDelete\n              ? {\n                  label: 'delete-action',\n                  tooltip: t('Delete'),\n                  placement: 'bottom',\n                  icon: 'Trash',\n                  onClick: handleDelete,\n                }\n              : null,\n          ].filter(item => item !== null);\n\n          return <ActionsBar actions={actions as ActionProps[]} />;\n        },\n        Header: t('Actions'),\n        id: 'actions',\n        hidden: !canEdit && !canDelete,\n        disableSortBy: true,\n        size: 'xl',\n      },\n      {\n        accessor: QueryObjectColumns.ChangedBy,\n        hidden: true,\n      },\n    ],\n    [canDelete, canEdit, isReportEnabled, toggleActive],\n  );\n\n  const subMenuButtons: SubMenuProps['buttons'] = [];\n\n  if (canCreate) {\n    subMenuButtons.push({\n      name: (\n        <>\n          <i className=\"fa fa-plus\" /> {title}\n        </>\n      ),\n      buttonStyle: 'primary',\n      onClick: () => {\n        handleAlertEdit(null);\n      },\n    });\n  }\n  if (canDelete) {\n    subMenuButtons.push({\n      name: t('Bulk select'),\n      onClick: toggleBulkSelect,\n      buttonStyle: 'secondary',\n      'data-test': 'bulk-select-toggle',\n    });\n  }\n\n  const emptyState = {\n    title: t('No %s yet', titlePlural),\n    image: 'filter-results.svg',\n    buttonAction: () => handleAlertEdit(null),\n    buttonText: canCreate ? (\n      <>\n        <i className=\"fa fa-plus\" /> {title}{' '}\n      </>\n    ) : null,\n  };\n\n  const filters: Filters = useMemo(\n    () => [\n      {\n        Header: t('Name'),\n        key: 'search',\n        id: 'name',\n        input: 'search',\n        operator: FilterOperator.Contains,\n      },\n      {\n        Header: t('Owner'),\n        key: 'owner',\n        id: 'owners',\n        input: 'select',\n        operator: FilterOperator.RelationManyMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'report',\n          'owners',\n          createErrorHandler(errMsg =>\n            t('An error occurred while fetching owners values: %s', errMsg),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n      {\n        Header: t('Status'),\n        key: 'status',\n        id: 'last_state',\n        input: 'select',\n        operator: FilterOperator.Equals,\n        unfilteredLabel: 'Any',\n        selects: [\n          {\n            label: AlertStateLabel[AlertState.Success],\n            value: AlertState.Success,\n          },\n          {\n            label: AlertStateLabel[AlertState.Working],\n            value: AlertState.Working,\n          },\n          { label: AlertStateLabel[AlertState.Error], value: AlertState.Error },\n          { label: AlertStateLabel[AlertState.Noop], value: AlertState.Noop },\n          { label: AlertStateLabel[AlertState.Grace], value: AlertState.Grace },\n        ],\n      },\n      {\n        Header: t('Modified by'),\n        key: 'changed_by',\n        id: 'changed_by',\n        input: 'select',\n        operator: FilterOperator.RelationOneMany,\n        unfilteredLabel: t('All'),\n        fetchSelects: createFetchRelated(\n          'report',\n          'changed_by',\n          createErrorHandler(errMsg =>\n            t(\n              'An error occurred while fetching dataset datasource values: %s',\n              errMsg,\n            ),\n          ),\n          user,\n        ),\n        paginate: true,\n      },\n    ],\n    [],\n  );\n\n  const header = HeaderExtension ? (\n    <StyledHeaderWithIcon>\n      <div>{t('Alerts & reports')}</div>\n      <HeaderExtension />\n    </StyledHeaderWithIcon>\n  ) : (\n    t('Alerts & reports')\n  );\n\n  return (\n    <>\n      <SubMenu\n        activeChild={pathName}\n        name={header}\n        tabs={[\n          {\n            name: 'Alerts',\n            label: t('Alerts'),\n            url: '/alert/list/',\n            usesRouter: true,\n            'data-test': 'alert-list',\n          },\n          {\n            name: 'Reports',\n            label: t('Reports'),\n            url: '/report/list/',\n            usesRouter: true,\n            'data-test': 'report-list',\n          },\n        ]}\n        buttons={subMenuButtons}\n      >\n        <RefreshContainer>\n          <LastUpdated updatedAt={lastFetched} update={() => refreshData()} />\n        </RefreshContainer>\n      </SubMenu>\n      <AlertReportModal\n        alert={currentAlert}\n        addDangerToast={addDangerToast}\n        layer={currentAlert}\n        onHide={() => {\n          setAlertModalOpen(false);\n          setCurrentAlert(null);\n          refreshData();\n        }}\n        show={alertModalOpen}\n        isReport={isReportEnabled}\n        key={currentAlert?.id || generateKey()}\n      />\n      {currentAlertDeleting && (\n        <DeleteModal\n          description={t(\n            'This action will permanently delete %s.',\n            currentAlertDeleting.name,\n          )}\n          onConfirm={() => {\n            if (currentAlertDeleting) {\n              handleAlertDelete(currentAlertDeleting);\n            }\n          }}\n          onHide={() => setCurrentAlertDeleting(null)}\n          open\n          title={t('Delete %s?', title)}\n        />\n      )}\n      <ConfirmStatusChange\n        title={t('Please confirm')}\n        description={t(\n          'Are you sure you want to delete the selected %s?',\n          titlePlural,\n        )}\n        onConfirm={handleBulkAlertDelete}\n      >\n        {confirmDelete => {\n          const bulkActions: ListViewProps['bulkActions'] = canDelete\n            ? [\n                {\n                  key: 'delete',\n                  name: t('Delete'),\n                  onSelect: confirmDelete,\n                  type: 'danger',\n                },\n              ]\n            : [];\n          return (\n            <ListView<AlertObject>\n              className=\"alerts-list-view\"\n              columns={columns}\n              count={alertsCount}\n              data={alerts}\n              emptyState={emptyState}\n              fetchData={fetchData}\n              filters={filters}\n              initialSort={initialSort}\n              loading={loading}\n              bulkActions={bulkActions}\n              bulkSelectEnabled={bulkSelectEnabled}\n              disableBulkSelect={toggleBulkSelect}\n              refreshData={refreshData}\n              addDangerToast={addDangerToast}\n              addSuccessToast={addSuccessToast}\n              pageSize={PAGE_SIZE}\n            />\n          );\n        }}\n      </ConfirmStatusChange>\n    </>\n  );\n}\n\nexport default withToasts(AlertList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}