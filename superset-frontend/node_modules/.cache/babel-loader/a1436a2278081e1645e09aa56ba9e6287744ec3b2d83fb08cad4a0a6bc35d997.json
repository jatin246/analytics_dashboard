{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JSONTree } from 'react-json-tree';\nimport { css, styled, t } from '@superset-ui/core';\nimport { useJsonTreeTheme } from 'src/hooks/useJsonTreeTheme';\nimport Collapse from 'src/components/Collapse';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst StyledUl = styled.ul`\n  padding-left: ${({ theme }) => theme.gridUnit * 5}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 4}px;\n`;\nconst collapseStyle = (theme) => css`\n  .ant-collapse-arrow {\n    left: 0px !important;\n  }\n  .ant-collapse-header {\n    padding-left: ${theme.gridUnit * 4}px !important;\n  }\n  .ant-collapse-content-box {\n    padding: 0px !important;\n  }\n`;\nconst extractInvalidValues = (messages, payload) => {\n  const invalidValues = [];\n  const recursiveExtract = (messages, payload) => {\n    Object.keys(messages).forEach((key) => {\n      const value = payload[key];\n      const message = messages[key];\n      if (Array.isArray(message)) {\n        message.forEach((errorMessage) => {\n          invalidValues.push(`${errorMessage}: ${value}`);\n        });\n      } else\n      {\n        recursiveExtract(message, value);\n      }\n    });\n  };\n  recursiveExtract(messages, payload);\n  return invalidValues;\n};\nexport default function MarshmallowErrorMessage({ error,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  source = 'crud', subtitle }) {\n  const jsonTreeTheme = useJsonTreeTheme();\n  const { extra, message } = error;\n  return _jsxs(\"div\", { children: [\n    subtitle && _jsx(\"h4\", { children: subtitle }),\n\n    message,\n\n    _jsx(StyledUl, { children:\n      extractInvalidValues(extra.messages, extra.payload).map((value, index) => _jsx(\"li\", { children: value }, index)) }\n    ),\n\n    _jsx(Collapse, { ghost: true, css: collapseStyle, children:\n      _jsx(Collapse.Panel, { header: t('Details'), css: collapseStyle, children:\n        _jsx(JSONTree, { data: extra.messages, shouldExpandNode: () => true, hideRoot: true, theme: jsonTreeTheme }) }, \"details\"\n      ) }\n    )] }\n  );\n}__signature__(MarshmallowErrorMessage, \"useJsonTreeTheme{jsonTreeTheme}\", () => [useJsonTreeTheme]);;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(StyledUl, \"StyledUl\", \"/app/superset-frontend/src/components/ErrorMessage/MarshmallowErrorMessage.tsx\");reactHotLoader.register(collapseStyle, \"collapseStyle\", \"/app/superset-frontend/src/components/ErrorMessage/MarshmallowErrorMessage.tsx\");reactHotLoader.register(extractInvalidValues, \"extractInvalidValues\", \"/app/superset-frontend/src/components/ErrorMessage/MarshmallowErrorMessage.tsx\");reactHotLoader.register(MarshmallowErrorMessage, \"MarshmallowErrorMessage\", \"/app/superset-frontend/src/components/ErrorMessage/MarshmallowErrorMessage.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["JSONTree","css","styled","t","useJsonTreeTheme","Collapse","jsx","_jsx","jsxs","_jsxs","StyledUl","ul","theme","gridUnit","collapseStyle","extractInvalidValues","messages","payload","invalidValues","recursiveExtract","Object","keys","forEach","key","value","message","Array","isArray","errorMessage","push","MarshmallowErrorMessage","error","source","subtitle","jsonTreeTheme","extra","children","map","index","ghost","Panel","header","data","shouldExpandNode","hideRoot","__signature__","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/ErrorMessage/MarshmallowErrorMessage.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JSONTree } from 'react-json-tree';\nimport { css, styled, SupersetTheme, t } from '@superset-ui/core';\n\nimport { useJsonTreeTheme } from 'src/hooks/useJsonTreeTheme';\nimport Collapse from 'src/components/Collapse';\nimport { ErrorMessageComponentProps } from './types';\n\ninterface MarshmallowErrorExtra {\n  messages: object;\n  payload: object;\n  issue_codes: {\n    code: number;\n    message: string;\n  }[];\n}\n\nconst StyledUl = styled.ul`\n  padding-left: ${({ theme }) => theme.gridUnit * 5}px;\n  padding-top: ${({ theme }) => theme.gridUnit * 4}px;\n`;\n\nconst collapseStyle = (theme: SupersetTheme) => css`\n  .ant-collapse-arrow {\n    left: 0px !important;\n  }\n  .ant-collapse-header {\n    padding-left: ${theme.gridUnit * 4}px !important;\n  }\n  .ant-collapse-content-box {\n    padding: 0px !important;\n  }\n`;\n\nconst extractInvalidValues = (messages: object, payload: object): string[] => {\n  const invalidValues: string[] = [];\n\n  const recursiveExtract = (messages: object, payload: object) => {\n    Object.keys(messages).forEach(key => {\n      const value = payload[key];\n      const message = messages[key];\n\n      if (Array.isArray(message)) {\n        message.forEach(errorMessage => {\n          invalidValues.push(`${errorMessage}: ${value}`);\n        });\n      } else {\n        recursiveExtract(message, value);\n      }\n    });\n  };\n  recursiveExtract(messages, payload);\n  return invalidValues;\n};\n\nexport default function MarshmallowErrorMessage({\n  error,\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  source = 'crud',\n  subtitle,\n}: ErrorMessageComponentProps<MarshmallowErrorExtra>) {\n  const jsonTreeTheme = useJsonTreeTheme();\n  const { extra, message } = error;\n\n  return (\n    <div>\n      {subtitle && <h4>{subtitle}</h4>}\n\n      {message}\n\n      <StyledUl>\n        {extractInvalidValues(extra.messages, extra.payload).map(\n          (value, index) => (\n            <li key={index}>{value}</li>\n          ),\n        )}\n      </StyledUl>\n\n      <Collapse ghost css={collapseStyle}>\n        <Collapse.Panel header={t('Details')} key=\"details\" css={collapseStyle}>\n          <JSONTree\n            data={extra.messages}\n            shouldExpandNode={() => true}\n            hideRoot\n            theme={jsonTreeTheme}\n          />\n        </Collapse.Panel>\n      </Collapse>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}