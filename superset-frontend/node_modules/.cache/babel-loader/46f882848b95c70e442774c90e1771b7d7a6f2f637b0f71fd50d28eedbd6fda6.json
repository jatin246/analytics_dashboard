{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport moment from 'moment';\nimport { styled, t } from '@superset-ui/core';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { FormLabel } from 'src/components/Form';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\nfunction DateRangeFilter({ Header, initialValue, onSubmit }, ref) {\n  const [value, setValue] = useState(initialValue != null ? initialValue : null);\n  const momentValue = useMemo(() => {\n    if (!value || Array.isArray(value) && !value.length)\n    return null;\n    return [moment(value[0]), moment(value[1])];\n  }, [value]);\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue(null);\n      onSubmit([]);\n    }\n  }));\n  return _jsxs(RangeFilterContainer, { children: [\n    _jsx(FormLabel, { children: Header }),\n    _jsx(RangePicker, { placeholder: [t('Start date'), t('End date')], showTime: true, value: momentValue, onChange: (momentRange) => {var _momentRange$0$valueO, _momentRange$, _momentRange$1$valueO, _momentRange$2;\n        if (!momentRange) {\n          setValue(null);\n          onSubmit([]);\n          return;\n        }\n        const changeValue = [(_momentRange$0$valueO = (_momentRange$ =\n        momentRange[0]) == null ? void 0 : _momentRange$.valueOf()) != null ? _momentRange$0$valueO : 0, (_momentRange$1$valueO = (_momentRange$2 =\n        momentRange[1]) == null ? void 0 : _momentRange$2.valueOf()) != null ? _momentRange$1$valueO : 0];\n\n        setValue(changeValue);\n        onSubmit(changeValue);\n      } })] }\n  );\n}__signature__(DateRangeFilter, \"useState{[value, setValue](initialValue ?? null)}\\nuseMemo{momentValue}\\nuseImperativeHandle{}\", () => [useImperativeHandle]);const _default = /*#__PURE__*/\nforwardRef(DateRangeFilter);export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(RangeFilterContainer, \"RangeFilterContainer\", \"/app/superset-frontend/src/components/ListView/Filters/DateRange.tsx\");reactHotLoader.register(DateRangeFilter, \"DateRangeFilter\", \"/app/superset-frontend/src/components/ListView/Filters/DateRange.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/components/ListView/Filters/DateRange.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useState","useMemo","forwardRef","useImperativeHandle","moment","styled","t","RangePicker","FormLabel","jsx","_jsx","jsxs","_jsxs","RangeFilterContainer","div","DateRangeFilter","Header","initialValue","onSubmit","ref","value","setValue","momentValue","Array","isArray","length","clearFilter","children","placeholder","showTime","onChange","momentRange","_momentRange$0$valueO","_momentRange$","_momentRange$1$valueO","_momentRange$2","changeValue","valueOf","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/ListView/Filters/DateRange.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  useState,\n  useMemo,\n  forwardRef,\n  useImperativeHandle,\n  RefObject,\n} from 'react';\n\nimport moment, { Moment } from 'moment';\nimport { styled, t } from '@superset-ui/core';\nimport { RangePicker } from 'src/components/DatePicker';\nimport { FormLabel } from 'src/components/Form';\nimport { BaseFilter, FilterHandler } from './Base';\n\ninterface DateRangeFilterProps extends BaseFilter {\n  onSubmit: (val: number[]) => void;\n  name: string;\n}\n\ntype ValueState = [number, number];\n\nconst RangeFilterContainer = styled.div`\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  width: 360px;\n`;\n\nfunction DateRangeFilter(\n  { Header, initialValue, onSubmit }: DateRangeFilterProps,\n  ref: RefObject<FilterHandler>,\n) {\n  const [value, setValue] = useState<ValueState | null>(initialValue ?? null);\n  const momentValue = useMemo((): [Moment, Moment] | null => {\n    if (!value || (Array.isArray(value) && !value.length)) return null;\n    return [moment(value[0]), moment(value[1])];\n  }, [value]);\n\n  useImperativeHandle(ref, () => ({\n    clearFilter: () => {\n      setValue(null);\n      onSubmit([]);\n    },\n  }));\n\n  return (\n    <RangeFilterContainer>\n      <FormLabel>{Header}</FormLabel>\n      <RangePicker\n        placeholder={[t('Start date'), t('End date')]}\n        showTime\n        value={momentValue}\n        onChange={momentRange => {\n          if (!momentRange) {\n            setValue(null);\n            onSubmit([]);\n            return;\n          }\n          const changeValue = [\n            momentRange[0]?.valueOf() ?? 0,\n            momentRange[1]?.valueOf() ?? 0,\n          ] as ValueState;\n          setValue(changeValue);\n          onSubmit(changeValue);\n        }}\n      />\n    </RangeFilterContainer>\n  );\n}\n\nexport default forwardRef(DateRangeFilter);\n"],"mappings":"wSAAA;;;;;;;;;;;;;;;;;;AAkBA,SACEA,QAAQ,EACRC,OAAO,EACPC,UAAU,EACVC,mBAAmB,QAEd,OAAO;AAEd,OAAOC,MAAkB,MAAM,QAAQ;AACvC,SAASC,MAAM,EAAEC,CAAC,QAAQ,mBAAmB;AAC7C,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,SAAS,QAAQ,qBAAqB,CAAC,SAAAC,GAAA,IAAAC,IAAA,EAAAC,IAAA,IAAAC,KAAA;AAUhD,MAAMC,oBAAoB,GAAGR,MAAM,CAACS,GAAG;;;;;;CAMtC;AAED,SAASC,eAAeA,CACtB,EAAEC,MAAM,EAAEC,YAAY,EAAEC,QAAQ,EAAwB,EACxDC,GAA6B;EAE7B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAoBiB,YAAY,WAAZA,YAAY,GAAI,IAAI,CAAC;EAC3E,MAAMK,WAAW,GAAGrB,OAAO,CAAC,MAA8B;IACxD,IAAI,CAACmB,KAAK,IAAKG,KAAK,CAACC,OAAO,CAACJ,KAAK,CAAC,IAAI,CAACA,KAAK,CAACK,MAAO;IAAE,OAAO,IAAI;IAClE,OAAO,CAACrB,MAAM,CAACgB,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEhB,MAAM,CAACgB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7C,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEXjB,mBAAmB,CAACgB,GAAG,EAAE,OAAO;IAC9BO,WAAW,EAAEA,CAAA,KAAK;MAChBL,QAAQ,CAAC,IAAI,CAAC;MACdH,QAAQ,CAAC,EAAE,CAAC;IACd;GACD,CAAC,CAAC;EAEH,OACEN,KAAA,CAACC,oBAAoB,IAAAc,QAAA;IACnBjB,IAAA,CAACF,SAAS,IAAAmB,QAAA,EAAEX,MAAM,EAAY,CAC9B;IAAAN,IAAA,CAACH,WAAW,IACVqB,WAAW,EAAE,CAACtB,CAAC,CAAC,YAAY,CAAC,EAAEA,CAAC,CAAC,UAAU,CAAC,CAAE,EAC9CuB,QAAQ,QACRT,KAAK,EAAEE,WAAY,EACnBQ,QAAQ,EAAEA,CAAAC,WAAW,KAAG,KAAAC,qBAAA,EAAAC,aAAA,EAAAC,qBAAA,EAAAC,cAAA;QACtB,IAAI,CAACJ,WAAW,EAAE;UAChBV,QAAQ,CAAC,IAAI,CAAC;UACdH,QAAQ,CAAC,EAAE,CAAC;UACZ;;QAEF,MAAMkB,WAAW,GAAG,EAAAJ,qBAAA,IAAAC,aAAA;QAClBF,WAAW,CAAC,CAAC,CAAC,qBAAdE,aAAA,CAAgBI,OAAO,EAAE,YAAAL,qBAAA,GAAI,CAAC,GAAAE,qBAAA,IAAAC,cAAA;QAC9BJ,WAAW,CAAC,CAAC,CAAC,qBAAdI,cAAA,CAAgBE,OAAO,EAAE,YAAAH,qBAAA,GAAI,CAAC,CACjB;;QACfb,QAAQ,CAACe,WAAW,CAAC;QACrBlB,QAAQ,CAACkB,WAAW,CAAC;MACvB,CAAE,GAEN;EAAsB,CAAC;AAE3B,CAACE,aAAA,CAxCQvB,eAAe,2GAUtBZ,mBAAmB,SAAAoC,QAAA;AAgCNrC,UAAU,CAACa,eAAe,CAAC,CAA1C,eAAAwB,QAAA,CAA2C,mBAAAC,cAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAC,OAAA,GAAAC,SAAA,MAAAH,cAAA,WAAAA,cAAA,CAAAI,QAAA,CAlDrC/B,oBAAoB,kGAAA2B,cAAA,CAAAI,QAAA,CAQjB7B,eAAe,6FAAAyB,cAAA,CAAAI,QAAA,CAAAL,QAAA,6GAAAM,WAAA,UAAAJ,oBAAA,mBAAAA,oBAAA,CAAAI,WAAA,GAAAF,SAAA,CAAAE,WAAA,IAAAA,WAAA,CAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}