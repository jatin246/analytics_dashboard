{"ast":null,"code":"import _pickBy from \"lodash/pickBy\"; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;};\n\nimport { LatestQueryEditorVersion } from 'src/SqlLab/types';\nimport { api } from './queryApi';\nconst sqlEditorApi = api.injectEndpoints({\n  endpoints: (builder) => ({\n    updateSqlEditorTab: builder.mutation({\n      query: ({ queryEditor: { version = LatestQueryEditorVersion, id, dbId, catalog, schema, queryLimit, sql, name, latestQueryId, hideLeftBar, templateParams, autorun, updatedAt }, extra }) => ({\n        method: 'PUT',\n        endpoint: encodeURI(`/tabstateview/${id}`),\n        postPayload: _pickBy({\n          database_id: dbId,\n          catalog,\n          schema,\n          sql,\n          label: name,\n          query_limit: queryLimit,\n          latest_query_id: latestQueryId,\n          template_params: templateParams,\n          hide_left_bar: hideLeftBar,\n          autorun,\n          extra_json: JSON.stringify({ updatedAt, version, ...extra })\n        }, (value) => value !== undefined)\n      })\n    }),\n    updateCurrentSqlEditorTab: builder.mutation({\n      query: (queryEditorId) => ({\n        method: 'POST',\n        endpoint: encodeURI(`/tabstateview/${queryEditorId}/activate`),\n        transformResponse: () => queryEditorId\n      })\n    }),\n    deleteSqlEditorTab: builder.mutation({\n      query: (queryEditorId) => ({\n        method: 'DELETE',\n        endpoint: encodeURI(`/tabstateview/${queryEditorId}`),\n        transformResponse: () => queryEditorId\n      })\n    })\n  })\n});\nexport const { useUpdateSqlEditorTabMutation, useUpdateCurrentSqlEditorTabMutation, useDeleteSqlEditorTabMutation } = sqlEditorApi;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(sqlEditorApi, \"sqlEditorApi\", \"/app/superset-frontend/src/hooks/apiResources/sqlEditorTabs.ts\");reactHotLoader.register(useUpdateSqlEditorTabMutation, \"useUpdateSqlEditorTabMutation\", \"/app/superset-frontend/src/hooks/apiResources/sqlEditorTabs.ts\");reactHotLoader.register(useUpdateCurrentSqlEditorTabMutation, \"useUpdateCurrentSqlEditorTabMutation\", \"/app/superset-frontend/src/hooks/apiResources/sqlEditorTabs.ts\");reactHotLoader.register(useDeleteSqlEditorTabMutation, \"useDeleteSqlEditorTabMutation\", \"/app/superset-frontend/src/hooks/apiResources/sqlEditorTabs.ts\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["enterModule","reactHotLoaderGlobal","undefined","module","__signature__","default","signature","a","LatestQueryEditorVersion","api","sqlEditorApi","injectEndpoints","endpoints","builder","updateSqlEditorTab","mutation","query","queryEditor","version","id","dbId","catalog","schema","queryLimit","sql","name","latestQueryId","hideLeftBar","templateParams","autorun","updatedAt","extra","method","endpoint","encodeURI","postPayload","_pickBy","database_id","label","query_limit","latest_query_id","template_params","hide_left_bar","extra_json","JSON","stringify","value","updateCurrentSqlEditorTab","queryEditorId","transformResponse","deleteSqlEditorTab","useUpdateSqlEditorTabMutation","useUpdateCurrentSqlEditorTabMutation","useDeleteSqlEditorTabMutation","reactHotLoader","register","leaveModule"],"sources":["/app/superset-frontend/src/hooks/apiResources/sqlEditorTabs.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { pickBy } from 'lodash';\nimport { QueryEditor, LatestQueryEditorVersion } from 'src/SqlLab/types';\nimport { api, JsonResponse } from './queryApi';\n\nexport type EditorMutationParams = {\n  queryEditor: QueryEditor;\n  extra?: Record<string, any>;\n};\n\nconst sqlEditorApi = api.injectEndpoints({\n  endpoints: builder => ({\n    updateSqlEditorTab: builder.mutation<JsonResponse, EditorMutationParams>({\n      query: ({\n        queryEditor: {\n          version = LatestQueryEditorVersion,\n          id,\n          dbId,\n          catalog,\n          schema,\n          queryLimit,\n          sql,\n          name,\n          latestQueryId,\n          hideLeftBar,\n          templateParams,\n          autorun,\n          updatedAt,\n        },\n        extra,\n      }) => ({\n        method: 'PUT',\n        endpoint: encodeURI(`/tabstateview/${id}`),\n        postPayload: pickBy(\n          {\n            database_id: dbId,\n            catalog,\n            schema,\n            sql,\n            label: name,\n            query_limit: queryLimit,\n            latest_query_id: latestQueryId,\n            template_params: templateParams,\n            hide_left_bar: hideLeftBar,\n            autorun,\n            extra_json: JSON.stringify({ updatedAt, version, ...extra }),\n          },\n          value => value !== undefined,\n        ),\n      }),\n    }),\n    updateCurrentSqlEditorTab: builder.mutation<string, string>({\n      query: queryEditorId => ({\n        method: 'POST',\n        endpoint: encodeURI(`/tabstateview/${queryEditorId}/activate`),\n        transformResponse: () => queryEditorId,\n      }),\n    }),\n    deleteSqlEditorTab: builder.mutation<void, string>({\n      query: queryEditorId => ({\n        method: 'DELETE',\n        endpoint: encodeURI(`/tabstateview/${queryEditorId}`),\n        transformResponse: () => queryEditorId,\n      }),\n    }),\n  }),\n});\n\nexport const {\n  useUpdateSqlEditorTabMutation,\n  useUpdateCurrentSqlEditorTabMutation,\n  useDeleteSqlEditorTabMutation,\n} = sqlEditorApi;\n"],"mappings":"qCAAA;;;;;;;;;;;;;;;;;GAAA,kBAAAA,WAAA,UAAAC,oBAAA,mBAAAA,oBAAA,CAAAD,WAAA,GAAAE,SAAA,CAAAF,WAAA,IAAAA,WAAA,CAAAG,MAAA,WAAAC,aAAA,UAAAH,oBAAA,mBAAAA,oBAAA,CAAAI,OAAA,CAAAC,SAAA,aAAAC,CAAA,UAAAA,CAAA;;AAmBA,SAAsBC,wBAAwB,QAAQ,kBAAkB;AACxE,SAASC,GAAG,QAAsB,YAAY;AAO9C,MAAMC,YAAY,GAAGD,GAAG,CAACE,eAAe,CAAC;EACvCC,SAAS,EAAEA,CAAAC,OAAO,MAAK;IACrBC,kBAAkB,EAAED,OAAO,CAACE,QAAQ,CAAqC;MACvEC,KAAK,EAAEA,CAAC,EACNC,WAAW,EAAE,EACXC,OAAO,GAAGV,wBAAwB,EAClCW,EAAE,EACFC,IAAI,EACJC,OAAO,EACPC,MAAM,EACNC,UAAU,EACVC,GAAG,EACHC,IAAI,EACJC,aAAa,EACbC,WAAW,EACXC,cAAc,EACdC,OAAO,EACPC,SAAS,EACV,EACDC,KAAK,EACN,MAAM;QACLC,MAAM,EAAE,KAAK;QACbC,QAAQ,EAAEC,SAAS,CAAC,iBAAiBf,EAAE,EAAE,CAAC;QAC1CgB,WAAW,EAAEC,OAAA,CACX;UACEC,WAAW,EAAEjB,IAAI;UACjBC,OAAO;UACPC,MAAM;UACNE,GAAG;UACHc,KAAK,EAAEb,IAAI;UACXc,WAAW,EAAEhB,UAAU;UACvBiB,eAAe,EAAEd,aAAa;UAC9Be,eAAe,EAAEb,cAAc;UAC/Bc,aAAa,EAAEf,WAAW;UAC1BE,OAAO;UACPc,UAAU,EAAEC,IAAI,CAACC,SAAS,CAAC,EAAEf,SAAS,EAAEZ,OAAO,EAAE,GAAGa,KAAK,EAAE;SAC5D,EACD,CAAAe,KAAK,KAAIA,KAAK,KAAK5C,SAAS;OAE/B;KACF,CAAC;IACF6C,yBAAyB,EAAElC,OAAO,CAACE,QAAQ,CAAiB;MAC1DC,KAAK,EAAEA,CAAAgC,aAAa,MAAK;QACvBhB,MAAM,EAAE,MAAM;QACdC,QAAQ,EAAEC,SAAS,CAAC,iBAAiBc,aAAa,WAAW,CAAC;QAC9DC,iBAAiB,EAAEA,CAAA,KAAMD;OAC1B;KACF,CAAC;IACFE,kBAAkB,EAAErC,OAAO,CAACE,QAAQ,CAAe;MACjDC,KAAK,EAAEA,CAAAgC,aAAa,MAAK;QACvBhB,MAAM,EAAE,QAAQ;QAChBC,QAAQ,EAAEC,SAAS,CAAC,iBAAiBc,aAAa,EAAE,CAAC;QACrDC,iBAAiB,EAAEA,CAAA,KAAMD;OAC1B;KACF;GACF;CACF,CAAC;AAEF,OAAO,MAAM,EACXG,6BAA6B,EAC7BC,oCAAoC,EACpCC,6BAA6B,EAC9B,GAAG3C,YAAY,CAAC,mBAAA4C,cAAA,UAAArD,oBAAA,mBAAAA,oBAAA,CAAAI,OAAA,GAAAH,SAAA,MAAAoD,cAAA,WAAAA,cAAA,CAAAC,QAAA,CA9DX7C,YAAY,oFAAA4C,cAAA,CAAAC,QAAA,CA2DhBJ,6BAA6B,qGAAAG,cAAA,CAAAC,QAAA,CAC7BH,oCAAoC,4GAAAE,cAAA,CAAAC,QAAA,CACpCF,6BAA6B,6HAAAG,WAAA,UAAAvD,oBAAA,mBAAAA,oBAAA,CAAAuD,WAAA,GAAAtD,SAAA,CAAAsD,WAAA,IAAAA,WAAA,CAAArD,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}