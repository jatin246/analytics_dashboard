{"ast":null,"code":"(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric'\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  })\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 }\n};\n\nexport default class FixedOrMetricControl extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n    (props.value ? props.value.type : props.default.type) ||\n    controlTypes.fixed;\n    const value =\n    (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n      this.state.type === controlTypes.fixed ?\n      this.state.fixedValue :\n      this.state.metricValue\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource ?\n    this.props.datasource.columns :\n    null;\n    const metrics = this.props.datasource ?\n    this.props.datasource.metrics :\n    null;\n    return (\n      _jsxs(\"div\", { children: [\n        _jsx(ControlHeader, { ...this.props }),\n        _jsx(Collapse, {\n          ghost: true,\n          css: (theme) => /*#__PURE__*/css(\"&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px \",\n\n\n\n\n          theme.gridUnit * 2, \"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:\",\n\n\n\n\n\n\n\n\n\n\n          theme.gridUnit * 2, \"px;}}\" + (process.env.NODE_ENV === \"production\" ? \"\" : \";label:FixedOrMetricControl;\"), process.env.NODE_ENV === \"production\" ? \"\" : \"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9hcHAvc3VwZXJzZXQtZnJvbnRlbmQvc3JjL2V4cGxvcmUvY29tcG9uZW50cy9jb250cm9scy9GaXhlZE9yTWV0cmljQ29udHJvbC9pbmRleC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUcyQiIsImZpbGUiOiIvYXBwL3N1cGVyc2V0LWZyb250ZW5kL3NyYy9leHBsb3JlL2NvbXBvbmVudHMvY29udHJvbHMvRml4ZWRPck1ldHJpY0NvbnRyb2wvaW5kZXguanN4Iiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IGNzcyB9IGZyb20gJ0BlbW90aW9uL3JlYWN0JztcbmltcG9ydCB7IHQgfSBmcm9tICdAc3VwZXJzZXQtdWkvY29yZSc7XG5pbXBvcnQgTGFiZWwgZnJvbSAnc3JjL2NvbXBvbmVudHMvTGFiZWwnO1xuaW1wb3J0IENvbGxhcHNlIGZyb20gJ3NyYy9jb21wb25lbnRzL0NvbGxhcHNlJztcbmltcG9ydCBUZXh0Q29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL1RleHRDb250cm9sJztcbmltcG9ydCBNZXRyaWNzQ29udHJvbCBmcm9tICdzcmMvZXhwbG9yZS9jb21wb25lbnRzL2NvbnRyb2xzL01ldHJpY0NvbnRyb2wvTWV0cmljc0NvbnRyb2wnO1xuaW1wb3J0IENvbnRyb2xIZWFkZXIgZnJvbSAnc3JjL2V4cGxvcmUvY29tcG9uZW50cy9Db250cm9sSGVhZGVyJztcbmltcG9ydCBQb3BvdmVyU2VjdGlvbiBmcm9tICdzcmMvY29tcG9uZW50cy9Qb3BvdmVyU2VjdGlvbic7XG5cbmNvbnN0IGNvbnRyb2xUeXBlcyA9IHtcbiAgZml4ZWQ6ICdmaXgnLFxuICBtZXRyaWM6ICdtZXRyaWMnLFxufTtcblxuY29uc3QgcHJvcFR5cGVzID0ge1xuICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gIHZhbHVlOiBQcm9wVHlwZXMub2JqZWN0LFxuICBpc0Zsb2F0OiBQcm9wVHlwZXMuYm9vbCxcbiAgZGF0YXNvdXJjZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICBkZWZhdWx0OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgIHR5cGU6IFByb3BUeXBlcy5vbmVPZihbJ2ZpeCcsICdtZXRyaWMnXSksXG4gICAgdmFsdWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKSxcbiAgfSksXG59O1xuXG5jb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gIG9uQ2hhbmdlOiAoKSA9PiB7fSxcbiAgZGVmYXVsdDogeyB0eXBlOiBjb250cm9sVHlwZXMuZml4ZWQsIHZhbHVlOiA1IH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaXhlZE9yTWV0cmljQ29udHJvbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRUeXBlID0gdGhpcy5zZXRUeXBlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRGaXhlZFZhbHVlID0gdGhpcy5zZXRGaXhlZFZhbHVlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zZXRNZXRyaWMgPSB0aGlzLnNldE1ldHJpYy5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IHR5cGUgPVxuICAgICAgKHByb3BzLnZhbHVlID8gcHJvcHMudmFsdWUudHlwZSA6IHByb3BzLmRlZmF1bHQudHlwZSkgfHxcbiAgICAgIGNvbnRyb2xUeXBlcy5maXhlZDtcbiAgICBjb25zdCB2YWx1ZSA9XG4gICAgICAocHJvcHMudmFsdWUgPyBwcm9wcy52YWx1ZS52YWx1ZSA6IHByb3BzLmRlZmF1bHQudmFsdWUpIHx8ICcxMDAnO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB0eXBlLFxuICAgICAgZml4ZWRWYWx1ZTogdHlwZSA9PT0gY29udHJvbFR5cGVzLmZpeGVkID8gdmFsdWUgOiAnJyxcbiAgICAgIG1ldHJpY1ZhbHVlOiB0eXBlID09PSBjb250cm9sVHlwZXMubWV0cmljID8gdmFsdWUgOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBvbkNoYW5nZSgpIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIHR5cGU6IHRoaXMuc3RhdGUudHlwZSxcbiAgICAgIHZhbHVlOlxuICAgICAgICB0aGlzLnN0YXRlLnR5cGUgPT09IGNvbnRyb2xUeXBlcy5maXhlZFxuICAgICAgICAgID8gdGhpcy5zdGF0ZS5maXhlZFZhbHVlXG4gICAgICAgICAgOiB0aGlzLnN0YXRlLm1ldHJpY1ZhbHVlLFxuICAgIH0pO1xuICB9XG5cbiAgc2V0VHlwZSh0eXBlKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHR5cGUgfSwgdGhpcy5vbkNoYW5nZSk7XG4gIH1cblxuICBzZXRGaXhlZFZhbHVlKGZpeGVkVmFsdWUpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZml4ZWRWYWx1ZSB9LCB0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHNldE1ldHJpYyhtZXRyaWNWYWx1ZSkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBtZXRyaWNWYWx1ZSB9LCB0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucHJvcHMudmFsdWUgfHwgdGhpcy5wcm9wcy5kZWZhdWx0O1xuICAgIGNvbnN0IHR5cGUgPSB2YWx1ZS50eXBlIHx8IGNvbnRyb2xUeXBlcy5maXhlZDtcbiAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5wcm9wcy5kYXRhc291cmNlXG4gICAgICA/IHRoaXMucHJvcHMuZGF0YXNvdXJjZS5jb2x1bW5zXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgbWV0cmljcyA9IHRoaXMucHJvcHMuZGF0YXNvdXJjZVxuICAgICAgPyB0aGlzLnByb3BzLmRhdGFzb3VyY2UubWV0cmljc1xuICAgICAgOiBudWxsO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8Q29udHJvbEhlYWRlciB7Li4udGhpcy5wcm9wc30gLz5cbiAgICAgICAgPENvbGxhcHNlXG4gICAgICAgICAgZ2hvc3RcbiAgICAgICAgICBjc3M9e3RoZW1lID0+IGNzc2BcbiAgICAgICAgICAgICYuYW50LWNvbGxhcHNlXG4gICAgICAgICAgICAgID4gLmFudC1jb2xsYXBzZS1pdGVtLmFudC1jb2xsYXBzZS1uby1hcnJvd1xuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtaGVhZGVyIHtcbiAgICAgICAgICAgICAgYm9yZGVyOiAwcHg7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDBweCAwcHggJHt0aGVtZS5ncmlkVW5pdCAqIDJ9cHggMHB4O1xuICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAmLmFudC1jb2xsYXBzZS1naG9zdFxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtaXRlbVxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtY29udGVudFxuICAgICAgICAgICAgICA+IC5hbnQtY29sbGFwc2UtY29udGVudC1ib3gge1xuICAgICAgICAgICAgICBwYWRkaW5nOiAwcHg7XG5cbiAgICAgICAgICAgICAgJiAud2VsbCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMHB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICR7dGhlbWUuZ3JpZFVuaXQgKiAyfXB4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH1cbiAgICAgICAgPlxuICAgICAgICAgIDxDb2xsYXBzZS5QYW5lbFxuICAgICAgICAgICAgc2hvd0Fycm93PXtmYWxzZX1cbiAgICAgICAgICAgIGhlYWRlcj17XG4gICAgICAgICAgICAgIDxMYWJlbD5cbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50eXBlID09PSBjb250cm9sVHlwZXMuZml4ZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgPHNwYW4+e3RoaXMuc3RhdGUuZml4ZWRWYWx1ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50eXBlID09PSBjb250cm9sVHlwZXMubWV0cmljICYmIChcbiAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57dCgnbWV0cmljJyl9OiA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubWV0cmljVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdGF0ZS5tZXRyaWNWYWx1ZS5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsfVxuICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2VsbFwiPlxuICAgICAgICAgICAgICA8UG9wb3ZlclNlY3Rpb25cbiAgICAgICAgICAgICAgICB0aXRsZT17dCgnRml4ZWQnKX1cbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXt0eXBlID09PSBjb250cm9sVHlwZXMuZml4ZWR9XG4gICAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZShjb250cm9sVHlwZXMuZml4ZWQpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8VGV4dENvbnRyb2xcbiAgICAgICAgICAgICAgICAgIGlzRmxvYXRcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldEZpeGVkVmFsdWV9XG4gICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZShjb250cm9sVHlwZXMuZml4ZWQpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmZpeGVkVmFsdWV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9Qb3BvdmVyU2VjdGlvbj5cbiAgICAgICAgICAgICAgPFBvcG92ZXJTZWN0aW9uXG4gICAgICAgICAgICAgICAgdGl0bGU9e3QoJ0Jhc2VkIG9uIGEgbWV0cmljJyl9XG4gICAgICAgICAgICAgICAgaXNTZWxlY3RlZD17dHlwZSA9PT0gY29udHJvbFR5cGVzLm1ldHJpY31cbiAgICAgICAgICAgICAgICBvblNlbGVjdD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKGNvbnRyb2xUeXBlcy5tZXRyaWMpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TWV0cmljc0NvbnRyb2xcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJtZXRyaWNcIlxuICAgICAgICAgICAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgICAgICAgICAgIHNhdmVkTWV0cmljcz17bWV0cmljc31cbiAgICAgICAgICAgICAgICAgIG11bHRpPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgIG9uRm9jdXM9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUeXBlKGNvbnRyb2xUeXBlcy5tZXRyaWMpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnNldE1ldHJpY31cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1ldHJpY1ZhbHVlfVxuICAgICAgICAgICAgICAgICAgZGF0YXNvdXJjZT17dGhpcy5wcm9wcy5kYXRhc291cmNlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvUG9wb3ZlclNlY3Rpb24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L0NvbGxhcHNlLlBhbmVsPlxuICAgICAgICA8L0NvbGxhcHNlPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuXG5GaXhlZE9yTWV0cmljQ29udHJvbC5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5GaXhlZE9yTWV0cmljQ29udHJvbC5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG4iXX0= */\"), children:\n\n\n\n\n          _jsx(Collapse.Panel, {\n            showArrow: false,\n            header:\n            _jsxs(Label, { children: [\n              this.state.type === controlTypes.fixed &&\n              _jsx(\"span\", { children: this.state.fixedValue }),\n\n              this.state.type === controlTypes.metric &&\n              _jsxs(\"span\", { children: [\n                _jsxs(\"span\", { children: [t('metric'), \": \"] }),\n                _jsx(\"strong\", { children:\n                  this.state.metricValue ?\n                  this.state.metricValue.label :\n                  null }\n                )] }\n              )] }\n\n            ), children:\n\n\n            _jsxs(\"div\", { className: \"well\", children: [\n              _jsx(PopoverSection, {\n                title: t('Fixed'),\n                isSelected: type === controlTypes.fixed,\n                onSelect: () => {\n                  this.setType(controlTypes.fixed);\n                }, children:\n\n                _jsx(TextControl, {\n                  isFloat: true,\n                  onChange: this.setFixedValue,\n                  onFocus: () => {\n                    this.setType(controlTypes.fixed);\n                  },\n                  value: this.state.fixedValue }\n                ) }\n              ),\n              _jsx(PopoverSection, {\n                title: t('Based on a metric'),\n                isSelected: type === controlTypes.metric,\n                onSelect: () => {\n                  this.setType(controlTypes.metric);\n                }, children:\n\n                _jsx(MetricsControl, {\n                  name: \"metric\",\n                  columns: columns,\n                  savedMetrics: metrics,\n                  multi: false,\n                  onFocus: () => {\n                    this.setType(controlTypes.metric);\n                  },\n                  onChange: this.setMetric,\n                  value: this.state.metricValue,\n                  datasource: this.props.datasource }\n                ) }\n              )] }\n            ) }\n          ) }\n        )] }\n      ));\n\n  } // @ts-ignore\n  __reactstandin__regenerateByEval(key, code) {// @ts-ignore\n    this[key] = eval(code);}}\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(controlTypes, \"controlTypes\", \"/app/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(propTypes, \"propTypes\", \"/app/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(defaultProps, \"defaultProps\", \"/app/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");reactHotLoader.register(FixedOrMetricControl, \"FixedOrMetricControl\", \"/app/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["Component","PropTypes","css","t","Label","Collapse","TextControl","MetricsControl","ControlHeader","PopoverSection","jsx","_jsx","jsxs","_jsxs","controlTypes","fixed","metric","propTypes","onChange","func","value","object","isFloat","bool","datasource","isRequired","default","shape","type","oneOf","oneOfType","string","number","defaultProps","FixedOrMetricControl","constructor","props","bind","setType","setFixedValue","setMetric","state","fixedValue","metricValue","setState","render","columns","metrics","children","ghost","theme","gridUnit","process","env","NODE_ENV","Panel","showArrow","header","label","className","title","isSelected","onSelect","onFocus","name","savedMetrics","multi","__reactstandin__regenerateByEval","key","code","eval","reactHotLoader","reactHotLoaderGlobal","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/explore/components/controls/FixedOrMetricControl/index.jsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { css } from '@emotion/react';\nimport { t } from '@superset-ui/core';\nimport Label from 'src/components/Label';\nimport Collapse from 'src/components/Collapse';\nimport TextControl from 'src/explore/components/controls/TextControl';\nimport MetricsControl from 'src/explore/components/controls/MetricControl/MetricsControl';\nimport ControlHeader from 'src/explore/components/ControlHeader';\nimport PopoverSection from 'src/components/PopoverSection';\n\nconst controlTypes = {\n  fixed: 'fix',\n  metric: 'metric',\n};\n\nconst propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.object,\n  isFloat: PropTypes.bool,\n  datasource: PropTypes.object.isRequired,\n  default: PropTypes.shape({\n    type: PropTypes.oneOf(['fix', 'metric']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }),\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  default: { type: controlTypes.fixed, value: 5 },\n};\n\nexport default class FixedOrMetricControl extends Component {\n  constructor(props) {\n    super(props);\n    this.onChange = this.onChange.bind(this);\n    this.setType = this.setType.bind(this);\n    this.setFixedValue = this.setFixedValue.bind(this);\n    this.setMetric = this.setMetric.bind(this);\n    const type =\n      (props.value ? props.value.type : props.default.type) ||\n      controlTypes.fixed;\n    const value =\n      (props.value ? props.value.value : props.default.value) || '100';\n    this.state = {\n      type,\n      fixedValue: type === controlTypes.fixed ? value : '',\n      metricValue: type === controlTypes.metric ? value : null,\n    };\n  }\n\n  onChange() {\n    this.props.onChange({\n      type: this.state.type,\n      value:\n        this.state.type === controlTypes.fixed\n          ? this.state.fixedValue\n          : this.state.metricValue,\n    });\n  }\n\n  setType(type) {\n    this.setState({ type }, this.onChange);\n  }\n\n  setFixedValue(fixedValue) {\n    this.setState({ fixedValue }, this.onChange);\n  }\n\n  setMetric(metricValue) {\n    this.setState({ metricValue }, this.onChange);\n  }\n\n  render() {\n    const value = this.props.value || this.props.default;\n    const type = value.type || controlTypes.fixed;\n    const columns = this.props.datasource\n      ? this.props.datasource.columns\n      : null;\n    const metrics = this.props.datasource\n      ? this.props.datasource.metrics\n      : null;\n    return (\n      <div>\n        <ControlHeader {...this.props} />\n        <Collapse\n          ghost\n          css={theme => css`\n            &.ant-collapse\n              > .ant-collapse-item.ant-collapse-no-arrow\n              > .ant-collapse-header {\n              border: 0px;\n              padding: 0px 0px ${theme.gridUnit * 2}px 0px;\n              display: inline-block;\n            }\n            &.ant-collapse-ghost\n              > .ant-collapse-item\n              > .ant-collapse-content\n              > .ant-collapse-content-box {\n              padding: 0px;\n\n              & .well {\n                margin-bottom: 0px;\n                padding: ${theme.gridUnit * 2}px;\n              }\n            }\n          `}\n        >\n          <Collapse.Panel\n            showArrow={false}\n            header={\n              <Label>\n                {this.state.type === controlTypes.fixed && (\n                  <span>{this.state.fixedValue}</span>\n                )}\n                {this.state.type === controlTypes.metric && (\n                  <span>\n                    <span>{t('metric')}: </span>\n                    <strong>\n                      {this.state.metricValue\n                        ? this.state.metricValue.label\n                        : null}\n                    </strong>\n                  </span>\n                )}\n              </Label>\n            }\n          >\n            <div className=\"well\">\n              <PopoverSection\n                title={t('Fixed')}\n                isSelected={type === controlTypes.fixed}\n                onSelect={() => {\n                  this.setType(controlTypes.fixed);\n                }}\n              >\n                <TextControl\n                  isFloat\n                  onChange={this.setFixedValue}\n                  onFocus={() => {\n                    this.setType(controlTypes.fixed);\n                  }}\n                  value={this.state.fixedValue}\n                />\n              </PopoverSection>\n              <PopoverSection\n                title={t('Based on a metric')}\n                isSelected={type === controlTypes.metric}\n                onSelect={() => {\n                  this.setType(controlTypes.metric);\n                }}\n              >\n                <MetricsControl\n                  name=\"metric\"\n                  columns={columns}\n                  savedMetrics={metrics}\n                  multi={false}\n                  onFocus={() => {\n                    this.setType(controlTypes.metric);\n                  }}\n                  onChange={this.setMetric}\n                  value={this.state.metricValue}\n                  datasource={this.props.datasource}\n                />\n              </PopoverSection>\n            </div>\n          </Collapse.Panel>\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nFixedOrMetricControl.propTypes = propTypes;\nFixedOrMetricControl.defaultProps = defaultProps;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}