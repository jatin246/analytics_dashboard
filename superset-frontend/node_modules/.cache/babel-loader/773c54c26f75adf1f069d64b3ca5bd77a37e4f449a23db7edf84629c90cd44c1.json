{"ast":null,"code":"import _isEmpty from \"lodash/isEmpty\";(function () {var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;enterModule && enterModule(module);})();var __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {return a;}; /**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { Behavior, css, extractQueryFields, getChartMetadataRegistry, removeHTMLTags, styled, t } from '@superset-ui/core';\nimport { useSelector } from 'react-redux';\nimport { Menu } from 'src/components/Menu';\nimport DrillDetailModal from './DrillDetailModal';\nimport { getSubmenuYOffset } from '../utils';\nimport { MenuItemTooltip } from '../DisabledMenuItemTooltip';\nimport { MenuItemWithTruncation } from '../MenuItemWithTruncation';import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";import { createElement as _createElement } from \"@emotion/react\";\nconst DRILL_TO_DETAIL = t('Drill to detail');\nconst DRILL_TO_DETAIL_BY = t('Drill to detail by');\nconst DISABLED_REASONS = {\n  DATABASE: t('Drill to detail is disabled for this database. Change the database settings to enable it.'),\n  NO_AGGREGATIONS: t('Drill to detail is disabled because this chart does not group data by dimension value.'),\n  NO_FILTERS: t('Right-click on a dimension value to drill to detail by that value.'),\n  NOT_SUPPORTED: t('Drill to detail by value is not yet supported for this chart type.')\n};\nconst DisabledMenuItem = ({ children, ...props }) => _jsx(Menu.Item, { disabled: true, ...props, children:\n  _jsx(\"div\", { css: css`\n        white-space: normal;\n        max-width: 160px;\n      `, children:\n    children }\n  ) }\n);\nconst Filter = ({ children, stripHTML = false }) => {\n  const content = stripHTML && typeof children === 'string' ?\n  removeHTMLTags(children) :\n  children;\n  return _jsx(\"span\", { children: content });\n};\nconst StyledFilter = styled(Filter)`\n  ${({ theme }) => `\n     font-weight: ${theme.typography.weights.bold};\n     color: ${theme.colors.primary.base};\n   `}\n`;\nconst DrillDetailMenuItems = ({ chartId, formData, filters = [], isContextMenu = false, contextMenuY = 0, onSelection = () => null, onClick = () => null, submenuIndex = 0, showModal, setShowModal, drillToDetailMenuRef, ...props }) => {\n  const drillToDetailDisabled = useSelector(({ datasources }) => {var _datasources$formData, _datasources$formData2;return (_datasources$formData = datasources[formData.datasource]) == null ? void 0 : (_datasources$formData2 = _datasources$formData.database) == null ? void 0 : _datasources$formData2.disable_drill_to_detail;});\n  const [modalFilters, setFilters] = useState([]);\n  const openModal = useCallback((filters, event) => {\n    onClick(event);\n    onSelection();\n    setFilters(filters);\n    setShowModal(true);\n  }, [onClick, onSelection]);\n  const closeModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n  // Check for Behavior.DRILL_TO_DETAIL to tell if plugin handles the `contextmenu`\n  // event for dimensions.  If it doesn't, tell the user that drill to detail by\n  // dimension is not supported.  If it does, and the `contextmenu` handler didn't\n  // pass any filters, tell the user that they didn't select a dimension.\n  const handlesDimensionContextMenu = useMemo(() => {var _getChartMetadataRegi;return (_getChartMetadataRegi = getChartMetadataRegistry().\n    get(formData.viz_type)) == null ? void 0 : _getChartMetadataRegi.\n    behaviors.find((behavior) => behavior === Behavior.DrillToDetail);}, [formData.viz_type]);\n  // Check metrics to see if chart's current configuration lacks\n  // aggregations, in which case Drill to Detail should be disabled.\n  const noAggregations = useMemo(() => {\n    const { metrics } = extractQueryFields(formData);\n    return _isEmpty(metrics);\n  }, [formData]);\n  // Ensure submenu doesn't appear offscreen\n  const submenuYOffset = useMemo(() => getSubmenuYOffset(contextMenuY, filters.length > 1 ? filters.length + 1 : filters.length, submenuIndex), [contextMenuY, filters.length, submenuIndex]);\n  let drillDisabled;\n  let drillByDisabled;\n  if (drillToDetailDisabled) {\n    drillDisabled = DISABLED_REASONS.DATABASE;\n    drillByDisabled = DISABLED_REASONS.DATABASE;\n  } else\n  if (handlesDimensionContextMenu) {\n    if (noAggregations) {\n      drillDisabled = DISABLED_REASONS.NO_AGGREGATIONS;\n      drillByDisabled = DISABLED_REASONS.NO_AGGREGATIONS;\n    } else\n    if (!(filters != null && filters.length)) {\n      drillByDisabled = DISABLED_REASONS.NO_FILTERS;\n    }\n  } else\n  {\n    drillByDisabled = DISABLED_REASONS.NOT_SUPPORTED;\n  }\n  const drillToDetailMenuItem = drillDisabled ? _createElement(DisabledMenuItem, { ...props, key: \"drill-to-detail-disabled\" },\n  DRILL_TO_DETAIL,\n  _jsx(MenuItemTooltip, { title: drillDisabled })\n  ) : _createElement(Menu.Item, { ...props, key: \"drill-to-detail\", onClick: openModal.bind(null, []), ref: drillToDetailMenuRef },\n  DRILL_TO_DETAIL\n  );\n  const drillToDetailByMenuItem = drillByDisabled ? _createElement(DisabledMenuItem, { ...props, key: \"drill-to-detail-by-disabled\" },\n  DRILL_TO_DETAIL_BY,\n  _jsx(MenuItemTooltip, { title: drillByDisabled })\n  ) : _jsx(Menu.SubMenu, { ...props, popupOffset: [0, submenuYOffset], popupClassName: \"chart-context-submenu\", title: DRILL_TO_DETAIL_BY, children:\n    _jsxs(\"div\", { \"data-test\": \"drill-to-detail-by-submenu\", children: [\n      filters.map((filter, i) => _createElement(MenuItemWithTruncation, { ...props, tooltipText: `${DRILL_TO_DETAIL_BY} ${filter.formattedVal}`, key: `drill-detail-filter-${i}`, onClick: openModal.bind(null, [filter]) },\n      `${DRILL_TO_DETAIL_BY} `,\n      _jsx(StyledFilter, { stripHTML: true, children: filter.formattedVal })\n      )),\n      filters.length > 1 && _createElement(Menu.Item, { ...props, key: \"drill-detail-filter-all\", onClick: openModal.bind(null, filters) },\n      _jsxs(\"div\", { children: [\n        `${DRILL_TO_DETAIL_BY} `,\n        _jsx(StyledFilter, { stripHTML: false, children: t('all') })] }\n      )\n      )] }\n    ) }\n  );\n  return _jsxs(_Fragment, { children: [\n    drillToDetailMenuItem,\n    isContextMenu && drillToDetailByMenuItem,\n    _jsx(DrillDetailModal, { chartId: chartId, formData: formData, initialFilters: modalFilters, showModal: showModal, onHideModal: closeModal })] }\n  );\n};__signature__(DrillDetailMenuItems, \"useSelector{drillToDetailDisabled}\\nuseState{[modalFilters, setFilters]([])}\\nuseCallback{openModal}\\nuseCallback{closeModal}\\nuseMemo{handlesDimensionContextMenu}\\nuseMemo{noAggregations}\\nuseMemo{submenuYOffset}\", () => [useSelector]);const _default =\nDrillDetailMenuItems;export default _default;;(function () {var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;if (!reactHotLoader) {return;}reactHotLoader.register(DRILL_TO_DETAIL, \"DRILL_TO_DETAIL\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(DRILL_TO_DETAIL_BY, \"DRILL_TO_DETAIL_BY\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(DISABLED_REASONS, \"DISABLED_REASONS\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(DisabledMenuItem, \"DisabledMenuItem\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(Filter, \"Filter\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(StyledFilter, \"StyledFilter\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(DrillDetailMenuItems, \"DrillDetailMenuItems\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");reactHotLoader.register(_default, \"default\", \"/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx\");})();;(function () {var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;leaveModule && leaveModule(module);})();","map":{"version":3,"names":["useCallback","useMemo","useState","Behavior","css","extractQueryFields","getChartMetadataRegistry","removeHTMLTags","styled","t","useSelector","Menu","DrillDetailModal","getSubmenuYOffset","MenuItemTooltip","MenuItemWithTruncation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","createElement","_createElement","DRILL_TO_DETAIL","DRILL_TO_DETAIL_BY","DISABLED_REASONS","DATABASE","NO_AGGREGATIONS","NO_FILTERS","NOT_SUPPORTED","DisabledMenuItem","children","props","Item","disabled","Filter","stripHTML","content","StyledFilter","theme","typography","weights","bold","colors","primary","base","DrillDetailMenuItems","chartId","formData","filters","isContextMenu","contextMenuY","onSelection","onClick","submenuIndex","showModal","setShowModal","drillToDetailMenuRef","drillToDetailDisabled","datasources","_datasources$formData","_datasources$formData2","datasource","database","disable_drill_to_detail","modalFilters","setFilters","openModal","event","closeModal","handlesDimensionContextMenu","_getChartMetadataRegi","get","viz_type","behaviors","find","behavior","DrillToDetail","noAggregations","metrics","_isEmpty","submenuYOffset","length","drillDisabled","drillByDisabled","drillToDetailMenuItem","key","title","bind","ref","drillToDetailByMenuItem","SubMenu","popupOffset","popupClassName","map","filter","i","tooltipText","formattedVal","initialFilters","onHideModal","__signature__","_default","reactHotLoader","reactHotLoaderGlobal","default","undefined","register","leaveModule","module"],"sources":["/app/superset-frontend/src/components/Chart/DrillDetail/DrillDetailMenuItems.tsx"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { ReactNode, RefObject, useCallback, useMemo, useState } from 'react';\nimport { isEmpty } from 'lodash';\nimport {\n  Behavior,\n  BinaryQueryObjectFilterClause,\n  css,\n  extractQueryFields,\n  getChartMetadataRegistry,\n  QueryFormData,\n  removeHTMLTags,\n  styled,\n  t,\n} from '@superset-ui/core';\nimport { useSelector } from 'react-redux';\nimport { Menu } from 'src/components/Menu';\nimport { RootState } from 'src/dashboard/types';\nimport DrillDetailModal from './DrillDetailModal';\nimport { getSubmenuYOffset } from '../utils';\nimport { MenuItemTooltip } from '../DisabledMenuItemTooltip';\nimport { MenuItemWithTruncation } from '../MenuItemWithTruncation';\n\nconst DRILL_TO_DETAIL = t('Drill to detail');\nconst DRILL_TO_DETAIL_BY = t('Drill to detail by');\nconst DISABLED_REASONS = {\n  DATABASE: t(\n    'Drill to detail is disabled for this database. Change the database settings to enable it.',\n  ),\n  NO_AGGREGATIONS: t(\n    'Drill to detail is disabled because this chart does not group data by dimension value.',\n  ),\n  NO_FILTERS: t(\n    'Right-click on a dimension value to drill to detail by that value.',\n  ),\n  NOT_SUPPORTED: t(\n    'Drill to detail by value is not yet supported for this chart type.',\n  ),\n};\n\nconst DisabledMenuItem = ({ children, ...props }: { children: ReactNode }) => (\n  <Menu.Item disabled {...props}>\n    <div\n      css={css`\n        white-space: normal;\n        max-width: 160px;\n      `}\n    >\n      {children}\n    </div>\n  </Menu.Item>\n);\n\nconst Filter = ({\n  children,\n  stripHTML = false,\n}: {\n  children: ReactNode;\n  stripHTML: boolean;\n}) => {\n  const content =\n    stripHTML && typeof children === 'string'\n      ? removeHTMLTags(children)\n      : children;\n  return <span>{content}</span>;\n};\n\nconst StyledFilter = styled(Filter)`\n  ${({ theme }) => `\n     font-weight: ${theme.typography.weights.bold};\n     color: ${theme.colors.primary.base};\n   `}\n`;\n\nexport type DrillDetailMenuItemsProps = {\n  chartId: number;\n  formData: QueryFormData;\n  filters?: BinaryQueryObjectFilterClause[];\n  isContextMenu?: boolean;\n  contextMenuY?: number;\n  onSelection?: () => void;\n  onClick?: (event: MouseEvent) => void;\n  submenuIndex?: number;\n  showModal: boolean;\n  setShowModal: (show: boolean) => void;\n  drillToDetailMenuRef?: RefObject<any>;\n};\n\nconst DrillDetailMenuItems = ({\n  chartId,\n  formData,\n  filters = [],\n  isContextMenu = false,\n  contextMenuY = 0,\n  onSelection = () => null,\n  onClick = () => null,\n  submenuIndex = 0,\n  showModal,\n  setShowModal,\n  drillToDetailMenuRef,\n  ...props\n}: DrillDetailMenuItemsProps) => {\n  const drillToDetailDisabled = useSelector<RootState, boolean | undefined>(\n    ({ datasources }) =>\n      datasources[formData.datasource]?.database?.disable_drill_to_detail,\n  );\n\n  const [modalFilters, setFilters] = useState<BinaryQueryObjectFilterClause[]>(\n    [],\n  );\n\n  const openModal = useCallback(\n    (filters, event) => {\n      onClick(event);\n      onSelection();\n      setFilters(filters);\n      setShowModal(true);\n    },\n    [onClick, onSelection],\n  );\n\n  const closeModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n\n  // Check for Behavior.DRILL_TO_DETAIL to tell if plugin handles the `contextmenu`\n  // event for dimensions.  If it doesn't, tell the user that drill to detail by\n  // dimension is not supported.  If it does, and the `contextmenu` handler didn't\n  // pass any filters, tell the user that they didn't select a dimension.\n  const handlesDimensionContextMenu = useMemo(\n    () =>\n      getChartMetadataRegistry()\n        .get(formData.viz_type)\n        ?.behaviors.find(behavior => behavior === Behavior.DrillToDetail),\n    [formData.viz_type],\n  );\n\n  // Check metrics to see if chart's current configuration lacks\n  // aggregations, in which case Drill to Detail should be disabled.\n  const noAggregations = useMemo(() => {\n    const { metrics } = extractQueryFields(formData);\n    return isEmpty(metrics);\n  }, [formData]);\n\n  // Ensure submenu doesn't appear offscreen\n  const submenuYOffset = useMemo(\n    () =>\n      getSubmenuYOffset(\n        contextMenuY,\n        filters.length > 1 ? filters.length + 1 : filters.length,\n        submenuIndex,\n      ),\n    [contextMenuY, filters.length, submenuIndex],\n  );\n\n  let drillDisabled;\n  let drillByDisabled;\n  if (drillToDetailDisabled) {\n    drillDisabled = DISABLED_REASONS.DATABASE;\n    drillByDisabled = DISABLED_REASONS.DATABASE;\n  } else if (handlesDimensionContextMenu) {\n    if (noAggregations) {\n      drillDisabled = DISABLED_REASONS.NO_AGGREGATIONS;\n      drillByDisabled = DISABLED_REASONS.NO_AGGREGATIONS;\n    } else if (!filters?.length) {\n      drillByDisabled = DISABLED_REASONS.NO_FILTERS;\n    }\n  } else {\n    drillByDisabled = DISABLED_REASONS.NOT_SUPPORTED;\n  }\n\n  const drillToDetailMenuItem = drillDisabled ? (\n    <DisabledMenuItem {...props} key=\"drill-to-detail-disabled\">\n      {DRILL_TO_DETAIL}\n      <MenuItemTooltip title={drillDisabled} />\n    </DisabledMenuItem>\n  ) : (\n    <Menu.Item\n      {...props}\n      key=\"drill-to-detail\"\n      onClick={openModal.bind(null, [])}\n      ref={drillToDetailMenuRef}\n    >\n      {DRILL_TO_DETAIL}\n    </Menu.Item>\n  );\n\n  const drillToDetailByMenuItem = drillByDisabled ? (\n    <DisabledMenuItem {...props} key=\"drill-to-detail-by-disabled\">\n      {DRILL_TO_DETAIL_BY}\n      <MenuItemTooltip title={drillByDisabled} />\n    </DisabledMenuItem>\n  ) : (\n    <Menu.SubMenu\n      {...props}\n      popupOffset={[0, submenuYOffset]}\n      popupClassName=\"chart-context-submenu\"\n      title={DRILL_TO_DETAIL_BY}\n    >\n      <div data-test=\"drill-to-detail-by-submenu\">\n        {filters.map((filter, i) => (\n          <MenuItemWithTruncation\n            {...props}\n            tooltipText={`${DRILL_TO_DETAIL_BY} ${filter.formattedVal}`}\n            key={`drill-detail-filter-${i}`}\n            onClick={openModal.bind(null, [filter])}\n          >\n            {`${DRILL_TO_DETAIL_BY} `}\n            <StyledFilter stripHTML>{filter.formattedVal}</StyledFilter>\n          </MenuItemWithTruncation>\n        ))}\n        {filters.length > 1 && (\n          <Menu.Item\n            {...props}\n            key=\"drill-detail-filter-all\"\n            onClick={openModal.bind(null, filters)}\n          >\n            <div>\n              {`${DRILL_TO_DETAIL_BY} `}\n              <StyledFilter stripHTML={false}>{t('all')}</StyledFilter>\n            </div>\n          </Menu.Item>\n        )}\n      </div>\n    </Menu.SubMenu>\n  );\n\n  return (\n    <>\n      {drillToDetailMenuItem}\n      {isContextMenu && drillToDetailByMenuItem}\n      <DrillDetailModal\n        chartId={chartId}\n        formData={formData}\n        initialFilters={modalFilters}\n        showModal={showModal}\n        onHideModal={closeModal}\n      />\n    </>\n  );\n};\n\nexport default DrillDetailMenuItems;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}